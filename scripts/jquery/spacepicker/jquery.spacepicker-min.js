(function(a){a.fn.spacePicker=function(g){var f=new JsTree();var d=$j(this);var c=function(i){var h=f.addNode(null,i.ID,i.name);h.hasAdminPerm=i.hasAdminPerm;if(!h.hasAdminPerm){f.disable(h)}b(h,i);d.get(0).appendChild(f.getRoot())};var e=function(h){document.body.style.cursor="wait";CommunityUtils.getCommunities(h.id,function(i){b(h,i)})};var b=function(j,m){var l;for(var h=0;h<m.children.length;h++){var k=m.children[h];l=f.addNode(j,k.ID,k.name);l.hasAdminPerm=k.hasAdminPerm;if(k.hasChildren){f.setHasChildren(l)}if(!k.hasAdminPerm){f.disable(l)}}f.openNode(j);document.body.style.cursor=""};f.setLoadFunction(function(h){e(h)});f.setSelectionCallback(function(h){g.apply($j(h))});CommunityUtils.getCommunities(1,function(h){c(h)})}}(jQuery));