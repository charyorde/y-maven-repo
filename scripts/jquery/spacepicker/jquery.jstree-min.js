var JsTree=$Class.extend({init:function(){this.checkable=false;this.selectable=false;this.multiselect=false;this.loadFunction=null;this.selectionCallback=null;this.selectionHasChanged=false;this.doubleClickCallback=null},getRoot:function(){return this.root},getCheckable:function(){return this.checkable},setCheckable:function(a){this.checkable=a},getSelectable:function(){return this.selectable},setSelectable:function(a){this.selectable=a},getLoadFunction:function(){return this.loadFunction},setLoadFunction:function(a){this.loadFunction=a},getSelectionCallback:function(){return this.selectionCallback},setSelectionCallback:function(a){this.selectionCallback=a},getDoubleClickCallback:function(){return this.doubleClickCallback},setDoubleClickCallback:function(a){this.doubleClickCallback=a},setHasChildren:function(b){if(b.parentNode!=this.root){var c=this;b.hasChildren=true;b.className="closed-node";b.firstChild.onclick=function(){c.toggleView(this)};if(b.firstChild.firstChild==null){var a=document.createElement("span");a.appendChild(document.createTextNode("+"));a.style.display="none";b.firstChild.appendChild(a)}}},addNode:function(b,d,a){if(b==null){if(this.root==null){this.root=document.createElement("ul");this.root.className="jstree"}b=this.root}var c=this.createNode(d,a);if(b.nodeName.toLowerCase()=="li"){this.setHasChildren(b);b.childList.appendChild(c)}else{b.appendChild(c);c.childList.style.display="block"}return c},createNode:function(h,a){var d=document.createElement("li");d.id=h;var g=document.createElement("div");g.className="image-div";d.appendChild(g);var f=this;var b,c;if(!this.selectable){c=document.createElement("a");c.onclick=function(){f.selectionNotify(this)};c.appendChild(document.createTextNode(a))}else{b=document.createElement("span");b.style.cursor="default";b.onmousedown=function(){f.select(this)};b.onclick=function(){f.selectionNotify(this)};b.ondblclick=function(){f.doubleClickNotify()};b.appendChild(document.createTextNode(a))}if(this.checkable){var e=document.createElement("input");e.setAttribute("type","checkbox");d.appendChild(e)}if(!this.selectable){d.appendChild(c)}else{d.appendChild(b)}d.hasChildren=false;d.childList=document.createElement("ul");d.childList.id=h+"_ul";d.childList.style.display="none";d.appendChild(d.childList);return d},select:function(a){if(!this.selectable||a.parentNode.disabled||(this.selected&&(a==this.selected))){return false}if(this.selected){this.selected.className=""}this.selected=a;this.selected.className="selected";this.selectionHasChanged=true},getSelected:function(){return this.selected?this.selected.parentNode:null},setSelected:function(b){var a=document.getElementById(b);if(a){this.select(a.childNodes[1]);this.makeVisible(a);this.selectionNotify()}},selectionNotify:function(a){if(this.selectionCallback){if(!this.selectable){this.selectionCallback(a.parentNode)}else{if(this.selectionHasChanged){this.selectionCallback(this.getSelected());this.selectionHasChanged=false}}}},doubleClickNotify:function(){if(this.doubleClickCallback){this.doubleClickCallback(this.getSelected())}},makeVisible:function(a){while(a.parentNode&&(a.parentNode!=this.root)&&a.parentNode.parentNode.parentNode&&(a.parentNode.parentNode.parentNode!=this.root)){a=a.parentNode.parentNode;this.openNode(a)}},enable:function(a){a.disabled=false;a.childNodes[1].className=""},disable:function(a){a.disabled=true;a.childNodes[1].className="disabled"},enableTree:function(b){b.disabled=false;b.childNodes[1].className="";for(var a=0;a<b.childList.childNodes.length;a++){this.disableTree(b.childList.childNodes[a])}},disableTree:function(b){b.disabled=true;b.childNodes[1].className="disabled";for(var a=0;a<b.childList.childNodes.length;a++){this.disableTree(b.childList.childNodes[a])}},toggleView:function(c){var a=c.parentNode;var b=c.parentNode.childList;if(a.hasChildren&&b.childNodes.length==0){if(this.loadFunction){this.loadFunction(a);return false}}if((b.style.display=="")||(b.style.display=="none")){a.className="open-node";b.style.display="block"}else{a.className="closed-node";b.style.display="none"}},openNode:function(a){if((a.tagName.toLowerCase()=="li")&&(a.parentNode!=this.root)){a.className="open-node";a.childList.style.display="block"}},closeNode:function(a){if((a.tagName.toLowerCase()=="li")&&(a.parentNode!=this.root)){a.className="closed-node";a.childList.style.display="none"}},buildTree:function(b){var a,c;a=this.addNode(null,0,"Root");this.addNode(a,1,"One");this.addNode(a,2,"Two");c=this.addNode(a,3,"Three");this.addNode(c,4,"Four");this.addNode(c,5,"Five");c=this.addNode(a,6,"Six");this.addNode(c,7,"Seven");this.addNode(c,8,"Eight");c=this.addNode(a,9,"Nine");this.addNode(c,10,"Ten");this.addNode(c,11,"Eleven");b.appendChild(a)}});