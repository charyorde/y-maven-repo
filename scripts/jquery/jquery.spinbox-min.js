(function(a){a.fn.SpinButton=function(b){return this.each(function(){a(this).data("spinCfg",{min:b&&!isNaN(parseFloat(b.min))?Number(b.min):null,max:b&&!isNaN(parseFloat(b.max))?Number(b.max):null,step:b&&b.step?Number(b.step):1,page:b&&b.page?Number(b.page):10,upClass:b&&b.upClass?b.upClass:"up",downClass:b&&b.downClass?b.downClass:"down",reset:b&&b.reset?b.reset:this.value,delay:b&&b.delay?Number(b.delay):500,interval:b&&b.interval?Number(b.interval):100,_btn_width:20,_btn_height:12,_direction:null,_delay:null,_repeat:null});var d=this;function c(f){var g=a(d).data("spinCfg");var e=(isNaN(d.value)?g.reset:Number(d.value))+Number(f);if(g.min!==null){e=Math.max(e,g.min)}if(g.max!==null){e=Math.min(e,g.max)}$j(d).val(e);if(f!=0){$j(d).trigger("change")}}a(this).addClass(b&&b.spinClass?b.spinClass:"spin-button").mousemove(function(k){var f=k.pageX||k.x;var l=k.pageY||k.y;var h=k.target||k.srcElement;var g=a(h).offset();var i=a(this).data("spinCfg");var j=(f>g.left+h.offsetWidth-i._btn_width)?((l<g.top+i._btn_height)?1:-1):0;if(j!==i._direction){switch(j){case 1:a(this).removeClass(i.downClass).addClass(i.upClass);break;case -1:a(this).removeClass(i.upClass).addClass(i.downClass);break;default:a(this).removeClass(i.upClass).removeClass(i.downClass)}i._direction=j}}).mouseout(function(){a(this).removeClass(a(this).data("spinCfg").upClass).removeClass(a(this).data("spinCfg").downClass);a(this).data("spinCfg")._direction=null}).mousedown(function(i){var g=a(this).data("spinCfg");if(g._direction!=0){var f=this;var h=function(){c(g._direction*g.step)};h();g._delay=window.setTimeout(function(){h();g._repeat=window.setInterval(h,g.interval)},g.delay)}}).mouseup(function(f){window.clearInterval(a(this).data("spinCfg")._repeat);window.clearTimeout(a(this).data("spinCfg")._delay)}).dblclick(function(f){if(a.browser.msie){c(a(this).data("spinCfg")._direction*a(this).data("spinCfg").step)}}).keydown(function(g){var f=a(this).data("spinCfg");switch(g.keyCode){case 38:c(f.step);break;case 40:c(-f.step);break;case 33:c(f.page);break;case 34:c(-f.page);break}}).change(function(f){c(0)})})}})(jQuery);