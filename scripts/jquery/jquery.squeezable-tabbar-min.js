(function(a){a.fn.squeezable_tabbar=function(j){if(j==="unbind"){return this.each(function(){var l=a(this);c(false,l,true);l.unbind("squeeze").unbind("forceSqueeze").removeClass("squeezable").removeClass("squeeze-on-window-resize").removeAttr("data-squeezableFullWidth").removeAttr("data-squeezableEvent")})}function k(l){return parseInt(l)||0}function e(m,n){var o=[];var l=0;var p={width:"","max-width":"","min-width":"",visibility:"hidden"};a(j.selector,n).each(function(){var r=a(this);var q;q=m?null:r.attr("data-squeezableFullWidth");if(!q){var t=$j($j("<div/>").append(r.clone()).remove().html());t.attr("id","temp-element-for-width-calculation").appendTo(n);var s=a("#temp-element-for-width-calculation");s.css(p).find("*").css(p);q=s.outerWidth(true);s.remove();r.attr("data-squeezableFullWidth",q)}else{q=Number(q)}o.push(q);l+=q});o.totalWidth=l;return o}function b(n,m){var p=n.concat().sort(function(v,u){return v-u});var q=a.map(p,function(v,u){return u>0?v-p[u-1]:v});var t=1;var s=p[p.length-1];m=0-m;while(m>0){var r=q.pop();var o=r*t;if(o>m){s-=m/t;break}m-=o;s-=r;t++}var l=0;return a.map(n,function(u){if(u<s){return 0}var v=Math.round(s+l);l=(s+l)-v;return v-u})}function f(n,p,s,q,o){var t=0;var r={widths:p,pixels:o,changes:{},adjustDefs:q};function m(){return this.property+":("+this.oldValue+"->"+this.newValue+")"}function l(A,x,y,B,u,w){if(j.debug!==true){return}var v=x.name||(s+"["+A+"]");var C=y.attr("id")||v+"_"+t++;var z=r.changes[C]||(r.changes[C]=[]);z.push({property:B,oldValue:u,newValue:w,name:v,toString:m})}a.each(q,function(y,v){var u;if(o==null){u=n;if(v.selector){u=u.find(v.selector)}u.each(function(){var z=a(this);var A={};a.each(v.css,function(B){A[B]="";l(y,v,z,B,z.css(B),A[B])});z.css(A)})}else{switch(v.technique||"uniform"){case"percentile":n.each(function(){var z=a(this);var A=z;if(v.selector){A=A.find(v.selector)}if(A.length==0){return}var D=o*(Number(z.attr("data-squeezableFullWidth"))/p.totalWidth);var C=0;var B={};a.each(v.css,function(F,G){var E=Math.round(D*G+C);C=(D*G+C)-E;B[F]=(k(A.css(F))+E)+"px";l(y,v,A,F,A.css(F),B[F])});A.css(B)});break;case"longest-first":var x=b(p,o);n.each(function(z){var A=a(this);if(v.selector){A=A.find(v.selector)}if(A.length==0){return}var C=x[z];var B={};a.each(v.css,function(D,E){B[D]=(k(A.css(D))+C*E)+"px";l(y,v,A,D,A.css(D),B[D])});A.css(B)});break;case"uniform":u=n;if(v.selector){u=u.find(v.selector)}var w=0;u.each(function(){var A=a(this);var D=(o/u.length)+w;var z=Math.round(D);w=D-z;var B={};var C=0;a.each(v.css,function(E,F){var G=z*F+C;var H=Math.round(G);C=G-H;B[E]=(k(A.css(E))+H)+"px";l(y,v,A,E,A.css(E),B[E])});A.css(B)});break}}});if(j.debug===true){console.log("Adjust Width: ",r)}}function h(){var l=j.padding;if(typeof l==="function"){l=l()}if(l&&l.jquery){l=l.outerWidth()}l=isFinite(l)?Number(l):0;return l}function c(o,l,r){var n=r?{length:0,totalWidth:0}:e(o,l);var w=r||l.innerWidth()-h();var m=a(j.selector,l);var s=r||n.totalWidth-w;f(m,n,"all",i,null);if(r){return}for(var q=0,p=g.length;q<p&&s>0;++q){var v=g[q];var u=s;var t=v.maxAdjust*n.length;if(v.maxAdjust&&v.maxAdjust>0&&u>t){u=t}s-=t;f(m,n,v.name,v.rules,0-u)}if(j.toolTipTitleSelector){m.each(function(){var z=a(this);var x=Number(z.attr("data-squeezableFullWidth"))-z.outerWidth();var y;if(x>j.toolTipThreshold&&(y=z.find(j.toolTipTitleSelector).text())){z.attr("title",y)}else{z.removeAttr("title")}})}}function d(){var n={name:"default-rule",rules:[]};for(var m=0,l=j.rules.length;m<=l;++m){var o=m<l?j.rules[m]:n;if(!o.hasOwnProperty("rules")){n.rules.push(o);continue}if(o.rules.length==0){continue}g.push(o);a.each(o.rules,function(p,q){i.push(q)})}}var i=[];var g=[];j=a.extend({},a.fn.squeezable_tabbar.defaults,j);d();if(!a.fn.squeezable_tabbar.resizeHandler.bound){a.fn.squeezable_tabbar.resizeHandler.bound=true;a(window).resize(a.fn.squeezable_tabbar.resizeHandler)}return this.each(function(){function o(q){if(m){window.clearTimeout(m)}l|=Boolean(q);m=window.setTimeout(function(){m=null;if(n.hasClass("squeezable")){c(l,n,false)}l=false},250)}var n=a(this);var m=null;var l=false;var p=false;n.addClass("squeezable").unbind("squeeze").unbind("forceSqueeze").bind("squeeze",function(){o(false)}).bind("forceSqueeze",function(){o(true)});if(j.squeezeOnWindowResize){n.addClass("squeeze-on-window-resize").attr("data-squeezableEvent",j.forceOnWindowResize?"forceSqueeze":"squeeze")}else{n.removeClass("squeeze-on-window-resize").removeAttr("data-squeezableEvent")}o(true)})};a.fn.squeezable_tabbar.resizeHandler=function(){a(".squeeze-on-window-resize[data-squeezableEvent]").each(function(){var b=a(this);b.trigger(b.attr("data-squeezableEvent"))})};a.fn.squeezable_tabbar.defaults={rules:[{technique:"longest-first",selector:"> *",css:{width:1}}],padding:0,selector:"> *",squeezeOnWindowResize:true,forceOnWindowResize:false,toolTipTitleSelector:null,toolTipThreshold:0,debug:false}})(jQuery);