module("Array#forEach()",{setup:function(){this.a=[1,2,3,4];this.equals=function(d,c){if(d.length===c.length){for(var e=0;e<d.length;e+=1){if(d[e]!==c[e]){return false}}return true}else{return false}}}});test("runs a callback on every element in an array",4,function(){var a=0;this.a.forEach(function(b){a+=1;ok(b===a,"callback called with value "+a)})});test("passes the index of each element to the callback",4,function(){var a=-1;this.a.forEach(function(c,b){a+=1;ok(b===a,"callback called with index "+a)})});test("passes the original array to the callback on each iteration",4,function(){var a=this;this.a.forEach(function(c,b,d){ok(a.equals(d,a.a),"original array was given as the third argument")})});test("invokes callback in the context of the given object",4,function(){var a={};this.a.forEach(function(){ok(this===a,"callback called with context of obj")},a)});test("throws a type error if no callback is given",1,function(){try{this.a.forEach()}catch(a){ok(a instanceof TypeError,"a type error was thrown")}});module("Array#map()",{setup:function(){this.a=[1,2,3,4];this.equals=function(d,c){if(d.length===c.length){for(var e=0;e<d.length;e+=1){if(d[e]!==c[e]){return false}}return true}else{return false}}}});test("runs a callback on every element in an array",4,function(){var a=0;this.a.map(function(b){a+=1;ok(b===a,"callback called with value "+a)})});test("returns a new array",1,function(){ok(this.equals(this.a.map(function(a){return a+1}),[2,3,4,5]),"map() returned a transformed array")});test("passes the index of each element to the callback",4,function(){var a=-1;this.a.map(function(c,b){a+=1;ok(b===a,"callback called with index "+a)})});test("invokes callback in the context of the given object",4,function(){var a={};this.a.map(function(){ok(this===a,"callback called with context of obj")},a)});test("throws a type error if no callback is given",1,function(){try{this.a.map()}catch(a){ok(a instanceof TypeError,"a type error was thrown")}});module("Array#reduce()",{setup:function(){this.a=[1,2,3,4];this.equals=function(d,c){if(d.length===c.length){for(var e=0;e<d.length;e+=1){if(d[e]!==c[e]){return false}}return true}else{return false}}}});test("passes an initial value and the first array element to the given function",1,function(){var b,a=function(d,c){if(typeof b=="undefined"){b=[d,c]}};this.a.reduce(a,0);ok(this.equals(b,[0,1]),"reduce function called initially with arguments 0 and 1")});test("passes the result of each function application as the first argument to the next function invocation",2,function(){function a(d,c){if(c==2){ok(d==1,"second invocation of reduce function called with 1 and 2")}else{if(c==3){ok(d==3,"second invocation of reduce function called with 3 and 3")}}return d+c}this.a.reduce(a,0)});test("passes every array element to the given function",1,function(){var b=[],a=function(d,c){b.push(c)};this.a.reduce(a,0);ok(this.equals(b,this.a),"every value in the array was passed to the reduce function")});test("returns the result of the function invocation on the last array element",1,function(){function a(d,c){return d+c}ok(this.a.reduce(a,0)==10,"the sum of the elements in the array is 10")});test("passes array element indexes as the third argument to the given function",1,function(){var b=[],a=function(e,d,f){b.push(f)};this.a.reduce(a,0);ok(this.equals(b,[0,1,2,3]),"the reduce function was passed indexes for each element")});test("passes the original array as the fourth argument to the given function",1,function(){var b=[],a=function(f,e,h,g){b.push(g)},c=this;this.a.reduce(a,0);ok(b.every(function(d){return c.equals(d,c.a)}),"the original array is passed to the reduce function on every invocation")});test("uses the first array element as an initial value if none is given",2,function(){var b,a=function(d,c){if(typeof b=="undefined"){b=[d,c]}return d+c};this.a.reduce(a);ok(this.equals(b,[1,2]),"the first invocation of the reduce function was given 1 and 2 as arguments");ok(this.a.reduce(a)==10,"the sum of every element in the array is 10")});test("throws a `TypeError` if no function is given",1,function(){try{this.a.reduce("foo")}catch(a){ok(a instanceof TypeError,"a TypeError was thrown")}});test("returns the initial value if the receiver is empty",1,function(){ok([].reduce(function(){},3)==3,"reduce() returned the given initial value")});test("throws a `TypeError` if the receiver is empty and no initial value is given",1,function(){try{[].reduce(function(){})}catch(a){ok(a instanceof TypeError,"a TypeError was thrown")}});module("Array#reduceRight()",{setup:function(){this.a=[1,2,3,4];this.equals=function(d,c){if(d.length===c.length){for(var e=0;e<d.length;e+=1){if(d[e]!==c[e]){return false}}return true}else{return false}}}});test("passes an initial value and the first array element to the given function",1,function(){var b,a=function(d,c){if(typeof b=="undefined"){b=[d,c]}};this.a.reduceRight(a,0);ok(this.equals(b,[0,4]),"reduceRight function called initially with arguments 0 and 4")});test("passes the result of each function application as the first argument to the next function invocation",2,function(){function a(d,c){if(c==2){ok(d==7,"second invocation of reduceRight function called with 7 and 2")}else{if(c==1){ok(d==9,"second invocation of reduceRight function called with 9 and 1")}}return d+c}this.a.reduceRight(a,0)});test("passes every array element to the given function",1,function(){var b=[],c=[4,3,2,1],a=function(e,d){b.push(d)};this.a.reduceRight(a,0);ok(this.equals(b,c),"every value in the array was passed to the reduceRight function")});test("returns the result of the function invocation on the last array element",1,function(){function a(d,c){return d+c}ok(this.a.reduceRight(a,0)==10,"the sum of the elements in the array is 10")});test("passes array element indexes as the third argument to the given function",1,function(){var b=[],a=function(e,d,f){b.push(f)};this.a.reduceRight(a,0);ok(this.equals(b,[3,2,1,0]),"the reduceRight function was passed indexes for each element")});test("passes the original array as the fourth argument to the given function",1,function(){var b=[],a=function(f,e,h,g){b.push(g)},c=this;this.a.reduceRight(a,0);ok(b.every(function(d){return c.equals(d,c.a)}),"the original array is passed to the reduceRight function on every invocation")});test("uses the last array element as an initial value if none is given",2,function(){var b,a=function(d,c){if(typeof b=="undefined"){b=[d,c]}return d+c};this.a.reduceRight(a);ok(this.equals(b,[4,3]),"the first invocation of the reduceRight function was given 1 and 2 as arguments");ok(this.a.reduceRight(a)==10,"the sum of every element in the array is 10")});test("throws a `TypeError` if no function is given",1,function(){try{this.a.reduceRight("foo")}catch(a){ok(a instanceof TypeError,"a TypeError was thrown")}});test("returns the initial value if the receiver is empty",1,function(){ok([].reduceRight(function(){},3)==3,"reduceRight() returned the given initial value")});test("throws a `TypeError` if the receiver is empty and no initial value is given",1,function(){try{[].reduceRight(function(){})}catch(a){ok(a instanceof TypeError,"a TypeError was thrown")}});module("Array#filter()",{setup:function(){this.a=[1,2,3,4];this.equals=function(d,c){if(d.length===c.length){for(var e=0;e<d.length;e+=1){if(d[e]!==c[e]){return false}}return true}else{return false}}}});test("returns an array of values that match a given predicate",1,function(){var a=this.a.filter(function(b){return b%2===0});ok(this.equals(a,[2,4]),"resulting array contains only even numbers")});test("passes the index of each element to the callback",4,function(){var a=-1;this.a.filter(function(c,b){a+=1;ok(b===a,"callback called with index "+a)})});test("invokes callback in the context of the given object",4,function(){var a={};this.a.filter(function(){ok(this===a,"callback called with context of obj")},a)});test("throws a type error if no callback is given",1,function(){try{this.a.filter()}catch(a){ok(a instanceof TypeError,"a type error was thrown")}});module("Array#every()",{setup:function(){this.a=[1,2,3,4];this.equals=function(d,c){if(d.length===c.length){for(var e=0;e<d.length;e+=1){if(d[e]!==c[e]){return false}}return true}else{return false}}}});test("returns true if every element in the array matches a given predicate",1,function(){var a=this.a.every(function(b){return b<5});ok(a,"every element in the array is less than 5")});test("returns false if some element in the array does not match a given predicate",1,function(){var a=this.a.every(function(b){return b%2===0});ok(!a,"not all elements in the array are even")});test("passes the index of each element to the callback",4,function(){var a=-1;this.a.every(function(c,b){a+=1;ok(b===a,"callback called with index "+a);return true})});test("passes the original array to the callback on each iteration",4,function(){var a=this;this.a.every(function(c,b,d){ok(a.equals(d,a.a),"original array was given as the third argument");return true})});test("invokes callback in the context of the given object",4,function(){var a={};this.a.every(function(){ok(this===a,"callback called with context of obj");return true},a)});test("throws a type error if no callback is given",1,function(){try{this.a.every()}catch(a){ok(a instanceof TypeError,"a type error was thrown")}});module("Array#some()",{setup:function(){this.a=[1,2,3,4];this.equals=function(d,c){if(d.length===c.length){for(var e=0;e<d.length;e+=1){if(d[e]!==c[e]){return false}}return true}else{return false}}}});test("returns true if some element in the array matches a given predicate",1,function(){var a=this.a.some(function(b){return b%2===0});ok(a,"some element in the array is even")});test("returns false if no element in the array matches a given predicate",1,function(){var a=this.a.some(function(b){return b>5});ok(!a,"no element in the array is greater than 5")});test("passes the index of each element to the callback",4,function(){var a=-1;this.a.some(function(c,b){a+=1;ok(b===a,"callback called with index "+a)})});test("passes the original array to the callback on each iteration",4,function(){var a=this;this.a.some(function(c,b,d){ok(a.equals(d,a.a),"original array was given as the third argument")})});test("invokes callback in the context of the given object",4,function(){var a={};this.a.some(function(){ok(this===a,"callback called with context of obj")},a)});test("throws a type error if no callback is given",1,function(){try{this.a.some()}catch(a){ok(a instanceof TypeError,"a type error was thrown")}});module("Array#indexOf()",{setup:function(){this.a=[1,3,3,4];this.equals=function(d,c){if(d.length===c.length){for(var e=0;e<d.length;e+=1){if(d[e]!==c[e]){return false}}return true}else{return false}}}});test("returns the index of a matching element",1,function(){ok(this.a.indexOf(4)==3,"the index of the value 4 is 3")});test("returns the lowest index if multiple elements match",1,function(){ok(this.a.indexOf(3)==1,"the first index of the value 3 is 1")});test("returns -1 if no element in the array matches",1,function(){ok(this.a.indexOf(5)==-1,"array does not contain the value 5")});test("returns the index of a matching element starting from a given index",1,function(){ok(this.a.indexOf(3,2)==2,"the first index of the value 3 starting from index 2 is 2")});test("returns the index of a matching element starting from a given index measured from the end of the array",1,function(){ok(this.a.indexOf(3,-2)==2,"the first index of the value 3 starting from index 2 is 2")});module("Array#lastIndexOf()",{setup:function(){this.a=[1,3,3,4];this.equals=function(d,c){if(d.length===c.length){for(var e=0;e<d.length;e+=1){if(d[e]!==c[e]){return false}}return true}else{return false}}}});test("returns the index of a matching element",1,function(){ok(this.a.lastIndexOf(4)==3,"the index of the value 4 is 3")});test("returns the highest index if multiple elements match",1,function(){ok(this.a.lastIndexOf(3)==2,"the last index of the value 3 is 2")});test("returns -1 if no element in the array matches",1,function(){ok(this.a.lastIndexOf(5)==-1,"array does not contain the value 5")});test("returns the index of a matching element starting from a given index",1,function(){ok(this.a.lastIndexOf(3,2)==2,"the first index of the value 3 starting from index 2 is 2")});test("returns the index of a matching element starting from a given index measured from the end of the array",1,function(){ok(this.a.lastIndexOf(3,-2)==2,"the first index of the value 3 starting from index 2 is 2")});