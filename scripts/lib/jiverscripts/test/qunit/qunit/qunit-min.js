(function(j){var d={init:function(){f={stats:{all:0,bad:0},moduleStats:{all:0,bad:0},started:+new Date,updateRate:1000,blocking:false,autorun:false,assertions:[],filters:[],queue:[]};var r=a("qunit-tests"),q=a("qunit-banner"),p=a("qunit-testresult");if(r){r.innerHTML=""}if(q){q.className=""}if(p){p.parentNode.removeChild(p)}},module:function(p,q){f.currentModule=p;k(function(){if(f.currentModule){d.moduleDone(f.currentModule,f.moduleStats.bad,f.moduleStats.all)}f.currentModule=p;f.moduleTestEnvironment=q;f.moduleStats={all:0,bad:0};d.moduleStart(p,q)})},asyncTest:function(p,q,r){if(arguments.length===2){r=q;q=0}d.test(p,q,r,true)},test:function(q,t,v,s){var r=q,u,p;if(arguments.length===2){v=t;t=null}if(t&&typeof t==="object"){p=t;t=null}if(f.currentModule){r=f.currentModule+" module: "+r}if(!n(r)){return}k(function(){d.testStart(q);u=l({setup:function(){},teardown:function(){}},f.moduleTestEnvironment);if(p){l(u,p)}d.current_testEnvironment=u;f.assertions=[];f.expected=t;try{if(!f.pollution){b()}u.setup.call(u)}catch(w){d.ok(false,"Setup failed on "+r+": "+w.message)}if(s){d.stop()}try{v.call(u)}catch(w){g("Test "+r+" died, exception and test follows",w,v);d.ok(false,"Died on test #"+(f.assertions.length+1)+": "+w.message);b();if(f.blocking){start()}}});k(function(){try{e();u.teardown.call(u)}catch(A){d.ok(false,"Teardown failed on "+r+": "+A.message)}try{d.reset()}catch(A){g("reset() failed, following Test "+r+", exception and reset fn follows",A,reset)}if(f.expected&&f.expected!=f.assertions.length){d.ok(false,"Expected "+f.expected+" assertions, but "+f.assertions.length+" were run")}var y=0,w=0,x=a("qunit-tests");f.stats.all+=f.assertions.length;f.moduleStats.all+=f.assertions.length;if(x){var B=document.createElement("ol");B.style.display="none";for(var z=0;z<f.assertions.length;z++){var F=f.assertions[z];var E=document.createElement("li");E.className=F.result?"pass":"fail";E.appendChild(document.createTextNode(F.message||"(no message)"));B.appendChild(E);if(F.result){y++}else{w++;f.stats.bad++;f.moduleStats.bad++}}var C=document.createElement("strong");C.innerHTML=r+" <b style='color:black;'>(<b class='fail'>"+w+"</b>, <b class='pass'>"+y+"</b>, "+f.assertions.length+")</b>";h(C,"click",function(){var G=C.nextSibling,H=G.style.display;G.style.display=H==="none"?"block":"none"});h(C,"dblclick",function(I){var H=I&&I.target?I.target:j.event.srcElement;if(H.nodeName.toLowerCase()==="strong"){var J="",G=H.firstChild;while(G.nodeType===3){J+=G.nodeValue;G=G.nextSibling}J=J.replace(/(^\s*|\s*$)/g,"");if(j.location){j.location.href=j.location.href.match(/^(.+?)(\?.*)?$/)[1]+"?"+encodeURIComponent(J)}}});var E=document.createElement("li");E.className=w?"fail":"pass";E.appendChild(C);E.appendChild(B);x.appendChild(E);if(w){var D=a("qunit-testrunner-toolbar");if(D){D.style.display="block";a("qunit-filter-pass").disabled=null;a("qunit-filter-missing").disabled=null}}}else{for(var z=0;z<f.assertions.length;z++){if(!f.assertions[z].result){w++;f.stats.bad++;f.moduleStats.bad++}}}d.testDone(q,w,f.assertions.length);if(!j.setTimeout&&!f.queue.length){i()}});if(j.setTimeout&&!f.doneTimer){f.doneTimer=j.setTimeout(function(){if(!f.queue.length){i()}else{k(i)}},13)}},expect:function(p){f.expected=p},ok:function(p,q){d.log(p,q);f.assertions.push({result:!!p,message:q})},equal:function(r,q,p){m(q==r,r,q,p)},notEqual:function(r,q,p){m(q!=r,r,q,p)},deepEqual:function(q,p,r){m(d.equiv(q,p),q,p,r)},notDeepEqual:function(q,p,r){m(!d.equiv(q,p),q,p,r)},strictEqual:function(r,q,p){m(q===r,r,q,p)},notStrictEqual:function(r,q,p){m(q!==r,r,q,p)},start:function(){if(j.setTimeout){j.setTimeout(function(){if(f.timeout){clearTimeout(f.timeout)}f.blocking=false;c()},13)}else{f.blocking=false;c()}},stop:function(p){f.blocking=true;if(p&&j.setTimeout){f.timeout=j.setTimeout(function(){d.ok(false,"Test timed out");d.start()},p)}},reset:function(){if(j.jQuery){jQuery("#main").html(f.fixture);jQuery.event.global={};jQuery.ajaxSettings=l({},f.ajaxSettings)}},triggerEvent:function(r,p,q){if(document.createEvent){q=document.createEvent("MouseEvents");q.initMouseEvent(p,true,true,r.ownerDocument.defaultView,0,0,0,0,0,false,false,false,false,0,null);r.dispatchEvent(q)}else{if(r.fireEvent){r.fireEvent("on"+p)}}},is:function(p,q){return Object.prototype.toString.call(q)==="[object "+p+"]"},done:function(p,q){},log:function(p,q){},testStart:function(p){},testDone:function(p,q,r){},moduleStart:function(p,q){},moduleDone:function(p,q,r){}};d.equals=d.equal;d.same=d.deepEqual;var f={queue:[],blocking:true};(function(){var p=j.location||{search:"",protocol:"file:"},r=p.search.slice(1).split("&");for(var q=0;q<r.length;q++){r[q]=decodeURIComponent(r[q]);if(r[q]==="noglobals"){r.splice(q,1);q--;f.noglobals=true}else{if(r[q].search("=")>-1){r.splice(q,1);q--}}}f.filters=r;d.isLocal=!!(p.protocol==="file:")})();if(typeof exports==="undefined"||typeof require==="undefined"){l(j,d);j.QUnit=d}else{l(exports,d);exports.QUnit=d}if(typeof document==="undefined"||document.readyState==="complete"){f.autorun=true}h(j,"load",function(){var r=l({},f);d.init();l(f,r);f.blocking=false;var v=a("qunit-userAgent");if(v){v.innerHTML=navigator.userAgent}var u=a("qunit-testrunner-toolbar");if(u){u.style.display="none";var t=document.createElement("input");t.type="checkbox";t.id="qunit-filter-pass";t.disabled=true;h(t,"click",function(){var w=document.getElementsByTagName("li");for(var x=0;x<w.length;x++){if(w[x].className.indexOf("pass")>-1){w[x].style.display=t.checked?"none":""}}});u.appendChild(t);var q=document.createElement("label");q.setAttribute("for","qunit-filter-pass");q.innerHTML="Hide passed tests";u.appendChild(q);var s=document.createElement("input");s.type="checkbox";s.id="qunit-filter-missing";s.disabled=true;h(s,"click",function(){var w=document.getElementsByTagName("li");for(var x=0;x<w.length;x++){if(w[x].className.indexOf("fail")>-1&&w[x].innerHTML.indexOf("missing test - untested code is broken code")>-1){w[x].parentNode.parentNode.style.display=s.checked?"none":"block"}}});u.appendChild(s);q=document.createElement("label");q.setAttribute("for","qunit-filter-missing");q.innerHTML="Hide missing tests (untested code is broken code)";u.appendChild(q)}var p=a("main");if(p){f.fixture=p.innerHTML}if(j.jQuery){f.ajaxSettings=j.jQuery.ajaxSettings}d.start()});function i(){if(f.doneTimer&&j.clearTimeout){j.clearTimeout(f.doneTimer);f.doneTimer=null}if(f.queue.length){f.doneTimer=j.setTimeout(function(){if(!f.queue.length){i()}else{k(i)}},13);return}f.autorun=true;if(f.currentModule){d.moduleDone(f.currentModule,f.moduleStats.bad,f.moduleStats.all)}var q=a("qunit-banner"),s=a("qunit-tests"),r=["Tests completed in ",+new Date-f.started," milliseconds.<br/>",'<span class="passed">',f.stats.all-f.stats.bad,'</span> tests of <span class="total">',f.stats.all,'</span> passed, <span class="failed">',f.stats.bad,"</span> failed."].join("");if(q){q.className=(f.stats.bad?"qunit-fail":"qunit-pass")}if(s){var p=a("qunit-testresult");if(!p){p=document.createElement("p");p.id="qunit-testresult";p.className="result";s.parentNode.insertBefore(p,s.nextSibling)}p.innerHTML=r}d.done(f.stats.bad,f.stats.all)}function n(p){var q=f.filters.length,t=false;if(!q){return true}while(q--){var r=f.filters[q],s=r.charAt(0)=="!";if(s){r=r.slice(1)}if(p.indexOf(r)!==-1){return !s}if(s){t=true}}return t}function m(p,s,r,q){q=q||(p?"okay":"failed");d.ok(p,p?q+": "+d.jsDump.parse(r):q+", expected: "+d.jsDump.parse(r)+" result: "+d.jsDump.parse(s))}function k(p){f.queue.push(p);if(f.autorun&&!f.blocking){c()}}function c(){var p=(new Date()).getTime();while(f.queue.length&&!f.blocking){if(f.updateRate<=0||(((new Date()).getTime()-p)<f.updateRate)){f.queue.shift()()}else{setTimeout(c,13);break}}}function b(){f.pollution=[];if(f.noglobals){for(var p in j){f.pollution.push(p)}}}function e(r){var q=f.pollution;b();var p=o(q,f.pollution);if(p.length>0){ok(false,"Introduced global variable(s): "+p.join(", "));f.expected++}var s=o(f.pollution,q);if(s.length>0){ok(false,"Deleted global variable(s): "+s.join(", "));f.expected++}}function o(r,q){var p=r.slice();for(var t=0;t<p.length;t++){for(var s=0;s<q.length;s++){if(p[t]===q[s]){p.splice(t,1);t--;break}}}return p}function g(q,p,r){if(typeof console!=="undefined"&&console.error&&console.warn){console.error(q);console.error(p);console.warn(r.toString())}else{if(j.opera&&opera.postError){opera.postError(q,p,r.toString)}}}function l(q,p){for(var r in p){q[r]=p[r]}return q}function h(r,q,p){if(r.addEventListener){r.addEventListener(q,p,false)}else{if(r.attachEvent){r.attachEvent("on"+q,p)}else{p()}}}function a(p){return !!(typeof document!=="undefined"&&document&&document.getElementById)&&document.getElementById(p)}d.equiv=function(){var t;var u=[];var q=[];function p(v){if(d.is("String",v)){return"string"}else{if(d.is("Boolean",v)){return"boolean"}else{if(d.is("Number",v)){if(isNaN(v)){return"nan"}else{return"number"}}else{if(typeof v==="undefined"){return"undefined"}else{if(v===null){return"null"}else{if(d.is("Array",v)){return"array"}else{if(d.is("Date",v)){return"date"}else{if(d.is("RegExp",v)){return"regexp"}else{if(typeof v==="object"){return"object"}else{if(d.is("Function",v)){return"function"}else{return undefined}}}}}}}}}}}function s(x,w,v){var y=p(x);if(y){if(p(w[y])==="function"){return w[y].apply(w,v)}else{return w[y]}}}var r=function(){function v(w,x){if(w instanceof x.constructor||x instanceof w.constructor){return x==w}else{return x===w}}return{string:v,"boolean":v,number:v,"null":v,"undefined":v,nan:function(w){return isNaN(w)},date:function(w,x){return p(w)==="date"&&x.valueOf()===w.valueOf()},regexp:function(w,x){return p(w)==="regexp"&&x.source===w.source&&x.global===w.global&&x.ignoreCase===w.ignoreCase&&x.multiline===w.multiline},"function":function(){var w=u[u.length-1];return w!==Object&&typeof w!=="undefined"},array:function(x,z){var B,A,y;var w;if(!(p(x)==="array")){return false}w=z.length;if(w!==x.length){return false}q.push(z);for(B=0;B<w;B++){y=false;for(A=0;A<q.length;A++){if(q[A]===z[B]){y=true}}if(!y&&!t(z[B],x[B])){q.pop();return false}}q.pop();return true},object:function(x,z){var C,A,y;var w=true;var B=[],D=[];if(z.constructor!==x.constructor){return false}u.push(z.constructor);q.push(z);for(C in z){y=false;for(A=0;A<q.length;A++){if(q[A]===z[C]){y=true}}B.push(C);if(!y&&!t(z[C],x[C])){w=false;break}}u.pop();q.pop();for(C in x){D.push(C)}return w&&t(B.sort(),D.sort())}}}();t=function(){var v=Array.prototype.slice.apply(arguments);if(v.length<2){return true}return(function(x,w){if(x===w){return true}else{if(x===null||w===null||typeof x==="undefined"||typeof w==="undefined"||p(x)!==p(w)){return false}else{return s(x,r,[w,x])}}})(v[0],v[1])&&arguments.callee.apply(this,v.splice(1,v.length-1))};return t}();d.jsDump=(function(){function p(v){return'"'+v.toString().replace(/"/g,'\\"')+'"'}function q(v){return v+""}function s(A,v,x){var y=r.separator(),z=r.indent(),w=r.indent(1);if(v.join){v=v.join(","+y+w)}if(!v){return A+x}return[A,w+v,z+x].join(y)}function u(v){var x=v.length,w=Array(x);this.up();while(x--){w[x]=this.parse(v[x])}this.down();return s("[",w,"]")}var t=/^function (\w+)/;var r={parse:function(w,v){var x=this.parsers[v||this.typeOf(w)];v=typeof x;return v=="function"?x.call(this,w):v=="string"?x:this.parsers.error},typeOf:function(w){var v;if(w===null){v="null"}else{if(typeof w==="undefined"){v="undefined"}else{if(d.is("RegExp",w)){v="regexp"}else{if(d.is("Date",w)){v="date"}else{if(d.is("Function",w)){v="function"}else{if(w.setInterval&&w.document&&!w.nodeType){v="window"}else{if(w.nodeType===9){v="document"}else{if(w.nodeType){v="node"}else{if(typeof w==="object"&&typeof w.length==="number"&&w.length>=0){v="array"}else{v=typeof w}}}}}}}}}return v},separator:function(){return this.multiline?this.HTML?"<br />":"\n":this.HTML?"&nbsp;":" "},indent:function(v){if(!this.multiline){return""}var w=this.indentChar;if(this.HTML){w=w.replace(/\t/g,"   ").replace(/ /g,"&nbsp;")}return Array(this._depth_+(v||0)).join(w)},up:function(v){this._depth_+=v||1},down:function(v){this._depth_-=v||1},setParser:function(v,w){this.parsers[v]=w},quote:p,literal:q,join:s,_depth_:1,parsers:{window:"[Window]",document:"[Document]",error:"[ERROR]",unknown:"[Unknown]","null":"null",undefined:"undefined","function":function(x){var w="function",v="name" in x?x.name:(t.exec(x)||[])[1];if(v){w+=" "+v}w+="(";w=[w,this.parse(x,"functionArgs"),"){"].join("");return s(w,this.parse(x,"functionCode"),"}")},array:u,nodelist:u,arguments:u,object:function(x){var v=[];this.up();for(var w in x){v.push(this.parse(w,"key")+": "+this.parse(x[w]))}this.down();return s("{",v,"}")},node:function(z){var y=this.HTML?"&lt;":"<",B=this.HTML?"&gt;":">";var v=z.nodeName.toLowerCase(),x=y+v;for(var w in this.DOMAttrs){var A=z[this.DOMAttrs[w]];if(A){x+=" "+w+"="+this.parse(A,"attribute")}}return x+B+y+"/"+v+B},functionArgs:function(x){var v=x.length;if(!v){return""}var w=Array(v);while(v--){w[v]=String.fromCharCode(97+v)}return" "+w.join(", ")+" "},key:p,functionCode:"[code]",attribute:p,string:p,date:p,regexp:q,number:q,"boolean":q},DOMAttrs:{id:"id",name:"name","class":"className"},HTML:false,indentChar:"   ",multiline:false};return r})()})(this);