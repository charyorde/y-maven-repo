var SpacePicker=$Class.extend({init:function(a){this.spaceTree=new JsTree();this.parentElement=a;var b=this;this.spaceTree.setLoadFunction(function(c){b.loadNode(c)});CommunityUtils.getCommunities(1,function(d){b.initTree(d)})},initTree:function(b){var a=this.spaceTree.addNode(null,b.ID,b.name);a.hasAdminPerm=b.hasAdminPerm;if(!a.hasAdminPerm){this.spaceTree.disable(a)}this.buildNode(a,b);this.parentElement.appendChild(this.spaceTree.getRoot())},loadNode:function(a){var b=this;document.body.style.cursor="wait";CommunityUtils.getCommunities(a.id,function(d){b.buildNode(a,d)})},buildNode:function(b,f){var e;for(var a=0;a<f.children.length;a++){var d=f.children[a];e=this.spaceTree.addNode(b,d.ID,d.name);e.hasAdminPerm=d.hasAdminPerm;if(d.hasChildren){this.spaceTree.setHasChildren(e)}if(!d.hasAdminPerm){this.spaceTree.disable(e)}}this.spaceTree.openNode(b);document.body.style.cursor=""}});