function fontFace(a){if(tinymce.isOpera){return"&quot;"+a+"&quot;"}else{return a}}function trimContent(a){a=a.replace(/<p><\/p>$/,"");if(tinymce.isOpera){return a.replace(/^<p>&nbsp;<\/p>/,"").replace(/<p>&nbsp;<\/p>$/,"")}return a}function normalizeContentWhitespace(a){return trimContent(a.replace(/[\r\n]+/g,""))}function stripIEProblems(a,b){var c=$j("<div>"+b+"</div>").find("*").removeAttr("style").end().find("img").removeAttr("height").removeAttr("width").end().get(0);return a.serializer.serialize(c,{format:"html",getInner:true})}function checkContent(a,d,c,b){if(c==null){c="Document content"}var e=a.getContent();e=e.replace(/(_jivemacro_uid_\d+)/gi,"").replace(/( _jivemacro_uid=['"][^"']*['"])/gi,"");e=normalizeContentWhitespace(e);d=normalizeContentWhitespace(d);if(e==d){equal(e,d,c)}else{if(tinymce.isIE||b){e=normalizeContentWhitespace(stripIEProblems(a,e));d=normalizeContentWhitespace(stripIEProblems(a,d))}equal(e,d,c)}}function rangeEqual(c,b){var a=equal(c.startContainer,b.startContainer,"start container");if(!a){console.error("start container mismatch: actual, expected",c.startContainer,b.startContainer)}equal(c.startOffset,b.startOffset,"start offset");if(b.collapsed&&c.collapsed){ok(true,"collapsed")}else{a=equal(c.endContainer,b.endContainer,"end container");if(!a){console.error("end container mismatch: actual, expected",c.endContainer,b.endContainer)}equal(c.endOffset,b.endOffset,"end offset")}}function near(a,b,c,e){if(!e){e=""}var d=a-b;if(d>c){e+=" ERR: "+a+" > "+b+" + "+c;console.log(e);ok(false,e)}else{if(-d>c){e+=" ERR: "+a+" < "+b+" - "+c;console.log(e);ok(false,e)}else{ok(true,e)}}}function fakeMouseEvent(f,a,g){var c;f=tinymce.DOM.get(f);var b=tinymce.DOM.getRect(f);var d={detail:1,screenX:0,screenY:0,clientX:b.x+(b.w/2),clientY:b.y+(b.h/2),ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,button:0};g=tinymce.extend(d,g);if(f.fireEvent){c=document.createEventObject();tinymce.extend(c,g);f.fireEvent("on"+a,c);return}c=document.createEvent("MouseEvents");if(c.initMouseEvent){c.initMouseEvent(a,true,true,window,g.detail,g.screenX,g.screenY,g.clientX,g.clientY,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,g.button,null)}f.dispatchEvent(c)}function click(f,a){try{var d=["mousedown","mouseup","click"];var c=tinymce.activeEditor;if(c.getDoc()==f.ownerDocument){var b=c.dom.createRng();if(f.hasChildNodes()){b.setStart(f,0);b.collapse(true)}else{var h=c.dom.nodeIndex(f);b.setStart(f.parentNode,h);b.setEnd(f.parentNode,h+1)}c.selection.setRng(b)}mouseSequence(f,d,a)}catch(g){}}function mouseSequence(f,b,a){function e(h){setTimeout(function(){var j=b[h];if(typeof(j)=="string"){fakeMouseEvent(f,j)}else{var i=j.type;delete j.type;fakeMouseEvent(f,i,j)}++h;if(h<b.length){e(h)}else{setTimeout(a,0)}},0)}if(a){e(0)}else{for(var c=0;c<b.length;++c){var g=b[c];if(typeof(g)=="string"){fakeMouseEvent(f,g)}else{var d=g.type;delete g.type;fakeMouseEvent(f,d,g)}}}}function fakeKeyEvent(f,a,g){var d;g=tinymce.extend({keyCode:13,charCode:0},g);f=tinymce.DOM.get(f);if(f.fireEvent){d=document.createEventObject();tinymce.extend(d,g);f.fireEvent("on"+a,d);return}try{d=document.createEvent("KeyEvents");d.initKeyEvent(a,true,true,window,!!g.ctrlKey,!!g.altKey,!!g.shiftKey,!!g.metaKey,g.keyCode,g.charCode)}catch(b){try{d=document.createEvent("Events");d.initEvent(a,true,true);d.ctrlKey=!!g.ctrlKey;d.altKey=!!g.altKey;d.shiftKey=!!g.shiftKey;d.metaKey=!!g.metaKey;d.keyCode=g.keyCode;d.charCode=g.charCode}catch(c){d=document.createEvent("UIEvents");if(d.initUIEvent){d.initUIEvent(a,true,true,window,1)}d.initEvent(a,true,true);d.ctrlKey=!!g.ctrlKey;d.altKey=!!g.altKey;d.shiftKey=!!g.shiftKey;d.metaKey=!!g.metaKey;d.keyCode=g.keyCode;d.charCode=g.charCode}}f.dispatchEvent(d)}function type(a,c,b){if(!b){b={}}b=tinymce.extend({keyCode:c},b);fakeKeyEvent(a.selection.getNode(),"keydown",b);fakeKeyEvent(a.selection.getNode(),"keypress",b);fakeKeyEvent(a.selection.getNode(),"keyup",b)}function writeScript(a){$j("head").append("<script type='text/javascript' src='js/"+a+"' ><\/script>")};