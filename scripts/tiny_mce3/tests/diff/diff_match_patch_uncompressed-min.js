function diff_match_patch(){this.Diff_Timeout=1;this.Diff_EditCost=4;this.Match_Threshold=0.5;this.Match_Distance=1000;this.Patch_DeleteThreshold=0.5;this.Patch_Margin=4;function a(){var d=0;var b=1;var c=2;while(b!=c){d++;b=c;c=c<<1}return d}this.Match_MaxBits=a()}var DIFF_DELETE=-1;var DIFF_INSERT=1;var DIFF_EQUAL=0;diff_match_patch.Diff;diff_match_patch.prototype.diff_main=function(b,a,d,f){if(typeof f=="undefined"){if(this.Diff_Timeout<=0){f=Number.MAX_VALUE}else{f=(new Date).getTime()+this.Diff_Timeout*1000}}var i=f;if(b==null||a==null){throw new Error("Null input. (diff_main)")}if(b==a){if(b){return[[DIFF_EQUAL,b]]}return[]}if(typeof d=="undefined"){d=true}var j=d;var e=this.diff_commonPrefix(b,a);var h=b.substring(0,e);b=b.substring(e);a=a.substring(e);e=this.diff_commonSuffix(b,a);var c=b.substring(b.length-e);b=b.substring(0,b.length-e);a=a.substring(0,a.length-e);var g=this.diff_compute(b,a,j,i);if(h){g.unshift([DIFF_EQUAL,h])}if(c){g.push([DIFF_EQUAL,c])}this.diff_cleanupMerge(g);return g};diff_match_patch.prototype.diff_compute=function(n,l,h,w){var b;if(!n){return[[DIFF_INSERT,l]]}if(!l){return[[DIFF_DELETE,n]]}var k=n.length>l.length?n:l;var r=n.length>l.length?l:n;var u=k.indexOf(r);if(u!=-1){b=[[DIFF_INSERT,k.substring(0,u)],[DIFF_EQUAL,r],[DIFF_INSERT,k.substring(u+r.length)]];if(n.length>l.length){b[0][0]=b[2][0]=DIFF_DELETE}return b}if(r.length==1){return[[DIFF_DELETE,n],[DIFF_INSERT,l]]}k=r=null;var d=this.diff_halfMatch(n,l);if(d){var q=d[0];var p=d[1];var f=d[2];var c=d[3];var A=d[4];var z=this.diff_main(q,f,h,w);var x=this.diff_main(p,c,h,w);return z.concat([[DIFF_EQUAL,A]],x)}if(h&&(n.length<100||l.length<100)){h=false}var m;if(h){var y=this.diff_linesToChars(n,l);n=(y[0]);l=(y[1]);m=(y[2])}b=this.diff_bisect(n,l,w);if(h){this.diff_charsToLines(b,m);this.diff_cleanupSemantic(b);b.push([DIFF_EQUAL,""]);var s=0;var g=0;var o=0;var v="";var e="";while(s<b.length){switch(b[s][0]){case DIFF_INSERT:o++;e+=b[s][1];break;case DIFF_DELETE:g++;v+=b[s][1];break;case DIFF_EQUAL:if(g>=1&&o>=1){var y=this.diff_main(v,e,false,w);b.splice(s-g-o,g+o);s=s-g-o;for(var t=y.length-1;t>=0;t--){b.splice(s,0,y[t])}s=s+y.length}o=0;g=0;v="";e="";break}s++}b.pop()}return b};diff_match_patch.prototype.diff_bisect=function(m,l,r){var n=m.length;var g=l.length;var h=Math.ceil((n+g)/2);var e={1:0};var b={1:0};var s=n-g;var i=(s%2!=0);for(var q=0;q<h;q++){if((new Date()).getTime()>r){break}for(var k=-q;k<=q;k+=2){var p;if(k==-q||k!=q&&e[k-1]<e[k+1]){p=e[k+1]}else{p=e[k-1]+1}var f=p-k;while(p<n&&f<g&&m.charAt(p)==l.charAt(f)){p++;f++}e[k]=p;if(i){var j=s-k;if(b[j]!==undefined){var o=n-b[j];if(p>=o){var a=this.diff_main(m.substring(0,p),l.substring(0,f),false,r);return a.concat(this.diff_main(m.substring(p),l.substring(f),false,r))}}}}for(var j=-q;j<=q;j+=2){var o;if(j==-q||j!=q&&b[j-1]<b[j+1]){o=b[j+1]}else{o=b[j-1]+1}var c=o-j;while(o<n&&c<g&&m.charAt(n-o-1)==l.charAt(g-c-1)){o++;c++}b[j]=o;if(!i){var k=s-j;if(e[k]!==undefined){var p=e[k];var f=p-k;o=n-o;if(p>=o){var a=this.diff_main(m.substring(0,p),l.substring(0,f),false,r);return a.concat(this.diff_main(m.substring(p),l.substring(f),false,r))}}}}}return[[DIFF_DELETE,m],[DIFF_INSERT,l]]};diff_match_patch.prototype.diff_linesToChars=function(g,f){var e=[];var a={};e[0]="";function b(m){var k="";var i=0;var l=-1;var j=e.length;while(l<m.length-1){l=m.indexOf("\n",i);if(l==-1){l=m.length-1}var h=m.substring(i,l+1);i=l+1;if(a.hasOwnProperty?a.hasOwnProperty(h):(a[h]!==undefined)){k+=String.fromCharCode(a[h])}else{k+=String.fromCharCode(j);a[h]=j;e[j++]=h}}return k}var d=b(g);var c=b(f);return[d,c,e]};diff_match_patch.prototype.diff_charsToLines=function(e,b){for(var a=0;a<e.length;a++){var c=e[a][1];var d=[];for(var f=0;f<c.length;f++){d[f]=b[c.charCodeAt(f)]}e[a][1]=d.join("")}};diff_match_patch.prototype.diff_commonPrefix=function(e,d){if(!e||!d||e.charAt(0)!=d.charAt(0)){return 0}var b=0;var f=Math.min(e.length,d.length);var a=f;var c=0;while(b<a){if(e.substring(c,a)==d.substring(c,a)){b=a;c=b}else{f=a}a=Math.floor((f-b)/2+b)}return a};diff_match_patch.prototype.diff_commonSuffix=function(d,c){if(!d||!c||d.charAt(d.length-1)!=c.charAt(c.length-1)){return 0}var b=0;var e=Math.min(d.length,c.length);var a=e;var f=0;while(b<a){if(d.substring(d.length-a,d.length-f)==c.substring(c.length-a,c.length-f)){b=a;f=b}else{e=a}a=Math.floor((e-b)/2+b)}return a};diff_match_patch.prototype.diff_commonOverlap=function(b,a){var g=b.length;var e=a.length;if(g==0||e==0){return 0}if(g>e){b=b.substring(g-e)}else{if(g<e){a=a.substring(0,g)}}var h=Math.min(g,e);if(b==a){return h}var d=0;var c=1;while(true){var f=b.substring(h-c);var i=a.indexOf(f);if(i==-1){return d}c+=i;if(i==0||b.substring(h-c)==a.substring(0,c)){d=c;c++}}};diff_match_patch.prototype.diff_halfMatch=function(c,b){var k=c.length>b.length?c:b;var d=c.length>b.length?b:c;if(k.length<4||d.length*2<k.length){return null}var n=this;function i(v,o,r){var t=v.substring(r,r+Math.floor(v.length/4));var p=-1;var z="";var s,q,y,x;while((p=o.indexOf(t,p+1))!=-1){var u=n.diff_commonPrefix(v.substring(r),o.substring(p));var w=n.diff_commonSuffix(v.substring(0,r),o.substring(0,p));if(z.length<w+u){z=o.substring(p-w,p)+o.substring(p,p+u);s=v.substring(0,r-w);q=v.substring(r+u);y=o.substring(0,p-w);x=o.substring(p+u)}}if(z.length*2>=v.length){return[s,q,y,x,z]}else{return null}}var g=i(k,d,Math.ceil(k.length/4));var f=i(k,d,Math.ceil(k.length/2));var a;if(!g&&!f){return null}else{if(!f){a=g}else{if(!g){a=f}else{a=g[4].length>f[4].length?g:f}}}var j,h,m,l;if(c.length>b.length){j=a[0];h=a[1];m=a[2];l=a[3]}else{m=a[0];l=a[1];j=a[2];h=a[3]}var e=a[4];return[j,h,m,l,e]};diff_match_patch.prototype.diff_cleanupSemantic=function(k){var m=false;var j=[];var c=0;var d=null;var a=0;var i=0;var h=0;var g=0;var f=0;while(a<k.length){if(k[a][0]==DIFF_EQUAL){j[c++]=a;i=g;h=f;g=0;f=0;d=(k[a][1])}else{if(k[a][0]==DIFF_INSERT){g+=k[a][1].length}else{f+=k[a][1].length}if(d!==null&&(d.length<=Math.max(i,h))&&(d.length<=Math.max(g,f))){k.splice(j[c-1],0,[DIFF_DELETE,d]);k[j[c-1]+1][0]=DIFF_INSERT;c--;c--;a=c>0?j[c-1]:-1;i=0;h=0;g=0;f=0;d=null;m=true}}a++}if(m){this.diff_cleanupMerge(k)}this.diff_cleanupSemanticLossless(k);a=1;while(a<k.length){if(k[a-1][0]==DIFF_DELETE&&k[a][0]==DIFF_INSERT){var e=(k[a-1][1]);var b=(k[a][1]);var l=this.diff_commonOverlap(e,b);if(l){k.splice(a,0,[DIFF_EQUAL,b.substring(0,l)]);k[a-1][1]=e.substring(0,e.length-l);k[a+1][1]=b.substring(l);a++}a++}a++}};diff_match_patch.prototype.diff_cleanupSemanticLossless=function(b){var e=/[^a-zA-Z0-9]/;var q=/\s/;var d=/[\r\n]/;var j=/\n\r?\n$/;var a=/^\r?\n\r?\n/;function f(t,s){if(!t||!s){return 5}var u=0;if(t.charAt(t.length-1).match(e)||s.charAt(0).match(e)){u++;if(t.charAt(t.length-1).match(q)||s.charAt(0).match(q)){u++;if(t.charAt(t.length-1).match(d)||s.charAt(0).match(d)){u++;if(t.match(j)||s.match(a)){u++}}}}return u}var n=1;while(n<b.length-1){if(b[n-1][0]==DIFF_EQUAL&&b[n+1][0]==DIFF_EQUAL){var h=(b[n-1][1]);var l=(b[n][1]);var g=(b[n+1][1]);var r=this.diff_commonSuffix(h,l);if(r){var c=l.substring(l.length-r);h=h.substring(0,h.length-r);l=c+l.substring(0,l.length-r);g=c+g}var o=h;var k=l;var m=g;var i=f(h,l)+f(l,g);while(l.charAt(0)===g.charAt(0)){h+=l.charAt(0);l=l.substring(1)+g.charAt(0);g=g.substring(1);var p=f(h,l)+f(l,g);if(p>=i){i=p;o=h;k=l;m=g}}if(b[n-1][1]!=o){if(o){b[n-1][1]=o}else{b.splice(n-1,1);n--}b[n][1]=k;if(m){b[n+1][1]=m}else{b.splice(n+1,1);n--}}}n++}};diff_match_patch.prototype.diff_cleanupEfficiency=function(g){var i=false;var f=[];var c=0;var d="";var a=0;var h=false;var j=false;var b=false;var e=false;while(a<g.length){if(g[a][0]==DIFF_EQUAL){if(g[a][1].length<this.Diff_EditCost&&(b||e)){f[c++]=a;h=b;j=e;d=g[a][1]}else{c=0;d=""}b=e=false}else{if(g[a][0]==DIFF_DELETE){e=true}else{b=true}if(d&&((h&&j&&b&&e)||((d.length<this.Diff_EditCost/2)&&(h+j+b+e)==3))){g.splice(f[c-1],0,[DIFF_DELETE,d]);g[f[c-1]+1][0]=DIFF_INSERT;c--;d="";if(h&&j){b=e=true;c=0}else{c--;a=c>0?f[c-1]:-1;b=e=false}i=true}}a++}if(i){this.diff_cleanupMerge(g)}};diff_match_patch.prototype.diff_cleanupMerge=function(h){h.push([DIFF_EQUAL,""]);var g=0;var f=0;var e=0;var c="";var b="";var a;while(g<h.length){switch(h[g][0]){case DIFF_INSERT:e++;b+=h[g][1];g++;break;case DIFF_DELETE:f++;c+=h[g][1];g++;break;case DIFF_EQUAL:if(f+e>1){if(f!==0&&e!==0){a=this.diff_commonPrefix(b,c);if(a!==0){if((g-f-e)>0&&h[g-f-e-1][0]==DIFF_EQUAL){h[g-f-e-1][1]+=b.substring(0,a)}else{h.splice(0,0,[DIFF_EQUAL,b.substring(0,a)]);g++}b=b.substring(a);c=c.substring(a)}a=this.diff_commonSuffix(b,c);if(a!==0){h[g][1]=b.substring(b.length-a)+h[g][1];b=b.substring(0,b.length-a);c=c.substring(0,c.length-a)}}if(f===0){h.splice(g-f-e,f+e,[DIFF_INSERT,b])}else{if(e===0){h.splice(g-f-e,f+e,[DIFF_DELETE,c])}else{h.splice(g-f-e,f+e,[DIFF_DELETE,c],[DIFF_INSERT,b])}}g=g-f-e+(f?1:0)+(e?1:0)+1}else{if(g!==0&&h[g-1][0]==DIFF_EQUAL){h[g-1][1]+=h[g][1];h.splice(g,1)}else{g++}}e=0;f=0;c="";b="";break}}if(h[h.length-1][1]===""){h.pop()}var d=false;g=1;while(g<h.length-1){if(h[g-1][0]==DIFF_EQUAL&&h[g+1][0]==DIFF_EQUAL){if(h[g][1].substring(h[g][1].length-h[g-1][1].length)==h[g-1][1]){h[g][1]=h[g-1][1]+h[g][1].substring(0,h[g][1].length-h[g-1][1].length);h[g+1][1]=h[g-1][1]+h[g+1][1];h.splice(g-1,1);d=true}else{if(h[g][1].substring(0,h[g+1][1].length)==h[g+1][1]){h[g-1][1]+=h[g+1][1];h[g][1]=h[g][1].substring(h[g+1][1].length)+h[g+1][1];h.splice(g+1,1);d=true}}}g++}if(d){this.diff_cleanupMerge(h)}};diff_match_patch.prototype.diff_xIndex=function(g,f){var d=0;var b=0;var e=0;var c=0;var a;for(a=0;a<g.length;a++){if(g[a][0]!==DIFF_INSERT){d+=g[a][1].length}if(g[a][0]!==DIFF_DELETE){b+=g[a][1].length}if(d>f){break}e=d;c=b}if(g.length!=a&&g[a][0]===DIFF_DELETE){return c}return c+(f-e)};diff_match_patch.prototype.diff_prettyHtml=function(g){var e=[];var c=0;var j=/&/g;var d=/</g;var a=/>/g;var h=/\n/g;for(var k=0;k<g.length;k++){var f=g[k][0];var b=g[k][1];var l=b.replace(j,"&amp;").replace(d,"&lt;").replace(a,"&gt;").replace(h,"&para;<br>");switch(f){case DIFF_INSERT:e[k]='<ins style="background:#E6FFE6;">'+l+"</ins>";break;case DIFF_DELETE:e[k]='<del style="background:#FFE6E6;">'+l+"</del>";break;case DIFF_EQUAL:e[k]="<span>"+l+"</span>";break}if(f!==DIFF_DELETE){c+=b.length}}return e.join("")};diff_match_patch.prototype.diff_text1=function(c){var b=[];for(var a=0;a<c.length;a++){if(c[a][0]!==DIFF_INSERT){b[a]=c[a][1]}}return b.join("")};diff_match_patch.prototype.diff_text2=function(c){var b=[];for(var a=0;a<c.length;a++){if(c[a][0]!==DIFF_DELETE){b[a]=c[a][1]}}return b.join("")};diff_match_patch.prototype.diff_levenshtein=function(f){var e=0;var b=0;var d=0;for(var a=0;a<f.length;a++){var g=f[a][0];var c=f[a][1];switch(g){case DIFF_INSERT:b+=c.length;break;case DIFF_DELETE:d+=c.length;break;case DIFF_EQUAL:e+=Math.max(b,d);b=0;d=0;break}}e+=Math.max(b,d);return e};diff_match_patch.prototype.diff_toDelta=function(c){var b=[];for(var a=0;a<c.length;a++){switch(c[a][0]){case DIFF_INSERT:b[a]="+"+encodeURI(c[a][1]);break;case DIFF_DELETE:b[a]="-"+c[a][1].length;break;case DIFF_EQUAL:b[a]="="+c[a][1].length;break}}return b.join("\t").replace(/%20/g," ")};diff_match_patch.prototype.diff_fromDelta=function(b,j){var f=[];var e=0;var a=0;var h=j.split(/\t/g);for(var i=0;i<h.length;i++){var d=h[i].substring(1);switch(h[i].charAt(0)){case"+":try{f[e++]=[DIFF_INSERT,decodeURI(d)]}catch(g){throw new Error("Illegal escape in diff_fromDelta: "+d)}break;case"-":case"=":var c=parseInt(d,10);if(isNaN(c)||c<0){throw new Error("Invalid number in diff_fromDelta: "+d)}var k=b.substring(a,a+=c);if(h[i].charAt(0)=="="){f[e++]=[DIFF_EQUAL,k]}else{f[e++]=[DIFF_DELETE,k]}break;default:if(h[i]){throw new Error("Invalid diff operation in diff_fromDelta: "+h[i])}}}if(a!=b.length){throw new Error("Delta length ("+a+") does not equal source text length ("+b.length+").")}return f};diff_match_patch.prototype.match_main=function(c,a,b){if(c==null||a==null||b==null){throw new Error("Null input. (match_main)")}b=Math.max(0,Math.min(b,c.length));if(c==a){return 0}else{if(!c.length){return -1}else{if(c.substring(b,b+a.length)==a){return b}else{return this.match_bitap(c,a,b)}}}};diff_match_patch.prototype.match_bitap=function(l,t,i){if(t.length>this.Match_MaxBits){throw new Error("Pattern too long for this browser.")}var m=this.match_alphabet(t);var a=this;function b(y,d){var s=y/t.length;var j=Math.abs(i-d);if(!a.Match_Distance){return j?1:s}return s+(j/a.Match_Distance)}var o=this.Match_Threshold;var c=l.indexOf(t,i);if(c!=-1){o=Math.min(b(0,c),o);c=l.lastIndexOf(t,i+t.length);if(c!=-1){o=Math.min(b(0,c),o)}}var v=1<<(t.length-1);c=-1;var f,k;var g=t.length+l.length;var h;for(var u=0;u<t.length;u++){f=0;k=g;while(f<k){if(b(u,i+k)<=o){f=k}else{g=k}k=Math.floor((g-f)/2+f)}g=k;var e=Math.max(1,i-k+1);var n=Math.min(i+k,l.length)+t.length;var p=Array(n+2);p[n+1]=(1<<u)-1;for(var q=n;q>=e;q--){var w=m[l.charAt(q-1)];if(u===0){p[q]=((p[q+1]<<1)|1)&w}else{p[q]=((p[q+1]<<1)|1)&w|(((h[q+1]|h[q])<<1)|1)|h[q+1]}if(p[q]&v){var r=b(u,q-1);if(r<=o){o=r;c=q-1;if(c>i){e=Math.max(1,2*i-c)}else{break}}}}if(b(u+1,i)>o){break}h=p}return c};diff_match_patch.prototype.match_alphabet=function(c){var b={};for(var a=0;a<c.length;a++){b[c.charAt(a)]=0}for(var a=0;a<c.length;a++){b[c.charAt(a)]|=1<<(c.length-a-1)}return b};diff_match_patch.prototype.patch_addContext=function(f,e){if(e.length==0){return}var b=e.substring(f.start2,f.start2+f.length1);var d=0;while(e.indexOf(b)!=e.lastIndexOf(b)&&b.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin){d+=this.Patch_Margin;b=e.substring(f.start2-d,f.start2+f.length1+d)}d+=this.Patch_Margin;var a=e.substring(f.start2-d,f.start2);if(a){f.diffs.unshift([DIFF_EQUAL,a])}var c=e.substring(f.start2+f.length1,f.start2+f.length1+d);if(c){f.diffs.push([DIFF_EQUAL,c])}f.start1-=a.length;f.start2-=a.length;f.length1+=a.length+c.length;f.length2+=a.length+c.length};diff_match_patch.prototype.patch_make=function(o,c,p){var d,k;if(typeof o=="string"&&typeof c=="string"&&typeof p=="undefined"){d=(o);k=this.diff_main(d,(c),true);if(k.length>2){this.diff_cleanupSemantic(k);this.diff_cleanupEfficiency(k)}}else{if(o&&typeof o=="object"&&typeof c=="undefined"&&typeof p=="undefined"){k=(o);d=this.diff_text1(k)}else{if(typeof o=="string"&&c&&typeof c=="object"&&typeof p=="undefined"){d=(o);k=(c)}else{if(typeof o=="string"&&typeof c=="string"&&p&&typeof p=="object"){d=(o);k=(p)}else{throw new Error("Unknown call format to patch_make.")}}}}if(k.length===0){return[]}var b=[];var e=new patch_obj();var h=0;var j=0;var i=0;var g=d;var m=d;for(var n=0;n<k.length;n++){var f=k[n][0];var l=k[n][1];if(!h&&f!==DIFF_EQUAL){e.start1=j;e.start2=i}switch(f){case DIFF_INSERT:e.diffs[h++]=k[n];e.length2+=l.length;m=m.substring(0,i)+l+m.substring(i);break;case DIFF_DELETE:e.length1+=l.length;e.diffs[h++]=k[n];m=m.substring(0,i)+m.substring(i+l.length);break;case DIFF_EQUAL:if(l.length<=2*this.Patch_Margin&&h&&k.length!=n+1){e.diffs[h++]=k[n];e.length1+=l.length;e.length2+=l.length}else{if(l.length>=2*this.Patch_Margin){if(h){this.patch_addContext(e,g);b.push(e);e=new patch_obj();h=0;g=m;j=i}}}break}if(f!==DIFF_INSERT){j+=l.length}if(f!==DIFF_DELETE){i+=l.length}}if(h){this.patch_addContext(e,g);b.push(e)}return b};diff_match_patch.prototype.patch_deepCopy=function(c){var d=[];for(var b=0;b<c.length;b++){var f=c[b];var a=new patch_obj();a.diffs=[];for(var e=0;e<f.diffs.length;e++){a.diffs[e]=f.diffs[e].slice()}a.start1=f.start1;a.start2=f.start2;a.length1=f.length1;a.length2=f.length2;d[b]=a}return d};diff_match_patch.prototype.patch_apply=function(a,p){if(a.length==0){return[p,[]]}a=this.patch_deepCopy(a);var c=this.patch_addPadding(a);p=c+p+c;this.patch_splitMax(a);var o=0;var g=[];for(var n=0;n<a.length;n++){var b=a[n].start2+o;var e=this.diff_text1(a[n].diffs);var f;var k=-1;if(e.length>this.Match_MaxBits){f=this.match_main(p,e.substring(0,this.Match_MaxBits),b);if(f!=-1){k=this.match_main(p,e.substring(e.length-this.Match_MaxBits),b+e.length-this.Match_MaxBits);if(k==-1||f>=k){f=-1}}}else{f=this.match_main(p,e,b)}if(f==-1){g[n]=false;o-=a[n].length2-a[n].length1}else{g[n]=true;o=f-b;var d;if(k==-1){d=p.substring(f,f+e.length)}else{d=p.substring(f,k+this.Match_MaxBits)}if(e==d){p=p.substring(0,f)+this.diff_text2(a[n].diffs)+p.substring(f+e.length)}else{var i=this.diff_main(e,d,false);if(e.length>this.Match_MaxBits&&this.diff_levenshtein(i)/e.length>this.Patch_DeleteThreshold){g[n]=false}else{this.diff_cleanupSemanticLossless(i);var j=0;var h;for(var m=0;m<a[n].diffs.length;m++){var l=a[n].diffs[m];if(l[0]!==DIFF_EQUAL){h=this.diff_xIndex(i,j)}if(l[0]===DIFF_INSERT){p=p.substring(0,f+h)+l[1]+p.substring(f+h)}else{if(l[0]===DIFF_DELETE){p=p.substring(0,f+h)+p.substring(f+this.diff_xIndex(i,j+l[1].length))}}if(l[0]!==DIFF_DELETE){j+=l[1].length}}}}}}p=p.substring(c.length,p.length-c.length);return[p,g]};diff_match_patch.prototype.patch_addPadding=function(d){var c=this.Patch_Margin;var b="";for(var a=1;a<=c;a++){b+=String.fromCharCode(a)}for(var a=0;a<d.length;a++){d[a].start1+=c;d[a].start2+=c}var g=d[0];var f=g.diffs;if(f.length==0||f[0][0]!=DIFF_EQUAL){f.unshift([DIFF_EQUAL,b]);g.start1-=c;g.start2-=c;g.length1+=c;g.length2+=c}else{if(c>f[0][1].length){var e=c-f[0][1].length;f[0][1]=b.substring(f[0][1].length)+f[0][1];g.start1-=e;g.start2-=e;g.length1+=e;g.length2+=e}}g=d[d.length-1];f=g.diffs;if(f.length==0||f[f.length-1][0]!=DIFF_EQUAL){f.push([DIFF_EQUAL,b]);g.length1+=c;g.length2+=c}else{if(c>f[f.length-1][1].length){var e=c-f[f.length-1][1].length;f[f.length-1][1]+=b.substring(0,e);g.length1+=e;g.length2+=e}}return b};diff_match_patch.prototype.patch_splitMax=function(a){var i=this.Match_MaxBits;for(var l=0;l<a.length;l++){if(a[l].length1>i){var f=a[l];a.splice(l--,1);var c=f.start1;var b=f.start2;var g="";while(f.diffs.length!==0){var e=new patch_obj();var j=true;e.start1=c-g.length;e.start2=b-g.length;if(g!==""){e.length1=e.length2=g.length;e.diffs.push([DIFF_EQUAL,g])}while(f.diffs.length!==0&&e.length1<i-this.Patch_Margin){var h=f.diffs[0][0];var k=f.diffs[0][1];if(h===DIFF_INSERT){e.length2+=k.length;b+=k.length;e.diffs.push(f.diffs.shift());j=false}else{if(h===DIFF_DELETE&&e.diffs.length==1&&e.diffs[0][0]==DIFF_EQUAL&&k.length>2*i){e.length1+=k.length;c+=k.length;j=false;e.diffs.push([h,k]);f.diffs.shift()}else{k=k.substring(0,i-e.length1-this.Patch_Margin);e.length1+=k.length;c+=k.length;if(h===DIFF_EQUAL){e.length2+=k.length;b+=k.length}else{j=false}e.diffs.push([h,k]);if(k==f.diffs[0][1]){f.diffs.shift()}else{f.diffs[0][1]=f.diffs[0][1].substring(k.length)}}}}g=this.diff_text2(e.diffs);g=g.substring(g.length-this.Patch_Margin);var d=this.diff_text1(f.diffs).substring(0,this.Patch_Margin);if(d!==""){e.length1+=d.length;e.length2+=d.length;if(e.diffs.length!==0&&e.diffs[e.diffs.length-1][0]===DIFF_EQUAL){e.diffs[e.diffs.length-1][1]+=d}else{e.diffs.push([DIFF_EQUAL,d])}}if(!j){a.splice(++l,0,e)}}}}};diff_match_patch.prototype.patch_toText=function(b){var c=[];for(var a=0;a<b.length;a++){c[a]=b[a]}return c.join("")};diff_match_patch.prototype.patch_fromText=function(g){var a=[];if(!g){return a}var h=g.split("\n");var j=0;var b=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;while(j<h.length){var e=h[j].match(b);if(!e){throw new Error("Invalid patch string: "+h[j])}var c=new patch_obj();a.push(c);c.start1=parseInt(e[1],10);if(e[2]===""){c.start1--;c.length1=1}else{if(e[2]=="0"){c.length1=0}else{c.start1--;c.length1=parseInt(e[2],10)}}c.start2=parseInt(e[3],10);if(e[4]===""){c.start2--;c.length2=1}else{if(e[4]=="0"){c.length2=0}else{c.start2--;c.length2=parseInt(e[4],10)}}j++;while(j<h.length){var d=h[j].charAt(0);try{var i=decodeURI(h[j].substring(1))}catch(f){throw new Error("Illegal escape in patch_fromText: "+i)}if(d=="-"){c.diffs.push([DIFF_DELETE,i])}else{if(d=="+"){c.diffs.push([DIFF_INSERT,i])}else{if(d==" "){c.diffs.push([DIFF_EQUAL,i])}else{if(d=="@"){break}else{if(d===""){}else{throw new Error('Invalid patch mode "'+d+'" in: '+i)}}}}}j++}}return a};function patch_obj(){this.diffs=[];this.start1=null;this.start2=null;this.length1=0;this.length2=0}patch_obj.prototype.toString=function(){var b,e;if(this.length1===0){b=this.start1+",0"}else{if(this.length1==1){b=this.start1+1}else{b=(this.start1+1)+","+this.length1}}if(this.length2===0){e=this.start2+",0"}else{if(this.length2==1){e=this.start2+1}else{e=(this.start2+1)+","+this.length2}}var c=["@@ -"+b+" +"+e+" @@\n"];var d;for(var a=0;a<this.diffs.length;a++){switch(this.diffs[a][0]){case DIFF_INSERT:d="+";break;case DIFF_DELETE:d="-";break;case DIFF_EQUAL:d=" ";break}c[a+1]=d+encodeURI(this.diffs[a][1])+"\n"}return c.join("").replace(/%20/g," ")};window.diff_match_patch=diff_match_patch;window.patch_obj=patch_obj;window.DIFF_DELETE=DIFF_DELETE;window.DIFF_INSERT=DIFF_INSERT;window.DIFF_EQUAL=DIFF_EQUAL;