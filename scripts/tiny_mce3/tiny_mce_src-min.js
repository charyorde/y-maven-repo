(function(f){var b=/^\s+|\s+$/g,c=String.prototype.trim,g,e="B".replace(/A(.)|B/,"$1")==="$1";var d={majorVersion:"3",minorVersion:"4.5",releaseDate:"2011-09-06",_init:function(){var x=this,s=document,r=navigator,j=r.userAgent,q,h,o,m,l,u;x.isOpera=f.opera&&opera.buildNumber;x.isWebKit=/WebKit/.test(j);x.isIE=!x.isWebKit&&!x.isOpera&&(/MSIE/gi).test(j)&&(/Explorer/gi).test(r.appName);x.isIE6=x.isIE&&/MSIE [56]/.test(j);x.isIE7=x.isIE&&/MSIE [7]/.test(j);x.isIE8=x.isIE&&/MSIE [8]/.test(j);x.isIE9=x.isIE&&/MSIE [9]/.test(j);x.isGecko=!x.isWebKit&&/Gecko/.test(j);x.isMac=j.indexOf("Mac")!=-1;x.isAir=/adobeair/i.test(j);x.isIDevice=/(iPad|iPhone)/.test(j);x.isIOS5=x.isIDevice&&j.match(/AppleWebKit\/(\d*)/)[1]>=534;if(f.tinyMCEPreInit){x.suffix=tinyMCEPreInit.suffix;x.baseURL=tinyMCEPreInit.base;x.query=tinyMCEPreInit.query;return}x.suffix="";h=s.getElementsByTagName("base");for(q=0;q<h.length;q++){if(u=h[q].href){if(/^https?:\/\/[^\/]+$/.test(u)){u+="/"}m=u?u.match(/.*\//)[0]:""}}function k(i){if(i.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(i.src)){if(/_(src|dev)\.js/g.test(i.src)){x.suffix="_src"}if((l=i.src.indexOf("?"))!=-1){x.query=i.src.substring(l+1)}x.baseURL=i.src.substring(0,i.src.lastIndexOf("/"));if(m&&x.baseURL.indexOf("://")==-1&&x.baseURL.indexOf("/")!==0){x.baseURL=m+x.baseURL}return x.baseURL}return null}h=s.getElementsByTagName("script");for(q=0;q<h.length;q++){if(k(h[q])){return}}o=s.getElementsByTagName("head")[0];if(o){h=o.getElementsByTagName("script");for(q=0;q<h.length;q++){if(k(h[q])){return}}}return},is:function(i,h){if(!h){return i!==g}if(h=="array"&&(i.hasOwnProperty&&i instanceof Array)){return true}return typeof(i)==h},makeMap:function(h,l,k){var j;h=h||[];l=l||",";if(typeof(h)=="string"){h=h.split(l)}k=k||{};j=h.length;while(j--){k[h[j]]={}}return k},each:function(k,h,j){var m,i;if(!k){return 0}j=j||k;if(k.length!==g){for(m=0,i=k.length;m<i;m++){if(h.call(j,k[m],m,k)===false){return 0}}}else{for(m in k){if(Object.prototype.hasOwnProperty.call(k,m)){if(h.call(j,k[m],m,k)===false){return 0}}}}return 1},map:function(h,i){var j=[];d.each(h,function(k){j.push(i(k))});return j},grep:function(h,i){var j=[];d.each(h,function(k){if(!i||i(k)){j.push(k)}});return j},inArray:function(j,k){var m,h;if(j){for(m=0,h=j.length;m<h;m++){if(j[m]===k){return m}}}return -1},extend:function(n,m){var k,j,h=arguments;for(k=1,j=h.length;k<j;k++){m=h[k];d.each(m,function(i,l){if(i!==g){n[l]=i}})}return n},trim:c?function a(h){return h?c.call(h+""):""}:function a(h){return(h?""+h:"").replace(b,"")},create:function(r,h,l){var q=this,i,k,m,n,j,o=0;r=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(r);m=r[3].match(/(^|\.)(\w+)$/i)[2];k=q.createNS(r[3].replace(/\.\w+$/,""),l);if(k[m]){return}if(r[2]=="static"){k[m]=h;if(this.onCreate){this.onCreate(r[2],r[3],k[m])}return}if(!h[m]){h[m]=function(){};o=1}k[m]=h[m];q.extend(k[m].prototype,h);if(r[5]){i=q.resolve(r[5]).prototype;n=r[5].match(/\.(\w+)$/i)[1];j=k[m];if(o){k[m]=function(){return i[n].apply(this,arguments)}}else{k[m]=function(){this.parent=i[n];return j.apply(this,arguments)}}k[m].prototype[m]=k[m];q.each(i,function(p,s){k[m].prototype[s]=i[s]});q.each(h,function(p,s){if(i[s]){k[m].prototype[s]=function(){this.parent=i[s];return p.apply(this,arguments)}}else{if(s!=m){k[m].prototype[s]=p}}})}q.each(h["static"],function(p,s){k[m][s]=p});if(this.onCreate){this.onCreate(r[2],r[3],k[m].prototype)}},walk:function(j,i,k,h){h=h||this;if(j){if(k){j=j[k]}d.each(j,function(m,l){if(i.call(h,m,l,k)===false){return false}d.walk(m,i,k,h)})}},createNS:function(l,k){var j,h;k=k||f;l=l.split(".");for(j=0;j<l.length;j++){h=l[j];if(!k[h]){k[h]={}}k=k[h]}return k},resolve:function(m,k){var j,h;k=k||f;m=m.split(".");for(j=0,h=m.length;j<h;j++){k=k[m[j]];if(!k){break}}return k},addUnload:function(k,j){var i=this;k={func:k,scope:j||this};if(!i.unloads){function h(){var m=i.unloads,p,q;if(m){for(q in m){p=m[q];if(p&&p.func){p.func.call(p.scope,1)}}if(f.detachEvent){f.detachEvent("onbeforeunload",l);f.detachEvent("onunload",h)}else{if(f.removeEventListener){f.removeEventListener("unload",h,false)}}i.unloads=p=m=w=h=0;if(f.CollectGarbage){CollectGarbage()}}}function l(){var n=document;if(n.readyState=="interactive"){function m(){n.detachEvent("onstop",m);if(h){h()}n=0}if(n){n.attachEvent("onstop",m)}f.setTimeout(function(){if(n){n.detachEvent("onstop",m)}},0)}}if(f.attachEvent){f.attachEvent("onunload",h);f.attachEvent("onbeforeunload",l)}else{if(f.addEventListener){f.addEventListener("unload",h,false)}}i.unloads=[k]}else{i.unloads.push(k)}return k},removeUnload:function(j){var h=this.unloads,i=null;d.each(h,function(l,k){if(l&&l.func==j){h.splice(k,1);i=j;return false}});return i},explode:function(h,i){return h?d.map(h.split(i||","),d.trim):h},_addVer:function(i){var h;if(!this.query){return i}h=(i.indexOf("?")==-1?"?":"&")+this.query;if(i.indexOf("#")==-1){return i+h}return i.replace("#",h+"#")},_replace:function(j,h,i){if(e){return i.replace(j,function(){var m=h,k=arguments,l;for(l=0;l<k.length-2;l++){if(k[l]===g){m=m.replace(new RegExp("\\$"+l,"g"),"")}else{m=m.replace(new RegExp("\\$"+l,"g"),k[l])}}return m})}return i.replace(j,h)}};d._init();f.tinymce=f.tinyMCE=d})(window);tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(a){this.scope=a||this;this.listeners=[]},add:function(a,b){this.listeners.push({cb:a,scope:b||this.scope});return a},addToTop:function(a,b){this.listeners.unshift({cb:a,scope:b||this.scope});return a},remove:function(a){var b=this.listeners,c=null;tinymce.each(b,function(e,d){if(a==e.cb){c=a;b.splice(d,1);return false}});return c},dispatch:function(){var f,d=arguments,e,b=this.listeners,g;for(e=0;e<b.length;e++){g=b[e];f=g.cb.apply(g.scope,d);if(f===false){break}}return f}});(function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(e,g){var f=this,i,d,c,h;e=tinymce.trim(e);g=f.settings=g||{};if(/^([\w\-\+]+):(?!\/{2})/i.test(e)||/^\s*#/.test(e)){f.source=e;return}if(e.indexOf("/")===0&&e.indexOf("//")!==0){e=(g.base_uri?g.base_uri.protocol||"http":"http")+"://mce_host"+e}if(!/^[\w-]*:?\/\//.test(e)){h=g.base_uri?g.base_uri.path:new tinymce.util.URI(location.href).directory;e=((g.base_uri&&g.base_uri.protocol)||"http")+"://mce_host"+f.toAbsPath(h,e)}e=e.replace(/@@/g,"(mce_at)");e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(b,j){var k=e[j];if(k){k=k.replace(/\(mce_at\)/g,"@@")}f[b]=k});if(c=g.base_uri){if(!f.protocol){f.protocol=c.protocol}if(!f.userInfo){f.userInfo=c.userInfo}if(!f.port&&f.host=="mce_host"){f.port=c.port}if(!f.host||f.host=="mce_host"){f.host=c.host}f.source=""}},setPath:function(c){var b=this;c=/^(.*?)\/?(\w+)?$/.exec(c);b.path=c[0];b.directory=c[1];b.file=c[2];b.source="";b.getURI()},toRelative:function(b){var c=this,d;if(b==="./"){return b}b=new tinymce.util.URI(b,{base_uri:c});if((b.host!="mce_host"&&c.host!=b.host&&b.host)||c.port!=b.port||c.protocol!=b.protocol){return b.getURI()}d=c.toRelPath(c.path,b.path);if(b.query){d+="?"+b.query}if(b.anchor){d+="#"+b.anchor}return d},toAbsolute:function(b,c){var b=new tinymce.util.URI(b,{base_uri:this});return b.getURI(this.host==b.host&&this.protocol==b.protocol?c:0)},toRelPath:function(g,h){var c,f=0,d="",e,b;g=g.substring(0,g.lastIndexOf("/"));g=g.split("/");c=h.split("/");if(g.length>=c.length){for(e=0,b=g.length;e<b;e++){if(e>=c.length||g[e]!=c[e]){f=e+1;break}}}if(g.length<c.length){for(e=0,b=c.length;e<b;e++){if(e>=g.length||g[e]!=c[e]){f=e+1;break}}}if(f==1){return h}for(e=0,b=g.length-(f-1);e<b;e++){d+="../"}for(e=f-1,b=c.length;e<b;e++){if(e!=f-1){d+="/"+c[e]}else{d+=c[e]}}return d},toAbsPath:function(e,f){var c,b=0,h=[],d,g;d=/\/$/.test(f)?"/":"";e=e.split("/");f=f.split("/");a(e,function(i){if(i){h.push(i)}});e=h;for(c=f.length-1,h=[];c>=0;c--){if(f[c].length==0||f[c]=="."){continue}if(f[c]==".."){b++;continue}if(b>0){b--;continue}h.push(f[c])}c=e.length-b;if(c<=0){g=h.reverse().join("/")}else{g=e.slice(0,c).join("/")+"/"+h.reverse().join("/")}if(g.indexOf("/")!==0){g="/"+g}if(d&&g.lastIndexOf("/")!==g.length-1){g+=d}return g},getURI:function(d){var c,b=this;if(!b.source||d){c="";if(!d){if(b.protocol){c+=b.protocol+"://"}if(b.userInfo){c+=b.userInfo+"@"}if(b.host){c+=b.host}if(b.port){c+=":"+b.port}}if(b.path){c+=b.path}else{c+="/"}if(b.query){c+="?"+b.query}if(b.anchor){c+="#"+b.anchor}b.source=c}return b.source}})})();(function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(d){var b=this.get(d),c;if(b){a(b.split("&"),function(e){e=e.split("=");c=c||{};c[unescape(e[0])]=unescape(e[1])})}return c},setHash:function(j,b,g,f,i,c){var h="";a(b,function(e,d){h+=(!h?"":"&")+escape(d)+"="+escape(e)});this.set(j,h,g,f,i,c)},get:function(i){var h=document.cookie,g,f=i+"=",d;if(!h){return}d=h.indexOf("; "+f);if(d==-1){d=h.indexOf(f);if(d!=0){return null}}else{d+=2}g=h.indexOf(";",d);if(g==-1){g=h.length}return unescape(h.substring(d+f.length,g))},set:function(i,b,g,f,h,c){document.cookie=i+"="+escape(b)+((g)?"; expires="+g.toGMTString():"")+((f)?"; path="+escape(f):"")+((h)?"; domain="+h:"")+((c)?"; secure":"")},remove:function(e,b){var c=new Date();c.setTime(c.getTime()-1000);this.set(e,"",c,b,c)}})})();(function(){function serialize(o,quote){var i,v,t;quote=quote||'"';if(o==null){return"null"}t=typeof o;if(t=="string"){v="\bb\tt\nn\ff\rr\"\"''\\\\";return quote+o.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,b){if(quote==='"'&&a==="'"){return a}i=v.indexOf(b);if(i+1){return"\\"+v.charAt(i+1)}a=b.charCodeAt().toString(16);return"\\u"+"0000".substring(a.length)+a})+quote}if(t=="object"){if(o.hasOwnProperty&&o instanceof Array){for(i=0,v="[";i<o.length;i++){v+=(i>0?",":"")+serialize(o[i],quote)}return v+"]"}v="{";for(i in o){v+=typeof o[i]!="function"?(v.length>1?","+quote:quote)+i+quote+":"+serialize(o[i],quote):""}return v+"}"}return""+o}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}})();tinymce.create("static tinymce.util.XHR",{send:function(g){var a,e,b=window,h=0;g.scope=g.scope||this;g.success_scope=g.success_scope||g.scope;g.error_scope=g.error_scope||g.scope;g.async=g.async===false?false:true;g.data=g.data||"";function d(i){a=0;try{a=new ActiveXObject(i)}catch(c){}return a}a=b.XMLHttpRequest?new XMLHttpRequest():d("Microsoft.XMLHTTP")||d("Msxml2.XMLHTTP");if(a){if(a.overrideMimeType){a.overrideMimeType(g.content_type)}a.open(g.type||(g.data?"POST":"GET"),g.url,g.async);if(g.content_type){a.setRequestHeader("Content-Type",g.content_type)}a.setRequestHeader("X-Requested-With","XMLHttpRequest");a.send(g.data);function f(){if(!g.async||a.readyState==4||h++>10000){if(g.success&&h<10000&&a.status==200){g.success.call(g.success_scope,""+a.responseText,a,g)}else{if(g.error){g.error.call(g.error_scope,h>10000?"TIMED_OUT":"GENERAL",a,g)}}a=null}else{b.setTimeout(f,10)}}if(!g.async){return f()}e=b.setTimeout(f,10)}}});(function(){var c=tinymce.extend,b=tinymce.util.JSON,a=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(d){this.settings=c({},d);this.count=0},send:function(f){var e=f.error,d=f.success;f=c(this.settings,f);f.success=function(h,g){h=b.parse(h);if(typeof(h)=="undefined"){h={error:"JSON Parse error."}}if(h.error){e.call(f.error_scope||f.scope,h.error,g)}else{d.call(f.success_scope||f.scope,h.result)}};f.error=function(h,g){if(e){e.call(f.error_scope||f.scope,h,g)}};f.data=b.serialize({id:f.id||"c"+(this.count++),method:f.method,params:f.params});f.content_type="application/json";a.send(f)},"static":{sendRPC:function(d){return new tinymce.util.JSONRequest().send(d)}}})}());(function(a){a.VK={DELETE:46,BACKSPACE:8,ENTER:13,TAB:9,SPACEBAR:32,UP:38,DOWN:40,modifierPressed:function(b){return b.shiftKey||b.ctrlKey||b.altKey}}})(tinymce);(function(d){var f=d.VK,e=f.BACKSPACE,c=f.DELETE;function b(g){var i=g.dom,h=g.selection;g.onKeyDown.add(function(k,o){var j,p,m,n,l;l=o.keyCode==c;if((l||o.keyCode==e)&&!f.modifierPressed(o)){o.preventDefault();j=h.getRng();p=i.getParent(j.startContainer,i.isBlock);if(l){p=i.getNext(p,i.isBlock)}if(p){m=p.firstChild;if(m&&m.nodeName==="SPAN"){n=m.cloneNode(false)}}k.getDoc().execCommand(l?"ForwardDelete":"Delete",false,null);p=i.getParent(j.startContainer,i.isBlock);d.each(i.select("span.Apple-style-span,font.Apple-style-span",p),function(r){var q=i.createRng();q.setStartBefore(r);q.setEndBefore(r);if(n){i.replace(n.cloneNode(false),r,true)}else{i.remove(r,true)}h.setRng(q)})}})}function a(g){g.onKeyUp.add(function(h,j){var i=j.keyCode;if(i==c||i==e){if(h.dom.isEmpty(h.getBody())){h.setContent("",{format:"raw"});h.nodeChanged();return}}})}d.create("tinymce.util.Quirks",{Quirks:function(g){if(d.isWebKit){b(g);a(g)}if(d.isIE){a(g)}}})})(tinymce);(function(j){var a,g,d,k=/[&<>\"\u007E-\uD7FF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,b=/[<>&\u007E-\uD7FF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=/[<>&\"\']/g,c=/&(#x|#)?([\w]+);/g,i={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"};g={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"};d={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};function h(l){var m;m=document.createElement("div");m.innerHTML=l;return m.textContent||m.innerText||l}function e(m,p){var n,o,l,q={};if(m){m=m.split(",");p=p||10;for(n=0;n<m.length;n+=2){o=String.fromCharCode(parseInt(m[n],p));if(!g[o]){l="&"+m[n+1]+";";q[o]=l;q[l]=o}}return q}}a=e("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);j.html=j.html||{};j.html.Entities={encodeRaw:function(m,l){return m.replace(l?k:b,function(n){return g[n]||n})},encodeAllRaw:function(l){return(""+l).replace(f,function(m){return g[m]||m})},encodeNumeric:function(m,l){return m.replace(l?k:b,function(n){if(n.length>1){return"&#"+(((n.charCodeAt(0)-55296)*1024)+(n.charCodeAt(1)-56320)+65536)+";"}return g[n]||"&#"+n.charCodeAt(0)+";"})},encodeNamed:function(n,l,m){m=m||a;return n.replace(l?k:b,function(o){return g[o]||m[o]||o})},getEncodeFunc:function(l,o){var p=j.html.Entities;o=e(o)||a;function m(r,q){return r.replace(q?k:b,function(s){return g[s]||o[s]||"&#"+s.charCodeAt(0)+";"||s})}function n(r,q){return p.encodeNamed(r,q,o)}l=j.makeMap(l.replace(/\+/g,","));if(l.named&&l.numeric){return m}if(l.named){if(o){return n}return p.encodeNamed}if(l.numeric){return p.encodeNumeric}return p.encodeRaw},decode:function(l){return l.replace(c,function(n,m,o){if(m){o=parseInt(o,m.length===2?16:10);if(o>65535){o-=65536;return String.fromCharCode(55296+(o>>10),56320+(o&1023))}else{return i[o]||String.fromCharCode(o)}}return d[n]||a[n]||h(n)})}}})(tinymce);tinymce.html.Styles=function(d,f){var k=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,h=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,b=/\s*([^:]+):\s*([^;]+);?/g,l=/\s+$/,m=/rgb/,e,g,a={},j;d=d||{};j="\\\" \\' \\; \\: ; : \uFEFF".split(" ");for(g=0;g<j.length;g++){a[j[g]]="\uFEFF"+g;a["\uFEFF"+g]=j[g]}function c(n,q,p,i){function o(r){r=parseInt(r).toString(16);return r.length>1?r:"0"+r}return"#"+o(q)+o(p)+o(i)}return{toHex:function(i){return i.replace(k,c)},parse:function(r){var y={},p,n,v,q,u=d.url_converter,x=d.url_converter_scope||this;function o(C,F){var E,B,A,D;E=y[C+"-top"+F];if(!E){return}B=y[C+"-right"+F];if(E!=B){return}A=y[C+"-bottom"+F];if(B!=A){return}D=y[C+"-left"+F];if(A!=D){return}y[C+F]=D;delete y[C+"-top"+F];delete y[C+"-right"+F];delete y[C+"-bottom"+F];delete y[C+"-left"+F]}function t(B){var C=y[B],A;if(!C||C.indexOf(" ")<0){return}C=C.split(" ");A=C.length;while(A--){if(C[A]!==C[0]){return false}}y[B]=C[0];return true}function z(C,B,A,D){if(!t(B)){return}if(!t(A)){return}if(!t(D)){return}y[C]=y[B]+" "+y[A]+" "+y[D];delete y[B];delete y[A];delete y[D]}function s(A){q=true;return a[A]}function i(B,A){if(q){B=B.replace(/\uFEFF[0-9]/g,function(C){return a[C]})}if(!A){B=B.replace(/\\([\'\";:])/g,"$1")}return B}if(r){r=r.replace(/\\[\"\';:\uFEFF]/g,s).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(A){return A.replace(/[;:]/g,s)});while(p=b.exec(r)){n=p[1].replace(l,"").toLowerCase();v=p[2].replace(l,"");if(n&&v.length>0){if(n==="font-weight"&&v==="700"){v="bold"}else{if(n==="color"||n==="background-color"){v=v.toLowerCase()}}v=v.replace(k,c);v=v.replace(h,function(B,A,E,D,F,C){F=F||C;if(F){F=i(F);return"'"+F.replace(/\'/g,"\\'")+"'"}A=i(A||E||D);if(u){A=u.call(x,A,"style")}return"url('"+A.replace(/\'/g,"\\'")+"')"});y[n]=q?i(v,true):v}b.lastIndex=p.index+p[0].length}o("border","");o("border","-width");o("border","-color");o("border","-style");o("padding","");o("margin","");z("border","border-width","border-style","border-color");if(y.border==="medium none"){delete y.border}}return y},serialize:function(p,r){var o="",n,q;function i(t){var x,u,s,v;x=f.styles[t];if(x){for(u=0,s=x.length;u<s;u++){t=x[u];v=p[t];if(v!==e&&v.length>0){o+=(o.length>0?" ":"")+t+": "+v+";"}}}}if(r&&f&&f.styles){i("*");i(r)}else{for(n in p){q=p[n];if(q!==e&&q.length>0){o+=(o.length>0?" ":"")+n+": "+q+";"}}}return o}}};(function(m){var h={},j,l,g,f,c={},b,e,d=m.makeMap,k=m.each;function i(o,n){return o.split(n||",")}function a(r,q){var o,p={};function n(s){return s.replace(/[A-Z]+/g,function(t){return n(r[t])})}for(o in r){if(r.hasOwnProperty(o)){r[o]=n(r[o])}}n(q).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(v,t,s,u){s=i(s,"|");p[t]={attributes:d(s),attributesOrder:s,children:d(u,"|",{"#comment":{}})}});return p}l="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup";l=d(l,",",d(l.toUpperCase()));h=a({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]");j=d("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,autoplay,loop,controls");g=d("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source");f=m.extend(d("td,th,iframe,video,audio,object"),g);b=d("pre,script,style,textarea");e=d("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");m.html.Schema=function(r){var A=this,n={},o={},y=[],q,p;r=r||{};if(r.verify_html===false){r.valid_elements="*[*]"}if(r.valid_styles){q={};k(r.valid_styles,function(C,B){q[B]=m.explode(C)})}p=r.whitespace_elements?d(r.whitespace_elements):b;function z(B){return new RegExp("^"+B.replace(/([?+*])/g,".$1")+"$")}function t(I){var H,D,W,S,X,C,F,R,U,N,V,Z,L,G,T,B,P,E,Y,aa,M,Q,K=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,O=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,J=/[*?+]/;if(I){I=i(I);if(n["@"]){P=n["@"].attributes;E=n["@"].attributesOrder}for(H=0,D=I.length;H<D;H++){C=K.exec(I[H]);if(C){T=C[1];N=C[2];B=C[3];U=C[4];L={};G=[];F={attributes:L,attributesOrder:G};if(T==="#"){F.paddEmpty=true}if(T==="-"){F.removeEmpty=true}if(P){for(aa in P){L[aa]=P[aa]}G.push.apply(G,E)}if(U){U=i(U,"|");for(W=0,S=U.length;W<S;W++){C=O.exec(U[W]);if(C){R={};Z=C[1];V=C[2].replace(/::/g,":");T=C[3];Q=C[4];if(Z==="!"){F.attributesRequired=F.attributesRequired||[];F.attributesRequired.push(V);R.required=true}if(Z==="-"){delete L[V];G.splice(m.inArray(G,V),1);continue}if(T){if(T==="="){F.attributesDefault=F.attributesDefault||[];F.attributesDefault.push({name:V,value:Q});R.defaultValue=Q}if(T===":"){F.attributesForced=F.attributesForced||[];F.attributesForced.push({name:V,value:Q});R.forcedValue=Q}if(T==="<"){R.validValues=d(Q,"?")}}if(J.test(V)){F.attributePatterns=F.attributePatterns||[];R.pattern=z(V);F.attributePatterns.push(R)}else{if(!L[V]){G.push(V)}L[V]=R}}}}if(!P&&N=="@"){P=L;E=G}if(B){F.outputName=N;n[B]=F}if(J.test(N)){F.pattern=z(N);y.push(F)}else{n[N]=F}}}}}function v(B){n={};y=[];t(B);k(h,function(D,C){o[C]=D.children})}function s(C){var B=/^(~)?(.+)$/;if(C){k(i(C),function(G){var E=B.exec(G),F=E[1]==="~",H=F?"span":"div",D=E[2];o[D]=o[H];c[D]=H;if(!F){l[D]={}}k(o,function(I,J){if(I[H]){I[D]=I[H]}})})}}function u(C){var B=/^([+\-]?)(\w+)\[([^\]]+)\]$/;if(C){k(i(C),function(G){var F=B.exec(G),D,E;if(F){E=F[1];if(E){D=o[F[2]]}else{D=o[F[2]]={"#comment":{}}}D=o[F[2]];k(i(F[3],"|"),function(H){if(E==="-"){delete D[H]}else{D[H]={}}})}})}}function x(B){var D=n[B],C;if(D){return D}C=y.length;while(C--){D=y[C];if(D.pattern.test(B)){return D}}}if(!r.valid_elements){k(h,function(C,B){n[B]={attributes:C.attributes,attributesOrder:C.attributesOrder};o[B]=C.children});k(i("strong/b,em/i"),function(B){B=i(B,"/");n[B[1]].outputName=B[0]});n.img.attributesDefault=[{name:"alt",value:""}];k(i("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr"),function(B){n[B].removeEmpty=true});k(i("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(B){n[B].paddEmpty=true})}else{v(r.valid_elements)}s(r.custom_elements);u(r.valid_children);t(r.extended_valid_elements);u("+ol[ul|ol],+ul[ul|ol]");if(!x("span")){t("span[!data-mce-type|*]")}if(r.invalid_elements){m.each(m.explode(r.invalid_elements),function(B){if(n[B]){delete n[B]}})}A.children=o;A.styles=q;A.getBoolAttrs=function(){return j};A.getBlockElements=function(){return l};A.getShortEndedElements=function(){return g};A.getSelfClosingElements=function(){return e};A.getNonEmptyElements=function(){return f};A.getWhiteSpaceElements=function(){return p};A.isValidChild=function(B,D){var C=o[B];return !!(C&&C[D])};A.getElementRule=x;A.getCustomElements=function(){return c};A.addValidElements=t;A.setValidElements=v;A.addCustomElements=s;A.addValidChildren=u};m.html.Schema.boolAttrMap=j;m.html.Schema.blockElementsMap=l})(tinymce);(function(a){a.html.SaxParser=function(c,e){var b=this,d=function(){};c=c||{};b.schema=e=e||new a.html.Schema();if(c.fix_self_closing!==false){c.fix_self_closing=true}a.each("comment cdata text start end pi doctype".split(" "),function(f){if(f){b[f]=c[f]||d}});b.parse=function(D){var n=this,g,F=0,H,A,z=[],M,P,B,q,y,r,L,G,N,u,m,k,s,Q,o,O,E,R,K,f,I,l,C,J,h,v=0,j=a.html.Entities.decode,x,p;function t(S){var U,T;U=z.length;while(U--){if(z[U].name===S){break}}if(U>=0){for(T=z.length-1;T>=U;T--){S=z[T];if(S.valid){n.end(S.name)}}z.length=U}}l=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)\\s*((?:[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*)>))","g");C=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g;J={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi};L=e.getShortEndedElements();I=e.getSelfClosingElements();G=e.getBoolAttrs();u=c.validate;r=c.remove_internals;x=c.fix_self_closing;p=a.isIE;o=/^:/;while(g=l.exec(D)){if(F<g.index){n.text(j(D.substr(F,g.index-F)))}if(H=g[6]){H=H.toLowerCase();if(p&&o.test(H)){H=H.substr(1)}t(H)}else{if(H=g[7]){H=H.toLowerCase();if(p&&o.test(H)){H=H.substr(1)}N=H in L;if(x&&I[H]&&z.length>0&&z[z.length-1].name===H){t(H)}if(!u||(m=e.getElementRule(H))){k=true;if(u){O=m.attributes;E=m.attributePatterns}if(Q=g[8]){y=Q.indexOf("data-mce-type")!==-1;if(y&&r){k=false}M=[];M.map={};Q.replace(C,function(T,S,X,W,V){var Y,U;S=S.toLowerCase();X=S in G?S:j(X||W||V||"");if(u&&!y&&S.indexOf("data-")!==0){Y=O[S];if(!Y&&E){U=E.length;while(U--){Y=E[U];if(Y.pattern.test(S)){break}}if(U===-1){Y=null}}if(!Y){return}if(Y.validValues&&!(X in Y.validValues)){return}}M.map[S]=X;M.push({name:S,value:X})})}else{M=[];M.map={}}if(u&&!y){R=m.attributesRequired;K=m.attributesDefault;f=m.attributesForced;if(f){P=f.length;while(P--){s=f[P];q=s.name;h=s.value;if(h==="{$uid}"){h="mce_"+v++}M.map[q]=h;M.push({name:q,value:h})}}if(K){P=K.length;while(P--){s=K[P];q=s.name;if(!(q in M.map)){h=s.value;if(h==="{$uid}"){h="mce_"+v++}M.map[q]=h;M.push({name:q,value:h})}}}if(R){P=R.length;while(P--){if(R[P] in M.map){break}}if(P===-1){k=false}}if(M.map["data-mce-bogus"]){k=false}}if(k){n.start(H,M,N)}}else{k=false}if(A=J[H]){A.lastIndex=F=g.index+g[0].length;if(g=A.exec(D)){if(k){B=D.substr(F,g.index-F)}F=g.index+g[0].length}else{B=D.substr(F);F=D.length}if(k&&B.length>0){n.text(B,true)}if(k){n.end(H)}l.lastIndex=F;continue}if(!N){if(!Q||Q.indexOf("/")!=Q.length-1){z.push({name:H,valid:k})}else{if(k){n.end(H)}}}}else{if(H=g[1]){n.comment(H)}else{if(H=g[2]){n.cdata(H)}else{if(H=g[3]){n.doctype(H)}else{if(H=g[4]){n.pi(H,g[5])}}}}}}F=g.index+g[0].length}if(F<D.length){n.text(j(D.substr(F)))}for(P=z.length-1;P>=0;P--){H=z[P];if(H.valid){n.end(H.name)}}}}})(tinymce);(function(d){var c=/^[ \t\r\n]*$/,e={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};function a(k,l,j){var i,h,f=j?"lastChild":"firstChild",g=j?"prev":"next";if(k[f]){return k[f]}if(k!==l){i=k[g];if(i){return i}for(h=k.parent;h&&h!==l;h=h.parent){i=h[g];if(i){return i}}}}function b(f,g){this.name=f;this.type=g;if(g===1){this.attributes=[];this.attributes.map={}}}d.extend(b.prototype,{replace:function(g){var f=this;if(g.parent){g.remove()}f.insert(g,f);f.remove();return f},attr:function(h,l){var f=this,g,j,k;if(typeof h!=="string"){for(j in h){f.attr(j,h[j])}return f}if(g=f.attributes){if(l!==k){if(l===null){if(h in g.map){delete g.map[h];j=g.length;while(j--){if(g[j].name===h){g=g.splice(j,1);return f}}}return f}if(h in g.map){j=g.length;while(j--){if(g[j].name===h){g[j].value=l;break}}}else{g.push({name:h,value:l})}g.map[h]=l;return f}else{return g.map[h]}}},clone:function(){var g=this,n=new b(g.name,g.type),h,f,m,j,k;if(m=g.attributes){k=[];k.map={};for(h=0,f=m.length;h<f;h++){j=m[h];if(j.name!=="id"){k[k.length]={name:j.name,value:j.value};k.map[j.name]=j.value}}n.attributes=k}n.value=g.value;n.shortEnded=g.shortEnded;return n},wrap:function(g){var f=this;f.parent.insert(g,f);g.append(f);return f},unwrap:function(){var f=this,h,g;for(h=f.firstChild;h;){g=h.next;f.insert(h,f,true);h=g}f.remove()},remove:function(){var f=this,h=f.parent,g=f.next,i=f.prev;if(h){if(h.firstChild===f){h.firstChild=g;if(g){g.prev=null}}else{i.next=g}if(h.lastChild===f){h.lastChild=i;if(i){i.next=null}}else{g.prev=i}f.parent=f.next=f.prev=null}return f},append:function(h){var f=this,g;if(h.parent){h.remove()}g=f.lastChild;if(g){g.next=h;h.prev=g;f.lastChild=h}else{f.lastChild=f.firstChild=h}h.parent=f;return h},insert:function(h,f,i){var g;if(h.parent){h.remove()}g=f.parent||this;if(i){if(f===g.firstChild){g.firstChild=h}else{f.prev.next=h}h.prev=f.prev;h.next=f;f.prev=h}else{if(f===g.lastChild){g.lastChild=h}else{f.next.prev=h}h.next=f.next;h.prev=f;f.next=h}h.parent=g;return h},getAll:function(g){var f=this,h,i=[];for(h=f.firstChild;h;h=a(h,f)){if(h.name===g){i.push(h)}}return i},empty:function(){var g=this,f,h,j;if(g.firstChild){f=[];for(j=g.firstChild;j;j=a(j,g)){f.push(j)}h=f.length;while(h--){j=f[h];j.parent=j.firstChild=j.lastChild=j.next=j.prev=null}}g.firstChild=g.lastChild=null;return g},isEmpty:function(k){var f=this,j=f.firstChild,h,g;if(j){do{if(j.type===1){if(j.attributes.map["data-mce-bogus"]){continue}if(k[j.name]){return false}h=j.attributes.length;while(h--){g=j.attributes[h].name;if(g==="name"||g.indexOf("data-")===0){return false}}}if((j.type===3&&!c.test(j.value))){return false}}while(j=a(j,f))}return true},walk:function(f){return a(this,null,f)}});d.extend(b,{create:function(g,f){var i,h;i=new b(g,e[g]||1);if(f){for(h in f){i.attr(h,f[h])}}return i}});d.html.Node=b})(tinymce);(function(b){var a=b.html.Node;b.html.DomParser=function(g,h){var f=this,e={},d=[],i={},c={};g=g||{};g.validate="validate" in g?g.validate:true;g.root_name=g.root_name||"body";f.schema=h=h||new b.html.Schema();function j(m){var o,p,x,v,z,n,q,l,t,u,k,s,y,r;s=b.makeMap("tr,td,th,tbody,thead,tfoot,table");k=h.getNonEmptyElements();for(o=0;o<m.length;o++){p=m[o];if(!p.parent){continue}v=[p];for(x=p.parent;x&&!h.isValidChild(x.name,p.name)&&!s[x.name];x=x.parent){v.push(x)}if(x&&v.length>1){v.reverse();z=n=f.filterNode(v[0].clone());for(t=0;t<v.length-1;t++){if(h.isValidChild(n.name,v[t].name)){q=f.filterNode(v[t].clone());n.append(q)}else{q=n}for(l=v[t].firstChild;l&&l!=v[t+1];){r=l.next;q.append(l);l=r}n=q}if(!z.isEmpty(k)){x.insert(z,v[0],true);x.insert(p,z)}else{x.insert(p,v[0],true)}x=v[0];if(x.isEmpty(k)||x.firstChild===x.lastChild&&x.firstChild.name==="br"){x.empty().remove()}}else{if(p.parent){if(p.name==="li"){y=p.prev;if(y&&(y.name==="ul"||y.name==="ul")){y.append(p);continue}y=p.next;if(y&&(y.name==="ul"||y.name==="ul")){y.insert(p,y.firstChild,true);continue}p.wrap(f.filterNode(new a("ul",1)));continue}if(h.isValidChild(p.parent.name,"div")&&h.isValidChild("div",p.name)){p.wrap(f.filterNode(new a("div",1)))}else{if(p.name==="style"||p.name==="script"){p.empty().remove()}else{p.unwrap()}}}}}}f.filterNode=function(m){var l,k,n;if(k in e){n=i[k];if(n){n.push(m)}else{i[k]=[m]}}l=d.length;while(l--){k=d[l].name;if(k in m.attributes.map){n=c[k];if(n){n.push(m)}else{c[k]=[m]}}}return m};f.addNodeFilter=function(k,l){b.each(b.explode(k),function(m){var n=e[m];if(!n){e[m]=n=[]}n.push(l)})};f.addAttributeFilter=function(k,l){b.each(b.explode(k),function(m){var n;for(n=0;n<d.length;n++){if(d[n].name===m){d[n].callbacks.push(l);return}}d.push({name:m,callbacks:[l]})})};f.parse=function(v,m){var n,H,A,z,C,B,x,r,E,K,y,o,D,J=[],t,k,s,p,u,q;m=m||{};i={};c={};o=b.extend(b.makeMap("script,style,head,html,body,title,meta,param"),h.getBlockElements());u=h.getNonEmptyElements();p=h.children;y=g.validate;q="forced_root_block" in m?m.forced_root_block:g.forced_root_block;s=h.getWhiteSpaceElements();D=/^[ \t\r\n]+/;t=/[ \t\r\n]+$/;k=/[ \t\r\n]+/g;function F(){var L=H.firstChild,l,M;while(L){l=L.next;if(L.type==3||(L.type==1&&L.name!=="p"&&!o[L.name]&&!L.attr("data-mce-type"))){if(!M){M=I(q,1);H.insert(M,L);M.append(L)}else{M.append(L)}}else{M=null}L=l}}function I(l,L){var M=new a(l,L),N;if(l in e){N=i[l];if(N){N.push(M)}else{i[l]=[M]}}return M}function G(M){var N,l,L;for(N=M.prev;N&&N.type===3;){l=N.value.replace(t,"");if(l.length>0){N.value=l;N=N.prev}else{L=N.prev;N.remove();N=L}}}n=new b.html.SaxParser({validate:y,fix_self_closing:!y,cdata:function(l){A.append(I("#cdata",4)).value=l},text:function(M,l){var L;if(!s[A.name]){M=M.replace(k," ");if(A.lastChild&&o[A.lastChild.name]){M=M.replace(D,"")}}if(M.length!==0){L=I("#text",3);L.raw=!!l;A.append(L).value=M}},comment:function(l){A.append(I("#comment",8)).value=l},pi:function(l,L){A.append(I(l,7)).value=L;G(A)},doctype:function(L){var l;l=A.append(I("#doctype",10));l.value=L;G(A)},start:function(l,T,M){var R,O,N,L,P,U,S,Q;N=y?h.getElementRule(l):{};if(N){R=I(N.outputName||l,1);R.attributes=T;R.shortEnded=M;A.append(R);Q=p[A.name];if(Q&&p[R.name]&&!Q[R.name]){J.push(R)}O=d.length;while(O--){P=d[O].name;if(P in T.map){E=c[P];if(E){E.push(R)}else{c[P]=[R]}}}if(o[l]){G(R)}if(!M){A=R}}},end:function(l){var P,M,O,L,N;M=y?h.getElementRule(l):{};if(M){if(o[l]){if(!s[A.name]){for(P=A.firstChild;P&&P.type===3;){O=P.value.replace(D,"");if(O.length>0){P.value=O;P=P.next}else{L=P.next;P.remove();P=L}}for(P=A.lastChild;P&&P.type===3;){O=P.value.replace(t,"");if(O.length>0){P.value=O;P=P.prev}else{L=P.prev;P.remove();P=L}}}P=A.prev;if(P&&P.type===3){O=P.value.replace(D,"");if(O.length>0){P.value=O}else{P.remove()}}}if(M.removeEmpty||M.paddEmpty){if(A.isEmpty(u)){if(M.paddEmpty){A.empty().append(new a("#text","3")).value="\u00a0"}else{if(!A.attributes.map.name){N=A.parent;A.empty().remove();A=N;return}}}}A=A.parent}}},h);H=A=new a(m.context||g.root_name,11);n.parse(v);if(y&&J.length){if(!m.context){j(J)}else{m.invalid=true}}if(q&&H.name=="body"){F()}if(!m.invalid){for(K in i){E=e[K];z=i[K];x=z.length;while(x--){if(!z[x].parent){z.splice(x,1)}}for(C=0,B=E.length;C<B;C++){E[C](z,K,m)}}for(C=0,B=d.length;C<B;C++){E=d[C];if(E.name in c){z=c[E.name];x=z.length;while(x--){if(!z[x].parent){z.splice(x,1)}}for(x=0,r=E.callbacks.length;x<r;x++){E.callbacks[x](z,E.name,m)}}}}return H};if(g.remove_trailing_brs){f.addNodeFilter("br",function(n,m){var r,q=n.length,o,u=h.getBlockElements(),k=h.getNonEmptyElements(),s,p,t;u.body=1;for(r=0;r<q;r++){o=n[r];s=o.parent;if(u[o.parent.name]&&o===s.lastChild){p=o.prev;while(p){t=p.name;if(t!=="span"||p.attr("data-mce-type")!=="bookmark"){if(t!=="br"){break}if(t==="br"){o=null;break}}p=p.prev}if(o){o.remove();if(s.isEmpty(k)){elementRule=h.getElementRule(s.name);if(elementRule){if(elementRule.removeEmpty){s.remove()}else{if(elementRule.paddEmpty){s.empty().append(new b.html.Node("#text",3)).value="\u00a0"}}}}}}}})}}})(tinymce);tinymce.html.Writer=function(e){var c=[],a,b,d,f,g;e=e||{};a=e.indent;b=tinymce.makeMap(e.indent_before||"");d=tinymce.makeMap(e.indent_after||"");f=tinymce.html.Entities.getEncodeFunc(e.entity_encoding||"raw",e.entities);g=e.element_format=="html";return{start:function(m,k,p){var n,j,h,o;if(a&&b[m]&&c.length>0){o=c[c.length-1];if(o.length>0&&o!=="\n"){c.push("\n")}}c.push("<",m);if(k){for(n=0,j=k.length;n<j;n++){h=k[n];c.push(" ",h.name,'="',f(h.value,true),'"')}}if(!p||g){c[c.length]=">"}else{c[c.length]=" />"}if(p&&a&&d[m]&&c.length>0){o=c[c.length-1];if(o.length>0&&o!=="\n"){c.push("\n")}}},end:function(h){var i;c.push("</",h,">");if(a&&d[h]&&c.length>0){i=c[c.length-1];if(i.length>0&&i!=="\n"){c.push("\n")}}},text:function(i,h){if(i.length>0){c[c.length]=h?i:f(i)}},cdata:function(h){c.push("<![CDATA[",h,"]]>")},comment:function(h){c.push("<!--",h,"-->")},pi:function(h,i){if(i){c.push("<?",h," ",i,"?>")}else{c.push("<?",h,"?>")}if(a){c.push("\n")}},doctype:function(h){c.push("<!DOCTYPE",h,">",a?"\n":"")},reset:function(){c.length=0},getContent:function(){return c.join("").replace(/\n$/,"")}}};(function(a){a.html.Serializer=function(c,d){var b=this,e=new a.html.Writer(c);c=c||{};c.validate="validate" in c?c.validate:true;b.schema=d=d||new a.html.Schema();b.writer=e;b.serialize=function(h){var g,i;i=c.validate;g={3:function(k,j){e.text(k.value,k.raw)},8:function(j){e.comment(j.value)},7:function(j){e.pi(j.name,j.value)},10:function(j){e.doctype(j.value)},4:function(j){e.cdata(j.value)},11:function(j){if((j=j.firstChild)){do{f(j)}while(j=j.next)}}};e.reset();function f(k){var t=g[k.type],j,o,s,r,p,u,n,m,q;if(!t){j=k.name;o=k.shortEnded;s=k.attributes;if(i&&s&&s.length>1){u=[];u.map={};q=d.getElementRule(k.name);for(n=0,m=q.attributesOrder.length;n<m;n++){r=q.attributesOrder[n];if(r in s.map){p=s.map[r];u.map[r]=p;u.push({name:r,value:p})}}for(n=0,m=s.length;n<m;n++){r=s[n].name;if(!(r in u.map)){p=s.map[r];u.map[r]=p;u.push({name:r,value:p})}}s=u}e.start(k.name,s,o);if(!o){if((k=k.firstChild)){do{f(k)}while(k=k.next)}e.end(j)}}else{t(k)}}if(h.type==1&&!c.inner){f(h)}else{g[11](h)}return e.getContent()}}})(tinymce);(function(i){var g=i.each,f=i.is,e=i.isWebKit,b=i.isIE,c=i.html.Entities,a=/^([a-z0-9],?)+$/i,h=i.html.Schema.blockElementsMap,j=/^[ \t\r\n]*$/;var d=/base|basefont|frame|link|meta|area|br|col|hr|img|input|param/i;i.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(p,n){var m=this,k,l;m.doc=p;m.win=window;m.files={};m.cssFlicker=false;m.counter=0;m.stdMode=!i.isIE||p.documentMode>=8;m.boxModel=!i.isIE||p.compatMode=="CSS1Compat"||m.stdMode;m.hasOuterHTML="outerHTML" in document.createElement("a");m.settings=n=i.extend({keep_values:false,hex_colors:1},n);m.schema=n.schema;m.styles=new i.html.Styles({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema);if(i.isIE6){try{p.execCommand("BackgroundImageCache",false,true)}catch(o){m.cssFlicker=true}}if(b&&n.schema){("abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video").replace(/\w+/g,function(q){p.createElement(q)});for(l in n.schema.getCustomElements()){p.createElement(l)}}i.addUnload(m.destroy,m)},getRoot:function(){var k=this,l=k.settings;return(l&&k.get(l.root_element))||k.doc.body},getViewPort:function(l){var m,k;l=!l?this.win:l;m=l.document;if(m==null){return{x:0,y:0,w:1,h:1}}k=this.boxModel?m.documentElement:m.body;return{x:l.pageXOffset||k.scrollLeft,y:l.pageYOffset||k.scrollTop,w:l.innerWidth||k.clientWidth,h:l.innerHeight||k.clientHeight}},getRect:function(n){var m,k=this,l;n=k.get(n);m=k.getPos(n);l=k.getSize(n);return{x:m.x,y:m.y,w:l.w,h:l.h}},getSize:function(n){var l=this,k,m;n=l.get(n);k=l.getStyle(n,"width");m=l.getStyle(n,"height");if(k.indexOf("px")===-1){k=0}if(m.indexOf("px")===-1){m=0}return{w:parseInt(k)||n.offsetWidth||n.clientWidth,h:parseInt(m)||n.offsetHeight||n.clientHeight}},getParent:function(m,l,k){return this.getParents(m,l,k,false)},getParents:function(v,q,m,u){var l=this,k,p=l.settings,s=[];v=l.get(v);u=u===undefined;if(p.strict_root){m=m||l.getRoot()}if(f(q,"string")){k=q;if(q==="*"){q=function(o){return o.nodeType==1}}else{q=function(o){return l.is(o,k)}}}while(v){if(v==m||!v.nodeType||v.nodeType===9){break}if(!q||q(v)){if(u){s.push(v)}else{return v}}v=v.parentNode}return u?s:null},get:function(k){var l;if(k&&this.doc&&typeof(k)=="string"){l=k;k=this.doc.getElementById(k);if(k&&k.id!==l){return this.doc.getElementsByName(l)[1]}}return k},getNext:function(l,k){return this._findSib(l,k,"nextSibling")},getPrev:function(l,k){return this._findSib(l,k,"previousSibling")},select:function(m,l){var k=this;return i.dom.Sizzle(m,k.get(l)||k.get(k.settings.root_element)||k.doc,[])},is:function(m,k){var l;if(m.length===undefined){if(k==="*"){return m.nodeType==1}if(a.test(k)){k=k.toLowerCase().split(/,/);m=m.nodeName.toLowerCase();for(l=k.length-1;l>=0;l--){if(k[l]==m){return true}}return false}}return i.dom.Sizzle.matches(k,m.nodeType?[m]:m).length>0},add:function(o,r,k,m,q){var l=this;return this.run(o,function(t){var s,n;s=f(r,"string")?l.doc.createElement(r):r;l.setAttribs(s,k);if(m){if(m.nodeType){s.appendChild(m)}else{l.setHTML(s,m)}}return !q?t.appendChild(s):s})},create:function(m,k,l){return this.add(this.doc.createElement(m),m,k,l,1)},createHTML:function(s,l,q){var r="",p=this,m;r+="<"+s;for(m in l){if(l.hasOwnProperty(m)){r+=" "+m+'="'+p.encode(l[m])+'"'}}if(typeof(q)!="undefined"){return r+">"+q+"</"+s+">"}if(s.match(d)){return r+" />"}else{return r+"></"+s+">"}},remove:function(k,l){return this.run(k,function(n){var o,m=n.parentNode;if(!m){return null}if(l){while(o=n.firstChild){if(!i.isIE||o.nodeType!==3||o.nodeValue){m.insertBefore(o,n)}else{n.removeChild(o)}}}return m.removeChild(n)})},setStyle:function(o,k,l){var m=this;return m.run(o,function(q){var p,n;p=q.style;k=k.replace(/-(\D)/g,function(s,r){return r.toUpperCase()});if(m.pixelStyles.test(k)&&(i.is(l,"number")||/^[\-0-9\.]+$/.test(l))){l+="px"}switch(k){case"opacity":if(b){p.filter=l===""?"":"alpha(opacity="+(l*100)+")";if(!o.currentStyle||!o.currentStyle.hasLayout){p.display="inline-block"}}p[k]=p["-moz-opacity"]=p["-khtml-opacity"]=l||"";break;case"float":b?p.styleFloat=l:p.cssFloat=l;break;default:p[k]=l||""}if(m.settings.update_styles){m.setAttrib(q,"data-mce-style")}})},getStyle:function(o,k,m){o=this.get(o);if(!o){return false}if(this.doc.defaultView&&m){k=k.replace(/[A-Z]/g,function(n){return"-"+n});try{return this.doc.defaultView.getComputedStyle(o,null).getPropertyValue(k)}catch(l){return null}}if(typeof(k)=="undefined"){return false}k=k.replace(/-(\D)/g,function(p,n){return n.toUpperCase()});if(k=="float"){k=b?"styleFloat":"cssFloat"}if(o.currentStyle&&m){return o.currentStyle[k]}return o.style?o.style[k]:undefined},setStyles:function(n,p){var l=this,m=l.settings,k;k=m.update_styles;m.update_styles=0;g(p,function(o,q){l.setStyle(n,q,o)});m.update_styles=k;if(m.update_styles){l.setAttrib(n,m.cssText)}},removeAllAttribs:function(k){return this.run(k,function(n){var m,l=n.attributes;for(m=l.length-1;m>=0;m--){n.removeAttributeNode(l.item(m))}})},setAttrib:function(m,o,k){var l=this;if(!m||!o){return}if(l.settings.strict){o=o.toLowerCase()}return this.run(m,function(p){var n=l.settings;switch(o){case"style":if(!f(k,"string")){g(k,function(q,r){l.setStyle(p,r,q)});return}if(n.keep_values){if(k&&!l._isRes(k)){p.setAttribute("data-mce-style",k,2)}else{p.removeAttribute("data-mce-style",2)}}p.style.cssText=k;break;case"class":p.className=k||"";break;case"src":case"href":if(n.keep_values){if(n.url_converter){k=n.url_converter.call(n.url_converter_scope||l,k,o,p)}l.setAttrib(p,"data-mce-"+o,k,2)}break;case"shape":p.setAttribute("data-mce-style",k);break}if(f(k)&&k!==null&&k.length!==0){p.setAttribute(o,""+k,2)}else{p.removeAttribute(o,2)}})},setAttribs:function(l,m){var k=this;return this.run(l,function(n){g(m,function(o,p){k.setAttrib(n,p,o)})})},getAttrib:function(p,q,m){var k,l=this,o;p=l.get(p);if(!p||p.nodeType!==1){return m===o?false:m}if(!f(m)){m=""}if(/^(?:src|href|style|coords|shape)$/.test(q)){k=p.getAttribute("data-mce-"+q);if(k){return k}}if(b&&l.props[q]){k=p[l.props[q]];k=k&&k.nodeValue?k.nodeValue:k}if(!k){k=p.getAttribute(q,2)}if(/^(?:checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(q)){if(p[l.props[q]]===true&&k===""){return q}return k?q:""}if(p.nodeName==="FORM"&&p.getAttributeNode(q)){return p.getAttributeNode(q).nodeValue}if(q==="style"){k=k||p.style.cssText;if(k){k=l.serializeStyle(l.parseStyle(k),p.nodeName);if(l.settings.keep_values&&!l._isRes(k)){p.setAttribute("data-mce-style",k)}}}if(e&&q==="class"&&k){k=k.replace(/(apple|webkit)\-[a-z\-]+/gi,"")}if(k==null){k=""}if(b){switch(q){case"rowspan":case"colspan":if(k===1){k=""}break;case"size":if(k==="+0"||k===20||k===0){k=""}break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":if(k===0){k=""}break;case"hspace":if(k===-1){k=""}break;case"maxlength":case"tabindex":if(k===32768||k===2147483647||k==="32768"){k=""}break;case"multiple":case"compact":case"noshade":case"nowrap":if(k===65535){return q}return m;case"shape":k=k.toLowerCase();break;default:if(q.indexOf("on")===0&&k){k=i._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+k)}}}return(k!==o&&k!==null&&k!=="")?""+k:m},getPos:function(u,o){var l=this,k=0,s=0,p,q=l.doc,m;u=l.get(u);o=o||q.body;if(u){if(u.getBoundingClientRect){u=u.getBoundingClientRect();p=l.boxModel?q.documentElement:q.body;k=u.left+(q.documentElement.scrollLeft||q.body.scrollLeft)-p.clientTop;s=u.top+(q.documentElement.scrollTop||q.body.scrollTop)-p.clientLeft;return{x:k,y:s}}m=u;while(m&&m!=o&&m.nodeType){k+=m.offsetLeft||0;s+=m.offsetTop||0;m=m.offsetParent}m=u.parentNode;while(m&&m!=o&&m.nodeType){k-=m.scrollLeft||0;s-=m.scrollTop||0;m=m.parentNode}}return{x:k,y:s}},parseStyle:function(k){return this.styles.parse(k)},serializeStyle:function(l,k){return this.styles.serialize(l,k)},loadCSS:function(k){var m=this,n=m.doc,l;if(!k){k=""}l=m.select("head")[0];g(k.split(","),function(o){var p;if(m.files[o]){return}m.files[o]=true;p=m.create("link",{rel:"stylesheet",href:i._addVer(o)});if(b&&n.documentMode&&n.recalc){p.onload=function(){if(n.recalc){n.recalc()}p.onload=null}}l.appendChild(p)})},addClass:function(k,l){return this.run(k,function(m){var n;if(!l){return 0}if(this.hasClass(m,l)){return m.className}n=this.removeClass(m,l);return m.className=(n!=""?(n+" "):"")+l})},removeClass:function(m,n){var k=this,l;return k.run(m,function(p){var o;if(k.hasClass(p,n)){if(!l){l=new RegExp("(^|\\s+)"+n+"(\\s+|$)","g")}o=p.className.replace(l," ");o=i.trim(o!=" "?o:"");p.className=o;if(!o){p.removeAttribute("class");p.removeAttribute("className")}return o}return p.className})},hasClass:function(l,k){l=this.get(l);if(!l||!k){return false}return(" "+l.className+" ").indexOf(" "+k+" ")!==-1},show:function(k){return this.setStyle(k,"display","block")},hide:function(k){return this.setStyle(k,"display","none")},isHidden:function(k){k=this.get(k);return !k||k.style.display=="none"||this.getStyle(k,"display")=="none"},uniqueId:function(k){return(!k?"mce_":k)+(this.counter++)},setHTML:function(m,l){var k=this;return this.run(m,function(t){var o,r,q,v,s,o;l=k.processHTML(l);if(b){function u(){while(t.firstChild){t.firstChild.removeNode()}try{t.innerHTML="<br />"+l;t.removeChild(t.firstChild)}catch(n){o=k.create("div");o.innerHTML="<br />"+l;g(o.childNodes,function(x,p){if(p){t.appendChild(x)}})}}if(k.settings.fix_ie_paragraphs){l=l.replace(/<p><\/p>|<p([^>]+)><\/p>|<p[^\/+]\/>/gi,'<p$1 _mce_keep="true">&nbsp;</p>')}u();if(k.settings.fix_ie_paragraphs){q=t.getElementsByTagName("p");for(r=q.length-1,o=0;r>=0;r--){v=q[r];if(!v.hasChildNodes()){if(!v._mce_keep){o=1;break}v.removeAttribute("_mce_keep")}}}if(o){l=l.replace(/<p ([^>]+)>|<p>/ig,'<div $1 _mce_tmp="1">');l=l.replace(/<\/p>/gi,"</div>");u();if(k.settings.fix_ie_paragraphs){q=t.getElementsByTagName("DIV");for(r=q.length-1;r>=0;r--){v=q[r];if(v._mce_tmp){s=k.doc.createElement("p");v.cloneNode(false).outerHTML.replace(/([a-z0-9\-_]+)=/gi,function(p,n){var x;if(n!=="_mce_tmp"){x=v.getAttribute(n);if(!x&&n==="class"){x=v.className}s.setAttribute(n,x)}});for(o=0;o<v.childNodes.length;o++){s.appendChild(v.childNodes[o].cloneNode(true))}v.swapNode(s)}}}}}else{t.innerHTML=l}return l})},processHTML:function(n){var l=this,m=l.settings,p=[];if(!m.process_html){return n}if(b){n=n.replace(/&apos;/g,"&#39;");n=n.replace(/\s+(disabled|checked|readonly|selected)\s*=\s*[\"\']?(false|0)[\"\']?/gi,"")}n=i._replace(/<a( )([^>]+)\/>|<a\/>/gi,"<a$1$2></a>",n);if(m.keep_values){if(/<script|noscript|style/i.test(n)){function k(q){q=q.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n");q=q.replace(/^[\r\n]*|[\r\n]*$/g,"");q=q.replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"");q=q.replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"");return q}n=n.replace(/<script([^>]+|)>([\s\S]*?)<\/script>/gi,function(q,s,r){if(!s){s=' type="text/javascript"'}s=s.replace(/src=\"([^\"]+)\"?/i,function(t,u){if(m.url_converter){u=l.encode(m.url_converter.call(m.url_converter_scope||l,l.decode(u),"src","script"))}return'data-mce-src="'+u+'"'});if(i.trim(r)){p.push(k(r));r="<!--\nMCE_SCRIPT:"+(p.length-1)+"\n// -->"}return"<mce:script"+s+">"+r+"</mce:script>"});n=n.replace(/<style([^>]+|)>([\s\S]*?)<\/style>/gi,function(q,s,r){if(r){p.push(k(r));r="<!--\nMCE_SCRIPT:"+(p.length-1)+"\n-->"}return"<mce:style"+s+">"+r+"</mce:style><style "+s+' data-mce-bogus="1">'+r+"</style>"});n=n.replace(/<noscript([^>]+|)>([\s\S]*?)<\/noscript>/g,function(q,s,r){return"<mce:noscript"+s+"><!--"+l.encode(r).replace(/--/g,"&#45;&#45;")+"--></mce:noscript>"})}n=i._replace(/<!\[CDATA\[([\s\S]+)\]\]>/g,"<!--[CDATA[$1]]-->",n);function o(q){return q.replace(tagRegExp,function(t,u,s,r){return"<"+u+s.replace(attrRegExp,function(x,v,A,z,y){var B;v=v.toLowerCase();A=A||z||y||"";if(boolAttrs[v]){if(A==="false"||A==="0"){return}return v+'="'+v+'"'}if(mceAttribs[v]&&s.indexOf("data-mce-"+v)==-1){B=l.decode(A);if(m.url_converter&&(v=="src"||v=="href")){B=m.url_converter.call(m.url_converter_scope||l,B,v,u)}if(v=="style"){B=l.serializeStyle(l.parseStyle(B),v)}return v+'="'+A+'" data-mce-'+v+'="'+l.encode(B)+'"'}return x})+r+">"})}n=o(n);n=n.replace(/MCE_SCRIPT:([0-9]+)/g,function(r,q){return p[q]})}return n},getOuterHTML:function(m){var l,k=this;m=k.get(m);if(!m){return null}if(m.nodeType===1&&k.hasOuterHTML){return m.outerHTML}l=(m.ownerDocument||k.doc).createElement("body");l.appendChild(m.cloneNode(true));return l.innerHTML},setOuterHTML:function(n,l,o){var k=this;function m(q,p,s){var t,r;r=s.createElement("body");r.innerHTML=p;t=r.lastChild;while(t){k.insertAfter(t.cloneNode(true),q);t=t.previousSibling}k.remove(q)}return this.run(n,function(q){q=k.get(q);if(q.nodeType==1){o=o||q.ownerDocument||k.doc;if(b){try{if(b&&q.nodeType==1){q.outerHTML=l}else{m(q,l,o)}}catch(p){m(q,l,o)}}else{m(q,l,o)}}})},decode:c.decode,encode:c.encodeAllRaw,insertAfter:function(k,l){l=this.get(l);return this.run(k,function(n){var m,o;m=l.parentNode;o=l.nextSibling;if(o){m.insertBefore(n,o)}else{m.appendChild(n)}return n})},isBlock:function(l){var k=l.nodeType;if(k){return !!(k===1&&h[l.nodeName])}return !!h[l]},replace:function(q,p,l){var m=this;if(f(p,"array")){q=q.cloneNode(true)}return m.run(p,function(k){if(l){g(i.grep(k.childNodes),function(n){q.appendChild(n)})}return k.parentNode.replaceChild(q,k)})},rename:function(n,k){var m=this,l;if(n.nodeName!=k.toUpperCase()){l=m.create(k);g(m.getAttribs(n),function(o){m.setAttrib(l,o.nodeName,m.getAttrib(n,o.nodeName))});m.replace(l,n,1)}return l||n},findCommonAncestor:function(m,k){var n=m,l;while(n){l=k;while(l&&n!=l){l=l.parentNode}if(n==l){break}n=n.parentNode}if(!n&&m.ownerDocument){return m.ownerDocument.documentElement}return n},toHex:function(k){var m=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(k);function l(n){n=parseInt(n).toString(16);return n.length>1?n:"0"+n}if(m){k="#"+l(m[1])+l(m[2])+l(m[3]);return k}return k},getClasses:function(){var o=this,k=[],n,p={},q=o.settings.class_filter,m;if(o.classes){return o.classes}function r(t){g(t.imports,function(s){r(s)});g(t.cssRules||t.rules,function(s){switch(s.type||1){case 1:if(s.selectorText){g(s.selectorText.split(","),function(u){u=u.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(u)||!/\.[\w\-]+$/.test(u)){return}m=u;u=i._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",u);if(q&&!(u=q(u,m))){return}if(!p[u]){k.push({"class":u});p[u]=1}})}break;case 3:r(s.styleSheet);break}})}try{g(o.doc.styleSheets,r)}catch(l){}if(k.length>0){o.classes=k}return k},run:function(n,m,l){var k=this,p;if(k.doc&&typeof(n)==="string"){n=k.get(n)}if(!n){return false}l=l||this;if(!n.nodeType&&(n.length||n.length===0)){p=[];g(n,function(q,o){if(q){if(typeof(q)=="string"){q=k.doc.getElementById(q)}p.push(m.call(l,q,o))}});return p}return m.call(l,n)},getAttribs:function(l){var k;l=this.get(l);if(!l){return[]}if(b){k=[];if(l.nodeName=="OBJECT"){return l.attributes}if(l.nodeName==="OPTION"&&this.getAttrib(l,"selected")){k.push({specified:1,nodeName:"selected"})}l.cloneNode(false).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(m){k.push({specified:1,nodeName:m})});return k}return l.attributes},isEmpty:function(n,l){var s=this,p,o,r,k,m,q;n=n.firstChild;if(n){k=new i.dom.TreeWalker(n);l=l||s.schema?s.schema.getNonEmptyElements():null;do{r=n.nodeType;if(r===1){if(n.getAttribute("data-mce-bogus")){continue}m=n.nodeName.toLowerCase();if(l&&l[m]){q=n.parentNode;if(m==="br"&&s.isBlock(q)&&q.firstChild===n&&q.lastChild===n){continue}return false}o=s.getAttribs(n);p=n.attributes.length;while(p--){m=n.attributes[p].nodeName;if(m==="name"||m==="data-mce-bookmark"){return false}}}if((r===3&&!j.test(n.nodeValue))){return false}}while(n=k.next())}return true},destroy:function(l){var k=this;if(k.events){k.events.destroy()}k.win=k.doc=k.root=k.events=null;if(!l){i.removeUnload(k.destroy)}},createRng:function(){var k=this.doc;return k.createRange?k.createRange():new i.dom.Range(this)},nodeIndex:function(o,p){var k=0,m,n,l;if(o){for(m=o.nodeType,o=o.previousSibling,n=o;o;o=o.previousSibling){l=o.nodeType;if(p&&l==3){if(l==m||!o.nodeValue.length){continue}}k++;m=l}}return k},split:function(o,n,s){var u=this,k=u.createRng(),p,m,q;function l(x){var t,r=x.childNodes,v=x.nodeType;if(v==1&&x.getAttribute("data-mce-type")=="bookmark"){return}for(t=r.length-1;t>=0;t--){l(r[t])}if(v!=9){if(v==3&&x.nodeValue.length>0){if(!u.isBlock(x.parentNode)||i.trim(x.nodeValue).length>0){return}}else{if(v==1){r=x.childNodes;if(r.length==1&&r[0]&&r[0].nodeType==1&&r[0].getAttribute("data-mce-type")=="bookmark"){x.parentNode.insertBefore(r[0],x)}if(r.length||/^(?:br|hr|input|img|li|td|th)$/i.test(x.nodeName)){return}}}u.remove(x)}return x}if(o&&n){k.setStart(o.parentNode,u.nodeIndex(o));k.setEnd(n.parentNode,u.nodeIndex(n));p=u._extractRangeContents(k);k=u.createRng();k.setStart(n.parentNode,u.nodeIndex(n)+1);k.setEnd(o.parentNode,u.nodeIndex(o)+1);m=u._extractRangeContents(k);q=o.parentNode;q.insertBefore(l(p),o);if(s){q.insertBefore(s,o)}else{q.insertBefore(n,o)}q.insertBefore(l(m),o);u.remove(o);return s||n}},bind:function(o,k,n,m){var l=this;if(!l.events){l.events=new i.dom.EventUtils()}return l.events.add(o,k,n,m||this)},unbind:function(n,k,m){var l=this;if(!l.events){l.events=new i.dom.EventUtils()}return l.events.remove(n,k,m)},_extractRangeContents:(function(){if(i.isIE9){return function k(n){var m=new i.dom.Range(this);m.setStart(n.startContainer,n.startOffset);m.setEnd(n.endContainer,n.endOffset);var o=m.extractContents();n.setStart(m.startContainer,m.startOffset);n.setEnd(m.endContainer,m.endOffset);return o}}return function l(m){return m.extractContents()}})(),_findSib:function(n,k,l){var m=this,o=k;if(n){if(f(o,"string")){o=function(p){return m.is(p,k)}}for(n=n[l];n;n=n[l]){if(o(n)){return n}}}return null},_isRes:function(k){return/^(top|left|bottom|right|width|height)/i.test(k)||/;\s*(top|left|bottom|right|width|height)/i.test(k)}});i.DOM=new i.dom.DOMUtils(document,{process_html:0})})(tinymce);(function(a){function b(c){var O=this,f=c.doc,T=0,F=1,k=2,E=true,S=false,V="startOffset",i="startContainer",Q="endContainer",A="endOffset",l=tinymce.extend,o=c.nodeIndex;l(O,{startContainer:f,startOffset:0,endContainer:f,endOffset:0,collapsed:E,commonAncestorContainer:f,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:r,setEnd:u,setStartBefore:h,setStartAfter:J,setEndBefore:K,setEndAfter:v,collapse:B,selectNode:y,selectNodeContents:G,compareBoundaryPoints:x,deleteContents:q,extractContents:I,cloneContents:e,insertNode:D,surroundContents:N,cloneRange:L});O.toString=d;function d(){var W=this.cloneContents();var t=[];var X=W.firstChild;while(X){if(X.nodeType==3){t.push(X.nodeValue)}else{if(X.nodeType==1){if(X.innerText!=null){t.push(X.innerText)}else{t.push(X.textContent)}}}X=X.nextSibling}return t.join("")}function r(W,t){C(E,W,t)}function u(W,t){C(S,W,t)}function h(t){r(t.parentNode,o(t))}function J(t){r(t.parentNode,o(t)+1)}function K(t){u(t.parentNode,o(t))}function v(t){u(t.parentNode,o(t)+1)}function B(t){if(t){O[Q]=O[i];O[A]=O[V]}else{O[i]=O[Q];O[V]=O[A]}O.collapsed=E;O.commonAncestorContainer=O[i]}function y(t){h(t);v(t)}function G(t){r(t,0);u(t,t.nodeType===1?t.childNodes.length:t.nodeValue.length)}function x(Z,t){var ac=O[i],X=O[V],ab=O[Q],W=O[A],aa=t.startContainer,ae=t.startOffset,Y=t.endContainer,ad=t.endOffset;if(Z===0){return H(ac,X,aa,ae)}if(Z===1){return H(ab,W,aa,ae)}if(Z===2){return H(ab,W,Y,ad)}if(Z===3){return H(ac,X,Y,ad)}}function q(){m(k)}function I(){return m(T)}function e(){return m(F)}function D(Z){var W=this[i],t=this[V],Y,X;if((W.nodeType===3||W.nodeType===4)&&W.nodeValue){if(!t){W.parentNode.insertBefore(Z,W)}else{if(t>=W.nodeValue.length){c.insertAfter(Z,W)}else{Y=W.splitText(t);W.parentNode.insertBefore(Z,Y)}}}else{if(W.childNodes.length>0){X=W.childNodes[t]}if(X){W.insertBefore(Z,X)}else{W.appendChild(Z)}}}function N(W){var t=O.extractContents();O.insertNode(W);W.appendChild(t);O.selectNode(W)}function L(){return l(new b(c),{startContainer:O[i],startOffset:O[V],endContainer:O[Q],endOffset:O[A],collapsed:O.collapsed,commonAncestorContainer:O.commonAncestorContainer})}function P(t,W){var X;if(t.nodeType==3){return t}if(W<0){return t}X=t.firstChild;while(X&&W>0){--W;X=X.nextSibling}if(X){return X}return t}function n(){return(O[i]==O[Q]&&O[V]==O[A])}function H(Y,aa,W,Z){var ab,X,t,ac,ae,ad;if(Y==W){if(aa==Z){return 0}if(aa<Z){return -1}return 1}ab=W;while(ab&&ab.parentNode!=Y){ab=ab.parentNode}if(ab){X=0;t=Y.firstChild;while(t!=ab&&X<aa){X++;t=t.nextSibling}if(aa<=X){return -1}return 1}ab=Y;while(ab&&ab.parentNode!=W){ab=ab.parentNode}if(ab){X=0;t=W.firstChild;while(t!=ab&&X<Z){X++;t=t.nextSibling}if(X<Z){return -1}return 1}ac=c.findCommonAncestor(Y,W);ae=Y;while(ae&&ae.parentNode!=ac){ae=ae.parentNode}if(!ae){ae=ac}ad=W;while(ad&&ad.parentNode!=ac){ad=ad.parentNode}if(!ad){ad=ac}if(ae==ad){return 0}t=ac.firstChild;while(t){if(t==ae){return -1}if(t==ad){return 1}t=t.nextSibling}}function C(W,Z,Y){var t,X;if(W){O[i]=Z;O[V]=Y}else{O[Q]=Z;O[A]=Y}t=O[Q];while(t.parentNode){t=t.parentNode}X=O[i];while(X.parentNode){X=X.parentNode}if(X==t){if(H(O[i],O[V],O[Q],O[A])>0){O.collapse(W)}}else{O.collapse(W)}O.collapsed=n();O.commonAncestorContainer=c.findCommonAncestor(O[i],O[Q])}function m(ac){var ab,Y=0,ae=0,W,aa,X,Z,t,ad;if(O[i]==O[Q]){return g(ac)}for(ab=O[Q],W=ab.parentNode;W;ab=W,W=W.parentNode){if(W==O[i]){return s(ab,ac)}++Y}for(ab=O[i],W=ab.parentNode;W;ab=W,W=W.parentNode){if(W==O[Q]){return U(ab,ac)}++ae}aa=ae-Y;X=O[i];while(aa>0){X=X.parentNode;aa--}Z=O[Q];while(aa<0){Z=Z.parentNode;aa++}for(t=X.parentNode,ad=Z.parentNode;t!=ad;t=t.parentNode,ad=ad.parentNode){X=t;Z=ad}return p(X,Z,ac)}function g(aa){var ac,Z,Y,ab,t,X,W;if(aa!=k){ac=f.createDocumentFragment()}if(O[V]==O[A]){return ac}if(O[i].nodeType==3){Z=O[i].nodeValue;Y=Z.substring(O[V],O[A]);if(aa!=F){O[i].deleteData(O[V],O[A]-O[V]);O.collapse(E)}if(aa==k){return}ac.appendChild(f.createTextNode(Y));return ac}ab=P(O[i],O[V]);t=O[A]-O[V];while(t>0){X=ab.nextSibling;W=z(ab,aa);if(ac){ac.appendChild(W)}--t;ab=X}if(aa!=F){O.collapse(E)}return ac}function s(ac,Z){var ab,aa,W,t,Y,X;if(Z!=k){ab=f.createDocumentFragment()}aa=j(ac,Z);if(ab){ab.appendChild(aa)}W=o(ac);t=W-O[V];if(t<=0){if(Z!=F){O.setEndBefore(ac);O.collapse(S)}return ab}aa=ac.previousSibling;while(t>0){Y=aa.previousSibling;X=z(aa,Z);if(ab){ab.insertBefore(X,ab.firstChild)}--t;aa=Y}if(Z!=F){O.setEndBefore(ac);O.collapse(S)}return ab}function U(aa,Z){var ac,W,ab,t,Y,X;if(Z!=k){ac=f.createDocumentFragment()}ab=R(aa,Z);if(ac){ac.appendChild(ab)}W=o(aa);++W;t=O[A]-W;ab=aa.nextSibling;while(t>0){Y=ab.nextSibling;X=z(ab,Z);if(ac){ac.appendChild(X)}--t;ab=Y}if(Z!=F){O.setStartAfter(aa);O.collapse(E)}return ac}function p(aa,t,ad){var X,af,Z,ab,ac,W,ae,Y;if(ad!=k){af=f.createDocumentFragment()}X=R(aa,ad);if(af){af.appendChild(X)}Z=aa.parentNode;ab=o(aa);ac=o(t);++ab;W=ac-ab;ae=aa.nextSibling;while(W>0){Y=ae.nextSibling;X=z(ae,ad);if(af){af.appendChild(X)}ae=Y;--W}X=j(t,ad);if(af){af.appendChild(X)}if(ad!=F){O.setStartAfter(aa);O.collapse(E)}return af}function j(ab,ac){var X=P(O[Q],O[A]-1),ad,aa,Z,t,W,Y=X!=O[Q];if(X==ab){return M(X,Y,S,ac)}ad=X.parentNode;aa=M(ad,S,S,ac);while(ad){while(X){Z=X.previousSibling;t=M(X,Y,S,ac);if(ac!=k){aa.insertBefore(t,aa.firstChild)}Y=E;X=Z}if(ad==ab){return aa}X=ad.previousSibling;ad=ad.parentNode;W=M(ad,S,S,ac);if(ac!=k){W.appendChild(aa)}aa=W}}function R(ab,ac){var Y=P(O[i],O[V]),Z=Y!=O[i],ad,aa,X,t,W;if(Y==ab){return M(Y,Z,E,ac)}ad=Y.parentNode;aa=M(ad,S,E,ac);while(ad){while(Y){X=Y.nextSibling;t=M(Y,Z,E,ac);if(ac!=k){aa.appendChild(t)}Z=E;Y=X}if(ad==ab){return aa}Y=ad.nextSibling;ad=ad.parentNode;W=M(ad,S,E,ac);if(ac!=k){W.appendChild(aa)}aa=W}}function M(t,Z,ac,ad){var Y,X,aa,W,ab;if(Z){return z(t,ad)}if(t.nodeType==3){Y=t.nodeValue;if(ac){W=O[V];X=Y.substring(W);aa=Y.substring(0,W)}else{W=O[A];X=Y.substring(0,W);aa=Y.substring(W)}if(ad!=F){t.nodeValue=aa}if(ad==k){return}ab=t.cloneNode(S);ab.nodeValue=X;return ab}if(ad==k){return}return t.cloneNode(S)}function z(W,t){if(t!=k){return t==F?W.cloneNode(E):W}W.parentNode.removeChild(W)}}a.Range=b})(tinymce.dom);(function(){function a(d){var b=this,h=d.dom,c=true,f=false;function e(i,j){var k,t=0,q,n,m,l,o,r,p=-1,s;k=i.duplicate();k.collapse(j);s=k.parentElement();if(s.ownerDocument!==d.dom.doc){return}while(s.contentEditable==="false"){s=s.parentNode}if(!s.hasChildNodes()){return{node:s,inside:1}}m=s.children;q=m.length-1;while(t<=q){r=Math.floor((t+q)/2);l=m[r];k.moveToElementText(l);p=k.compareEndPoints(j?"StartToStart":"EndToEnd",i);if(p>0){q=r-1}else{if(p<0){t=r+1}else{return{node:l}}}}if(p<0){if(!l){k.moveToElementText(s);k.collapse(true);l=s;n=true}else{k.collapse(false)}k.setEndPoint(j?"EndToStart":"EndToEnd",i);if(k.compareEndPoints(j?"StartToStart":"StartToEnd",i)>0){k=i.duplicate();k.collapse(j);o=-1;while(s==k.parentElement()){if(k.move("character",-1)==0){break}o++}}o=o||k.text.replace("\r\n"," ").length}else{k.collapse(true);k.setEndPoint(j?"StartToStart":"StartToEnd",i);o=k.text.replace("\r\n"," ").length}return{node:l,position:p,offset:o,inside:n}}function g(){var i=d.getRng(),r=h.createRng(),l,k,p,q,m,j;l=i.item?i.item(0):i.parentElement();if(l.ownerDocument!=h.doc){return r}k=d.isCollapsed();if(i.item){r.setStart(l.parentNode,h.nodeIndex(l));r.setEnd(r.startContainer,r.startOffset+1);return r}function o(A){var u=e(i,A),s,y,z=0,x,v,t;s=u.node;y=u.offset;if(u.inside&&!s.hasChildNodes()){r[A?"setStart":"setEnd"](s,0);return}if(y===v){r[A?"setStartBefore":"setEndAfter"](s);return}if(u.position<0){x=u.inside?s.firstChild:s.nextSibling;if(!x){r[A?"setStartAfter":"setEndAfter"](s);return}if(!y){if(x.nodeType==3){r[A?"setStart":"setEnd"](x,0)}else{r[A?"setStartBefore":"setEndBefore"](x)}return}while(x){t=x.nodeValue;z+=t.length;if(z>=y){s=x;z-=y;z=t.length-z;break}x=x.nextSibling}}else{x=s.previousSibling;if(!x){return r[A?"setStartBefore":"setEndBefore"](s)}if(!y){if(s.nodeType==3){r[A?"setStart":"setEnd"](x,s.nodeValue.length)}else{r[A?"setStartAfter":"setEndAfter"](x)}return}while(x){z+=x.nodeValue.length;if(z>=y){s=x;z-=y;break}x=x.previousSibling}}r[A?"setStart":"setEnd"](s,z)}try{o(true);if(!k){o()}}catch(n){if(n.number==-2147024809){m=b.getBookmark(2);p=i.duplicate();p.collapse(true);l=p.parentElement();if(!k){p=i.duplicate();p.collapse(false);q=p.parentElement();q.innerHTML=q.innerHTML}l.innerHTML=l.innerHTML;b.moveToBookmark(m);i=d.getRng();o(true);if(!k){o()}}else{throw n}}return r}this.getBookmark=function(m){var j=d.getRng(),o,i,l={};function n(u){var u,t,p,s,r,q=[];t=u.parentNode;p=h.getRoot().parentNode;while(t!=p){s=t.children;r=s.length;while(r--){if(u===s[r]){q.push(r);break}}u=t;t=t.parentNode}return q}function k(q){var p;p=e(j,q);if(p){return{position:p.position,offset:p.offset,indexes:n(p.node),inside:p.inside}}}if(m===2){if(!j.item){l.start=k(true);if(!d.isCollapsed()){l.end=k()}}else{l.start={ctrl:true,indexes:n(j.item(0))}}}return l};this.moveToBookmark=function(k){var j,i=h.doc.body;function m(o){var r,q,n,p;r=h.getRoot();for(q=o.length-1;q>=0;q--){p=r.children;n=o[q];if(n<=p.length-1){r=p[n]}}return r}function l(r){var n=k[r?"start":"end"],q,p,o;if(n){q=n.position>0;p=i.createTextRange();p.moveToElementText(m(n.indexes));offset=n.offset;if(offset!==o){p.collapse(n.inside||q);p.moveStart("character",q?-offset:offset)}else{p.collapse(r)}j.setEndPoint(r?"StartToStart":"EndToStart",p);if(r){j.collapse(true)}}}if(k.start){if(k.start.ctrl){j=i.createControlRange();j.addElement(m(k.start.indexes));j.select()}else{j=i.createTextRange();l(true);l();j.select()}}};this.addRange=function(i){var n,l,k,p,s,q,r=d.dom.doc,m=r.body;function j(z){var u,y,t,x,v;t=h.create("a");u=z?k:s;y=z?p:q;x=n.duplicate();if(u==r||u==r.documentElement){u=m;y=0}if(u.nodeType==3){u.parentNode.insertBefore(t,u);x.moveToElementText(t);x.moveStart("character",y);h.remove(t);n.setEndPoint(z?"StartToStart":"EndToEnd",x)}else{v=u.childNodes;if(v.length){if(y>=v.length){h.insertAfter(t,v[v.length-1])}else{u.insertBefore(t,v[y])}x.moveToElementText(t)}else{t=r.createTextNode("\uFEFF");u.appendChild(t);x.moveToElementText(t.parentNode);x.collapse(c)}n.setEndPoint(z?"StartToStart":"EndToEnd",x);h.remove(t)}}k=i.startContainer;p=i.startOffset;s=i.endContainer;q=i.endOffset;n=m.createTextRange();if(k==s&&k.nodeType==1&&p==q-1){if(p==q-1){try{l=m.createControlRange();l.addElement(k.childNodes[p]);l.select();return}catch(o){}}}j(true);j();n.select()};this.getRangeAt=g}tinymce.dom.TridentSelection=a})();(function(){var p=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,j=0,d=Object.prototype.toString,o=false,i=true;[0,0].sort(function(){i=false;return 0});var b=function(v,e,z,A){z=z||[];e=e||document;var C=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!v||typeof v!=="string"){return z}var x=[],s,E,H,r,u=true,t=b.isXML(e),B=v,D,G,F,y;do{p.exec("");s=p.exec(B);if(s){B=s[3];x.push(s[1]);if(s[2]){r=s[3];break}}}while(s);if(x.length>1&&k.exec(v)){if(x.length===2&&f.relative[x[0]]){E=h(x[0]+x[1],e)}else{E=f.relative[x[0]]?[e]:b(x.shift(),e);while(x.length){v=x.shift();if(f.relative[v]){v+=x.shift()}E=h(v,E)}}}else{if(!A&&x.length>1&&e.nodeType===9&&!t&&f.match.ID.test(x[0])&&!f.match.ID.test(x[x.length-1])){D=b.find(x.shift(),e,t);e=D.expr?b.filter(D.expr,D.set)[0]:D.set[0]}if(e){D=A?{expr:x.pop(),set:a(A)}:b.find(x.pop(),x.length===1&&(x[0]==="~"||x[0]==="+")&&e.parentNode?e.parentNode:e,t);E=D.expr?b.filter(D.expr,D.set):D.set;if(x.length>0){H=a(E)}else{u=false}while(x.length){G=x.pop();F=G;if(!f.relative[G]){G=""}else{F=x.pop()}if(F==null){F=e}f.relative[G](H,F,t)}}else{H=x=[]}}if(!H){H=E}if(!H){b.error(G||v)}if(d.call(H)==="[object Array]"){if(!u){z.push.apply(z,H)}else{if(e&&e.nodeType===1){for(y=0;H[y]!=null;y++){if(H[y]&&(H[y]===true||H[y].nodeType===1&&b.contains(e,H[y]))){z.push(E[y])}}}else{for(y=0;H[y]!=null;y++){if(H[y]&&H[y].nodeType===1){z.push(E[y])}}}}}else{a(H,z)}if(r){b(r,C,z,A);b.uniqueSort(z)}return z};b.uniqueSort=function(r){if(c){o=i;r.sort(c);if(o){for(var e=1;e<r.length;e++){if(r[e]===r[e-1]){r.splice(e--,1)}}}}return r};b.matches=function(e,r){return b(e,null,null,r)};b.find=function(y,e,z){var x;if(!y){return[]}for(var t=0,s=f.order.length;t<s;t++){var v=f.order[t],u;if((u=f.leftMatch[v].exec(y))){var r=u[1];u.splice(1,1);if(r.substr(r.length-1)!=="\\"){u[1]=(u[1]||"").replace(/\\/g,"");x=f.find[v](u,e,z);if(x!=null){y=y.replace(f.match[v],"");break}}}}if(!x){x=e.getElementsByTagName("*")}return{set:x,expr:y}};b.filter=function(C,B,F,u){var s=C,H=[],z=B,x,e,y=B&&B[0]&&b.isXML(B[0]);while(C&&B.length){for(var A in f.filter){if((x=f.leftMatch[A].exec(C))!=null&&x[2]){var r=f.filter[A],G,E,t=x[1];e=false;x.splice(1,1);if(t.substr(t.length-1)==="\\"){continue}if(z===H){H=[]}if(f.preFilter[A]){x=f.preFilter[A](x,z,F,H,u,y);if(!x){e=G=true}else{if(x===true){continue}}}if(x){for(var v=0;(E=z[v])!=null;v++){if(E){G=r(E,x,v,z);var D=u^!!G;if(F&&G!=null){if(D){e=true}else{z[v]=false}}else{if(D){H.push(E);e=true}}}}}if(G!==undefined){if(!F){z=H}C=C.replace(f.match[A],"");if(!e){return[]}break}}}if(C===s){if(e==null){b.error(C)}else{break}}s=C}return z};b.error=function(e){throw"Syntax error, unrecognized expression: "+e};var f=b.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(x,r){var t=typeof r==="string",v=t&&!/\W/.test(r),y=t&&!v;if(v){r=r.toLowerCase()}for(var s=0,e=x.length,u;s<e;s++){if((u=x[s])){while((u=u.previousSibling)&&u.nodeType!==1){}x[s]=y||u&&u.nodeName.toLowerCase()===r?u||false:u===r}}if(y){b.filter(r,x,true)}},">":function(x,r){var u=typeof r==="string",v,s=0,e=x.length;if(u&&!/\W/.test(r)){r=r.toLowerCase();for(;s<e;s++){v=x[s];if(v){var t=v.parentNode;x[s]=t.nodeName.toLowerCase()===r?t:false}}}else{for(;s<e;s++){v=x[s];if(v){x[s]=u?v.parentNode:v.parentNode===r}}if(u){b.filter(r,x,true)}}},"":function(t,r,v){var s=j++,e=q,u;if(typeof r==="string"&&!/\W/.test(r)){r=r.toLowerCase();u=r;e=n}e("parentNode",r,s,t,u,v)},"~":function(t,r,v){var s=j++,e=q,u;if(typeof r==="string"&&!/\W/.test(r)){r=r.toLowerCase();u=r;e=n}e("previousSibling",r,s,t,u,v)}},find:{ID:function(r,s,t){if(typeof s.getElementById!=="undefined"&&!t){var e=s.getElementById(r[1]);return e?[e]:[]}},NAME:function(s,v){if(typeof v.getElementsByName!=="undefined"){var r=[],u=v.getElementsByName(s[1]);for(var t=0,e=u.length;t<e;t++){if(u[t].getAttribute("name")===s[1]){r.push(u[t])}}return r.length===0?null:r}},TAG:function(e,r){return r.getElementsByTagName(e[1])}},preFilter:{CLASS:function(t,r,s,e,x,y){t=" "+t[1].replace(/\\/g,"")+" ";if(y){return t}for(var u=0,v;(v=r[u])!=null;u++){if(v){if(x^(v.className&&(" "+v.className+" ").replace(/[\t\n]/g," ").indexOf(t)>=0)){if(!s){e.push(v)}}else{if(s){r[u]=false}}}}return false},ID:function(e){return e[1].replace(/\\/g,"")},TAG:function(r,e){return r[1].toLowerCase()},CHILD:function(e){if(e[1]==="nth"){var r=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(r[1]+(r[2]||1))-0;e[3]=r[3]-0}e[0]=j++;return e},ATTR:function(u,r,s,e,v,x){var t=u[1].replace(/\\/g,"");if(!x&&f.attrMap[t]){u[1]=f.attrMap[t]}if(u[2]==="~="){u[4]=" "+u[4]+" "}return u},PSEUDO:function(u,r,s,e,v){if(u[1]==="not"){if((p.exec(u[3])||"").length>1||/^\w/.test(u[3])){u[3]=b(u[3],null,null,r)}else{var t=b.filter(u[3],r,s,true^v);if(!s){e.push.apply(e,t)}return false}}else{if(f.match.POS.test(u[0])||f.match.CHILD.test(u[0])){return true}}return u},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){e.parentNode.selectedIndex;return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(s,r,e){return !!b(e[3],s).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||e.nodeName.toLowerCase()==="button"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)}},setFilters:{first:function(r,e){return e===0},last:function(s,r,e,t){return r===t.length-1},even:function(r,e){return e%2===0},odd:function(r,e){return e%2===1},lt:function(s,r,e){return r<e[3]-0},gt:function(s,r,e){return r>e[3]-0},nth:function(s,r,e){return e[3]-0===r},eq:function(s,r,e){return e[3]-0===r}},filter:{PSEUDO:function(s,y,x,z){var e=y[1],r=f.filters[e];if(r){return r(s,x,y,z)}else{if(e==="contains"){return(s.textContent||s.innerText||b.getText([s])||"").indexOf(y[3])>=0}else{if(e==="not"){var t=y[3];for(var v=0,u=t.length;v<u;v++){if(t[v]===s){return false}}return true}else{b.error("Syntax error, unrecognized expression: "+e)}}}},CHILD:function(e,t){var x=t[1],r=e;switch(x){case"only":case"first":while((r=r.previousSibling)){if(r.nodeType===1){return false}}if(x==="first"){return true}r=e;case"last":while((r=r.nextSibling)){if(r.nodeType===1){return false}}return true;case"nth":var s=t[2],A=t[3];if(s===1&&A===0){return true}var v=t[0],z=e.parentNode;if(z&&(z.sizcache!==v||!e.nodeIndex)){var u=0;for(r=z.firstChild;r;r=r.nextSibling){if(r.nodeType===1){r.nodeIndex=++u}}z.sizcache=v}var y=e.nodeIndex-A;if(s===0){return y===0}else{return(y%s===0&&y/s>=0)}}},ID:function(r,e){return r.nodeType===1&&r.getAttribute("id")===e},TAG:function(r,e){return(e==="*"&&r.nodeType===1)||r.nodeName.toLowerCase()===e},CLASS:function(r,e){return(" "+(r.className||r.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(v,t){var s=t[1],e=f.attrHandle[s]?f.attrHandle[s](v):v[s]!=null?v[s]:v.getAttribute(s),x=e+"",u=t[2],r=t[4];return e==null?u==="!=":u==="="?x===r:u==="*="?x.indexOf(r)>=0:u==="~="?(" "+x+" ").indexOf(r)>=0:!r?x&&e!==false:u==="!="?x!==r:u==="^="?x.indexOf(r)===0:u==="$="?x.substr(x.length-r.length)===r:u==="|="?x===r||x.substr(0,r.length+1)===r+"-":false},POS:function(u,r,s,v){var e=r[2],t=f.setFilters[e];if(t){return t(u,s,r,v)}}}};var k=f.match.POS,g=function(r,e){return"\\"+(e-0+1)};for(var m in f.match){f.match[m]=new RegExp(f.match[m].source+(/(?![^\[]*\])(?![^\(]*\))/.source));f.leftMatch[m]=new RegExp(/(^(?:.|\r|\n)*?)/.source+f.match[m].source.replace(/\\(\d+)/g,g))}var a=function(r,e){r=Array.prototype.slice.call(r,0);if(e){e.push.apply(e,r);return e}return r};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(l){a=function(u,t){var r=t||[],s=0;if(d.call(u)==="[object Array]"){Array.prototype.push.apply(r,u)}else{if(typeof u.length==="number"){for(var e=u.length;s<e;s++){r.push(u[s])}}else{for(;u[s];s++){r.push(u[s])}}}return r}}var c;if(document.documentElement.compareDocumentPosition){c=function(r,e){if(!r.compareDocumentPosition||!e.compareDocumentPosition){if(r==e){o=true}return r.compareDocumentPosition?-1:1}var s=r.compareDocumentPosition(e)&4?-1:r===e?0:1;if(s===0){o=true}return s}}else{if("sourceIndex" in document.documentElement){c=function(r,e){if(!r.sourceIndex||!e.sourceIndex){if(r==e){o=true}return r.sourceIndex?-1:1}var s=r.sourceIndex-e.sourceIndex;if(s===0){o=true}return s}}else{if(document.createRange){c=function(t,r){if(!t.ownerDocument||!r.ownerDocument){if(t==r){o=true}return t.ownerDocument?-1:1}var s=t.ownerDocument.createRange(),e=r.ownerDocument.createRange();s.setStart(t,0);s.setEnd(t,0);e.setStart(r,0);e.setEnd(r,0);var u=s.compareBoundaryPoints(Range.START_TO_END,e);if(u===0){o=true}return u}}}}b.getText=function(e){var r="",t;for(var s=0;e[s];s++){t=e[s];if(t.nodeType===3||t.nodeType===4){r+=t.nodeValue}else{if(t.nodeType!==8){r+=b.getText(t.childNodes)}}}return r};(function(){var r=document.createElement("div"),s="script"+(new Date()).getTime();r.innerHTML="<a name='"+s+"'/>";var e=document.documentElement;e.insertBefore(r,e.firstChild);if(document.getElementById(s)){f.find.ID=function(u,v,x){if(typeof v.getElementById!=="undefined"&&!x){var t=v.getElementById(u[1]);return t?t.id===u[1]||typeof t.getAttributeNode!=="undefined"&&t.getAttributeNode("id").nodeValue===u[1]?[t]:undefined:[]}};f.filter.ID=function(v,t){var u=typeof v.getAttributeNode!=="undefined"&&v.getAttributeNode("id");return v.nodeType===1&&u&&u.nodeValue===t}}e.removeChild(r);e=r=null})();(function(){var e=document.createElement("div");e.appendChild(document.createComment(""));if(e.getElementsByTagName("*").length>0){f.find.TAG=function(r,v){var u=v.getElementsByTagName(r[1]);if(r[1]==="*"){var t=[];for(var s=0;u[s];s++){if(u[s].nodeType===1){t.push(u[s])}}u=t}return u}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){f.attrHandle.href=function(r){return r.getAttribute("href",2)}}e=null})();if(document.querySelectorAll){(function(){var e=b,s=document.createElement("div");s.innerHTML="<p class='TEST'></p>";if(s.querySelectorAll&&s.querySelectorAll(".TEST").length===0){return}b=function(x,v,t,u){v=v||document;if(!u&&v.nodeType===9&&!b.isXML(v)){try{return a(v.querySelectorAll(x),t)}catch(y){}}return e(x,v,t,u)};for(var r in e){b[r]=e[r]}s=null})()}(function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}f.order.splice(1,0,"CLASS");f.find.CLASS=function(r,s,t){if(typeof s.getElementsByClassName!=="undefined"&&!t){return s.getElementsByClassName(r[1])}};e=null})();function n(r,x,v,A,y,z){for(var t=0,s=A.length;t<s;t++){var e=A[t];if(e){e=e[r];var u=false;while(e){if(e.sizcache===v){u=A[e.sizset];break}if(e.nodeType===1&&!z){e.sizcache=v;e.sizset=t}if(e.nodeName.toLowerCase()===x){u=e;break}e=e[r]}A[t]=u}}}function q(r,x,v,A,y,z){for(var t=0,s=A.length;t<s;t++){var e=A[t];if(e){e=e[r];var u=false;while(e){if(e.sizcache===v){u=A[e.sizset];break}if(e.nodeType===1){if(!z){e.sizcache=v;e.sizset=t}if(typeof x!=="string"){if(e===x){u=true;break}}else{if(b.filter(x,[e]).length>0){u=e;break}}}e=e[r]}A[t]=u}}}b.contains=document.compareDocumentPosition?function(r,e){return !!(r.compareDocumentPosition(e)&16)}:function(r,e){return r!==e&&(r.contains?r.contains(e):true)};b.isXML=function(e){var r=(e?e.ownerDocument||e:0).documentElement;return r?r.nodeName!=="HTML":false};var h=function(e,y){var t=[],u="",v,s=y.nodeType?[y]:y;while((v=f.match.PSEUDO.exec(e))){u+=v[0];e=e.replace(f.match.PSEUDO,"")}e=f.relative[e]?e+"*":e;for(var x=0,r=s.length;x<r;x++){b(e,s[x],t)}return b.filter(u,t)};window.tinymce.dom.Sizzle=b})();(function(d){var f=d.each,c=d.DOM,b=d.isIE,e=d.isWebKit,a;d.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[];this.events=[]},add:function(m,p,l,j){var g,h=this,i=h.events,k;if(p instanceof Array){k=[];f(p,function(o){k.push(h.add(m,o,l,j))});return k}if(m&&m.hasOwnProperty&&m instanceof Array){k=[];f(m,function(n){n=c.get(n);k.push(h.add(n,p,l,j))});return k}m=c.get(m);if(!m){return}g=function(n){if(h.disabled){return}n=n||window.event;if(n&&b){if(!n.target){n.target=n.srcElement}d.extend(n,h._stoppers)}if(!j){return l(n)}return l.call(j,n)};if(p=="unload"){d.unloads.unshift({func:g});return g}if(p=="init"){if(h.domLoaded){g()}else{h.inits.push(g)}return g}i.push({obj:m,name:p,func:l,cfunc:g,scope:j});h._add(m,p,g);return l},remove:function(l,m,k){var h=this,g=h.events,i=false,j;if(l&&l.hasOwnProperty&&l instanceof Array){j=[];f(l,function(n){n=c.get(n);j.push(h.remove(n,m,k))});return j}l=c.get(l);f(g,function(o,n){if(o.obj==l&&o.name==m&&(!k||(o.func==k||o.cfunc==k))){g.splice(n,1);h._remove(l,m,o.cfunc);i=true;return false}});return i},clear:function(l){var j=this,g=j.events,h,k;if(l){l=c.get(l);for(h=g.length-1;h>=0;h--){k=g[h];if(k.obj===l){j._remove(k.obj,k.name,k.cfunc);k.obj=k.cfunc=null;g.splice(h,1)}}}},cancel:function(g){if(!g){return false}this.stop(g);return this.prevent(g)},stop:function(g){if(g.stopPropagation){g.stopPropagation()}else{g.cancelBubble=true}return false},prevent:function(g){if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}return false},destroy:function(){var g=this;f(g.events,function(j,h){g._remove(j.obj,j.name,j.cfunc);j.obj=j.cfunc=null});g.events=[];g=null},_add:function(h,i,g){if(h.attachEvent){h.attachEvent("on"+i,g)}else{if(h.addEventListener){h.addEventListener(i,g,false)}else{h["on"+i]=g}}},_remove:function(i,j,h){if(i){try{if(i.detachEvent){i.detachEvent("on"+j,h)}else{if(i.removeEventListener){i.removeEventListener(j,h,false)}else{i["on"+j]=null}}}catch(g){}}},_pageInit:function(h){var g=this;if(g.domLoaded){return}g.domLoaded=true;f(g.inits,function(i){i()});g.inits=[]},_wait:function(i){var g=this,h=i.document;if(i.tinyMCE_GZ&&tinyMCE_GZ.loaded){g.domLoaded=1;return}if(h.attachEvent){h.attachEvent("onreadystatechange",function(){if(h.readyState==="complete"){h.detachEvent("onreadystatechange",arguments.callee);g._pageInit(i)}});if(h.documentElement.doScroll&&i==i.top){(function(){if(g.domLoaded){return}try{h.documentElement.doScroll("left")}catch(j){setTimeout(arguments.callee,0);return}g._pageInit(i)})()}}else{if(h.addEventListener){g._add(i,"DOMContentLoaded",function(){g._pageInit(i)})}}g._add(i,"load",function(){g._pageInit(i)})},_stoppers:{preventDefault:function(){this.returnValue=false},stopPropagation:function(){this.cancelBubble=true}}});a=d.dom.Event=new d.dom.EventUtils();a._wait(window);d.addUnload(function(){a.destroy()})})(tinymce);(function(a){a.dom.Element=function(f,d){var b=this,e,c;b.settings=d=d||{};b.id=f;b.dom=e=d.dom||a.DOM;if(!a.isIE){c=e.get(b.id)}a.each(("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get").split(/,/),function(g){b[g]=function(){var h=[f],j;for(j=0;j<arguments.length;j++){h.push(arguments[j])}h=e[g].apply(e,h);b.update(g);return h}});a.extend(b,{on:function(i,h,g){return a.dom.Event.add(b.id,i,h,g)},getXY:function(){return{x:parseInt(b.getStyle("left")),y:parseInt(b.getStyle("top"))}},getSize:function(){var g=e.get(b.id);return{w:parseInt(b.getStyle("width")||g.clientWidth),h:parseInt(b.getStyle("height")||g.clientHeight)}},moveTo:function(g,h){b.setStyles({left:g,top:h})},moveBy:function(g,i){var h=b.getXY();b.moveTo(h.x+g,h.y+i)},resizeTo:function(g,i){b.setStyles({width:g,height:i})},resizeBy:function(g,j){var i=b.getSize();b.resizeTo(i.w+g,i.h+j)},update:function(h){var g;if(a.isIE6&&d.blocker){h=h||"";if(h.indexOf("get")===0||h.indexOf("has")===0||h.indexOf("is")===0){return}if(h=="remove"){e.remove(b.blocker);return}if(!b.blocker){b.blocker=e.uniqueId();g=e.add(d.container||e.getRoot(),"iframe",{id:b.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'});e.setStyle(g,"opacity",0)}else{g=e.get(b.blocker)}e.setStyles(g,{left:b.getStyle("left",1),top:b.getStyle("top",1),width:b.getStyle("width",1),height:b.getStyle("height",1),display:b.getStyle("display",1),zIndex:parseInt(b.getStyle("zIndex",1)||0)-1})}}})}})(tinymce);(function(d){function f(g){return g.replace(/[\n\r]+/g,"")}var c=d.is,b=d.isIE,e=d.each;d.create("tinymce.dom.Selection",{Selection:function(j,i,h){var g=this;g.dom=j;g.win=i;g.serializer=h;e(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(k){g[k]=new d.util.Dispatcher(g)});if(!g.win.getSelection){g.tridentSel=new d.dom.TridentSelection(g)}if(d.isIE&&j.boxModel){this._fixIESelection()}d.addUnload(g.destroy,g)},setCursorLocation:function(i,j){var g=this;var h=g.dom.createRng();h.setStart(i,j);h.setEnd(i,j);g.setRng(h);g.collapse(false)},getContent:function(h){var g=this,i=g.getRng(),m=g.dom.create("body"),k=g.getSel(),j,l,o;h=h||{};j=l="";h.get=true;h.format=h.format||"html";h.forced_root_block="";g.onBeforeGetContent.dispatch(g,h);if(h.format=="text"){return g.isCollapsed()?"":(i.text||(k.toString?k.toString():""))}if(i.cloneContents){o=i.cloneContents();if(o){m.appendChild(o)}}else{if(c(i.item)||c(i.htmlText)){m.innerHTML="<br>"+(i.item?i.item(0).outerHTML:i.htmlText);m.removeChild(m.firstChild)}else{m.innerHTML=i.toString()}}if(/^\s/.test(m.innerHTML)){j=" "}if(/\s+$/.test(m.innerHTML)){l=" "}h.getInner=true;h.content=g.isCollapsed()?"":j+g.serializer.serialize(m,h)+l;g.onGetContent.dispatch(g,h);return h.content},setContent:function(h,j){var o=this,g=o.getRng(),k,l=o.win.document,n,m;j=j||{format:"html"};j.set=true;h=j.content=h;if(!j.no_events){o.onBeforeSetContent.dispatch(o,j)}h=j.content;if(g.insertNode){h+='<span id="__caret">_</span>';if(g.startContainer==l&&g.endContainer==l){l.body.innerHTML=h}else{g.deleteContents();if(l.body.childNodes.length==0){l.body.innerHTML=h}else{if(g.createContextualFragment){g.insertNode(g.createContextualFragment(h))}else{n=l.createDocumentFragment();m=l.createElement("div");n.appendChild(m);m.outerHTML=h;g.insertNode(n)}}}k=o.dom.get("__caret");g=l.createRange();g.setStartBefore(k);g.setEndBefore(k);o.setRng(g);o.dom.remove("__caret");try{o.setRng(g)}catch(i){}}else{if(g.item){l.execCommand("Delete",false,null);g=o.getRng()}if(/^\s+/.test(h)){g.pasteHTML('<span id="__mce_tmp">_</span>'+h);o.dom.remove("__mce_tmp")}else{g.pasteHTML(h)}}if(!j.no_events){o.onSetContent.dispatch(o,j)}},getStart:function(){var h=this.getRng(),i,g,k,j;if(h.duplicate||h.item){if(h.item){return h.item(0)}k=h.duplicate();k.collapse(1);i=k.parentElement();g=j=h.parentElement();while(j=j.parentNode){if(j==i){i=g;break}}if(i&&i.nodeName=="BODY"){return i.firstChild||i}return i}else{i=h.startContainer;if(i.nodeType==1&&i.hasChildNodes()){i=i.childNodes[Math.min(i.childNodes.length-1,h.startOffset)]}if(i&&i.nodeType==3){return i.parentNode}return i}},getEnd:function(){var h=this,i=h.getRng(),j,g;if(i.duplicate||i.item){if(i.item){return i.item(0)}i=i.duplicate();i.collapse(0);j=i.parentElement();if(j&&j.nodeName=="BODY"){return j.lastChild||j}return j}else{j=i.endContainer;g=i.endOffset;if(j.nodeType==1&&j.hasChildNodes()){j=j.childNodes[g>0?g-1:g]}if(j&&j.nodeType==3){return j.parentNode}return j}},getBookmark:function(s,u){var x=this,n=x.dom,h,k,j,o,i,p,q,m="\uFEFF",v;function g(y,z){var t=0;e(n.select(y),function(B,A){if(B==z){t=A}});return t}if(s==2){function l(){var y=x.getRng(true),t=n.getRoot(),z={};function A(D,I){var C=D[I?"startContainer":"endContainer"],H=D[I?"startOffset":"endOffset"],B=[],E,G,F=0;if(C.nodeType==3){if(u){for(E=C.previousSibling;E&&E.nodeType==3;E=E.previousSibling){H+=E.nodeValue.length}}B.push(H)}else{G=C.childNodes;if(H>=G.length&&G.length){F=1;H=Math.max(0,G.length-1)}B.push(x.dom.nodeIndex(G[H],u)+F)}for(;C&&C!=t;C=C.parentNode){B.push(x.dom.nodeIndex(C,u))}return B}z.start=A(y,true);if(!x.isCollapsed()){z.end=A(y)}return z}if(x.tridentSel){return x.tridentSel.getBookmark(s)}return l()}if(s){return{rng:x.getRng()}}h=x.getRng();j=n.uniqueId();o=tinyMCE.activeEditor.selection.isCollapsed();v="overflow:hidden;line-height:0px";if(h.duplicate||h.item){if(!h.item){k=h.duplicate();try{h.collapse();h.pasteHTML('<span data-mce-type="bookmark" id="'+j+'_start" style="'+v+'">'+m+"</span>");if(!o){k.collapse(false);h.moveToElementText(k.parentElement());if(h.compareEndPoints("StartToEnd",k)==0){k.move("character",-1)}k.pasteHTML('<span data-mce-type="bookmark" id="'+j+'_end" style="'+v+'">'+m+"</span>")}}catch(r){return null}}else{p=h.item(0);i=p.nodeName;return{name:i,index:g(i,p)}}}else{p=x.getNode();i=p.nodeName;if(i=="IMG"&&h.toString()==""){return{name:i,index:g(i,p)}}k=h.cloneRange();if(!o){k.collapse(false);k.insertNode(n.create("span",{"data-mce-type":"bookmark",id:j+"_end",style:v},m))}h.collapse(true);h.insertNode(n.create("span",{"data-mce-type":"bookmark",id:j+"_start",style:v},m))}x.moveToBookmark({id:j,keep:1});return{id:j}},moveToBookmark:function(o){var s=this,m=s.dom,j,i,g,r,k,u,p,q;if(o){if(o.start){g=m.createRng();r=m.getRoot();function h(A){var t=o[A?"start":"end"],x,y,z,v;if(t){z=t[0];for(y=r,x=t.length-1;x>=1;x--){v=y.childNodes;if(t[x]>v.length-1){return}y=v[t[x]]}if(y.nodeType===3){z=Math.min(t[0],y.nodeValue.length)}if(y.nodeType===1){z=Math.min(t[0],y.childNodes.length)}if(A){g.setStart(y,z)}else{g.setEnd(y,z)}}return true}if(s.tridentSel){return s.tridentSel.moveToBookmark(o)}if(h(true)&&h()){s.setRng(g)}}else{if(o.id){function l(B){var v=m.get(o.id+"_"+B),A,t,y,z,x=o.keep;if(v){A=v.parentNode;if(B=="start"){if(!x){t=m.nodeIndex(v)}else{A=v.firstChild;t=1}k=u=A;p=q=t}else{if(!x){t=m.nodeIndex(v)}else{A=v.firstChild;t=1}u=A;q=t}if(!x){z=v.previousSibling;y=v.nextSibling;e(d.grep(v.childNodes),function(C){if(C.nodeType==3){C.nodeValue=C.nodeValue.replace(/\uFEFF/g,"")}});while(v=m.get(o.id+"_"+B)){m.remove(v,1)}if(z&&y&&z.nodeType==y.nodeType&&z.nodeType==3&&!d.isOpera){t=z.nodeValue.length;z.appendData(y.nodeValue);m.remove(y);if(B=="start"){k=u=z;p=q=t}else{u=z;q=t}}}}}function n(t){if(!b&&m.isBlock(t)&&!t.innerHTML){t.innerHTML='<br data-mce-bogus="1" />'}return t}l("start");l("end");if(k){g=m.createRng();g.setStart(n(k),p);g.setEnd(n(u),q);s.setRng(g)}}else{if(o.name){s.select(m.select(o.name)[o.index])}else{if(o.rng){s.setRng(o.rng)}}}}}},select:function(l,k){var j=this,m=j.dom,h=m.createRng(),g;if(l){g=m.nodeIndex(l);h.setStart(l.parentNode,g);h.setEnd(l.parentNode,g+1);if(k){function i(n,p){var o=new d.dom.TreeWalker(n,n);do{if(n.nodeType==3&&d.trim(n.nodeValue).length!=0){if(p){h.setStart(n,0)}else{h.setEnd(n,n.nodeValue.length)}return}if(n.nodeName=="BR"){if(p){h.setStartBefore(n)}else{h.setEndBefore(n)}return}}while(n=(p?o.next():o.prev()))}i(l,1);i(l)}j.setRng(h)}return l},isCollapsed:function(){var g=this,i=g.getRng(),h=g.getSel();if(!i||i.item){return false}if(i.compareEndPoints){return i.compareEndPoints("StartToEnd",i)===0}return !h||i.collapsed},collapse:function(g){var i=this,h=i.getRng(),j;if(h.item){j=h.item(0);h=i.win.document.body.createTextRange();h.moveToElementText(j)}h.collapse(!!g);i.setRng(h)},getSel:function(){var h=this,g=this.win;return g.getSelection?g.getSelection():g.document.selection},getRng:function a(m){var h=this,i,j,l,k=h.win.document;if(m&&h.tridentSel){return h.tridentSel.getRangeAt(0)}try{i=h.getSel();if(i&&i.rangeCount>0){j=i.getRangeAt(0)}else{if(a.lastRng){j=a.lastRng}else{if(i&&i.createRange){j=i.createRange()}else{j=k.createRange()}}}if(d.isIE&&j&&j.setStart&&k.selection.createRange().item){l=k.selection.createRange().item(0);j=k.createRange();j.setStartBefore(l);j.setEndAfter(l)}}catch(g){console.log("failed to get current range; creating a new one instead.",g)}if(!j){j=k.createRange?k.createRange():k.body.createTextRange()}if(h.selectedRange&&h.explicitRange){if(j.compareBoundaryPoints(j.START_TO_START,h.selectedRange)===0&&j.compareBoundaryPoints(j.END_TO_END,h.selectedRange)===0){j=h.explicitRange}else{h.selectedRange=null;h.explicitRange=null}}if(j&&((j.getParentElement&&j.getParentElement().ownerDocument==k)||(j.startContainer&&j.startContainer.ownerDocument==k))){a.lastRng=j}else{a.lastRng=null}return j},setRng:function(j){var i,h=this;if(!h.tridentSel){i=h.getSel();if(i){h.explicitRange=j;try{i.removeAllRanges()}catch(g){}i.addRange(j);h.selectedRange=i.getRangeAt(0)}}else{if(j.cloneRange){h.tridentSel.addRange(j);return}try{j.select()}catch(g){}}},setNode:function(h){var g=this;g.setContent(g.dom.getOuterHTML(h));return h},getNode:function(){var i=this,h=i.getRng(),j=i.getSel(),m,l=h.startContainer,g=h.endContainer;if(!h){return i.dom.getRoot()}if(h.setStart){m=h.commonAncestorContainer;if(!h.collapsed){if(h.startContainer==h.endContainer){if(h.endOffset-h.startOffset<2){if(h.startContainer.hasChildNodes()){m=h.startContainer.childNodes[h.startOffset]}}}if(l.nodeType===3&&g.nodeType===3){function k(q,o){var p=q;while(q&&q.nodeType===3&&q.length===0){q=o?q.nextSibling:q.previousSibling}return q||p}if(l.length===h.startOffset){l=k(l.nextSibling,true)}else{l=l.parentNode}if(h.endOffset===0){g=k(g.previousSibling,false)}else{g=g.parentNode}if(l&&l===g){return l}}}if(m&&m.nodeType==3){return m.parentNode}return m}return h.item?h.item(0):h.parentElement()},getSelectedBlocks:function(h,g){var j=this,k=j.dom,o,i,m,l=[];o=k.getParent(h||j.getStart(),k.isBlock);i=k.getParent(g||j.getEnd(),k.isBlock);if(o){l.push(o)}if(o&&i&&o!=i){m=o;while((m=m.nextSibling)&&m!=i){if(k.isBlock(m)){l.push(m)}}}if(i&&o!=i){l.push(i)}return l},normalize:function(){var h=this,g,j;if(d.isIE){return}function i(q){var l,p,o,n=h.dom,k=n.getRoot(),m;l=g[(q?"start":"end")+"Container"];p=g[(q?"start":"end")+"Offset"];if(l.nodeType===9){l=l.body;p=0}if(l===k){if(l.hasChildNodes()){l=l.childNodes[Math.min(!q&&p>0?p-1:p,l.childNodes.length-1)];p=0;if(l.hasChildNodes()){m=l;o=new d.dom.TreeWalker(l,k);do{if(m.nodeType===3){p=q?0:m.nodeValue.length-1;l=m;break}if(m.nodeName==="BR"){p=n.nodeIndex(m);l=m.parentNode;break}}while(m=(q?o.next():o.prev()));j=true}}}if(j){g["set"+(q?"Start":"End")](l,p)}}g=h.getRng();i(true);if(g.collapsed){i()}if(j){h.setRng(g)}},destroy:function(h){var g=this;g.win=null;g.getRng.lastRng=null;if(!h){d.removeUnload(g.destroy)}},_fixIESelection:function(){var h=this.dom,n=h.doc,i=n.body,k,o,g;n.documentElement.unselectable=true;function j(p,s){var q=i.createTextRange();try{q.moveToPoint(p,s)}catch(r){q=null}return q}function m(q){var p;if(q.button){p=j(q.x,q.y);if(p){if(p.compareEndPoints("StartToStart",o)>0){p.setEndPoint("StartToStart",o)}else{p.setEndPoint("EndToEnd",o)}p.select()}}else{l()}return false}function l(){var p=n.selection.createRange();if(o&&!p.item&&p.compareEndPoints("StartToEnd",p)===0){o.select()}h.unbind(n,"mouseup",l);h.unbind(n,"mousemove",m);o=k=0}h.bind(n,["mousedown","contextmenu"],function(p){if(p.target.nodeName==="HTML"){if(k){l()}g=n.documentElement;if(g.scrollHeight>g.clientHeight){return}k=1;o=j(p.x,p.y);if(o){h.bind(n,"mouseup",l);h.bind(n,"mousemove",m);h.win.focus();o.select()}return false}})}})})(tinymce);(function(a){a.dom.Serializer=function(e,i,f){var h,b,d=a.isIE,g=a.each,c;if(!e.apply_source_formatting){e.indent=false}e.remove_trailing_brs=true;i=i||a.DOM;f=f||new a.html.Schema(e);e.entity_encoding=e.entity_encoding||"named";h=new a.util.Dispatcher(self);b=new a.util.Dispatcher(self);c=new a.html.DomParser(e,f);c.addAttributeFilter("src,href,style",function(k,j){var o=k.length,l,q,n="data-mce-"+j,p=e.url_converter,r=e.url_converter_scope,m;while(o--){l=k[o];q=l.attributes.map[n];if(q!==m){l.attr(j,q.length>0?q:null);l.attr(n,null)}else{q=l.attributes.map[j];if(j==="style"){q=i.serializeStyle(i.parseStyle(q),l.name)}else{if(p){q=p.call(r,q,j,l.name)}}l.attr(j,q.length>0?q:null)}}});c.addAttributeFilter("class",function(j,k){var l=j.length,m,n;while(l--){m=j[l];n=m.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,"");m.attr("class",n.length>0?n:null)}});c.addAttributeFilter("data-mce-type",function(j,l,k){var m=j.length,n;while(m--){n=j[m];if(n.attributes.map["data-mce-type"]==="bookmark"&&!k.cleanup){n.remove()}}});c.addNodeFilter("script,style",function(k,l){var m=k.length,n,o;function j(p){return p.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"").replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"")}while(m--){n=k[m];o=n.firstChild?n.firstChild.value:"";if(l==="script"){n.attr("type",(n.attr("type")||"text/javascript").replace(/^mce\-/,""));if(o.length>0){n.firstChild.value="// <![CDATA[\n"+j(o)+"\n// ]]>"}}else{if(o.length>0){n.firstChild.value="<!--\n"+j(o)+"\n-->"}}}});c.addNodeFilter("#comment",function(j,k){var l=j.length,m;while(l--){m=j[l];if(m.value.indexOf("[CDATA[")===0){m.name="#cdata";m.type=4;m.value=m.value.replace(/^\[CDATA\[|\]\]$/g,"")}else{if(m.value.indexOf("mce:protected ")===0){m.name="#text";m.type=3;m.raw=true;m.value=unescape(m.value).substr(14)}}}});c.addNodeFilter("xml:namespace,input",function(j,k){var l=j.length,m;while(l--){m=j[l];if(m.type===7){m.remove()}else{if(m.type===1){if(k==="input"&&!("type" in m.attributes.map)){m.attr("type","text")}}}}});if(e.fix_list_elements){c.addNodeFilter("ul,ol",function(k,l){var m=k.length,n,j;while(m--){n=k[m];j=n.parent;if(j.name==="ul"||j.name==="ol"){if(n.prev&&n.prev.name==="li"){n.prev.append(n)}}}})}c.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(j,k){var l=j.length;while(l--){j[l].attr(k,null)}});return{schema:f,addNodeFilter:c.addNodeFilter,addAttributeFilter:c.addAttributeFilter,onPreProcess:h,onPostProcess:b,serialize:function(o,m){var l,p,k,j,n;if(d&&i.select("script,style,select,map").length>0){n=o.innerHTML;o=o.cloneNode(false);i.setHTML(o,n)}else{o=o.cloneNode(true)}l=o.ownerDocument.implementation;if(l.createHTMLDocument){p=l.createHTMLDocument("");g(o.nodeName=="BODY"?o.childNodes:[o],function(q){p.body.appendChild(p.importNode(q,true))});if(o.nodeName!="BODY"){o=p.body.firstChild}else{o=p.body}k=i.doc;i.doc=p}m=m||{};m.format=m.format||"html";if(!m.no_events){m.node=o;h.dispatch(self,m)}j=new a.html.Serializer(e,f);m.content=j.serialize(c.parse(m.getInner?o.innerHTML:a.trim(i.getOuterHTML(o),m),m));if(!m.cleanup){m.content=m.content.replace(/\uFEFF/g,"")}if(!m.no_events){b.dispatch(self,m)}if(k){i.doc=k}m.node=null;return m.content},addRules:function(j){f.addValidElements(j)},setRules:function(j){f.setValidElements(j)}}}})(tinymce);(function(a){a.dom.ScriptLoader=function(h){var c=0,k=1,i=2,l={},j=[],f={},d=[],g=0,e;function b(m,v){var x=this,q=a.DOM,s,o,r,n;function p(){q.remove(n);if(s){s.onreadystatechange=s.onload=s=null}v()}function u(){if(typeof(console)!=="undefined"&&console.log){console.log("Failed to load: "+m)}}n=q.uniqueId();if(a.isIE6){o=new a.util.URI(m);r=location;if(o.host==r.hostname&&o.port==r.port&&(o.protocol+":")==r.protocol&&o.protocol.toLowerCase()!="file"){a.util.XHR.send({url:a._addVer(o.getURI()),success:function(y){var t=q.create("script",{type:"text/javascript"});t.text=y;document.getElementsByTagName("head")[0].appendChild(t);q.remove(t);p()},error:u});return}}s=q.create("script",{id:n,type:"text/javascript",src:a._addVer(m)});if(!a.isIE){s.onload=p}s.onerror=u;if(!a.isOpera){s.onreadystatechange=function(){var t=s.readyState;if(t=="complete"||t=="loaded"){p()}}}(document.getElementsByTagName("head")[0]||document.body).appendChild(s)}this.isDone=function(m){return l[m]==i};this.markDone=function(m){l[m]=i};this.add=this.load=function(m,q,n){var o,p=l[m];if(p==e){j.push(m);l[m]=c}if(q){if(!f[m]){f[m]=[]}f[m].push({func:q,scope:n||this})}};this.loadQueue=function(n,m){this.loadScripts(j,n,m)};this.loadScripts=function(m,q,p){var o;function n(r){a.each(f[r],function(s){s.func.call(s.scope)});f[r]=e}d.push({func:q,scope:p||this});o=function(){var r=a.grep(m);m.length=0;a.each(r,function(s){if(l[s]==i){n(s);return}if(l[s]!=k){l[s]=k;g++;b(s,function(){l[s]=i;g--;n(s);o()})}});if(!g){a.each(d,function(s){s.func.call(s.scope)});d.length=0}};o()}};a.ScriptLoader=new a.dom.ScriptLoader()})(tinymce);tinymce.dom.TreeWalker=function(a,c){var b=a;function d(i,f,e,j){var h,g;if(i){if(!j&&i[f]){return i[f]}if(i!=c){h=i[e];if(h){return h}for(g=i.parentNode;g&&g!=c;g=g.parentNode){h=g[e];if(h){return h}}}}}this.current=function(){return b};this.next=function(e){return(b=d(b,"firstChild","nextSibling",e))};this.prev=function(e){return(b=d(b,"lastChild","previousSibling",e))}};(function(a){a.dom.RangeUtils=function(c){var b="\uFEFF";this.walk=function(d,r){var h=d.startContainer,k=d.startOffset,s=d.endContainer,l=d.endOffset,i,f,n,g,q,p,e;e=c.select("td.mceSelected,th.mceSelected");if(e.length>0){a.each(e,function(t){r([t])});return}function o(v,u,t){var x=[];for(;v&&v!=t;v=v[u]){x.push(v)}return x}function m(u,t){do{if(u.parentNode==t){return u}u=u.parentNode}while(u)}function j(v,u,x){var t=x?"nextSibling":"previousSibling";for(g=v,q=g.parentNode;g&&g!=u;g=q){q=g.parentNode;p=o(g==v?g:g[t],t);if(p.length){if(!x){p.reverse()}r(p)}}}if(h.nodeType==1&&h.hasChildNodes()){h=h.childNodes[k]}if(s.nodeType==1&&s.hasChildNodes()){s=s.childNodes[Math.min(k==l?l:l-1,s.childNodes.length-1)]}i=c.findCommonAncestor(h,s);if(h==s){return r([h])}for(g=h;g;g=g.parentNode){if(g==s){return j(h,i,true)}if(g==i){break}}for(g=s;g;g=g.parentNode){if(g==h){return j(s,i)}if(g==i){break}}f=m(h,i)||h;n=m(s,i)||s;j(h,f,true);p=o(f==h?f:f.nextSibling,"nextSibling",n==s?n.nextSibling:n);if(p.length){r(p)}j(s,n)}};a.dom.RangeUtils.compareRanges=function(c,b){if(c&&b){if(c.item||c.duplicate){if(c.item&&b.item&&c.item(0)===b.item(0)){return true}if(c.isEqual&&b.isEqual&&b.isEqual(c)){return true}}else{return c.startContainer==b.startContainer&&c.startOffset==b.startOffset}}return false}})(tinymce);(function(b){var a=b.dom.Event,c=b.each;b.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(e,f){var p=this,m=e.root,l=e.items,n=e.enableUpDown,i=e.enableLeftRight||!e.enableUpDown,k=e.excludeFromTabOrder,j,h,o,d,g;f=f||b.DOM;j=function(q){g=q.target.id};h=function(q){f.setAttrib(q.target.id,"tabindex","-1")};d=function(q){var r=f.get(g);f.setAttrib(r,"tabindex","0");r.focus()};p.focus=function(){f.get(g).focus()};p.destroy=function(){c(l,function(q){f.unbind(f.get(q.id),"focus",j);f.unbind(f.get(q.id),"blur",h)});f.unbind(f.get(m),"focus",d);f.unbind(f.get(m),"keydown",o);l=f=m=p.focus=j=h=o=d=null;p.destroy=function(){}};p.moveFocus=function(u,r){var q=-1,t=p.controls,s;if(!g){return}c(l,function(x,v){if(x.id===g){q=v;return false}});q+=u;if(q<0){q=l.length-1}else{if(q>=l.length){q=0}}s=l[q];f.setAttrib(g,"tabindex","-1");f.setAttrib(s.id,"tabindex","0");f.get(s.id).focus();if(e.actOnFocus){e.onAction(s.id)}if(r){a.cancel(r)}};o=function(y){var u=37,t=39,x=38,z=40,q=27,s=14,r=13,v=32;switch(y.keyCode){case u:if(i){p.moveFocus(-1)}break;case t:if(i){p.moveFocus(1)}break;case x:if(n){p.moveFocus(-1)}break;case z:if(n){p.moveFocus(1)}break;case q:if(e.onCancel){e.onCancel();a.cancel(y)}break;case s:case r:case v:if(e.onAction){e.onAction(g);a.cancel(y)}break}};c(l,function(s,q){var r;if(!s.id){s.id=f.uniqueId("_mce_item_")}if(k){f.bind(s.id,"blur",h);r="-1"}else{r=(q===0?"0":"-1")}f.setAttrib(s.id,"tabindex",r);f.bind(f.get(s.id),"focus",j)});if(l[0]){g=l[0].id}f.setAttrib(m,"tabindex","-1");f.bind(f.get(m),"focus",d);f.bind(f.get(m),"keydown",o)}})})(tinymce);(function(c){var b=c.DOM,a=c.is;c.create("tinymce.ui.Control",{Control:function(f,e,d){this.id=f;this.settings=e=e||{};this.rendered=false;this.onRender=new c.util.Dispatcher(this);this.classPrefix="";this.scope=e.scope||this;this.disabled=0;this.active=0;this.editor=d},setAriaProperty:function(f,e){var d=b.get(this.id+"_aria")||b.get(this.id);if(d){b.setAttrib(d,"aria-"+f,!!e)}},focus:function(){b.get(this.id).focus()},setDisabled:function(d){if(d!=this.disabled){this.setAriaProperty("disabled",d);this.setState("Disabled",d);this.setState("Enabled",!d);this.disabled=d}},isDisabled:function(){return this.disabled},setActive:function(d){if(d!=this.active){this.setState("Active",d);this.active=d;this.setAriaProperty("pressed",d)}},isActive:function(){return this.active},setState:function(f,d){var e=b.get(this.id);f=this.classPrefix+f;if(d){b.addClass(e,f)}else{b.removeClass(e,f)}},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(d){b.setHTML(d,this.renderHTML())},postRender:function(){var e=this,d;if(a(e.disabled)){d=e.disabled;e.disabled=-1;e.setDisabled(d)}if(a(e.active)){d=e.active;e.active=-1;e.setActive(d)}},remove:function(){b.remove(this.id);this.destroy()},destroy:function(){c.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(c,b,a){this.parent(c,b,a);this.controls=[];this.lookup={}},add:function(a){this.lookup[a.id]=a;this.controls.push(a);return a},get:function(a){return this.lookup[a]}});tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(b,a){this.parent(b,a);this.classPrefix="mceSeparator";this.setDisabled(true)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}});(function(d){var c=d.is,b=d.DOM,e=d.each,a=d.walk;d.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(g,f){this.parent(g,f);this.classPrefix="mceMenuItem"},setSelected:function(f){this.setState("Selected",f);this.setAriaProperty("checked",!!f);this.selected=f},isSelected:function(){return this.selected},postRender:function(){var f=this;f.parent();if(c(f.selected)){f.setSelected(f.selected)}}})})(tinymce);(function(d){var c=d.is,b=d.DOM,e=d.each,a=d.walk;d.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(h,g){var f=this;f.parent(h,g);f.items={};f.collapsed=false;f.menuCount=0;f.onAddItem=new d.util.Dispatcher(this)},expand:function(g){var f=this;if(g){a(f,function(h){if(h.expand){h.expand()}},"items",f)}f.collapsed=false},collapse:function(g){var f=this;if(g){a(f,function(h){if(h.collapse){h.collapse()}},"items",f)}f.collapsed=true},isCollapsed:function(){return this.collapsed},add:function(f){if(!f.settings){f=new d.ui.MenuItem(f.id||b.uniqueId(),f)}this.onAddItem.dispatch(this,f);return this.items[f.id]=f},addSeparator:function(){return this.add({separator:true})},addMenu:function(f){if(!f.collapse){f=this.createMenu(f)}this.menuCount++;return this.add(f)},hasMenus:function(){return this.menuCount!==0},remove:function(f){delete this.items[f.id]},removeAll:function(){var f=this;a(f,function(g){if(g.removeAll){g.removeAll()}else{g.remove()}g.destroy()},"items",f);f.items={}},createMenu:function(g){var f=new d.ui.Menu(g.id||b.uniqueId(),g);f.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return f}})})(tinymce);(function(e){var d=e.is,c=e.DOM,f=e.each,a=e.dom.Event,b=e.dom.Element;e.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(h,g){g=g||{};g.container=g.container||c.doc.body;g.offset_x=g.offset_x||0;g.offset_y=g.offset_y||0;g.vp_offset_x=g.vp_offset_x||0;g.vp_offset_y=g.vp_offset_y||0;if(d(g.icons)&&!g.icons){g["class"]+=" mceNoIcons"}this.parent(h,g);this.onShowMenu=new e.util.Dispatcher(this);this.onHideMenu=new e.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(j){var h=this,i=h.settings,g;j.container=j.container||i.container;j.parent=h;j.constrain=j.constrain||i.constrain;j["class"]=j["class"]||i["class"];j.vp_offset_x=j.vp_offset_x||i.vp_offset_x;j.vp_offset_y=j.vp_offset_y||i.vp_offset_y;j.keyboard_focus=i.keyboard_focus;g=new e.ui.DropMenu(j.id||c.uniqueId(),j);g.onAddItem.add(h.onAddItem.dispatch,h.onAddItem);return g},focus:function(){var g=this;if(g.keyboardNav){g.keyboardNav.focus()}},update:function(){var i=this,j=i.settings,g=c.get("menu_"+i.id+"_tbl"),l=c.get("menu_"+i.id+"_co"),h,k;h=j.max_width?Math.min(g.clientWidth,j.max_width):g.clientWidth;k=j.max_height?Math.min(g.clientHeight,j.max_height):g.clientHeight;if(!c.boxModel){i.element.setStyles({width:h+2,height:k+2})}else{i.element.setStyles({width:h,height:k})}if(j.max_width){c.setStyle(l,"width",h)}if(j.max_height){c.setStyle(l,"height",k);if(g.clientHeight<j.max_height){c.setStyle(l,"overflow","hidden")}}},showMenu:function(p,n,r){var z=this,A=z.settings,o,g=c.getViewPort(),u,l,v,q,i=2,k,j,m=z.classPrefix;z.collapse(1);if(z.isMenuVisible){return}if(!z.rendered){o=c.add(z.settings.container,z.renderNode());f(z.items,function(h){h.postRender()});z.element=new b("menu_"+z.id,{blocker:1,container:A.container})}else{o=c.get("menu_"+z.id)}if(!e.isOpera){c.setStyles(o,{left:-65535,top:-65535})}c.show(o);z.update();p+=A.offset_x||0;n+=A.offset_y||0;g.w-=4;g.h-=4;if(A.constrain){u=o.clientWidth-i;l=o.clientHeight-i;v=g.x+g.w;q=g.y+g.h;if((p+A.vp_offset_x+u)>v){p=r?r-u:Math.max(0,(v-A.vp_offset_x)-u)}if((n+A.vp_offset_y+l)>q){n=Math.max(0,(q-A.vp_offset_y)-l)}}c.setStyles(o,{left:p,top:n});z.element.update();z.isMenuVisible=1;z.mouseClickFunc=a.add(o,"click",function(s){var h;s=s.target;if(s&&(s=c.getParent(s,"tr"))&&!c.hasClass(s,m+"ItemSub")){h=z.items[s.id];if(h.isDisabled()){return}k=z;while(k){if(k.hideMenu){k.hideMenu()}k=k.settings.parent}if(h.settings.onclick){h.settings.onclick(s)}return a.cancel(s)}});if(z.hasMenus()){z.mouseOverFunc=a.add(o,"mouseover",function(x){var h,t,s;x=x.target;if(x&&(x=c.getParent(x,"tr"))){h=z.items[x.id];if(z.lastMenu){z.lastMenu.collapse(1)}if(h.isDisabled()){return}if(x&&c.hasClass(x,m+"ItemSub")){t=c.getRect(x);h.showMenu((t.x+t.w-i),t.y-i,t.x);z.lastMenu=h;c.addClass(c.get(h.id).firstChild,m+"ItemActive")}}})}a.add(o,"keydown",z._keyHandler,z);z.onShowMenu.dispatch(z);if(A.keyboard_focus){z._setupKeyboardNav()}},hideMenu:function(j){var g=this,i=c.get("menu_"+g.id),h;if(!g.isMenuVisible){return}if(g.keyboardNav){g.keyboardNav.destroy()}a.remove(i,"mouseover",g.mouseOverFunc);a.remove(i,"click",g.mouseClickFunc);a.remove(i,"keydown",g._keyHandler);c.hide(i);g.isMenuVisible=0;if(!j){g.collapse(1)}if(g.element){g.element.hide()}if(h=c.get(g.id)){c.removeClass(h.firstChild,g.classPrefix+"ItemActive")}g.onHideMenu.dispatch(g)},add:function(i){var g=this,h;i=g.parent(i);if(g.isRendered&&(h=c.get("menu_"+g.id))){g._add(c.select("tbody",h)[0],i)}return i},collapse:function(g){this.parent(g);this.hideMenu(1)},remove:function(g){c.remove(g.id);this.destroy();return this.parent(g)},destroy:function(){var g=this,h=c.get("menu_"+g.id);if(g.keyboardNav){g.keyboardNav.destroy()}a.remove(h,"mouseover",g.mouseOverFunc);a.remove(c.select("a",h),"focus",g.mouseOverFunc);a.remove(h,"click",g.mouseClickFunc);a.remove(h,"keydown",g._keyHandler);if(g.element){g.element.remove()}c.remove(h)},renderNode:function(){var i=this,j=i.settings,l,h,k,g;g=c.create("div",{role:"listbox",id:"menu_"+i.id,"class":j["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"});if(i.settings.parent){c.setAttrib(g,"aria-parent","menu_"+i.settings.parent.id)}k=c.add(g,"div",{role:"presentation",id:"menu_"+i.id+"_co","class":i.classPrefix+(j["class"]?" "+j["class"]:"")});i.element=new b("menu_"+i.id,{blocker:1,container:j.container});if(j.menu_line){c.add(k,"span",{"class":i.classPrefix+"Line"})}l=c.add(k,"table",{role:"presentation",id:"menu_"+i.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});h=c.add(l,"tbody");f(i.items,function(m){i._add(h,m)});i.rendered=true;return g},_setupKeyboardNav:function(){var i,h,g=this;i=c.select("#menu_"+g.id)[0];h=c.select("a[role=option]","menu_"+g.id);h.splice(0,0,i);g.keyboardNav=new e.ui.KeyboardNavigation({root:"menu_"+g.id,items:h,onCancel:function(){g.hideMenu()},enableUpDown:true});i.focus()},_keyHandler:function(g){var h=this,i;switch(g.keyCode){case 37:if(h.settings.parent){h.hideMenu();h.settings.parent.focus();a.cancel(g)}break;case 39:if(h.mouseOverFunc){h.mouseOverFunc(g)}break}},_add:function(j,h){var i,q=h.settings,p,l,k,m=this.classPrefix,g;if(q.separator){l=c.add(j,"tr",{id:h.id,"class":m+"ItemSeparator"});c.add(l,"td",{"class":m+"ItemSeparator"});if(i=l.previousSibling){c.addClass(i,"mceLast")}return}i=l=c.add(j,"tr",{id:h.id,"class":m+"Item "+m+"ItemEnabled"});i=k=c.add(i,q.titleItem?"th":"td");i=p=c.add(i,"a",{id:h.id+"_aria",role:q.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"});if(q.parent){c.setAttrib(p,"aria-haspopup","true");c.setAttrib(p,"aria-owns","menu_"+h.id)}c.addClass(k,q["class"]);g=c.add(i,"span",{"class":"mceIcon"+(q.icon?" mce_"+q.icon:"")});if(q.icon_src){c.add(g,"img",{src:q.icon_src})}i=c.add(i,q.element||"span",{"class":"mceText",title:h.settings.title},h.settings.title);if(h.settings.style){c.setAttrib(i,"style",h.settings.style)}if(j.childNodes.length==1){c.addClass(l,"mceFirst")}if((i=l.previousSibling)&&c.hasClass(i,m+"ItemSeparator")){c.addClass(l,"mceFirst")}if(h.collapse){c.addClass(l,m+"ItemSub")}if(i=l.previousSibling){c.removeClass(i,"mceLast")}c.addClass(l,"mceLast")}})})(tinymce);(function(b){var a=b.DOM;b.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,d,c){this.parent(e,d,c);this.classPrefix="mceButton"},renderHTML:function(){var f=this.classPrefix,e=this.settings,d,c;c=a.encode(e.label||"");d='<a role="button" id="'+this.id+'" href="javascript:;" class="'+f+" "+f+"Enabled "+e["class"]+(c?" "+f+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+a.encode(e.title)+'">';if(e.image&&!(this.editor&&this.editor.forcedHighContrastMode)){d+='<img class="mceIcon" src="'+e.image+'" alt="'+a.encode(e.title)+'" />'+c}else{d+='<span class="mceIcon '+e["class"]+'"></span>'+(c?'<span class="'+f+'Label">'+c+"</span>":"")}d+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+e.title+"</span>";d+="</a>";return d},postRender:function(){var c=this,d=c.settings;b.dom.Event.add(c.id,"click",function(f){if(!c.isDisabled()){return d.onclick.call(d.scope,f)}})}})})(tinymce);(function(d){var c=d.DOM,b=d.dom.Event,e=d.each,a=d.util.Dispatcher;d.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(i,h,f){var g=this;g.parent(i,h,f);g.items=[];g.onChange=new a(g);g.onPostRender=new a(g);g.onAdd=new a(g);g.onRenderMenu=new d.util.Dispatcher(this);g.classPrefix="mceListBox"},select:function(h){var g=this,j,i;if(h==undefined){return g.selectByIndex(-1)}if(h&&h.call){i=h}else{i=function(f){return f==h}}if(h!=g.selectedValue){e(g.items,function(k,f){if(i(k.value)){j=1;g.selectByIndex(f);return false}});if(!j){g.selectByIndex(-1)}}},selectByIndex:function(f){var g=this,h,i;if(f!=g.selectedIndex){h=c.get(g.id+"_text");i=g.items[f];if(i){g.selectedValue=i.value;g.selectedIndex=f;c.setHTML(h,c.encode(i.title));c.removeClass(h,"mceTitle");c.setAttrib(g.id,"aria-valuenow",i.title)}else{c.setHTML(h,c.encode(g.settings.title));c.addClass(h,"mceTitle");g.selectedValue=g.selectedIndex=null;c.setAttrib(g.id,"aria-valuenow",g.settings.title)}h=0}},add:function(i,f,h){var g=this;h=h||{};h=d.extend(h,{title:i,value:f});g.items.push(h);g.onAdd.dispatch(g,h)},getLength:function(){return this.items.length},renderHTML:function(){var i="",f=this,g=f.settings,j=f.classPrefix;i='<span role="button" aria-haspopup="true" aria-labelledby="'+f.id+'_text" aria-describedby="'+f.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+f.id+'" cellpadding="0" cellspacing="0" class="'+j+" "+j+"Enabled"+(g["class"]?(" "+g["class"]):"")+'"><tbody><tr>';i+="<td>"+c.createHTML("span",{id:f.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},f.settings.title);i+=c.createHTML("a",{id:f.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},c.encode(f.settings.title))+"</td>";i+="<td>"+c.createHTML("a",{id:f.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25BC</span></span>')+"</td>";i+="</tr></tbody></table></span>";return i},showMenu:function(){var g=this,i,h=c.get(this.id),f;if(g.isDisabled()||g.items.length==0){return}if(g.menu&&g.menu.isMenuVisible){return g.hideMenu()}if(!g.isMenuRendered){g.renderMenu();g.isMenuRendered=true}i=c.getPos(h);f=g.menu;f.settings.offset_x=i.x;f.settings.offset_y=i.y;f.settings.keyboard_focus=!d.isOpera;if(g.oldID){f.items[g.oldID].setSelected(0)}e(g.items,function(j){if(j.value===g.selectedValue){f.items[j.id].setSelected(1);g.oldID=j.id}});f.showMenu(0,h.clientHeight);b.add(c.doc,"mousedown",g.hideMenu,g);c.addClass(g.id,g.classPrefix+"Selected")},hideMenu:function(g){var f=this;if(f.menu&&f.menu.isMenuVisible){c.removeClass(f.id,f.classPrefix+"Selected");if(g&&g.type=="mousedown"&&(g.target.id==f.id+"_text"||g.target.id==f.id+"_open")){return}if(!g||!c.getParent(g.target,".mceMenu")){c.removeClass(f.id,f.classPrefix+"Selected");b.remove(c.doc,"mousedown",f.hideMenu,f);f.menu.hideMenu()}}},renderMenu:function(){var g=this,f;f=g.settings.control_manager.createDropMenu(g.id+"_menu",{menu_line:1,"class":g.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});f.onHideMenu.add(function(){g.hideMenu();g.focus()});f.add({title:g.settings.title,"class":"mceMenuItemTitle",onclick:function(){if(g.settings.onselect("")!==false){g.select("")}}});e(g.items,function(h){if(h.value===undefined){f.add({title:h.title,"class":"mceMenuItemTitle",onclick:function(){if(g.settings.onselect("")!==false){g.select("")}}})}else{h.id=c.uniqueId();h.onclick=function(){if(g.settings.onselect(h.value)!==false){g.select(h.value)}};f.add(h)}});g.onRenderMenu.dispatch(g,f);g.menu=f},postRender:function(){var f=this,g=f.classPrefix;b.add(f.id,"click",f.showMenu,f);b.add(f.id,"keydown",function(h){if(h.keyCode==32){f.showMenu(h);b.cancel(h)}});b.add(f.id,"focus",function(){if(!f._focused){f.keyDownHandler=b.add(f.id,"keydown",function(h){if(h.keyCode==40){f.showMenu();b.cancel(h)}});f.keyPressHandler=b.add(f.id,"keypress",function(i){var h;if(i.keyCode==13){h=f.selectedValue;f.selectedValue=null;b.cancel(i);f.settings.onselect(h)}})}f._focused=1});b.add(f.id,"blur",function(){b.remove(f.id,"keydown",f.keyDownHandler);b.remove(f.id,"keypress",f.keyPressHandler);f._focused=0});if(d.isIE6||!c.boxModel){b.add(f.id,"mouseover",function(){if(!c.hasClass(f.id,g+"Disabled")){c.addClass(f.id,g+"Hover")}});b.add(f.id,"mouseout",function(){if(!c.hasClass(f.id,g+"Disabled")){c.removeClass(f.id,g+"Hover")}})}f.onPostRender.dispatch(f,c.get(f.id))},destroy:function(){this.parent();b.clear(this.id+"_text");b.clear(this.id+"_open")}})})(tinymce);(function(d){var c=d.DOM,b=d.dom.Event,e=d.each,a=d.util.Dispatcher;d.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(g,f){this.parent(g,f);this.classPrefix="mceNativeListBox"},setDisabled:function(f){c.get(this.id).disabled=f;this.setAriaProperty("disabled",f)},isDisabled:function(){return c.get(this.id).disabled},select:function(h){var g=this,j,i;if(h==undefined){return g.selectByIndex(-1)}if(h&&h.call){i=h}else{i=function(f){return f==h}}if(h!=g.selectedValue){e(g.items,function(k,f){if(i(k.value)){j=1;g.selectByIndex(f);return false}});if(!j){g.selectByIndex(-1)}}},selectByIndex:function(f){c.get(this.id).selectedIndex=f+1;this.selectedValue=this.items[f]?this.items[f].value:null},add:function(j,g,f){var i,h=this;f=f||{};f.value=g;if(h.isRendered()){c.add(c.get(this.id),"option",f,j)}i={title:j,value:g,attribs:f};h.items.push(i);h.onAdd.dispatch(h,i)},getLength:function(){return this.items.length},renderHTML:function(){var g,f=this;g=c.createHTML("option",{value:""},"-- "+f.settings.title+" --");e(f.items,function(h){g+=c.createHTML("option",{value:h.value},h.title)});g=c.createHTML("select",{id:f.id,"class":"mceNativeListBox","aria-labelledby":f.id+"_aria"},g);g+=c.createHTML("span",{id:f.id+"_aria",style:"display: none"},f.settings.title);return g},postRender:function(){var g=this,h,i=true;g.rendered=true;function f(k){var j=g.items[k.target.selectedIndex-1];if(j&&(j=j.value)){g.onChange.dispatch(g,j);if(g.settings.onselect){g.settings.onselect(j)}}}b.add(g.id,"change",f);b.add(g.id,"keydown",function(k){var j;b.remove(g.id,"change",h);i=false;j=b.add(g.id,"blur",function(){if(i){return}i=true;b.add(g.id,"change",f);b.remove(g.id,"blur",j)});if(d.isWebKit&&(k.keyCode==37||k.keyCode==39)){return b.prevent(k)}if(k.keyCode==13||k.keyCode==32){f(k);return b.cancel(k)}});g.onPostRender.dispatch(g,c.get(g.id))}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,d=c.each;c.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(g,f,e){this.parent(g,f,e);this.onRenderMenu=new c.util.Dispatcher(this);f.menu_container=f.menu_container||b.doc.body},showMenu:function(){var g=this,j,i,h=b.get(g.id),f;if(g.isDisabled()){return}if(!g.isMenuRendered){g.renderMenu();g.isMenuRendered=true}if(g.isMenuVisible){return g.hideMenu()}j=b.getPos(g.settings.menu_container);i=b.getPos(h);f=g.menu;f.settings.offset_x=i.x;f.settings.offset_y=i.y;f.settings.vp_offset_x=i.x;f.settings.vp_offset_y=i.y;f.settings.keyboard_focus=g._focused;f.showMenu(0,h.clientHeight);a.add(b.doc,"mousedown",g.hideMenu,g);g.setState("Selected",1);g.isMenuVisible=1},renderMenu:function(){var f=this,e;e=f.settings.control_manager.createDropMenu(f.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:f.settings.icons});e.onHideMenu.add(function(){f.hideMenu();f.focus()});f.onRenderMenu.dispatch(f,e);f.menu=e},hideMenu:function(g){var f=this;if(g&&g.type=="mousedown"&&b.getParent(g.target,function(h){return h.id===f.id||h.id===f.id+"_open"})){return}if(!g||!b.getParent(g.target,".mceMenu")){f.setState("Selected",0);a.remove(b.doc,"mousedown",f.hideMenu,f);if(f.menu){f.menu.hideMenu()}}f.isMenuVisible=0},postRender:function(){var e=this,f=e.settings;a.add(e.id,"click",function(){if(!e.isDisabled()){if(f.onclick){f.onclick(e.value)}e.showMenu()}})}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,d=c.each;c.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(g,f,e){this.parent(g,f,e);this.classPrefix="mceSplitButton"},renderHTML:function(){var i,f=this,g=f.settings,e;i="<tbody><tr>";if(g.image){e=b.createHTML("img ",{src:g.image,role:"presentation","class":"mceAction "+g["class"]})}else{e=b.createHTML("span",{"class":"mceAction "+g["class"]},"")}e+=b.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:f.id+"_voice",style:"display:none;"},g.title);i+="<td >"+b.createHTML("a",{role:"button",id:f.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+g["class"],onclick:"return false;",onmousedown:"return false;",title:g.title},e)+"</td>";e=b.createHTML("span",{"class":"mceOpen "+g["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25BC</span>');i+="<td >"+b.createHTML("a",{role:"button",id:f.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+g["class"],onclick:"return false;",onmousedown:"return false;",title:g.title},e)+"</td>";i+="</tr></tbody>";i=b.createHTML("table",{id:f.id,role:"presentation",tabindex:"0","class":"mceSplitButton mceSplitButtonEnabled "+g["class"],cellpadding:"0",cellspacing:"0",title:g.title},i);return b.createHTML("span",{role:"button","aria-labelledby":f.id+"_voice","aria-haspopup":"true"},i)},postRender:function(){var e=this,g=e.settings,f;if(g.onclick){f=function(h){if(!e.isDisabled()){g.onclick(e.value);a.cancel(h)}};a.add(e.id+"_action","click",f);a.add(e.id,["click","keydown"],function(h){var k=32,m=14,i=13,j=38,l=40;if((h.keyCode===32||h.keyCode===13||h.keyCode===14)&&!h.altKey&&!h.ctrlKey&&!h.metaKey){f();a.cancel(h)}else{if(h.type==="click"||h.keyCode===l){e.showMenu();a.cancel(h)}}})}a.add(e.id+"_open","click",function(h){e.showMenu();a.cancel(h)});a.add([e.id,e.id+"_open"],"focus",function(){e._focused=1});a.add([e.id,e.id+"_open"],"blur",function(){e._focused=0});if(c.isIE6||!b.boxModel){a.add(e.id,"mouseover",function(){if(!b.hasClass(e.id,"mceSplitButtonDisabled")){b.addClass(e.id,"mceSplitButtonHover")}});a.add(e.id,"mouseout",function(){if(!b.hasClass(e.id,"mceSplitButtonDisabled")){b.removeClass(e.id,"mceSplitButtonHover")}})}},destroy:function(){this.parent();a.clear(this.id+"_action");a.clear(this.id+"_open");a.clear(this.id)}})})(tinymce);(function(d){var c=d.DOM,a=d.dom.Event,b=d.is,e=d.each;d.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(i,h,f){var g=this;g.parent(i,h,f);g.settings=h=d.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},g.settings);g.onShowMenu=new d.util.Dispatcher(g);g.onHideMenu=new d.util.Dispatcher(g);g.value=h.default_color},showMenu:function(){var f=this,g,j,i,h;if(f.isDisabled()){return}if(!f.isMenuRendered){f.renderMenu();f.isMenuRendered=true}if(f.isMenuVisible){return f.hideMenu()}i=c.get(f.id);c.show(f.id+"_menu");c.addClass(i,"mceSplitButtonSelected");h=c.getPos(i);c.setStyles(f.id+"_menu",{left:h.x,top:h.y+i.clientHeight,zIndex:200000});i=0;a.add(c.doc,"mousedown",f.hideMenu,f);f.onShowMenu.dispatch(f);if(f._focused){f._keyHandler=a.add(f.id+"_menu","keydown",function(k){if(k.keyCode==27){f.hideMenu()}});c.select("a",f.id+"_menu")[0].focus()}f.isMenuVisible=1},hideMenu:function(g){var f=this;if(f.isMenuVisible){if(g&&g.type=="mousedown"&&c.getParent(g.target,function(h){return h.id===f.id+"_open"})){return}if(!g||!c.getParent(g.target,".mceSplitButtonMenu")){c.removeClass(f.id,"mceSplitButtonSelected");a.remove(c.doc,"mousedown",f.hideMenu,f);a.remove(f.id+"_menu","keydown",f._keyHandler);c.hide(f.id+"_menu")}f.isMenuVisible=0;f.onHideMenu.dispatch()}},renderMenu:function(){var p=this,h,k=0,q=p.settings,g,j,l,o,f;o=c.add(q.menu_container,"div",{role:"listbox",id:p.id+"_menu","class":q.menu_class+" "+q["class"],style:"position:absolute;left:0;top:-1000px;"});h=c.add(o,"div",{"class":q["class"]+" mceSplitButtonMenu"});c.add(h,"span",{"class":"mceMenuLine"});g=c.add(h,"table",{role:"presentation","class":"mceColorSplitMenu"});j=c.add(g,"tbody");k=0;e(b(q.colors,"array")?q.colors:q.colors.split(","),function(i){i=i.replace(/^#/,"");if(!k--){l=c.add(j,"tr");k=q.grid_width-1}g=c.add(l,"td");g=c.add(g,"a",{role:"option",href:"javascript:;",style:{backgroundColor:"#"+i},title:p.editor.getLang("colors."+i,i),"data-mce-color":"#"+i});if(p.editor.forcedHighContrastMode){g=c.add(g,"canvas",{width:16,height:16,"aria-hidden":"true"});if(g.getContext&&(f=g.getContext("2d"))){f.fillStyle="#"+i;f.fillRect(0,0,16,16)}else{c.remove(g)}}});if(q.more_colors_func){g=c.add(j,"tr");g=c.add(g,"td",{colspan:q.grid_width,"class":"mceMoreColors"});g=c.add(g,"a",{role:"option",id:p.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},q.more_colors_title);a.add(g,"click",function(i){q.more_colors_func.call(q.more_colors_scope||this);return a.cancel(i)})}c.addClass(h,"mceColorSplitMenu");new d.ui.KeyboardNavigation({root:p.id+"_menu",items:c.select("a",p.id+"_menu"),onCancel:function(){p.hideMenu();p.focus()}});a.add(p.id+"_menu","mousedown",function(i){return a.cancel(i)});a.add(p.id+"_menu","click",function(i){var m;i=c.getParent(i.target,"a",j);if(i&&i.nodeName.toLowerCase()=="a"&&(m=i.getAttribute("data-mce-color"))){p.setColor(m)}return a.cancel(i)});return o},setColor:function(f){this.displayColor(f);this.hideMenu();this.settings.onselect(f)},displayColor:function(g){var f=this;c.setStyle(f.id+"_preview","backgroundColor",g);f.value=g},postRender:function(){var f=this,g=f.id;f.parent();c.add(g+"_action","div",{id:g+"_preview","class":"mceColorPreview"});c.setStyle(f.id+"_preview","backgroundColor",f.value)},destroy:function(){this.parent();a.clear(this.id+"_menu");a.clear(this.id+"_more");c.remove(this.id+"_menu")}})})(tinymce);(function(b){var d=b.DOM,c=b.each,a=b.dom.Event;b.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var f=this,i=[],e=f.controls,j=b.each,g=f.settings;i.push('<div id="'+f.id+'" role="group" aria-labelledby="'+f.id+'_voice">');i.push("<span role='application'>");i.push('<span id="'+f.id+'_voice" class="mceVoiceLabel" style="display:none;">'+d.encode(g.name)+"</span>");j(e,function(h){i.push(h.renderHTML())});i.push("</span>");i.push("</div>");return i.join("")},focus:function(){this.keyNav.focus()},postRender:function(){var f=this,e=[];c(f.controls,function(g){c(g.controls,function(h){if(h.id){e.push(h)}})});f.keyNav=new b.ui.KeyboardNavigation({root:f.id,items:e,onCancel:function(){f.editor.focus()},excludeFromTabOrder:!f.settings.tab_focus_toolbar})},destroy:function(){var e=this;e.parent();e.keyNav.destroy();a.clear(e.id)}})})(tinymce);(function(a){var c=a.DOM,b=a.each;a.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var m=this,f="",j,k,n=m.settings,e,d,g,l;l=m.controls;for(e=0;e<l.length;e++){k=l[e];d=l[e-1];g=l[e+1];if(e===0){j="mceToolbarStart";if(k.Button){j+=" mceToolbarStartButton"}else{if(k.SplitButton){j+=" mceToolbarStartSplitButton"}else{if(k.ListBox){j+=" mceToolbarStartListBox"}}}f+=c.createHTML("td",{"class":j},c.createHTML("span",null,"<!-- IE -->"))}if(d&&k.ListBox){if(d.Button||d.SplitButton){f+=c.createHTML("td",{"class":"mceToolbarEnd"},c.createHTML("span",null,"<!-- IE -->"))}}if(c.stdMode){f+='<td style="position: relative">'+k.renderHTML()+"</td>"}else{f+="<td>"+k.renderHTML()+"</td>"}if(g&&k.ListBox){if(g.Button||g.SplitButton){f+=c.createHTML("td",{"class":"mceToolbarStart"},c.createHTML("span",null,"<!-- IE -->"))}}}j="mceToolbarEnd";if(k.Button){j+=" mceToolbarEndButton"}else{if(k.SplitButton){j+=" mceToolbarEndSplitButton"}else{if(k.ListBox){j+=" mceToolbarEndListBox"}}}f+=c.createHTML("td",{"class":j},c.createHTML("span",null,"<!-- IE -->"));return c.createHTML("table",{id:m.id,"class":"mceToolbar"+(n["class"]?" "+n["class"]:""),cellpadding:"0",cellspacing:"0",align:m.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+f+"</tr></tbody>")}})})(tinymce);(function(b){var a=b.util.Dispatcher,c=b.each;b.create("tinymce.AddOnManager",{AddOnManager:function(){var d=this;d.items=[];d.urls={};d.lookup={};d.onAdd=new a(d)},get:function(d){if(this.lookup[d]){return this.lookup[d].instance}else{return undefined}},dependencies:function(e){var d;if(this.lookup[e]){d=this.lookup[e].dependencies}return d||[]},requireLangPack:function(e){var d=b.settings;if(d&&d.language&&d.language_load!==false){b.ScriptLoader.add(this.urls[e]+"/langs/"+d.language+".js")}},add:function(f,e,d){this.items.push(e);this.lookup[f]={instance:e,dependencies:d};this.onAdd.dispatch(this,f,e);return e},createUrl:function(d,e){if(typeof e==="object"){return e}else{return{prefix:d.prefix,resource:e,suffix:d.suffix}}},addComponents:function(f,d){var e=this.urls[f];b.each(d,function(g){b.ScriptLoader.add(e+"/"+g)})},load:function(j,f,d,h){var g=this,e=f;function i(){var k=g.dependencies(j);b.each(k,function(m){var l=g.createUrl(f,m);g.load(l.resource,l,undefined,undefined)});if(d){if(h){d.call(h)}else{d.call(b.ScriptLoader)}}}if(g.urls[j]){return}if(typeof f==="object"){e=f.prefix+f.resource+f.suffix}if(e.indexOf("/")!=0&&e.indexOf("://")==-1){e=b.baseURL+"/"+e}g.urls[j]=e.substring(0,e.lastIndexOf("/"));if(g.lookup[j]){i()}else{b.ScriptLoader.add(e,i,h)}}});b.PluginManager=new b.AddOnManager();b.ThemeManager=new b.AddOnManager()}(tinymce));(function(j){var g=j.each,d=j.extend,k=j.DOM,i=j.dom.Event,f=j.ThemeManager,b=j.PluginManager,e=j.explode,h=j.util.Dispatcher,a,c=0;j.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(j.documentBaseURL)){j.documentBaseURL+="/"}j.baseURL=new j.util.URI(j.documentBaseURL).toAbsolute(j.baseURL);j.baseURI=new j.util.URI(j.baseURL);j.onBeforeUnload=new h(j);i.add(window,"beforeunload",function(l){j.onBeforeUnload.dispatch(j,l)});j.onAddEditor=new h(j);j.onRemoveEditor=new h(j);j.EditorManager=d(j,{editors:[],i18n:{},activeEditor:null,init:function(q){var n=this,p,l=j.ScriptLoader,u,o=[],m;function r(x,y,t){var v=x[y];if(!v){return}if(j.is(v,"string")){t=v.replace(/\.\w+$/,"");t=t?j.resolve(t):0;v=j.resolve(v)}return v.apply(t||this,Array.prototype.slice.call(arguments,2))}q=d({theme:"simple",language:"en"},q);n.settings=q;i.add(document,"init",function(){var s,v;r(q,"onpageload");switch(q.mode){case"exact":s=q.elements||"";if(s.length>0){g(e(s),function(x){if(k.get(x)){m=new j.Editor(x,q);o.push(m);m.render(1)}else{g(document.forms,function(y){g(y.elements,function(z){if(z.name===x){x="mce_editor_"+c++;k.setAttrib(z,"id",x);m=new j.Editor(x,q);o.push(m);m.render(1)}})})}})}break;case"textareas":case"specific_textareas":function t(y,x){return x.constructor===RegExp?x.test(y.className):k.hasClass(y,x)}g(k.select("textarea"),function(x){if(q.editor_deselector&&t(x,q.editor_deselector)){return}if(!q.editor_selector||t(x,q.editor_selector)){u=k.get(x.name);if(!x.id&&!u){x.id=x.name}if(!x.id||n.get(x.id)){x.id=k.uniqueId()}m=new j.Editor(x.id,q);o.push(m);m.render(1)}});break}if(q.oninit){s=v=0;g(o,function(x){v++;if(!x.initialized){x.onInit.add(function(){s++;if(s==v){r(q,"oninit")}})}else{s++}if(s==v){r(q,"oninit")}})}})},get:function(l){if(l===a){return this.editors}return this.editors[l]},getInstanceById:function(l){return this.get(l)},add:function(m){var l=this,n=l.editors;n[m.id]=m;n.push(m);l._setActive(m);l.onAddEditor.dispatch(l,m);return m},remove:function(n){var m=this,l,o=m.editors;if(!o[n.id]){return null}delete o[n.id];for(l=0;l<o.length;l++){if(o[l]==n){o.splice(l,1);break}}if(m.activeEditor==n){m._setActive(o[0])}n.destroy();m.onRemoveEditor.dispatch(m,n);return n},execCommand:function(r,p,o){var q=this,n=q.get(o),l;switch(r){case"mceFocus":n.focus();return true;case"mceAddEditor":case"mceAddControl":if(!q.get(o)){new j.Editor(o,q.settings).render()}return true;case"mceAddFrameControl":l=o.window;l.tinyMCE=tinyMCE;l.tinymce=j;j.DOM.doc=l.document;j.DOM.win=l;n=new j.Editor(o.element_id,o);n.render();if(j.isIE){function m(){n.destroy();l.detachEvent("onunload",m);l=l.tinyMCE=l.tinymce=null}l.attachEvent("onunload",m)}o.page_window=null;return true;case"mceRemoveEditor":case"mceRemoveControl":if(n){n.remove()}return true;case"mceToggleEditor":if(!n){q.execCommand("mceAddControl",0,o);return true}if(n.isHidden()){n.show()}else{n.hide()}return true}if(q.activeEditor){return q.activeEditor.execCommand(r,p,o)}return false},execInstanceCommand:function(p,o,n,m){var l=this.get(p);if(l){return l.execCommand(o,n,m)}return false},triggerSave:function(){g(this.editors,function(l){l.save()})},addI18n:function(n,q){var l,m=this.i18n;if(!j.is(n,"string")){g(n,function(r,p){g(r,function(t,s){g(t,function(v,u){if(s==="common"){m[p+"."+u]=v}else{m[p+"."+s+"."+u]=v}})})})}else{g(q,function(r,p){m[n+"."+p]=r})}},_setActive:function(l){this.selectedInstance=this.activeEditor=l}})})(tinymce);(function(n){var o=n.DOM,k=n.dom.Event,g=n.extend,l=n.util.Dispatcher,j=n.each,a=n.isGecko,b=n.isIE,f=n.isWebKit,e=n.is,i=n.ThemeManager,d=n.PluginManager,p=n.inArray,m=n.grep,h=n.explode;n.create("tinymce.Editor",{Editor:function(u,r){var q=this;q.id=q.editorId=u;q.execCommands={};q.queryStateCommands={};q.queryValueCommands={};q.isNotDirty=false;q.plugins={};j(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState","onFormatChange","onFocus","onBlur"],function(s){q[s]=new l(q)});q.settings=r=g({id:u,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:n.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:n.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:true,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:true,entity_encoding:"named",url_converter:q.convertURL,url_converter_scope:q,ie7_compat:true},r);q.documentBaseURI=new n.util.URI(r.document_base_url||n.documentBaseURL,{base_uri:tinyMCE.baseURI});q.baseURI=n.baseURI;q.contentCSS=[];q.execCallback("setup",q)},render:function(u){var v=this,x=v.settings,y=v.id,q=n.ScriptLoader;if(!k.domLoaded){k.add(document,"init",function(){v.render()});return}tinyMCE.settings=x;if(!v.getElement()){return}if(n.isIDevice&&!n.isIOS5){if(x.oninitFail){x.oninitFail(v,x)}return}if(!/TEXTAREA|INPUT/i.test(v.getElement().nodeName)&&x.hidden_input&&o.getParent(y,"form")){o.insertAfter(o.create("input",{type:"hidden",name:y}),y)}if(n.WindowManager){v.windowManager=new n.WindowManager(v)}if(x.encoding=="xml"){v.onGetContent.add(function(s,t){if(t.save){t.content=o.encode(t.content)}})}if(x.add_form_submit_trigger){v.onSubmit.addToTop(function(){if(v.initialized){v.save();v.isNotDirty=1}})}if(x.add_unload_trigger){v._beforeUnload=tinyMCE.onBeforeUnload.add(function(){if(v.initialized&&!v.destroyed&&!v.isHidden()){v.save({format:"raw",no_events:true})}})}n.addUnload(v.destroy,v);if(x.submit_patch){v.onBeforeRenderUI.add(function(){var s=v.getElement().form;if(!s){return}if(s._mceOldSubmit){return}if(!s.submit.nodeType&&!s.submit.length){v.formElement=s;s._mceOldSubmit=s.submit;s.submit=function(){n.triggerSave();v.isNotDirty=1;return v.formElement._mceOldSubmit(v.formElement)}}s=null})}function r(){if(x.language&&x.language_load!==false){q.add(n.baseURL+"/langs/"+x.language+".js")}if(x.theme&&x.theme.charAt(0)!="-"&&!i.urls[x.theme]){i.load(x.theme,"themes/"+x.theme+"/editor_template"+n.suffix+".js")}j(h(x.plugins),function(t){if(t&&!d.urls[t]){if(t.charAt(0)=="-"){t=t.substr(1,t.length);var s=d.dependencies(t);j(s,function(A){var z={prefix:"plugins/",resource:A,suffix:"/editor_plugin"+n.suffix+".js"};var A=d.createUrl(z,A);d.load(A.resource,A)})}else{if(t=="safari"){return}d.load(t,{prefix:"plugins/",resource:t,suffix:"/editor_plugin"+n.suffix+".js"})}}});q.loadQueue(function(){if(!v.removed){v.init()}})}r()},init:function(){var v,I=this,J=I.settings,F,B,E=I.getElement(),r,q,G,z,D,H,A,x=[];n.add(I);J.aria_label=J.aria_label||o.getAttrib(E,"aria-label",I.getLang("aria.rich_text_area"));if(J.theme){J.theme=J.theme.replace(/-/,"");r=i.get(J.theme);I.theme=new r();if(I.theme.init&&J.init_theme){I.theme.init(I,i.urls[J.theme]||n.documentBaseURL.replace(/\/$/,""))}}function C(K){var L=d.get(K),t=d.urls[K]||n.documentBaseURL.replace(/\/$/,""),s;if(L&&n.inArray(x,K)===-1){j(d.dependencies(K),function(u){C(u)});s=new L(I,t);I.plugins[K]=s;if(s.init){s.init(I,t);x.push(K)}}}j(h(J.plugins.replace(/\-/g,"")),C);if(J.popup_css!==false){if(J.popup_css){J.popup_css=I.documentBaseURI.toAbsolute(J.popup_css)}else{J.popup_css=I.baseURI.toAbsolute("themes/"+J.theme+"/skins/"+J.skin+"/dialog.css")}}if(J.popup_css_add){J.popup_css+=","+I.documentBaseURI.toAbsolute(J.popup_css_add)}I.controlManager=new n.ControlManager(I);if(J.custom_undo_redo){I.onBeforeExecCommand.add(function(t,K,u,L,s){if(K!="Undo"&&K!="Redo"&&K!="mceRepaint"&&(!s||!s.skip_undo)){I.undoManager.beforeChange()}});I.onExecCommand.add(function(t,K,u,L,s){if(K!="Undo"&&K!="Redo"&&K!="mceRepaint"&&(!s||!s.skip_undo)){I.undoManager.add()}})}I.onExecCommand.add(function(s,t){if(!/^(FontName|FontSize)$/.test(t)){I.nodeChanged()}});if(a){function y(s,t){if(!t||!t.initial){I.execCommand("mceRepaint")}}I.onUndo.add(y);I.onRedo.add(y);I.onSetContent.add(y)}I.onBeforeRenderUI.dispatch(I,I.controlManager);if(J.render_ui){F=J.width||E.style.width||E.offsetWidth;B=J.height||E.style.height||E.offsetHeight;I.orgDisplay=E.style.display;H=/^[0-9\.]+(|px)$/i;if(H.test(""+F)){F=Math.max(parseInt(F)+(r.deltaWidth||0),100)}if(H.test(""+B)){B=Math.max(parseInt(B)+(r.deltaHeight||0),100)}r=I.theme.renderUI({targetNode:E,width:F,height:B,deltaWidth:J.delta_width,deltaHeight:J.delta_height});I.editorContainer=r.editorContainer}if(document.domain&&location.hostname!=document.domain){n.relaxedDomain=document.domain}o.setStyles(r.sizeContainer||r.editorContainer,{width:F,height:B});if(J.content_css){n.each(h(J.content_css),function(s){I.contentCSS.push(I.documentBaseURI.toAbsolute(s))})}B=(r.iframeHeight||B)+(typeof(B)=="number"?(r.deltaHeight||0):"");if(B<100){B=100}I.iframeHTML=J.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';if(J.document_base_url!=n.documentBaseURL){I.iframeHTML+='<base href="'+I.documentBaseURI.getURI()+'" />'}if(J.ie7_compat){I.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'}else{I.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />'}I.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';z=J.body_id||"tinymce";if(z.indexOf("=")!=-1){z=I.getParam("body_id","","hash");z=z[I.id]||z}D=J.body_class||"";if(D.indexOf("=")!=-1){D=I.getParam("body_class","","hash");D=D[I.id]||""}I.iframeHTML+='</head><body id="'+z+'" class="mceContentBody '+D+'"><br></body></html>';if(n.relaxedDomain&&(b||(n.isOpera&&parseFloat(opera.version())<11))){G='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+I.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()'}v=o.add(r.iframeContainer,"iframe",{id:I.id+"_ifr",src:G||'javascript:""',frameBorder:"0",allowTransparency:"true",title:J.aria_label,style:{width:"100%",height:B,display:"block"}});I.contentAreaContainer=r.iframeContainer;o.get(r.editorContainer).style.display=I.orgDisplay;o.get(I.id).style.display="none";o.setAttrib(I.id,"aria-hidden",true);if(!n.relaxedDomain||!G){I.setupIframe()}E=v=r=null},setupIframe:function(){var r=this,x=r.settings,y=o.get(r.id),z=r.getDoc(),v,q;if(!b||!n.relaxedDomain){if(a&&!Range.prototype.getClientRects){r.onMouseDown.add(function(t,A){if(A.target.nodeName==="HTML"){var s=r.getBody();s.blur();setTimeout(function(){s.focus()},0)}})}z.open();z.write(r.iframeHTML);z.close();if(n.relaxedDomain){z.domain=n.relaxedDomain}}q=r.getBody();q.disabled=true;if(!x.readonly){q.contentEditable=true}q.disabled=false;r.schema=new n.html.Schema(x);r.dom=new n.dom.DOMUtils(r.getDoc(),{keep_values:true,url_converter:r.convertURL,url_converter_scope:r,hex_colors:x.force_hex_style_colors,class_filter:x.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:r.schema});r.parser=new n.html.DomParser(x,r.schema);if(!r.settings.allow_html_in_named_anchor){r.parser.addAttributeFilter("name",function(s,t){var B=s.length,D,A,C,E;while(B--){E=s[B];if(E.name==="a"&&E.firstChild){C=E.parent;D=E.lastChild;do{A=D.prev;C.insert(D,E);D=A}while(D)}}})}r.parser.addAttributeFilter("src,href,style",function(s,t){var A=s.length,C,E=r.dom,D,B;while(A--){C=s[A];D=C.attr(t);B="data-mce-"+t;if(!C.attributes.map[B]){if(t==="style"){C.attr(B,E.serializeStyle(E.parseStyle(D),C.name))}else{C.attr(B,r.convertURL(D,t,C.name))}}}});r.parser.addNodeFilter("script",function(s,t){var A=s.length;while(A--){s[A].attr("type","mce-text/javascript")}});r.parser.addNodeFilter("#cdata",function(s,t){var A=s.length,B;while(A--){B=s[A];B.type=8;B.name="#comment";B.value="[CDATA["+B.value+"]]"}});r.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t,A){var B=t.length,C,s=r.schema.getNonEmptyElements();while(B--){C=t[B];if(C.isEmpty(s)){C.empty().append(new n.html.Node("br",1)).shortEnded=true}}});r.serializer=new n.dom.Serializer(x,r.dom,r.schema);r.selection=new n.dom.Selection(r.dom,r.getWin(),r.serializer);r.selectionUtil=new n.SelectionUtil(r);r.formatter=new n.Formatter(this);r.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",collapsed:false,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",collapsed:false,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:false,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",collapsed:false,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:true},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:false},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:false},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:true,deep:true,onmatch:function(s){return true},onformat:function(A,s,t){j(t,function(C,B){r.dom.setAttrib(A,B,C)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]});j("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(s){r.formatter.register(s,{block:s,remove:"all"})});r.formatter.register(r.settings.formats);r.undoManager=new n.UndoManager(r);r.undoManager.onAdd.add(function(t,s){if(t.hasUndo()){return r.onChange.dispatch(r,s,t)}});r.undoManager.onUndo.add(function(t,s){return r.onUndo.dispatch(r,s,t)});r.undoManager.onRedo.add(function(t,s){return r.onRedo.dispatch(r,s,t)});r.forceBlocks=new n.ForceBlocks(r,{forced_root_block:x.forced_root_block});r.editorCommands=new n.EditorCommands(r);r.serializer.onPreProcess.add(function(s,t){return r.onPreProcess.dispatch(r,t,s)});r.serializer.onPostProcess.add(function(s,t){return r.onPostProcess.dispatch(r,t,s)});r.onPreInit.dispatch(r);if(!x.gecko_spellcheck){r.getBody().spellcheck=0}if(!x.readonly){r._addEvents()}r.controlManager.onPostRender.dispatch(r,r.controlManager);r.onPostRender.dispatch(r);r.quirks=new n.util.Quirks(this);if(x.directionality){r.getBody().dir=x.directionality}if(x.nowrap){r.getBody().style.whiteSpace="nowrap"}if(x.handle_node_change_callback){r.onNodeChange.add(function(t,s,A){r.execCallback("handle_node_change_callback",r.id,A,-1,-1,true,r.selection.isCollapsed())})}if(x.save_callback){r.onSaveContent.add(function(s,A){var t=r.execCallback("save_callback",r.id,A.content,r.getBody());if(t){A.content=t}})}if(x.onchange_callback){r.onChange.add(function(t,s){r.execCallback("onchange_callback",r,s)})}if(x.protect){r.onBeforeSetContent.add(function(s,t){if(x.protect){j(x.protect,function(A){t.content=t.content.replace(A,function(B){return"<!--mce:protected "+escape(B)+"-->"})})}})}if(x.convert_newlines_to_brs){r.onBeforeSetContent.add(function(s,t){if(t.initial){t.content=t.content.replace(/\r?\n/g,"<br />")}})}if(x.preformatted){r.onPostProcess.add(function(s,t){t.content=t.content.replace(/^\s*<pre.*?>/,"");t.content=t.content.replace(/<\/pre>\s*$/,"");if(t.set){t.content='<pre class="mceItemHidden">'+t.content+"</pre>"}})}if(x.verify_css_classes){r.serializer.attribValueFilter=function(C,A){var B,t;if(C=="class"){if(!r.classesRE){t=r.dom.getClasses();if(t.length>0){B="";j(t,function(s){B+=(B?"|":"")+s["class"]});r.classesRE=new RegExp("("+B+")","gi")}}return !r.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(A)||r.classesRE.test(A)?A:""}return A}}if(x.cleanup_callback){r.onBeforeSetContent.add(function(s,t){t.content=r.execCallback("cleanup_callback","insert_to_editor",t.content,t)});r.onPreProcess.add(function(s,t){if(t.set){r.execCallback("cleanup_callback","insert_to_editor_dom",t.node,t)}if(t.get){r.execCallback("cleanup_callback","get_from_editor_dom",t.node,t)}});r.onPostProcess.add(function(s,t){if(t.set){t.content=r.execCallback("cleanup_callback","insert_to_editor",t.content,t)}if(t.get){t.content=r.execCallback("cleanup_callback","get_from_editor",t.content,t)}})}if(x.save_callback){r.onGetContent.add(function(s,t){if(t.save){t.content=r.execCallback("save_callback",r.id,t.content,r.getBody())}})}if(x.handle_event_callback){r.onEvent.add(function(s,t,A){if(r.execCallback("handle_event_callback",t,s,A)===false){k.cancel(t)}})}r.onSetContent.add(function(){r.addVisual(r.getBody())});if(x.padd_empty_editor){r.onPostProcess.add(function(s,t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")})}if(a){function u(s,t){j(s.dom.select("a"),function(B){var A=B.parentNode;if(s.dom.isBlock(A)&&A.lastChild===B){s.dom.add(A,"br",{"data-mce-bogus":1})}})}r.onExecCommand.add(function(s,t){if(t==="CreateLink"){u(s)}});r.onSetContent.add(r.selection.onSetContent.add(u))}r.load({initial:true,format:"html"});r.startContent=r.getContent({format:"raw"});r.undoManager.add();r.initialized=true;r.onInit.dispatch(r);r.execCallback("setupcontent_callback",r.id,r.getBody(),r.getDoc());r.execCallback("init_instance_callback",r);r.focus(true);r.nodeChanged({initial:1});j(r.contentCSS,function(s){r.dom.loadCSS(s)});if(x.auto_focus){setTimeout(function(){var s=n.get(x.auto_focus);s.selection.select(s.getBody(),1);s.selection.collapse(1);s.getBody().focus();s.getWin().focus()},100)}r.dom.bind(q,"focus",function(){r.onFocus.dispatch(r)});r.dom.bind(q,"blur",function(){r.onBlur.dispatch(r)});y=null},focus:function(v){var z,r=this,u=r.selection,y=r.settings.content_editable,s,q,x=r.getDoc();if(!v){s=u.getRng();if(s.item){q=s.item(0)}r._refreshContentEditable();u.normalize();if(!y){r.getWin().focus()}if(n.isGecko){r.getBody().focus()}if(q&&q.ownerDocument==x){s=x.body.createControlRange();s.addElement(q);s.select()}}if(n.activeEditor!=r){if((z=n.activeEditor)!=null){z.onDeactivate.dispatch(z,r)}r.onActivate.dispatch(r,z)}n._setActive(r)},execCallback:function(v){var q=this,u=q.settings[v],r;if(!u){return}if(q.callbackLookup&&(r=q.callbackLookup[v])){u=r.func;r=r.scope}if(e(u,"string")){r=u.replace(/\.\w+$/,"");r=r?n.resolve(r):0;u=n.resolve(u);q.callbackLookup=q.callbackLookup||{};q.callbackLookup[v]={func:u,scope:r}}return u.apply(r||q,Array.prototype.slice.call(arguments,1))},translate:function(q){var t=this.settings.language||"en",r=n.i18n;if(!q){return""}return r[t+"."+q]||q.replace(/{\#([^}]+)\}/g,function(u,s){return r[t+"."+s]||"{#"+s+"}"})},getLang:function(r,q){return n.i18n[(this.settings.language||"en")+"."+r]||(e(q)?q:"{#"+r+"}")},getParam:function(x,s,q){var t=n.trim,r=e(this.settings[x])?this.settings[x]:s,u;if(q==="hash"){u={};if(e(r,"string")){j(r.indexOf("=")>0?r.split(/[;,](?![^=;,]*(?:[;,]|$))/):r.split(","),function(y){y=y.split("=");if(y.length>1){u[t(y[0])]=t(y[1])}else{u[t(y[0])]=t(y)}})}else{u=r}return u}return r},nodeChanged:function(u){var q=this,r=q.selection,v=r.getStart()||q.getBody();if(q.initialized){u=u||{};v=b&&v.ownerDocument!=q.getDoc()?q.getBody():v;u.parents=[];q.dom.getParent(v,function(s){if(s.nodeName=="BODY"){return true}u.parents.push(s)});q.onNodeChange.dispatch(q,u?u.controlManager||q.controlManager:q.controlManager,v,r.isCollapsed(),u)}},scheduleNodeChanged:function c(){if(!c.isScheduled){c.isScheduled=true;var q=this;setTimeout(function(){q.nodeChanged();c.isScheduled=false},0)}},addButton:function(u,r){var q=this;q.buttons=q.buttons||{};q.buttons[u]=r},addCommand:function(q,s,r){this.execCommands[q]={func:s,scope:r||this}},addQueryStateHandler:function(q,s,r){this.queryStateCommands[q]={func:s,scope:r||this}},addQueryValueHandler:function(q,s,r){this.queryValueCommands[q]={func:s,scope:r||this}},addShortcut:function(s,v,q,u){var r=this,x;if(!r.settings.custom_shortcuts){return false}r.shortcuts=r.shortcuts||{};if(e(q,"string")){x=q;q=function(){r.execCommand(x,false,null)}}if(e(q,"object")){x=q;q=function(){r.execCommand(x[0],x[1],x[2])}}j(h(s),function(t){var y={func:q,scope:u||this,desc:v,alt:false,ctrl:false,shift:false};j(h(t,"+"),function(z){switch(z){case"alt":case"ctrl":case"shift":y[z]=true;break;default:y.charCode=z.charCodeAt(0);y.keyCode=z.toUpperCase().charCodeAt(0)}});r.shortcuts[(y.ctrl?"ctrl":"")+","+(y.alt?"alt":"")+","+(y.shift?"shift":"")+","+y.keyCode]=y});return true},execCommand:function(u,x,r,y){var z=this,B=0,q,A;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(u)&&(!y||!y.skip_focus)){z.focus()}q={};z.onBeforeExecCommand.dispatch(z,u,x,r,q);if(q.terminate){return false}if(z.execCallback("execcommand_callback",z.id,z.selection.getNode(),u,x,r)){z.onExecCommand.dispatch(z,u,x,r,y);return true}if(q=z.execCommands[u]){A=q.func.call(q.scope,x,r);if(A!==true){z.onExecCommand.dispatch(z,u,x,r,y);return A}}j(z.plugins,function(s){if(s.execCommand&&s.execCommand(u,x,r)){z.onExecCommand.dispatch(z,u,x,r,y);B=1;return false}});if(B){return true}if(z.theme&&z.theme.execCommand&&z.theme.execCommand(u,x,r)){z.onExecCommand.dispatch(z,u,x,r,y);return true}if(z.editorCommands.execCommand(u,x,r)){z.onExecCommand.dispatch(z,u,x,r,y);return true}try{z.getDoc().execCommand(u,x,r)}catch(v){console.log("browser execCommand failed. cmd: "+u,v)}z.onExecCommand.dispatch(z,u,x,r,y)},queryCommandState:function(v){var r=this,x,u;if(r._isHidden()){return}if(x=r.queryStateCommands[v]){u=x.func.call(x.scope);if(u!==true){return u}}x=r.editorCommands.queryCommandState(v);if(x!==-1){return x}try{return this.getDoc().queryCommandState(v)}catch(q){}},queryCommandValue:function(x){var r=this,v,u;if(r._isHidden()){return}if(v=r.queryValueCommands[x]){u=v.func.call(v.scope);if(u!==true){return u}}v=r.editorCommands.queryCommandValue(x);if(e(v)){return v}try{return this.getDoc().queryCommandValue(x)}catch(q){}},show:function(){var q=this;o.show(q.getContainer());o.hide(q.id);q.load()},hide:function(){var q=this,r=q.getDoc();if(b&&r){r.execCommand("SelectAll")}q.save();o.hide(q.getContainer());o.setStyle(q.id,"display",q.orgDisplay)},isHidden:function(){return !o.isHidden(this.id)},setProgressState:function(q,r,s){this.onSetProgressState.dispatch(this,q,r,s);return q},load:function(u){var q=this,s=q.getElement(),r;if(s){u=u||{};u.load=true;r=q.setContent(e(s.value)?s.value:s.innerHTML,u);u.element=s;if(!u.no_events){q.onLoadContent.dispatch(q,u)}u.element=s=null;return r}},save:function(v){var q=this,u=q.getElement(),r,s;if(!u||!q.initialized){return}v=v||{};v.save=true;if(!v.no_events){q.undoManager.typing=false;q.undoManager.deleting=0;q.undoManager.add()}v.element=u;r=v.content=q.getContent(v);if(!v.no_events){q.onSaveContent.dispatch(q,v)}r=v.content;if(!/TEXTAREA|INPUT/i.test(u.nodeName)){u.innerHTML=r;if(s=o.getParent(q.id,"form")){j(s.elements,function(t){if(t.name==q.id){t.value=r;return false}})}}else{u.value=r}v.element=u=null;return r},setContent:function(v,t){var s=this,r,q=s.getBody(),u;t=t||{};t.format=t.format||"html";t.set=true;t.content=v;if(!t.no_events){s.onBeforeSetContent.dispatch(s,t)}v=t.content;if(!n.isIE&&(v.length===0||/^\s+$/.test(v))){u=s.settings.forced_root_block;if(u){v="<"+u+'><br data-mce-bogus="1"></'+u+">"}else{v='<br data-mce-bogus="1">'}q.innerHTML=v;s.selection.select(q,true);s.selection.collapse(true);return}if(t.format!=="raw"){v=new n.html.Serializer({},s.schema).serialize(s.parser.parse(v))}t.content=n.trim(v);s.dom.setHTML(q,t.content);if(!t.no_events){s.onSetContent.dispatch(s,t)}s.selection.normalize();return t.content},getContent:function(r){var q=this,s;r=r||{};r.format=r.format||"html";r.get=true;if(!r.no_events){q.onBeforeGetContent.dispatch(q,r)}if(r.format=="raw"){s=q.getBody().innerHTML}else{s=q.serializer.serialize(q.getBody(),r)}r.content=n.trim(s);if(!r.no_events){q.onGetContent.dispatch(q,r)}return r.content},isDirty:function(){var q=this;return n.trim(q.startContent)!=n.trim(q.getContent({format:"raw",no_events:1}))&&!q.isNotDirty},getContainer:function(){var q=this;if(!q.container){q.container=o.get(q.editorContainer||q.id+"_parent")}return q.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return o.get(this.settings.content_element||this.id)},getWin:function(){var q=this,r;if(!q.contentWindow){r=o.get(q.id+"_ifr");if(r){q.contentWindow=r.contentWindow}}return q.contentWindow},getDoc:function(){var r=this,q;if(!r.contentDocument){q=r.getWin();if(q){r.contentDocument=q.document}}return r.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(q,y,x){var r=this,v=r.settings;if(v.urlconverter_callback){return r.execCallback("urlconverter_callback",q,x,true,y)}if(!v.convert_urls||(x&&x.nodeName=="LINK")||!q||q.indexOf("file:")===0){return q}if(v.relative_urls){return r.documentBaseURI.toRelative(q)}q=r.documentBaseURI.toAbsolute(q,v.remove_script_host);return q},addVisual:function(u){var q=this,r=q.settings;u=u||q.getBody();if(!e(q.hasVisual)){q.hasVisual=r.visual}j(q.dom.select("table,a",u),function(t){var s;switch(t.nodeName){case"TABLE":s=q.dom.getAttrib(t,"border");if(!s||s=="0"){if(q.hasVisual){q.dom.addClass(t,r.visual_table_class)}else{q.dom.removeClass(t,r.visual_table_class)}}return;case"A":s=q.dom.getAttrib(t,"name");if(s){if(q.hasVisual){q.dom.addClass(t,"mceItemAnchor")}else{q.dom.removeClass(t,"mceItemAnchor")}}return}});q.onVisualAid.dispatch(q,u,q.hasVisual)},remove:function(){var q=this,r=q.getContainer();q.removed=1;q.hide();q.execCallback("remove_instance_callback",q);q.onRemove.dispatch(q);q.onExecCommand.listeners=[];n.remove(q);o.remove(r)},destroy:function(r){var q=this;if(q.destroyed){return}if(!r){n.removeUnload(q.destroy);tinyMCE.onBeforeUnload.remove(q._beforeUnload);if(q.theme&&q.theme.destroy){q.theme.destroy()}q.controlManager.destroy();q.selection.destroy();q.dom.destroy();if(!q.settings.content_editable){k.clear(q.getWin());k.clear(q.getDoc())}k.clear(q.getBody());k.clear(q.formElement)}if(q.formElement){q.formElement.submit=q.formElement._mceOldSubmit;q.formElement._mceOldSubmit=null}q.contentAreaContainer=q.formElement=q.container=q.settings.content_element=q.bodyElement=q.contentDocument=q.contentWindow=null;if(q.selection){q.selection=q.selection.win=q.selection.dom=q.selection.dom.doc=null}q.destroyed=1},_addEvents:function(){var C=this,u,D=C.settings,r=C.dom,y={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};function q(t,E){var s=t.type;if(C.removed){return}if(C.onEvent.dispatch(C,t,E)!==false){C[y[t.fakeType||t.type]].dispatch(C,t,E)}}j(y,function(t,s){switch(s){case"contextmenu":r.bind(C.getDoc(),s,q);break;case"paste":r.bind(C.getBody(),s,function(E){q(E)});break;case"submit":case"reset":r.bind(C.getElement().form||o.getParent(C.id,"form"),s,q);break;default:r.bind(D.content_editable?C.getBody():C.getDoc(),s,q)}});r.bind(D.content_editable?C.getBody():(a?C.getDoc():C.getWin()),"focus",function(s){C.focus(true)});if(n.isIDevice){r.bind(r.select("html"),"click",function(){C.focus()})}if(n.isGecko){r.bind(C.getDoc(),"DOMNodeInserted",function(t){var s;t=t.target;if(t.nodeType===1&&t.nodeName==="IMG"&&(s=t.getAttribute("data-mce-src"))){t.src=C.documentBaseURI.toAbsolute(s)}})}if(a){function v(){var F=this,H=F.getDoc(),G=F.settings;if(a&&!G.readonly){F._refreshContentEditable();try{H.execCommand("styleWithCSS",0,false)}catch(E){if(!F._isHidden()){try{H.execCommand("useCSS",0,true)}catch(E){}}}if(!G.table_inline_editing){try{H.execCommand("enableInlineTableEditing",false,false)}catch(E){}}if(!G.object_resizing){try{H.execCommand("enableObjectResizing",false,false)}catch(E){}}}}C.onBeforeExecCommand.add(v);C.onMouseDown.add(v)}C.onClick.add(function(s,F){F=F.target;if(n.isWebKit){if(F.nodeName=="IMG"){var t=r.nodeIndex(F);var E=F.parentNode;C.selection.getSel().setBaseAndExtent(E,t,E,t+1);C.nodeChanged()}else{if(F.nodeName=="A"&&r.hasClass(F,"mceItemAnchor")){C.selection.getSel().setBaseAndExtent(F,0,F,1);C.nodeChanged()}}}if(F.nodeName=="A"&&r.hasClass(F,"mceItemAnchor")){C.selection.select(F)}C.nodeChanged()});C.onMouseUp.add(C.nodeChanged);C.onKeyUp.add(function(s,t){var E=t.keyCode;if((E>=33&&E<=36)||(E>=37&&E<=40)||E==13||E==45||E==46||E==8||(n.isMac&&(E==91||E==93))||t.ctrlKey){C.nodeChanged()}});C.onKeyDown.add(function(t,E){if(E.keyCode!=8){return}var G=t.selection.getRng().startContainer;var F=t.selection.getRng().startOffset;while(G&&G.nodeType&&G.nodeType!=1&&G.parentNode){G=G.parentNode}if(G&&G.parentNode&&G.parentNode.tagName==="BLOCKQUOTE"&&G.parentNode.firstChild==G&&F==0){t.formatter.toggle("blockquote",null,G.parentNode);var s=t.selection.getRng();s.setStart(G,0);s.setEnd(G,0);t.selection.setRng(s);t.selection.collapse(false)}});C.onReset.add(function(){C.setContent(C.startContent,{format:"raw"})});if(D.custom_shortcuts){if(D.custom_undo_redo_keyboard_shortcuts){C.addShortcut("ctrl+z",C.getLang("undo_desc"),"Undo");C.addShortcut("ctrl+shift+z",C.getLang("redo_desc"),"Redo");C.addShortcut("ctrl+y",C.getLang("redo_desc"),"Redo")}C.addShortcut("ctrl+b",C.getLang("bold_desc"),"Bold");C.addShortcut("ctrl+i",C.getLang("italic_desc"),"Italic");C.addShortcut("ctrl+u",C.getLang("underline_desc"),"Underline");for(u=1;u<=6;u++){C.addShortcut("ctrl+"+u,"",["FormatBlock",false,"h"+u])}C.addShortcut("ctrl+7","",["FormatBlock",false,"p"]);C.addShortcut("ctrl+8","",["FormatBlock",false,"div"]);C.addShortcut("ctrl+9","",["FormatBlock",false,"address"]);function x(t){var s=null;if(!t.altKey&&!t.ctrlKey&&!t.metaKey){return s}j(C.shortcuts,function(E){if(n.isMac&&E.ctrl!=t.metaKey&&E.ctrl!=t.ctrlKey){return}else{if(!n.isMac&&E.ctrl!=t.ctrlKey){return}}if(E.alt!=t.altKey){return}if(E.shift!=t.shiftKey){return}if(t.keyCode==E.keyCode||(t.charCode&&t.charCode==E.charCode)){s=E;return false}});return s}C.onKeyUp.add(function(s,t){var E=x(t);if(E){return k.cancel(t)}});C.onKeyPress.add(function(s,t){var E=x(t);if(E){return k.cancel(t)}});C.onKeyDown.add(function(s,t){var E=x(t);if(E){E.func.call(E.scope);return k.cancel(t)}})}if(n.isIE){r.bind(C.getDoc(),"controlselect",function(E){var t=C.resizeInfo,s;E=E.target;if(E.nodeName!=="IMG"){return}if(t){r.unbind(t.node,t.ev,t.cb)}if(!r.hasClass(E,"mceItemNoResize")){ev="resizeend";s=r.bind(E,ev,function(G){var F;G=G.target;if(F=r.getStyle(G,"width")){r.setAttrib(G,"width",F.replace(/[^0-9%]+/g,""));r.setStyle(G,"width","")}if(F=r.getStyle(G,"height")){r.setAttrib(G,"height",F.replace(/[^0-9%]+/g,""));r.setStyle(G,"height","")}})}else{ev="resizestart";s=r.bind(E,"resizestart",k.cancel,k)}t=C.resizeInfo={node:E,ev:ev,cb:s}})}if(n.isOpera){C.onClick.add(function(s,t){k.prevent(t)})}if(D.custom_undo_redo){function z(){C.undoManager.typing=false;C.undoManager.deleting=false;C.undoManager.add()}r.bind(C.getDoc(),"focusout",function(s){if(!C.removed&&(C.undoManager.typing||C.undoManager.deleting)){z()}});C.dom.bind(C.dom.getRoot(),"dragend",function(s){z()});C.onKeyUp.add(function(s,E){var t=E.keyCode;if((t>=33&&t<=36)||(t>=37&&t<=40)||t==13||t==45||E.ctrlKey){z()}});C.onKeyDown.add(function(s,F){var E=F.keyCode,t;if(E==8){t=C.getDoc().selection;if(t&&t.createRange&&t.createRange().item){C.undoManager.beforeChange();s.dom.remove(t.createRange().item(0));z();return k.cancel(F)}}if((E>=33&&E<=36)||(E>=37&&E<=40)||E==13||E==45){if(n.isIE&&E==13){C.undoManager.beforeChange()}if(C.undoManager.typing||C.undoManager.deleting){z()}return}if(F.keyCode==8||F.keyCode==46){if(!C.undoManager.deleting){z();C.undoManager.deleting=true}return}if((E<16||E>20)&&E!=224&&E!=91&&!C.undoManager.typing){C.undoManager.beforeChange();C.undoManager.typing=true;C.undoManager.add()}});C.onMouseDown.add(function(){if(C.undoManager.typing||C.undoManager.deleting){z()}})}if(n.isWebKit){r.bind(C.getDoc(),"selectionchange",function(){if(C.selectionTimer){clearTimeout(C.selectionTimer);C.selectionTimer=0}C.selectionTimer=window.setTimeout(function(){C.nodeChanged()},50)})}if(n.isGecko){function B(){var s=C.dom.getAttribs(C.selection.getStart().cloneNode(false));return function(){var t=C.selection.getStart();if(t!==C.getBody()){C.dom.removeAllAttribs(t);j(s,function(E){t.setAttributeNode(E.cloneNode(true))})}}}function A(){var t=C.selection;return !t.isCollapsed()&&t.getStart()!=t.getEnd()}C.onKeyPress.add(function(s,E){var t;if((E.keyCode==8||E.keyCode==46)&&A()){t=B();C.getDoc().execCommand("delete",false,null);t();return k.cancel(E)}});C.dom.bind(C.getDoc(),"cut",function(t){var s;if(A()){s=B();C.onKeyUp.addToTop(k.cancel,k);setTimeout(function(){s();C.onKeyUp.remove(k.cancel,k)},0)}})}},_refreshContentEditable:function(){var r=this,q,s;if(r._isHidden()){q=r.getBody();s=q.parentNode;s.removeChild(q);s.appendChild(q);q.focus()}},_isHidden:function(){var q;if(!a){return 0}q=this.selection.getSel();return(!q||!q.rangeCount||q.rangeCount==0)}})})(tinymce);(function(c){var d=c.each,e,a=true,b=false;c.EditorCommands=function(n){var m=n.dom,p=n.selection,j={state:{},exec:{},value:{}},k=n.settings,q=n.formatter,o;function r(z,y,x){var v;z=z.toLowerCase();if(v=j.exec[z]){v(z,y,x);return a}return b}function l(x){var v;x=x.toLowerCase();if(v=j.state[x]){return v(x)}return -1}function h(x){var v;x=x.toLowerCase();if(v=j.value[x]){return v(x)}return b}function u(v,x){x=x||"exec";d(v,function(z,y){d(y.toLowerCase().split(","),function(A){j[x][A]=z})})}c.extend(this,{execCommand:r,queryCommandState:l,queryCommandValue:h,addCommands:u});function f(y,x,v){if(x===e){x=b}if(v===e){v=null}return n.getDoc().execCommand(y,x,v)}function t(v){return q.match(v)}function s(v,x){q.toggle(v,x?{value:x}:e)}function i(v){o=p.getBookmark(v)}function g(){p.moveToBookmark(o)}u({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){n.undoManager.add()},"Cut,Copy,Paste":function(z){var y=n.getDoc(),v;try{f(z)}catch(x){v=a}if(v||!y.queryCommandSupported(z)){if(c.isGecko){n.windowManager.confirm(n.getLang("clipboard_msg"),function(A){if(A){open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}})}else{n.windowManager.alert(n.getLang("clipboard_no_support"))}}},unlink:function(v){if(p.isCollapsed()){p.select(p.getNode())}f(v);p.collapse(b)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(v){var x=v.substring(7);d("left,center,right,full".split(","),function(y){if(x!=y){q.remove("align"+y)}});s("align"+x);r("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(y){var v,x;f(y);v=m.getParent(p.getNode(),"ol,ul");if(v){x=v.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(x.nodeName)){i();m.split(x,v);g()}}},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(v){s(v)},"ForeColor,HiliteColor,FontName":function(y,x,v){s(y,v)},FontSize:function(z,y,x){var v,A;if(x>=1&&x<=7){A=c.explode(k.font_size_style_values);v=c.explode(k.font_size_classes);if(v){x=v[x-1]||x}else{x=A[x-1]||x}}s(z,x)},RemoveFormat:function(x){q.remove(x);if(c.isWebKit){var v=m.select("table");d(v,function(y){m.setStyle(y,"display","inline-table")});setTimeout(function(){d(v,function(y){m.setStyle(y,"display","")})},0)}},mceBlockQuote:function(v){s("blockquote")},FormatBlock:function(y,x,v){return s(v||"p")},mceCleanup:function(){var v=p.getBookmark();n.setContent(n.getContent({cleanup:a}),{cleanup:a});p.moveToBookmark(v)},mceRemoveNode:function(z,y,x){var v=x||p.getNode();if(v!=n.getBody()){i();n.dom.remove(v,a);g()}},mceSelectNodeDepth:function(z,y,x){var v=0;m.getParent(p.getNode(),function(A){if(A.nodeType==1&&v++==x){p.select(A);return b}},n.getBody())},mceSelectNode:function(y,x,v){p.select(v)},mceInsertContent:function(B,I,K){var y,J,E,z,F,G,D,C,L,x,A,M,v,H;y=n.parser;J=new c.html.Serializer({},n.schema);v='<span class="mce_marker" data-mce-type="bookmark">\uFEFF</span>';G={content:K,format:"html"};p.onBeforeSetContent.dispatch(p,G);K=G.content;if(K.indexOf("{$caret}")==-1){K+="{$caret}"}K=K.replace(/\{\$caret\}/,v);if(!p.isCollapsed()){n.getDoc().execCommand("Delete",false,null)}E=p.getNode();G={context:E.nodeName.toLowerCase()};F=y.parse(K,G);A=F.lastChild;if(A.attr("class")=="mce_marker"){D=A;for(A=A.prev;A;A=A.walk(true)){if(A.type==3||!m.isBlock(A.name)){A.parent.insert(D,A,A.name==="br");break}}}if(!G.invalid){K=J.serialize(F);A=E.firstChild;M=E.lastChild;if(!A||(A===M&&A.nodeName==="BR")){m.setHTML(E,K)}else{p.setContent(K)}}else{p.setContent(v);E=n.selection.getNode();z=n.getBody();if(E.nodeType==9){E=A=z}else{A=E}while(A!==z){E=A;A=A.parentNode}K=E==z?z.innerHTML:m.getOuterHTML(E);K=J.serialize(y.parse(K.replace(/<span (class="mce_marker"|class=mce_marker).+?<\/span>/i,function(){return J.serialize(F)})));if(E==z){m.setHTML(z,K)}else{m.setOuterHTML(E,K)}}D=m.select(".mce_marker")[0];if(D){C=m.getRect(D);L=m.getViewPort(n.getWin());if((C.y+C.h>L.y+L.h||C.y<L.y)||(C.x>L.x+L.w||C.x<L.x)){H=c.isIE?n.getDoc().documentElement:n.getBody();H.scrollLeft=C.x;H.scrollTop=C.y-L.h+25}x=m.createRng();A=D.previousSibling;if(A&&A.nodeType==3){x.setStart(A,A.nodeValue.length)}else{x.setStartBefore(D);x.setEndBefore(D)}m.remove(D);p.setRng(x)}p.onSetContent.dispatch(p,G);n.addVisual()},mceInsertRawHTML:function(y,x,v){p.setContent("tiny_mce_marker");n.setContent(n.getContent().replace(/tiny_mce_marker/g,function(){return v}))},mceSetContent:function(y,x,v){n.setContent(v)},"Indent,Outdent":function(z){var x,v,y;x=k.indentation;v=/[a-z%]+$/i.exec(x);x=parseInt(x);if(!l("InsertUnorderedList")&&!l("InsertOrderedList")){d(p.getSelectedBlocks(),function(A){if(z=="outdent"){y=Math.max(0,parseInt(A.style.paddingLeft||0)-x);m.setStyle(A,"paddingLeft",y?y+v:"")}else{m.setStyle(A,"paddingLeft",(parseInt(A.style.paddingLeft||0)+x)+v)}})}else{f(z)}},mceRepaint:function(){var x;if(c.isGecko){try{i(a);if(p.getSel()){p.getSel().selectAllChildren(n.getBody())}p.collapse(a);g()}catch(v){}}},mceToggleFormat:function(y,x,v){q.toggle(v)},InsertHorizontalRule:function(){n.execCommand("mceInsertContent",false,"<hr />")},mceToggleVisualAid:function(){n.hasVisual=!n.hasVisual;n.addVisual()},mceReplaceContent:function(y,x,v){n.execCommand("mceInsertContent",false,v.replace(/\{\$selection\}/g,p.getContent({format:"text"})))},mceInsertLink:function(z,y,x){var v;if(typeof(x)=="string"){x={href:x}}v=m.getParent(p.getNode(),"a");x.href=x.href.replace(" ","%20");if(!v||!x.href){q.remove("link")}if(x.href){q.apply("link",x,v)}},selectAll:function(){var x=m.getRoot(),v=m.createRng();v.setStart(x,0);v.setEnd(x,x.childNodes.length);n.selection.setRng(v)}});u({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(v){return t("align"+v.substring(7))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(v){return t(v)},mceBlockQuote:function(){return t("blockquote")},Outdent:function(){var v;if(k.inline_styles){if((v=m.getParent(p.getStart(),m.isBlock))&&parseInt(v.style.paddingLeft)>0){return a}if((v=m.getParent(p.getEnd(),m.isBlock))&&parseInt(v.style.paddingLeft)>0){return a}}return l("InsertUnorderedList")||l("InsertOrderedList")||(!k.inline_styles&&!!m.getParent(p.getNode(),"BLOCKQUOTE"))},"InsertUnorderedList,InsertOrderedList":function(v){return m.getParent(p.getNode(),v=="insertunorderedlist"?"UL":"OL")}},"state");u({"FontSize,FontName":function(y){var x=0,v;if(v=m.getParent(p.getNode(),"span")){if(y=="fontsize"){x=v.style.fontSize}else{x=v.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()}}return x}},"value");if(k.custom_undo_redo){u({Undo:function(){n.undoManager.undo()},Redo:function(){n.undoManager.redo()}})}}})(tinymce);(function(b){var a=b.util.Dispatcher;b.UndoManager=function(f){var d,e=0,h=[],c;function g(){return b.trim(f.getContent({format:"raw",no_events:1}))}return d={typing:false,deleting:false,onAdd:new a(d),onUndo:new a(d),onRedo:new a(d),beforeChange:function(){c=f.selection.getBookmark(2,true)},add:function(m){var j,k=f.settings,l;m=m||{};m.content=g();l=h[e];if(l&&l.content==m.content){return null}if(h[e]){h[e].beforeBookmark=c}if(k.custom_undo_redo_levels){if(h.length>k.custom_undo_redo_levels){for(j=0;j<h.length-1;j++){h[j]=h[j+1]}h.length--;e=h.length}}m.bookmark=f.selection.getBookmark(2,true);if(e<h.length-1){h.length=e+1}h.push(m);e=h.length-1;d.onAdd.dispatch(d,m);f.isNotDirty=0;return m},transparentChange:function(i){var k=g(),l=h[e];if(l&&l.content==k){if(e>0||h.length==1){var j=i();l.content=g();l.bookmark=f.selection.getBookmark(2,true);return j}}return i()},undo:function(){var k,j;if(d.typing){d.add();d.typing=false;d.deleting=false}if(e>0){k=h[--e];f.setContent(k.content,{format:"raw"});f.selection.moveToBookmark(k.beforeBookmark);d.onUndo.dispatch(d,k)}return k},redo:function(){var i;if(e<h.length-1){i=h[++e];f.setContent(i.content,{format:"raw"});f.selection.moveToBookmark(i.bookmark);d.onRedo.dispatch(d,i)}return i},clear:function(){h=[];e=0;d.typing=false;d.deleting=false},hasUndo:function(){return e>0||this.typing||this.deleting},hasRedo:function(){return e<h.length-1&&!this.typing}}}})(tinymce);(function(m){var k=m.dom.Event,c=m.isIE,d=m.isIE9,a=m.isGecko,b=m.isOpera,j=m.each,i=m.extend,e=true,h=false;function l(p){var q,o,n;do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(p.nodeName)){if(q){o=p.cloneNode(false);o.appendChild(q);q=o}else{q=n=p.cloneNode(false)}q.removeAttribute("id")}}while(p=p.parentNode);if(q){return{wrapper:q,inner:n}}}function g(o,p){var n=p.ownerDocument.createRange();n.setStart(o.endContainer,o.endOffset);n.setEndAfter(p);var q=n.toString().replace(/\ufeff/g,"");return q.length==0}function f(){var n=m.activeEditor.dom;return n.create("br",{_moz_dirty:"",type:"_moz","data-mce-bogus":"1"})}m.create("tinymce.ForceBlocks",{ForceBlocks:function(n){var o=this,p=n.settings,q;o.editor=n;o.dom=n.dom;q=(p.forced_root_block||"p").toLowerCase();p.element=q.toUpperCase();n.onPreInit.add(o.setup,o)},setup:function(){var o=this,n=o.editor,q=n.settings,v=n.dom,p=n.selection,r=n.schema.getBlockElements();if(q.forced_root_block){function x(){var z=p.getStart(),t=n.getBody(),s,A,E,G,F,y,B,C=-16777215;if(!z||z.nodeType!==1){return}while(z!=t){if(r[z.nodeName]){return}z=z.parentNode}s=p.getRng();if(s.setStart){A=s.startContainer;E=s.startOffset;G=s.endContainer;F=s.endOffset}else{if(s.item){s=n.getDoc().body.createTextRange();s.moveToElementText(s.item(0))}tmpRng=s.duplicate();tmpRng.collapse(true);E=tmpRng.move("character",C)*-1;if(!tmpRng.collapsed){tmpRng=s.duplicate();tmpRng.collapse(false);F=(tmpRng.move("character",C)*-1)-E}}for(z=t.firstChild;z;z){if(z.nodeType===3||(z.nodeType==1&&!r[z.nodeName])){if(!y){y=v.create(q.forced_root_block);z.parentNode.insertBefore(y,z)}B=z;z=z.nextSibling;y.appendChild(B)}else{y=null;z=z.nextSibling}}if(s.setStart){s.setStart(A,E);s.setEnd(G,F);p.setRng(s)}else{try{s=n.getDoc().body.createTextRange();s.moveToElementText(t);s.collapse(true);s.moveStart("character",E);if(F>0){s.moveEnd("character",F)}s.select()}catch(D){}}n.nodeChanged()}n.onKeyUp.add(x);n.onClick.add(x)}if(q.force_br_newlines){if(c&&!d){n.onKeyPress.add(function(s,t){var y;if(t.keyCode==13&&p.getNode().nodeName!="LI"){p.setContent('<br id="__" /> ',{format:"raw"});y=v.get("__");y.removeAttribute("id");p.select(y);p.collapse();return k.cancel(t)}})}}if(q.force_p_newlines){if(!c||d){n.onKeyPress.add(function(s,t){if(t.keyCode==13&&!t.shiftKey&&!o.insertPara(t)){k.cancel(t)}})}else{m.addUnload(function(){o._previousFormats=0});n.onKeyPress.add(function(s,t){o._previousFormats=0;if(t.keyCode==13&&!t.shiftKey&&s.selection.isCollapsed()&&q.keep_styles){o._previousFormats=l(s.selection.getStart())}});n.onKeyUp.add(function(t,z){if(z.keyCode==13&&!z.shiftKey){var y=t.selection.getStart(),s=o._previousFormats;if(!y.hasChildNodes()&&s){y=v.getParent(y,v.isBlock);if(y&&y.nodeName!="LI"){y.innerHTML="";if(o._previousFormats){y.appendChild(s.wrapper);s.inner.innerHTML="\uFEFF"}else{y.innerHTML="\uFEFF"}p.select(y,1);p.collapse(true);t.getDoc().execCommand("Delete",false,null);o._previousFormats=0}}y=v.getParent(y,v.isBlock);if(/^(H[1-6])$/.test(y.nodeName)&&!y.innerText){y=v.rename(y,"P");p.select(y,1);p.collapse();t.nodeChanged()}}})}if(a){n.onKeyDown.add(function(s,t){if((t.keyCode==8||t.keyCode==46)&&!t.shiftKey){o.backspaceDelete(t,t.keyCode==8)}})}}if(m.isWebKit){function u(t){var s=p.getRng(),y,B=v.create("div",null," "),A,z=v.getViewPort(t.getWin()).h;s.insertNode(y=v.create("br"));s.setStartAfter(y);s.setEndAfter(y);p.setRng(s);if(p.getSel().focusNode==y.previousSibling){p.select(v.insertAfter(v.doc.createTextNode("\u00a0"),y));p.collapse(e)}v.insertAfter(B,y);A=v.getPos(B).y;v.remove(B);if(A>z){t.getWin().scrollTo(0,A)}}n.onKeyPress.add(function(s,t){if(t.keyCode==13&&(t.shiftKey||(q.force_br_newlines&&!v.getParent(p.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul")))){u(s);k.cancel(t)}})}if(c){if(q.element!="P"){n.onKeyPress.add(function(s,t){o.lastElm=p.getNode().nodeName});n.onKeyUp.add(function(t,y){var A,z=p.getNode(),s=t.getBody();if(s.childNodes.length===1&&z.nodeName=="P"){z=v.rename(z,q.element);p.select(z);p.collapse();t.nodeChanged()}else{if(y.keyCode==13&&!y.shiftKey&&o.lastElm!="P"){A=v.getParent(z,"p");if(A){v.rename(A,q.element);t.nodeChanged()}}}})}}},getParentBlock:function(p){var o=this.dom;return o.getParent(p,o.isBlock)},getClosestBlockContainer:function(o){return m.activeEditor.dom.getParent(o,"li, td, th, pre, body")},insertPara:function(ab){var Q=this,af=Q.editor,q=af.dom,ac=af.getDoc(),C=af.settings,S=af.selection.getSel(),T=af.selection.getRng(true),ae=ac.body;var N,P,ad,z,x,aa,Z,E,o,X,I,u,D,ag,W,A=q.getViewPort(af.getWin()),M,H,L;af.undoManager.beforeChange();af.selectionUtil.adjustForAnchorEdges(T);N=ac.createRange();N.setStart(S.anchorNode,S.anchorOffset);N.collapse(e);P=ac.createRange();P.setStart(S.focusNode,S.focusOffset);P.collapse(e);ad=N.compareBoundaryPoints(N.START_TO_END,P)<0;z=ad?S.anchorNode:S.focusNode;x=ad?S.anchorOffset:S.focusOffset;aa=ad?S.focusNode:S.anchorNode;Z=ad?S.focusOffset:S.anchorOffset;if(z===aa&&/^(TD|TH)$/.test(z.nodeName)){if(z.firstChild.nodeName=="BR"){q.remove(z.firstChild)}if(z.childNodes.length==0){af.dom.add(z,C.element,null,"<br />");u=af.dom.add(z,C.element,null,"<br />")}else{W=z.innerHTML;z.innerHTML="";af.dom.add(z,C.element,null,W);u=af.dom.add(z,C.element,null,"<br />")}T=ac.createRange();T.selectNodeContents(u);T.collapse(1);af.selection.setRng(T);return h}if(z==ae&&aa==ae&&ae.firstChild&&af.dom.isBlock(ae.firstChild)){z=aa=z.firstChild;x=Z=0;N=ac.createRange();N.setStart(z,0);P=ac.createRange();P.setStart(aa,0)}if(!ac.body.hasChildNodes()){ac.body.appendChild(q.create("br"))}z=z.nodeName=="HTML"?ac.body:z;z=z.nodeName=="BODY"?z.firstChild:z;aa=aa.nodeName=="HTML"?ac.body:aa;aa=aa.nodeName=="BODY"?aa.firstChild:aa;E=Q.getParentBlock(z);o=Q.getParentBlock(aa);X=E?E.nodeName:C.element;var F=Q.getClosestBlockContainer(z);if(F.nodeName.toLowerCase()=="li"){var J=F;if((q.isEmpty(J)||(J.firstChild.nodeType==1&&q.isEmpty(J.firstChild)&&(J.childNodes.length==1||J.lastChild.nodeName.toLowerCase()=="br"&&J.childNodes.length==2)))&&J.nextSibling==null){af.execCommand("mceOutdent");return false}else{if((m.isGecko||m.isIE9)&&af.selectionUtil.atEndOf(J)){var R=[];W=z;while(W!=J){if(W.nodeType==1&&!af.dom.isBlock(W)){R.push(W)}W=W.parentNode}var K=af.dom.create("li");J.parentNode.insertBefore(K,J.nextSibling);W=K;while(R.length){var G=R.pop().cloneNode(false);W.appendChild(G);W=G}if(m.isGecko){K.appendChild(f())}var V=af.dom.createRng();V.setStart(W,0);V.collapse(true);af.selection.setRng(V);m.dom.Event.cancel(ab);return false}}}else{if(m.isWebKit&&F.nodeName.toLowerCase()=="pre"&&af.dom.getParent(z,"p, pre")==F){var Y=af.selection.getBookmark();var v=af.dom.createRng();v.selectNodeContents(F);var U=af.dom.create("p");v.surroundContents(U);af.selection.moveToBookmark(Y);return true}}if(E&&(E.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(q.getStyle(E,"position",1)))){X=C.element;E=null}if(o&&(o.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(q.getStyle(E,"position",1)))){X=C.element;o=null}if(/(TD|TABLE|TH|CAPTION)/.test(X)||(E&&X=="DIV"&&/left|right/gi.test(q.getStyle(E,"float",1)))){X=C.element;E=o=null}I=(E&&E.nodeName==X)?E.cloneNode(0):af.dom.create(X);u=(o&&o.nodeName==X)?o.cloneNode(0):af.dom.create(X);u.removeAttribute("id");if(/^(H[1-6])$/.test(X)&&g(T,E)){u=af.dom.create(C.element)}W=D=z;do{if(W==ae||W.nodeType==9||Q.dom.isBlock(W)||/(TD|TABLE|TH|CAPTION)/.test(W.nodeName)){break}D=W}while((W=W.previousSibling?W.previousSibling:W.parentNode));W=ag=aa;do{if(W==ae||W.nodeType==9||Q.dom.isBlock(W)||/(TD|TABLE|TH|CAPTION)/.test(W.nodeName)){break}ag=W}while((W=W.nextSibling?W.nextSibling:W.parentNode));if(D.nodeName==X){N.setStart(D,0)}else{N.setStartBefore(D)}N.setEnd(z,x);af.selectionUtil.adjustForAnchorEdges(N);I.appendChild(N.cloneContents()||ac.createTextNode(""));try{P.setEndAfter(ag)}catch(O){}P.setStart(aa,Z);af.selectionUtil.adjustForAnchorEdges(P);u.appendChild(P.cloneContents()||ac.createTextNode(""));T=ac.createRange();if(!D.previousSibling&&D.parentNode.nodeName==X){T.setStartBefore(D.parentNode)}else{if(N.startContainer.nodeName==X&&N.startOffset==0){T.setStartBefore(N.startContainer)}else{T.setStart(N.startContainer,N.startOffset)}}if(!ag.nextSibling&&ag.parentNode.nodeName==X){T.setEndAfter(ag.parentNode)}else{T.setEnd(P.endContainer,P.endOffset)}T.deleteContents();if(b){af.getWin().scrollTo(0,A.y)}if(I.firstChild&&I.firstChild.nodeName==X){I.innerHTML=I.firstChild.innerHTML}if(u.firstChild&&u.firstChild.nodeName==X){u.innerHTML=u.firstChild.innerHTML}function B(t,r){var p=[],ah,y,s;t.innerHTML="";if(C.keep_styles){y=r;do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(y.nodeName)){ah=y.cloneNode(h);q.setAttrib(ah,"id","");p.push(ah)}}while(y=y.parentNode)}if(p.length>0){for(s=p.length-1,ah=t;s>=0;s--){ah=ah.appendChild(p[s])}p[0].innerHTML=b?"\u00a0":(c?"":"<br />");return p[0]}else{t.innerHTML=b?"\u00a0":(c?"":"<br />")}}if(q.isEmpty(I)){B(I,z)}L=u;while(L.firstChild&&L.firstChild.nodeType==1&&!/br|hr|img|input/i.test(L.firstChild.nodeName)){L=L.firstChild}if(q.isEmpty(u)){L=B(u,aa)||L}if(b&&parseFloat(opera.version())<9.5){T.insertNode(I);T.insertNode(u)}else{T.insertNode(u);T.insertNode(I)}u.normalize();I.normalize();T.setStart(L,0);T.setEnd(L,0);af.selection.setRng(T);M=af.dom.getPos(u).y;if(M<A.y||M+25>A.y+A.h){af.getWin().scrollTo(0,M<A.y?M:M-A.h+25)}af.undoManager.add();return h},backspaceDelete:function(v,C){var D=this,u=D.editor,z=u.getBody(),s=u.dom,x=u.selection,p=x.getRng(),y=p.startContainer,q,A,B,o;if(!C&&p.collapsed&&y.nodeType==1&&p.startOffset==y.childNodes.length){o=new m.dom.TreeWalker(y.lastChild,y);for(q=y.lastChild;q;q=o.prev()){if(q.nodeType==3){p.setStart(q,q.nodeValue.length);p.collapse(true);x.setRng(p);return}}}if(y&&u.dom.isBlock(y)&&!/^(TD|TH)$/.test(y.nodeName)&&C){if(y.childNodes.length==0||(y.childNodes.length==1&&y.firstChild.nodeName=="BR")){q=y;while((q=q.previousSibling)&&!u.dom.isBlock(q)){}while(q&&u.dom.is(q,"table, tbody, tr, ul, ol")){q=q.lastChild}if(q){if(y!=z.firstChild){B=q.lastChild;if(B&&B.nodeName.toLowerCase()=="br"){B=B.previousSibling}p=u.getDoc().createRange();if(B){p.setStart(q,s.nodeIndex(B)+1)}else{p.setStart(q,0)}p.collapse(true);x.setRng(p);u.dom.remove(y)}return k.cancel(v)}}}}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,d=c.each,e=c.extend;c.create("tinymce.ControlManager",{ControlManager:function(f,j){var h=this,g;j=j||{};h.editor=f;h.controls={};h.onAdd=new c.util.Dispatcher(h);h.onPostRender=new c.util.Dispatcher(h);h.prefix=j.prefix||f.id+"_";h._cls={};h.onPostRender.add(function(){d(h.controls,function(i){i.postRender()})})},get:function(f){return this.controls[this.prefix+f]||this.controls[f]},setActive:function(h,f){var g=null;if(g=this.get(h)){g.setActive(f)}return g},setDisabled:function(h,f){var g=null;if(g=this.get(h)){g.setDisabled(f)}return g},add:function(g){var f=this;if(g){f.controls[g.id]=g;f.onAdd.dispatch(g,f)}return g},createControl:function(i){var h,g=this,f=g.editor;d(f.plugins,function(j){if(j.createControl){h=j.createControl(i,g);if(h){return false}}});switch(i){case"|":case"separator":return g.createSeparator()}if(!h&&f.buttons&&(h=f.buttons[i])){return g.createButton(i,h)}return g.add(h)},createDropMenu:function(f,n,h){var m=this,i=m.editor,j,g,k,l;n=e({"class":"mceDropDown",constrain:i.settings.constrain_menus},n);n["class"]=n["class"]+" "+i.getParam("skin")+"Skin";if(k=i.getParam("skin_variant")){n["class"]+=" "+i.getParam("skin")+"Skin"+k.substring(0,1).toUpperCase()+k.substring(1)}f=m.prefix+f;l=h||m._cls.dropmenu||c.ui.DropMenu;j=m.controls[f]=new l(f,n);j.onAddItem.add(function(r,q){var p=q.settings;p.title=i.getLang(p.title,p.title);if(!p.onclick){p.onclick=function(o){if(p.cmd){i.execCommand(p.cmd,p.ui||false,p.value)}}}});i.onRemove.add(function(){j.destroy()});if(c.isIE){j.onShowMenu.add(function(){i.focus();g=i.selection.getBookmark(1)});j.onHideMenu.add(function(){if(g){i.selection.moveToBookmark(g);g=0}})}return m.add(j)},createListBox:function(m,i,l){var h=this,g=h.editor,j,k,f;if(h.get(m)){return null}i.title=g.translate(i.title);i.scope=i.scope||g;if(!i.onselect){i.onselect=function(n){g.execCommand(i.cmd,i.ui||false,n||i.value)}}i=e({title:i.title,"class":"mce_"+m,scope:i.scope,control_manager:h},i);m=h.prefix+m;if(g.settings.use_native_selects){k=new c.ui.NativeListBox(m,i)}else{f=l||h._cls.listbox||c.ui.ListBox;k=new f(m,i,g)}h.controls[m]=k;if(c.isWebKit){k.onPostRender.add(function(p,o){a.add(o,"mousedown",function(){g.bookmark=g.selection.getBookmark(1)});a.add(o,"focus",function(){g.selection.moveToBookmark(g.bookmark);g.bookmark=null})})}if(k.hideMenu){g.onMouseDown.add(k.hideMenu,k)}return h.add(k)},createButton:function(m,i,l){var h=this,g=h.editor,j,k,f;if(h.get(m)){return null}i.title=g.translate(i.title);i.label=g.translate(i.label);i.scope=i.scope||g;if(!i.onclick&&!i.menu_button){i.onclick=function(){g.execCommand(i.cmd,i.ui||false,i.value)}}i=e({title:i.title,"class":"mce_"+m,unavailable_prefix:g.getLang("unavailable",""),scope:i.scope,control_manager:h},i);m=h.prefix+m;if(i.menu_button){f=l||h._cls.menubutton||c.ui.MenuButton;k=new f(m,i,g);g.onMouseDown.add(k.hideMenu,k)}else{f=h._cls.button||c.ui.Button;k=new f(m,i,g)}return h.add(k)},createMenuButton:function(h,f,g){f=f||{};f.menu_button=1;return this.createButton(h,f,g)},createSplitButton:function(m,i,l){var h=this,g=h.editor,j,k,f;if(h.get(m)){return null}i.title=g.translate(i.title);i.scope=i.scope||g;if(!i.onclick){i.onclick=function(n){g.execCommand(i.cmd,i.ui||false,n||i.value)}}if(!i.onselect){i.onselect=function(n){g.execCommand(i.cmd,i.ui||false,n||i.value)}}i=e({title:i.title,"class":"mce_"+m,scope:i.scope,control_manager:h},i);m=h.prefix+m;f=l||h._cls.splitbutton||c.ui.SplitButton;k=h.add(new f(m,i,g));g.onMouseDown.add(k.hideMenu,k);return k},createColorSplitButton:function(f,n,h){var l=this,j=l.editor,i,k,m,g;if(l.get(f)){return null}n.title=j.translate(n.title);n.scope=n.scope||j;if(!n.onclick){n.onclick=function(o){if(c.isIE){g=j.selection.getBookmark(1)}j.execCommand(n.cmd,n.ui||false,o||n.value)}}if(!n.onselect){n.onselect=function(o){j.execCommand(n.cmd,n.ui||false,o||n.value)}}n=e({title:n.title,"class":"mce_"+f,menu_class:j.getParam("skin")+"Skin",scope:n.scope,more_colors_title:j.getLang("advanced.more_colors")},n);f=l.prefix+f;m=h||l._cls.colorsplitbutton||c.ui.ColorSplitButton;k=new m(f,n,j);j.onMouseDown.add(k.hideMenu,k);j.onRemove.add(function(){k.destroy()});if(c.isIE){k.onShowMenu.add(function(){j.focus();g=j.selection.getBookmark(1)});k.onHideMenu.add(function(){if(g){j.selection.moveToBookmark(g);g=0}})}return l.add(k)},createToolbar:function(k,h,j){var i,g=this,f;k=g.prefix+k;f=j||g._cls.toolbar||c.ui.Toolbar;i=new f(k,h,g.editor);if(g.get(k)){return null}return g.add(i)},createToolbarGroup:function(k,h,j){var i,g=this,f;k=g.prefix+k;f=j||this._cls.toolbarGroup||c.ui.ToolbarGroup;i=new f(k,h,g.editor);if(g.get(k)){return null}return g.add(i)},createSeparator:function(g){var f=g||this._cls.separator||c.ui.Separator;return new f()},setControlType:function(g,f){return this._cls[g.toLowerCase()]=f},destroy:function(){d(this.controls,function(f){f.destroy()});this.controls=null}})})(tinymce);(function(d){var a=d.util.Dispatcher,e=d.each,c=d.isIE,b=d.isOpera;d.create("tinymce.WindowManager",{WindowManager:function(f){var g=this;g.editor=f;g.onOpen=new a(g);g.onClose=new a(g);g.params={};g.features={}},open:function(z,h){var v=this,k="",n,m,i=v.editor.settings.dialog_type=="modal",q,o,j,g=d.DOM.getViewPort(),r;z=z||{};h=h||{};o=b?g.w:screen.width;j=b?g.h:screen.height;z.name=z.name||"mc_"+new Date().getTime();z.width=parseInt(z.width||320);z.height=parseInt(z.height||240);z.resizable=true;z.left=z.left||parseInt(o/2)-(z.width/2);z.top=z.top||parseInt(j/2)-(z.height/2);h.inline=false;h.mce_width=z.width;h.mce_height=z.height;h.mce_auto_focus=z.auto_focus;if(i){if(c){z.center=true;z.help=false;z.dialogWidth=z.width+"px";z.dialogHeight=z.height+"px";z.scroll=z.scrollbars||false}}e(z,function(p,f){if(d.is(p,"boolean")){p=p?"yes":"no"}if(!/^(name|url)$/.test(f)){if(c&&i){k+=(k?";":"")+f+":"+p}else{k+=(k?",":"")+f+"="+p}}});v.features=z;v.params=h;v.onOpen.dispatch(v,z,h);r=z.url||z.file;r=d._addVer(r);try{if(c&&i){q=1;window.showModalDialog(r,window,k)}else{q=window.open(r,z.name,k)}}catch(l){}if(!q){alert(v.editor.getLang("popup_blocked"))}},close:function(f){f.close();this.onClose.dispatch(this)},createInstance:function(i,h,g,m,l,k){var j=d.resolve(i);return new j(h,g,m,l,k)},confirm:function(h,f,i,g){g=g||window;f.call(i||this,g.confirm(this._decode(this.editor.getLang(h,h))))},alert:function(h,f,j,g){var i=this;g=g||window;g.alert(i._decode(i.editor.getLang(h,h)));if(f){f.call(j||i)}},resizeBy:function(f,g,h){h.resizeBy(f,g)},_decode:function(f){return d.DOM.decode(f).replace(/\\n/g,"\n")}})}(tinymce));(function(a){a.Formatter=function(W){var N={},P=a.each,c=W.dom,q=W.selection,t=a.dom.TreeWalker,L=new a.dom.RangeUtils(c),d=W.schema.isValidChild,G=c.isBlock,l=W.settings.forced_root_block,s=c.nodeIndex,F="\uFEFF",e=/^(src|href|style)$/,T=false,C=true,p,Q={apply:[],remove:[]};function A(X){return X instanceof Array}function m(Y,X){return c.getParents(Y,X,c.getRoot())}function b(X){return X.nodeType===1&&(X.face==="mceinline"||X.style.fontFamily==="mceinline")}function S(X){return X?N[X]:N}function k(X,Y){if(X){if(typeof(X)!=="string"){P(X,function(aa,Z){k(Z,aa)})}else{Y=Y.length?Y:[Y];P(Y,function(Z){if(Z.deep===p){Z.deep=!Z.selector}if(Z.split===p){Z.split=!Z.selector||Z.inline}if(Z.remove===p&&Z.selector&&!Z.inline){Z.remove="none"}if(Z.selector&&Z.inline){Z.mixed=true;Z.block_expand=true}if(typeof(Z.classes)==="string"){Z.classes=Z.classes.split(/\s+/)}});N[X]=Y}}}var i=function(Y){var X;W.dom.getParent(Y,function(Z){X=W.dom.getStyle(Z,"text-decoration");return X&&X!=="none"});return X};var J=function(X){var Y;if(X.nodeType===1&&X.parentNode&&X.parentNode.nodeType===1){Y=i(X.parentNode);if(W.dom.getStyle(X,"color")&&Y){W.dom.setStyle(X,"text-decoration",Y)}else{if(W.dom.getStyle(X,"textdecoration")===Y){W.dom.setStyle(X,"text-decoration",null)}}}};function U(aa,ai,ad){var ae=S(aa);if(ae==null){console.log("no such format: "+aa);return}var aj=ae[0],ah,Y,ag,af=q.isCollapsed();function ab(an){var am=an.startContainer,aq=an.startOffset,ap,ao;if(am.nodeType==1||am.nodeValue===""){am=am.nodeType==1?am.childNodes[aq]:am;if(am){ap=new t(am,am.parentNode);for(ao=ap.current();ao;ao=ap.next()){if(ao.nodeType==3&&!f(ao)){an.setStart(ao,0);break}}}}return an}function X(an,am){am=am||aj;if(an){if(am.onformat){am.onformat(an,am,ai,ad)}P(am.styles,function(ap,ao){c.setStyle(an,ao,r(ap,ai))});P(am.attributes,function(ap,ao){c.setAttrib(an,ao,r(ap,ai))});P(am.classes,function(ao){ao=r(ao,ai);if(!c.hasClass(an,ao)){c.addClass(an,ao)}})}}function ac(){function ao(av,at){var au=new t(at);for(ad=au.current();ad;ad=au.prev()){if(ad.childNodes.length>1||ad==av){return ad}}}var an=W.selection.getRng();var ar=an.startContainer;var am=an.endContainer;if(ar!=am&&an.endOffset==0){var aq=ao(ar,am);var ap=aq.nodeType==3?aq.length:aq.childNodes.length;an.setEnd(aq,ap)}return an}function Z(ap,av,at,ar,an){var am=[],ao=-1,au,ax=-1,aq=-1,aw;P(ap.childNodes,function(az,ay){if(az.nodeName==="UL"||az.nodeName==="OL"){ao=ay;au=az;return false}});P(ap.childNodes,function(az,ay){if(az.nodeName==="SPAN"&&c.getAttrib(az,"data-mce-type")=="bookmark"){if(az.id==av.id+"_start"){ax=ay}else{if(az.id==av.id+"_end"){aq=ay}}}});if(ao<=0||(ax<ao&&aq>ao)){P(a.grep(ap.childNodes),an);return 0}else{aw=at.cloneNode(T);P(a.grep(ap.childNodes),function(az,ay){if((ax<ao&&ay<ao)||(ax>ao&&ay>ao)){am.push(az);az.parentNode.removeChild(az)}});if(ax<ao){ap.insertBefore(aw,au)}else{if(ax>ao){ap.insertBefore(aw,au.nextSibling)}}ar.push(aw);P(am,function(ay){aw.appendChild(ay)});return aw}}function ak(an,ap){var am=[],ar,ao;ar=aj.inline||aj.block;ao=c.create(ar);X(ao);function aq(au){var at=0;P(au.childNodes,function(av){if(!f(av)&&!I(av)){at++}});return at}L.walk(an,function(at){var au;function av(aw){var az=aw.nodeName.toLowerCase(),ay=aw.parentNode.nodeName.toLowerCase(),ax;if((aw.nodeType==3&&aw.nodeValue=="")||(I(aw))){return}if(g(az,"br")){au=0;if(aj.block){c.remove(aw)}return}if(aj.wrapper&&y(aw,aa,ai)){au=0;return}if(aj.block&&!aj.wrapper&&H(az)){aw=c.rename(aw,ar);X(aw);am.push(aw);if(a.isIE&&aq(aw)==0){(function(){var aA=W.getDoc().createTextNode(F);aw.appendChild(aA);setTimeout(function(){c.remove(aA)},0)})()}au=0;return}if(aj.selector){P(ae,function(aA){if("collapsed" in aA&&aA.collapsed!==af){return}if(c.is(aw,aA.selector)&&!b(aw)){X(aw,aA);ax=true}});if(!aj.inline||ax){au=0;return}}if(d(ar,az)&&d(ay,ar)&&!(aw.nodeType===3&&aw.nodeValue.length===1&&aw.nodeValue.charCodeAt(0)===65279)){if(!au){au=ao.cloneNode(T);aw.parentNode.insertBefore(au,aw);am.push(au)}au.appendChild(aw)}else{if(az=="li"&&ap){au=Z(aw,ap,ao,am,av)}else{au=0;P(a.grep(aw.childNodes),av);au=0}}if(am.length==0&&x(aw.nodeName.toLowerCase())&&aq(aw)==0){au=ao.cloneNode(T);aw.appendChild(au);am.push(au);while(aw.firstChild!=au){au.appendChild(aw.firstChild)}}}P(at,av)});if(aj.wrap_links===false){P(am,function(at){function au(ay){var ax,aw,av;if(ay.nodeName==="A"){aw=ao.cloneNode(T);am.push(aw);av=a.grep(ay.childNodes);for(ax=0;ax<av.length;ax++){aw.appendChild(av[ax])}ay.appendChild(aw)}P(a.grep(ay.childNodes),au)}au(at)})}P(am,function(av){var at;function au(aw){var ay,ax;P(aw.childNodes,function(az){if(az.nodeType==1&&!I(az)&&!b(az)){ay=az;return T}});if(ay&&h(ay,aj)){ax=ay.cloneNode(T);X(ax);c.replace(ax,aw,C);c.remove(ay,1)}return ax||aw}at=aq(av);if(at===0&&!(am.length<=1&&av.parentNode&&x(av.parentNode.nodeName.toLowerCase()))){c.remove(av,1);return}if(aj.inline||aj.wrapper){if(!aj.exact&&at===1){av=au(av)}P(ae,function(aw){P(c.select(aw.inline,av),function(ay){var ax;if(aw.wrap_links===false){ax=ay.parentNode;do{if(ax.nodeName==="A"){return}}while(ax=ax.parentNode)}V(aw,ai,ay,aw.exact?ay:null)})});if(y(av.parentNode,aa,ai)){c.remove(av,1);av=0;return C}if(aj.merge_with_parents){c.getParent(av.parentNode,function(aw){if(y(aw,aa,ai)){c.remove(av,1);av=0;return C}})}if(av&&aj.merge_siblings!==false){av=u(D(av),av);av=u(av,D(av,C))}}});W.onFormatChange.dispatch(aj,true)}if(aj){if(ad){Y=c.createRng();Y.setStartBefore(ad);Y.setEndAfter(ad);ak(o(Y,ae))}else{if(!af||!aj.inline||c.select("td.mceSelected,th.mceSelected").length){var al=W.selection.getNode();W.selection.setRng(ac());ah=q.getBookmark();ak(o(q.getRng(C),ae),ah);if(aj.styles&&(aj.styles.color||aj.styles.textDecoration)){a.walk(al,J,"childNodes");J(al)}q.moveToBookmark(ah);W.nodeChanged()}else{R("apply",aa,ai)}}}}function B(Z,ai,ac){var ad=S(Z),ak=ad[0],ah,ag,Y;function ab(an){var am=an.startContainer,at=an.startOffset,ar,aq,ao,ap;if(am.nodeType==3&&at>=am.nodeValue.length-1){am=am.parentNode;at=s(am)+1}if(am.nodeType==1){ao=am.childNodes;am=ao[Math.min(at,ao.length-1)];ar=new t(am);if(at>ao.length-1){ar.next()}for(aq=ar.current();aq;aq=ar.next()){if(aq.nodeType==3&&!f(aq)){ap=c.create("a",null,F);aq.parentNode.insertBefore(ap,aq);an.setStart(aq,0);q.setRng(an);c.remove(ap);return}}}}function aa(ap){var ao,an,am;ao=a.grep(ap.childNodes);for(an=0,am=ad.length;an<am;an++){if(V(ad[an],ai,ap,ap)){break}}if(ak.deep){for(an=0,am=ao.length;an<am;an++){aa(ao[an])}}}function ae(am){var an;P(m(am.parentNode).reverse(),function(ao){var ap;if(!an&&ao.id!="_start"&&ao.id!="_end"){ap=y(ao,Z,ai);if(ap&&ap.split!==false){an=ao}}});return an}function X(ap,am,ar,av){var aw,au,at,ao,aq,an;if(ap){an=ap.parentNode;for(aw=am.parentNode;aw&&aw!=an;aw=aw.parentNode){au=aw.cloneNode(T);for(aq=0;aq<ad.length;aq++){if(V(ad[aq],ai,au,au)){au=0;break}}if(au){if(at){au.appendChild(at)}if(!ao){ao=au}at=au}}if(av&&(!ak.mixed||!G(ap))){am=c.split(ap,am)}if(at){ar.parentNode.insertBefore(at,ar);ao.appendChild(ar)}}return am}function aj(am){return X(ae(am),am,am,true)}function af(ao){var an=c.get(ao?"_start":"_end"),am=an[ao?"firstChild":"lastChild"];if(I(am)){am=am[ao?"firstChild":"lastChild"]}c.remove(an,true);return am}function al(am){var an,ao;am=o(am,ad,C);if(ak.split){an=K(am,C);ao=K(am);if(an!=ao){an=O(an,"span",{id:"_start","data-mce-type":"bookmark"});ao=O(ao,"span",{id:"_end","data-mce-type":"bookmark"});aj(an);aj(ao);an=af(C);ao=af()}else{an=ao=aj(an)}am.startContainer=an.parentNode;am.startOffset=s(an);am.endContainer=ao.parentNode;am.endOffset=s(ao)+1}L.walk(am,function(ap){P(ap,function(aq){aa(aq);if(aq.nodeType===1&&W.dom.getStyle(aq,"text-decoration")==="underline"&&aq.parentNode&&i(aq.parentNode)==="underline"){V({deep:false,exact:true,inline:"span",styles:{textDecoration:"underline"}},null,aq)}})});W.onFormatChange.dispatch(ak,false)}if(ac){Y=c.createRng();Y.setStartBefore(ac);Y.setEndAfter(ac);al(Y);return}if(!q.isCollapsed()||!ak.inline||c.select("td.mceSelected,th.mceSelected").length){ah=q.getBookmark();al(q.getRng(C));q.moveToBookmark(ah);if(j(Z,ai,q.getStart())){ab(q.getRng(true))}W.nodeChanged()}else{R("remove",Z,ai)}}function E(Y,aa,Z){var X=S(Y);if(j(Y,aa,Z)&&(!("toggle" in X[0])||X[0]["toggle"])){B(Y,aa,Z)}else{U(Y,aa,Z)}}function y(Y,X,ad,ab){var Z=S(X),ae,ac,aa;function af(aj,al,am){var ai,ak,ag=al[am],ah;if(al.onmatch){return al.onmatch(aj,al,am)}if(ag){if(ag.length===p){for(ai in ag){if(ag.hasOwnProperty(ai)){if(am==="attributes"){ak=c.getAttrib(aj,ai)}else{ak=M(aj,ai)}if(ab&&!ak&&!al.exact){return}if((!ab||al.exact)&&!g(ak,r(ag[ai],ad))){return}}}}else{for(ah=0;ah<ag.length;ah++){if(am==="attributes"?c.getAttrib(aj,ag[ah]):M(aj,ag[ah])){return al}}}}return al}if(Z&&Y){for(ac=0;ac<Z.length;ac++){ae=Z[ac];if(h(Y,ae)&&af(Y,ae,"attributes")&&af(Y,ae,"styles")){if(aa=ae.classes){for(ac=0;ac<aa.length;ac++){if(!c.hasClass(Y,aa[ac])){return}}}return ae}}}}function j(Z,ac,ab){var Y,aa;function X(ad){ad=c.getParent(ad,function(ae){return !!y(ae,Z,ac,true)});return y(ad,Z,ac)}if(ab){return X(ab)}if(q.isCollapsed()){for(aa=Q.apply.length-1;aa>=0;aa--){if(Q.apply[aa].name==Z){return true}}for(aa=Q.remove.length-1;aa>=0;aa--){if(Q.remove[aa].name==Z){return false}}return X(q.getNode())}ab=q.getNode();if(X(ab)){return C}Y=q.getStart();if(Y!=ab){if(X(Y)){return C}}return T}function v(ae,ad){var ab,ac=[],aa={},Z,Y,X;if(q.isCollapsed()){for(Y=0;Y<ae.length;Y++){for(Z=Q.remove.length-1;Z>=0;Z--){X=ae[Y];if(Q.remove[Z].name==X){aa[X]=true;break}}}for(Z=Q.apply.length-1;Z>=0;Z--){for(Y=0;Y<ae.length;Y++){X=ae[Y];if(!aa[X]&&Q.apply[Z].name==X){aa[X]=true;ac.push(X)}}}}ab=q.getStart();c.getParent(ab,function(ah){var ag,af;for(ag=0;ag<ae.length;ag++){af=ae[ag];if(!aa[af]&&y(ah,af,ad)){aa[af]=true;ac.push(af)}}});return ac}function z(ab){var ad=S(ab),aa,Z,ac,Y,X;if(ad){aa=q.getStart();Z=m(aa);for(Y=ad.length-1;Y>=0;Y--){X=ad[Y].selector;if(!X){return C}for(ac=Z.length-1;ac>=0;ac--){if(c.is(Z[ac],X)){return C}}}}return T}a.extend(this,{get:S,register:k,apply:U,remove:B,toggle:E,match:j,matchAll:v,matchNode:y,canApply:z});function h(X,Y){if(g(X,Y.inline)){return C}if(g(X,Y.block)){return C}if(Y.selector){return c.is(X,Y.selector)}}function g(Y,X){Y=Y||"";X=X||"";Y=""+(Y.nodeName||Y);X=""+(X.nodeName||X);return Y.toLowerCase()==X.toLowerCase()}function M(Y,X){var Z=c.getStyle(Y,X);if(X=="color"||X=="backgroundColor"){Z=c.toHex(Z)}if(X=="fontWeight"&&Z==700){Z="bold"}return""+Z}function r(X,Y){if(typeof(X)!="string"){X=X(Y)}else{if(Y){X=X.replace(/%(\w+)/g,function(aa,Z){return Y[Z]||aa})}}return X}function f(X){return X&&X.nodeType===3&&/^([\s\r\n]+|)$/.test(X.nodeValue)}function O(Z,Y,X){var aa=c.create(Y,X);Z.parentNode.insertBefore(aa,Z);aa.appendChild(Z);return aa}function o(X,ah,aa){var Z=X.startContainer,ae=X.startOffset,ak=X.endContainer,af=X.endOffset,aj,ag,ad;function ai(an,ao,al,am){var ap,aq;am=am||c.getRoot();if(an.nodeType==3&&!f(an)){if(ao==="firstChild"?ae>0:af<=an.nodeValue.length){return an}}for(;;){ap=an.parentNode;if(ap==am||(!ah[0].block_expand&&G(ap))){return an}for(aj=ap[ao];aj&&aj!=an;aj=aj[al]){if(aj.nodeType==1&&!I(aj)){return an}if(aj.nodeType==3&&!f(aj)){return an}}an=an.parentNode}return an}function ac(al,am){if(am===p){am=al.nodeType===3?al.length:al.childNodes.length}while(al&&al.hasChildNodes()){al=al.childNodes[am];if(al){am=al.nodeType===3?al.length:al.childNodes.length}}return{node:al,offset:am}}if(Z.nodeType==1&&Z.hasChildNodes()){ag=Z.childNodes.length-1;Z=Z.childNodes[ae>ag?ag:ae];if(Z.nodeType==3){ae=0}}if(ak.nodeType==1&&ak.hasChildNodes()){ag=ak.childNodes.length-1;ak=ak.childNodes[af>ag?ag:af-1];if(ak.nodeType==3){af=ak.nodeValue.length}}if(I(Z.parentNode)){Z=Z.parentNode}if(I(Z)){Z=Z.nextSibling||Z}if(I(ak.parentNode)){af=c.nodeIndex(ak);ak=ak.parentNode}if(I(ak)&&ak.previousSibling){ak=ak.previousSibling;af=ak.length}if(ah[0].inline){ad=ac(ak,af);if(ad.node){while(ad.node&&ad.offset===0&&ad.node.previousSibling){ad=ac(ad.node.previousSibling)}if(ad.node&&ad.offset>0&&ad.node.nodeType===3&&ad.node.nodeValue.charAt(ad.offset-1)===" "){if(ad.offset>1){ak=ad.node;ak.splitText(ad.offset-1)}else{if(ad.node.previousSibling){ak=ad.node.previousSibling}}}}}if(ah[0].inline||ah[0].block_expand){Z=ai(Z,"firstChild","nextSibling");ak=ai(ak,"lastChild","previousSibling")}if(ah[0].selector&&ah[0].expand!==T&&!ah[0].inline){function ab(am,al){var an,ao,aq,ap;if(am.nodeType==3&&am.nodeValue.length==0&&am[al]){am=am[al]}an=m(am);for(ao=0;ao<an.length;ao++){for(aq=0;aq<ah.length;aq++){ap=ah[aq];if("collapsed" in ap&&ap.collapsed!==X.collapsed){continue}if(c.is(an[ao],ap.selector)){return an[ao]}}}return am}Z=ab(Z,"previousSibling");ak=ab(ak,"nextSibling")}if(ah[0].block||ah[0].selector){function Y(am,al,ao){var an;if(!ah[0].wrapper){an=c.getParent(am,ah[0].block)}if(!an){an=c.getParent(am.nodeType==3?am.parentNode:am,G)}if(an&&ah[0].wrapper){an=m(an,"ul,ol").reverse()[0]||an}if(!an){an=am;while(an[al]&&!G(an[al])){an=an[al];if(g(an,"br")){break}}}return an||am}Z=Y(Z,"previousSibling");ak=Y(ak,"nextSibling");if(ah[0].block){if(!G(Z)){Z=ai(Z,"firstChild","nextSibling")}if(!G(ak)){ak=ai(ak,"lastChild","previousSibling")}}}if(Z.nodeType==1){ae=s(Z);Z=Z.parentNode}if(ak.nodeType==1){af=s(ak)+1;ak=ak.parentNode}return{startContainer:Z,startOffset:ae,endContainer:ak,endOffset:af}}function V(ad,ac,aa,X){var Z,Y,ab;if(!h(aa,ad)){return T}if(ad.remove!="all"){P(ad.styles,function(af,ae){af=r(af,ac);if(typeof(ae)==="number"){ae=af;X=0}if(!X||g(M(X,ae),af)){c.setStyle(aa,ae,"")}ab=1});if(ab&&c.getAttrib(aa,"style")==""){aa.removeAttribute("style");aa.removeAttribute("data-mce-style")}P(ad.attributes,function(ag,ae){var af;ag=r(ag,ac);if(typeof(ae)==="number"){ae=ag;X=0}if(!X||g(c.getAttrib(X,ae),ag)){if(ae=="class"){ag=c.getAttrib(aa,ae);if(ag){af="";P(ag.split(/\s+/),function(ah){if(/mce\w+/.test(ah)){af+=(af?" ":"")+ah}});if(af){c.setAttrib(aa,ae,af);return}}}if(ae=="class"){aa.removeAttribute("className")}if(e.test(ae)){aa.removeAttribute("data-mce-"+ae)}aa.removeAttribute(ae)}});P(ad.classes,function(ae){ae=r(ae,ac);if(!X||c.hasClass(X,ae)){c.removeClass(aa,ae)}});Y=c.getAttribs(aa);for(Z=0;Z<Y.length;Z++){if(Y[Z].nodeName.indexOf("_")!==0){return T}}}if(ad.remove!="none"){n(aa,ad);return C}}function n(Z,aa){var X=Z.parentNode,Y;if(aa.block){if(!l){function ab(ad,ac,ae){ad=D(ad,ac,ae);return !ad||(ad.nodeName=="BR"||G(ad))}if(G(Z)&&!G(X)){if(!ab(Z,T)&&!ab(Z.firstChild,C,1)){Z.insertBefore(c.create("br"),Z.firstChild)}if(!ab(Z,C)&&!ab(Z.lastChild,T,1)){Z.appendChild(c.create("br"))}}}else{if(X==c.getRoot()){if(!aa.list_block||!g(Z,aa.list_block)){P(a.grep(Z.childNodes),function(ac){if(d(l,ac.nodeName.toLowerCase())){if(!Y){Y=O(ac,l)}else{Y.appendChild(ac)}}else{Y=0}})}}}}if(aa.selector&&aa.inline&&!g(aa.inline,Z)){return}c.remove(Z,1)}function D(Y,X,Z){if(Y){X=X?"nextSibling":"previousSibling";for(Y=Z?Y:Y[X];Y;Y=Y[X]){if(Y.nodeType==1||!f(Y)){return Y}}}}function I(X){return X&&X.nodeType==1&&X.getAttribute("data-mce-type")=="bookmark"}function u(ab,aa){var X,Z,Y;function ad(ag,af){if(ag.nodeName!=af.nodeName){return T}function ae(ai){var aj={};P(c.getAttribs(ai),function(ak){var al=ak.nodeName.toLowerCase();if(al.indexOf("_")!==0&&al!=="style"){aj[al]=c.getAttrib(ai,al)}});return aj}function ah(al,ak){var aj,ai;for(ai in al){if(al.hasOwnProperty(ai)){aj=ak[ai];if(aj===p){return T}if(al[ai]!=aj){return T}delete ak[ai]}}for(ai in ak){if(ak.hasOwnProperty(ai)){return T}}return C}if(!ah(ae(ag),ae(af))){return T}if(!ah(c.parseStyle(c.getAttrib(ag,"style")),c.parseStyle(c.getAttrib(af,"style")))){return T}return C}if(ab&&aa){function ac(af,ae){for(Z=af;Z;Z=Z[ae]){if(Z.nodeType==3&&Z.nodeValue.length!==0){return af}if(Z.nodeType==1&&!I(Z)){return Z}}return af}ab=ac(ab,"previousSibling");aa=ac(aa,"nextSibling");if(ad(ab,aa)){for(Z=ab.nextSibling;Z&&Z!=aa;){Y=Z;Z=Z.nextSibling;ab.appendChild(Y)}c.remove(aa);P(a.grep(aa.childNodes),function(ae){ab.appendChild(ae)});return ab}}return aa}function H(X){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(X)}function x(X){return/^(td|th|li|body)$/.test(X)}function K(Y,ab){var X,aa,Z;X=Y[ab?"startContainer":"endContainer"];aa=Y[ab?"startOffset":"endOffset"];if(X.nodeType==1){Z=X.childNodes.length-1;if(!ab&&aa){aa--}X=X.childNodes[aa>Z?Z:aa]}return X}function R(af,Z,ad){var ab,Y=Q[af],ag=Q[af=="apply"?"remove":"apply"];function ah(){return Q.apply.length||Q.remove.length}function ac(){Q.apply=[];Q.remove=[]}function ai(ak){P(Q.apply.reverse(),function(al){U(al.name,al.vars,ak);if(al.name==="forecolor"&&al.vars.value){J(ak.parentNode)}});P(Q.remove.reverse(),function(al){B(al.name,al.vars,ak)});c.remove(ak,1);ac()}for(ab=Y.length-1;ab>=0;ab--){if(Y[ab].name==Z){return}}Y.push({name:Z,vars:ad});for(ab=ag.length-1;ab>=0;ab--){if(ag[ab].name==Z){ag.splice(ab,1)}}if(ah()){if(a.isIE&&!a.isIE9){W.getDoc().execCommand("FontName",false,"mceinline")}else{var ae=c.create("span",{style:"font-family: mceinline"});var aj=q.getRng(true);aj.insertNode(ae);aj.setStart(ae,0);aj.collapse(true);q.setRng(aj)}Q.lastRng=q.getRng();P(c.select("font,span"),function(al){var ak;if(b(al)){ak=q.getBookmark();ai(al);q.moveToBookmark(ak);W.nodeChanged()}});if(!Q.isListening&&ah()){Q.isListening=true;function X(al,am){var ak=c.createRng();ai(al);ak.setStart(am,am.nodeValue.length);ak.setEnd(am,am.nodeValue.length);q.setRng(ak);W.nodeChanged()}var aa=false;P("onKeyDown,onKeyUp,onKeyPress,onMouseUp".split(","),function(ak){W[ak].addToTop(function(al,ao){if(ao.keyCode==13&&!ao.shiftKey){aa=true;return}if(ah()&&!a.dom.RangeUtils.compareRanges(Q.lastRng,q.getRng())){var am=false;P(c.select("font,span"),function(ar){var at,aq;if(b(ar)){am=true;at=ar.firstChild;while(at&&at.nodeType!=3){at=at.firstChild}if(at){X(ar,at)}else{c.remove(ar)}}});if(aa&&!am){var an=q.getNode();var ap=an;while(ap&&ap.nodeType!=3){ap=ap.firstChild}if(ap){an=ap.parentNode;while(!G(an)){an=an.parentNode}X(an,ap)}}if(ao.type=="keyup"||ao.type=="mouseup"){ac();aa=false}}})})}}}}})(tinymce);tinymce.onAddEditor.add(function(e,a){var d,h,g,c=a.settings;if(c.inline_styles){h=e.explode(c.font_size_style_values);function b(j,i){e.each(i,function(l,k){if(l){g.setStyle(j,k,l)}});g.rename(j,"span")}d={font:function(j,i){b(i,{backgroundColor:i.style.backgroundColor,color:i.color,fontFamily:i.face,fontSize:h[parseInt(i.size)-1]})},u:function(j,i){b(i,{textDecoration:"underline"})},strike:function(j,i){b(i,{textDecoration:"line-through"})}};function f(i,j){g=i.dom;if(c.convert_fonts_to_spans){e.each(g.select("font,u,strike",j.node),function(k){d[k.nodeName.toLowerCase()](a.dom,k)})}}a.onPreProcess.add(f);a.onSetContent.add(f);a.onInit.add(function(){a.selection.onSetContent.add(f)})}});(function(){function g(s){return s&&s.nodeType==3}function n(s){return g(s.c)}function j(s){return s&&s.c&&s.c.nodeType==1&&s.c.nodeName.toLowerCase()=="body"}function k(s){if(n(s)){return s.off==s.c.nodeValue.length}else{return s.off==s.c.childNodes.length}}function p(s){return n(s)&&s.c.nodeValue.length==0}function i(s){var t=f(s);return(n(s)&&!k(s))||(t&&t.nodeName.toLowerCase()=="br")}function b(s){s=s.toLowerCase();return function(t){var u=f(t);return u&&u.nodeName&&u.nodeName.toLowerCase()==s}}function l(s){s=s.toLowerCase();return function(t){return t&&t.c.nodeType==1&&t.c.nodeName.toLowerCase()==s}}function e(t){return function s(u){return u.c==t}}function f(s){if(s.c&&s.off>=0&&s.c.childNodes&&s.c.childNodes.length>s.off){return s.c.childNodes[s.off]}return null}function c(s){if(s&&i(s)){return s.c.nodeValue.charAt(s.off)}return null}function h(s){var t=tinymce.activeEditor.dom;return{c:s.parentNode,off:t.nodeIndex(s)}}function o(s){var t=tinymce.activeEditor.dom;return{c:s.parentNode,off:t.nodeIndex(s)+1}}function d(s,t){s.setStart(t.c,t.off)}function q(s,t){s.setEnd(t.c,t.off)}function r(s){return{c:s.startContainer,off:s.startOffset}}function m(s){return{c:s.endContainer,off:s.endOffset}}function a(t){var s=t.nodeName;if(s=="#text"){s="#"+t.nodeValue}return s}tinymce.SelectionUtil=function(u){this.ed=u;var s={startPos:r,endPos:m,nodeAt:f,logSelection:function(A){var x=this.ed.selection.getRng(true).cloneRange();if(!A){A=""}var y=this.ed.selection.getSel();if(y.rangeCount==0){console.log(A+"No selection.")}else{var z=this.isForwardSelection()?"->":"<-";console.log(A+"current selection range: "+this.posStr(x.startContainer,x.startOffset)+" - "+this.posStr(x.endContainer,x.endOffset)+" Direction "+z,x);if(y.anchorNode){console.log("Anchor-focus"+(y.baseNode!=null?", base-extent: ":": ")+this.posStr(y.anchorNode,y.anchorOffset)+" - "+this.posStr(y.focusNode,y.focusOffset)+(y.baseNode!=null?", "+this.posStr(y.baseNode,y.baseOffset)+" - "+this.posStr(y.extentNode,y.extentOffset):""))}}},posStr:function v(A,y){var z=tinymce.activeEditor.dom.nodeIndex;var x="";if(A.parentNode&&A.parentNode.nodeName!="HTML"){x=v(A.parentNode,z(A))+"/"}return x+a(A)+(y!=null?"["+y+"]":"")},logRange:function(y,x){if(!y){y=""}console.log(y+": range: "+this.posStr(x.startContainer,x.startOffset)+" - "+this.posStr(x.endContainer,x.endOffset),x)},normalizeSelection:function(){if(!tinymce.isIE||tinymce.isIE9){var z=this.ed.selection;var C=z.getSel();if(!C){return}if(C.rangeCount==0){return}var B=this.isForwardSelection(C);var x=z.getRng(true);var E=x;if(E.startContainer==E.endContainer&&E.startOffset==E.endOffset&&E.startContainer.nodeName.toLowerCase()=="body"){var D=E.startOffset;if(D<E.startContainer.childNodes.length){var y=E.startContainer.childNodes[D];E=this.ed.dom.createRng();E.setStart(y,0);E.setEnd(y,0)}}var A=this.normalizeRange(E);if(A.compareBoundaryPoints(A.START_TO_START,x)!=0||A.compareBoundaryPoints(A.END_TO_END,x)!=0){this.setSelection(A,B)}}},isForwardSelection:function(x){if(!x){x=this.ed.selection.getSel()}if(x.anchorNode==null||x.focusNode==null){return true}var z=this.ed.dom.createRng();z.setStart(x.anchorNode,x.anchorOffset);z.collapse(true);var y=this.ed.dom.createRng();y.setStart(x.focusNode,x.focusOffset);y.collapse(true);return z.compareBoundaryPoints(z.START_TO_START,y)<=0},setSelection:function(x,z){var y=this.ed.selection.getSel();if(y.collapse!=null&&y.extend!=null){if(z){y.collapse(x.startContainer,x.startOffset);y.extend(x.endContainer,x.endOffset)}else{y.collapse(x.endContainer,x.endOffset);y.extend(x.startContainer,x.startOffset)}}else{this.ed.selection.setRng(x)}},getInfo:function(){return{longname:"Jive Selection",author:"Jive Software",authorurl:"http://jivesoftware.com",infourl:"http://jivesoftware.com",version:tinyMCE.majorVersion+"."+tinyMCE.minorVersion}},isBookmark:function(x){var y=this.ed.dom.get(x);return y&&y.nodeName.toLowerCase()=="span"&&this.ed.dom.getAttrib(y,"data-mce-type")=="bookmark"},removeBookmark:function(y){if(y.id!=null){var z=this.ed.dom;function x(B){var A;while(A=z.get(B)){tinymce.each(tinymce.grep(A.childNodes),function(C){if(C.nodeType==3){C.nodeValue=C.nodeValue.replace(/\uFEFF/g,"")}});z.remove(A,1)}}x(y.id+"_start");x(y.id+"_end")}},adjustForBookmark:function(x,z){if(z==null){z=true}var y=this;function B(E){var D=f(E);if(y.isBookmark(D)){return D}D=E.c;if(y.isBookmark(D)){return D}D=E.c.parentNode;if(y.isBookmark(D)){return D}return null}var A=false;var C=B(r(x));if(C){if(z){d(x,h(C))}else{d(x,o(C))}A=true}C=B(m(x));if(C){if(z){q(x,o(C))}else{q(x,h(C))}A=true}return A},adjustForAnchorEdges:function(x){var B=false;var A=x.collapsed;var y=this.ed.dom.getParent(x.startContainer,"a");if(y){if(this.atStartOf(y,r(x))){x.setStartBefore(y);B=true}else{if(this.atEndOf(y,r(x))){x.setStartAfter(y);B=true}}}if(A){if(B){x.collapse(true)}}else{var z=this.ed.dom.getParent(x.endContainer,"a");if(z){if(this.atStartOf(z,m(x))){x.setEndBefore(z);B=true}else{if(this.atEndOf(z,m(x))){x.setEndAfter(z);B=true}}}}return B},isEffectivelyEmpty:function(y){if(y.childNodes&&y.childNodes.length>0){var x=y.firstChild;while(x){if(x.nodeType!=3&&x.nodeName.toLowerCase()!="br"||x.nodeType==3&&tinymce.trim(x.nodeValue).length>0){return false}x=x.nextSibling}}return true},isEffectivelyEmptyList:function(z){var x=/^(?:ul|ol|li)$/i;if(x.test(z.nodeName)){var y=z.firstChild;while(y){if(x.test(y.nodeName)){if(!this.isEffectivelyEmptyList(y)){return false}}else{if(y.nodeType!=3&&y.nodeName.toLowerCase()!="br"||y.nodeType==3&&tinymce.trim(y.nodeValue).length>0){return false}}y=y.nextSibling}return true}return false},splitAtEndpoints:function(x,C){var B=this.ed,A=B.dom,D=this;function I(L){if(n(L)){if(L.off==0){L=h(L.c)}else{if(L.off==L.c.nodeValue.length){L=h(L.c);L.off+=1}else{L=h(L.c.splitText(L.off))}}}var J=A.create("br",{id:A.uniqueId()});var K=f(L);L.c.insertBefore(J,K);return J}var G=I(m(x));var E=null;if(!x.collapsed){E=I(r(x))}x=A.createRng();if(E){x.setStartBefore(E);x.setEndAfter(G)}else{x.selectNode(G)}if(!C){C="body, pre, td"}if(typeof C=="string"){var z=C;C=function(J){return B.dom.is(J,z)}}function H(K,J){while(J.parentNode!=K&&!C(J.parentNode)){A.split(J.parentNode,J)}if(J.nextSibling&&J.nextSibling.nodeType==1&&(D.isEffectivelyEmpty(J.nextSibling)||D.isEffectivelyEmptyList(J.nextSibling))){A.remove(J.nextSibling)}}var y=null;if(x.commonAncestorContainer.nodeName.toLowerCase()=="li"){y=x.commonAncestorContainer}else{if(x.commonAncestorContainer.parentNode.nodeName.toLowerCase()=="ul"||x.commonAncestorContainer.parentNode.nodeName.toLowerCase()=="ol"){y=x.commonAncestorContainer.parentNode.parentNode}else{y=x.commonAncestorContainer.parentNode}}H(y,G);if(E){H(y,E)}if(E){var F=h(E);A.remove(E);d(x,F);F=h(G);A.remove(G);q(x,F)}else{F=h(G);A.remove(G);d(x,F);x.collapse(true)}return x},getExpandedBlockRange:function(x,F,A){var z=this.ed.dom;var C=z.createRng();x=this.normalizeRange(x);this.adjustForBookmark(x,true);if(F==null){F=function(H){return z.isBlock(H)}}if(A==null){A="body, td, pre"}var G=z.getParent(x.startContainer,A);var B=z.getParent(x.endContainer,A);if(!G||!B||G!=B){return null}try{var E;if(G==x.startContainer){E=x.startContainer.childNodes[x.startOffset]}else{E=z.getParent(x.startContainer,F)}var y;if(B==x.endContainer){y=x.endContainer.childNodes[Math.max(0,x.endOffset-1)]}else{y=z.getParent(x.endContainer,F)}if(E==null&&y==null&&x.collapsed){C.setStart(x.startContainer,x.startOffset);C.setEnd(x.endContainer,x.endOffset);return C}if(E.parentNode!=y.parentNode){return null}C.setStart(E.parentNode,z.nodeIndex(E));C.setEnd(y.parentNode,z.nodeIndex(y)+1);return C}catch(D){console.log("error expanding range: ",D,x);return null}},getShrunkenBlockRange:function t(x,A){var B=this.ed.dom;var y=x.cloneRange();x=this.normalizeRange(x);this.adjustForBookmark(x,true);if(A==null){A=function(C){return B.isBlock(C)}}if(x.startContainer==x.endContainer&&x.startOffset+1==x.endOffset){var z=f(r(x));if(B.is(z,A)){y.surroundContents(z);y=t(y,A)}}return y},dfsNext:function(A,E,y){var z=this.ed.dom;function C(G){return G.c.parentNode==null}if(!y){y=C}function x(G){if(n(G)){return null}if(E){var H=f(G);if(!H){return null}}else{G=D(G);if(!G){return null}H=f(G);if(!H){return null}}if(g(H)){return{c:H,off:E?0:H.nodeValue.length}}else{return{c:H,off:E?0:H.childNodes.length}}}function D(H){var G;if(n(H)){G={c:H.c,off:E?H.off+1:H.off-1};if(0<=G.off&&G.off<=G.c.nodeValue.length){return G}return null}else{G={c:H.c,off:E?H.off+1:H.off-1};if(0<=G.off&&G.off<=G.c.childNodes.length){return G}return null}}function F(G){if(y(G)||!G.c||!G.c.parentNode){return null}var H=G.c.parentNode;return{c:H,off:z.nodeIndex(G.c)+(E?1:0)}}var B=x(A);if(B){return B}B=D(A);if(B){return B}return F(A)},atStartOf:function(B,A){var y=this;if(A==null){var x=this.ed.selection.getRng(true);A=r(x)}function z(E,C){var D=null;while(E&&E.off==0&&(!D||D.c.parentNode==E.c)){D=E;if(C(E)){return E}E=y.dfsNext(E,false,j)}return null}return !!z(A,e(B))},atEndOf:function(B,A){var z=this;if(A==null){var y=this.ed.selection.getRng(true);A=r(y)}function x(G,D){var E=null;function C(H){var I=f(H);return H.c.nodeName.toLowerCase()=="br"||(I&&I.nodeName.toLowerCase()=="br")}function F(H){var I=f(H);return p(H)||(I&&I.nodeType==3&&I.nodeValue=="")}while(C(G)||F(G)){G=z.dfsNext(G,true,j)}while(G&&k(G)&&(!E||E.c.parentNode==G.c)){E=G;if(D(G)){return G}do{G=z.dfsNext(G,true,j)}while(C(G)||F(G))}return null}return !!x(A,e(B))},safeNormalize:function(x,z){var F=this;if(z==null){z=x.commonAncestorContainer}if(z.nodeType==3){return x}x=x.cloneRange();if(!tinymce.isGecko&&!tinymce.isIE9){var C=this.ed.selection.getRng(true);var E=this.isForwardSelection();if(z.normalize){z.normalize()}if(this.ed.selection.getSel().rangeCount===0){this.setSelection(C,E)}}else{function D(H){var G=f(H);if(!G){if(n(H)){var J=H.c;var I=H.off;while(J.previousSibling&&J.previousSibling.nodeType==3){J=J.previousSibling;I+=J.nodeValue.length}G={c:J,off:I,cPrevSib:J.previousSibling,cParent:J.parentNode}}else{G={c:H.c,off:-1}}}else{if(g(G)){if(H.off==0){return H}else{if(G.nodeValue.length==0){return D({c:H.c,off:H.off+1})}else{if(G.previousSibling&&G.previousSibling.nodeType==3){return D({c:G,off:0})}}}}}return G}function B(G){var I,H;if(G.c!=null&&G.off!=null){if(G.c.parentNode!=null){I=G.c}else{if(G.cPrevSib!=null){I=G.cPrevSib.nextSibling;if(I==null){I=G.cParent;G.off=-1}else{if(I.nodeType!=3){return B(I)}}}else{I=G.cParent.firstChild;if(I==null){I=G.cParent;G.off=-1}else{if(I.nodeType!=3){return B(I)}}}}if(G.off==-1){H=I.childNodes.length}else{H=G.off}return{c:I,off:H}}else{I=G.parentNode;H=F.ed.dom.nodeIndex(G);return{c:I,off:H}}}var y=D({c:x.startContainer,off:x.startOffset});var A=D({c:x.endContainer,off:x.endOffset});if(z!=x.commonAncestorContainer){x.commonAncestorContainer.normalize()}z.normalize();y=B(y);A=B(A);d(x,y);q(x,A)}return x},normalizeRange:function(C){var S=this.ed.dom,x=C.collapsed,M=this;C=C.cloneRange();function U(Z){if(Z&&Z.nodeType==1){var Y=S.getStyle(Z,"display",true);return Y!="inline"&&Y!="none"}return false}function D(Y){var Z=f(Y);return U(Z)||I(Y)}function V(Y){return U(Y.c)}function I(Y){return U(Y.c)&&!f(Y)}function O(Y){return Y==null||D(Y)}function X(Z,Y){Y=Y.toLowerCase();return Z.nodeName.toLowerCase()==Y}function z(ac,Z,ab,aa,Y){while(ac&&!aa(ac)){if(Z(ac)){return ac}ac=M.dfsNext(ac,ab,Y)}return null}function B(ae,Y,af,ab,ad,aa){var Z=ab?Y:af;var ac=z(ae,Z,ab,ad,aa);if(!ac){Z=!ab?Y:af;ac=z(ae,Z,!ab,ad,aa)}return ac}function W(Y){return n(Y)&&Y.off>0}function P(Y){return Y.off>0&&Y.c.childNodes[Y.off-1].nodeType==1&&!U(Y.c.childNodes[Y.off-1])&&!X(Y.c.childNodes[Y.off-1],"img")&&!X(Y.c.childNodes[Y.off-1],"br")}function R(Y){var Z=Y.c.childNodes[Y.off-1];while(Z.lastChild){Z=Z.lastChild}return{c:Z,off:Z.childNodes.length}}function A(){var Z=Array.prototype.slice.apply(arguments);return function Y(ac){var aa=true;for(var ab=0;aa&&ab<Z.length;++ab){aa=aa&&Z[ab](ac)}return aa}}function G(){var Z=Array.prototype.slice.apply(arguments);return function Y(ac){var aa=false;for(var ab=0;!aa&&ab<Z.length;++ab){aa=aa||Z[ab](ac)}return aa}}function F(Y){return function Z(aa){return !Y(aa)}}var T=l("a");var y=G(j,T);var N=G(O,T);var K=l("br");var L=l("img");function Q(aa,Z){var Y=B({c:aa,off:Z},i,W,false,G(N,K,L),y);if(Y){return Y}else{Y=B({c:aa,off:Z},G(V,D),G(V,I),false,G(y,L),y);if(Y&&(Y.c!=aa||Y.off!=Z)){return Y}if(P({c:aa,off:Z})){return R({c:aa,off:Z})}return{c:aa,off:Z}}}C=this.safeNormalize(C);if(x){var J=C.startContainer;if(J.nodeType==1&&!U(C.startContainer)&&C.startContainer.childNodes.length==0){return C}else{var H=Q(C.startContainer,C.startOffset);d(C,H);C.collapse(true)}}else{function E(Z){var Y=G(A(n,F(k)),L,b("img"),K,b("br"));function aa(ad,ac){while(true){var ab=M.dfsNext(ad,ac,j);if((ab==null)||(ab.c==ad.c.parentNode&&S.isBlock(ad.c))||(ac&&Y(ad))||(!ac&&Y(ab))){return ad}ad=ab}}d(Z,aa(r(Z),true));q(Z,aa(m(Z),false))}E(C)}return C}};tinymce.extend(this,s)}})();