(function(){tinymce.create("tinymce.plugins.JiveStylePlugin",{getInfo:function(){return{longname:"Image Picker",author:"Jive Software",authorurl:"http://www.jivesoftware.com",infourl:"http://www.jivesoftware.com/",version:"1.0"}},init:function(a,b){a.onInit.add(function(d){var c=document.getElementById(d.id+"_jivestyle_action");if(c){var e=c.childNodes[0];while(e.childNodes.length>0){e.removeChild(e.childNodes[0])}e.appendChild(document.createTextNode(d.getLang("jivestyle.title")))}d.plugins.jivebuttons.initToolbar(d.id);setTimeout(function(g,f){return function(){g.plugins.jivebuttons.initToolbar(f)}}(d,d.id),300)});a.onNodeChange.add(function(c){return function(j,m,f){var d=j.dom.getParent(f,j.dom.isBlock);if(d){if(c.buttons.length>0){var e=j.selection;for(var h=0;h<c.buttons.length;h++){var l=window.document;var g=new tinymce.dom.DOMUtils(l);var k=$def(d.tagName)&&d.tagName.toLowerCase()==c.tagNames[h];var q=l.getElementById(c.buttons[h].id);var o=q.cells[0];if(k&&(e.isCollapsed()||e.getStart()==e.getEnd())){g.addClass(o,"mceMenuItemSelected")}else{g.removeClass(o,"mceMenuItemSelected")}}}}}}(this));this.buttons=new Array();this.tagNames=["p","h1","h2","h3","h4","h5","h6"]},execCommand:function(d,c,e){if(d=="mceJiveStyle"){var a=tinyMCE.activeEditor.controlManager;var b=a.get("jivestyle");b.showMenu();return true}return false},isTag:function(b){var c=tinyMCE.activeEditor;var e=c.selection;if(e.isCollapsed()){var f=e.getNode();var d=c.dom.getParent(f,b);var a=$def(d)&&d!=null&&$def(d.tagName)&&d.tagName.toLowerCase()==b;if(a){return"mceMenuItemSelected"}else{return""}}else{return""}},addButton:function(a){this.buttons.push(a)},createControl:function(d,a){switch(d){case"jivestyle":var b=a.createSplitButton("jivestyle",{title:"jivestyle.title",cmd:"mceJiveStyle"});b.onRenderMenu.add(function(j,e){var f=tinyMCE.activeEditor;var h=f.plugins.jivestyle;h.addButton(e.add({title:"jivestyle.paragraph",cmd:"FormatBlock",ui:false,value:"p","class":"mce_formatPreview mce_p "+h.isTag("p")}));for(var g=1;f.settings.max_header_count>=g&&g<=6;++g){h.addButton(e.add({title:f.getLang("jivestyle.header")+" "+g,cmd:"FormatBlock",ui:false,value:"h"+g,"class":"mce_formatPreview mce_h"+g+" "+h.isTag("h"+g)}))}});return b}return null}});tinymce.PluginManager.add("jivestyle",tinymce.plugins.JiveStylePlugin)})();