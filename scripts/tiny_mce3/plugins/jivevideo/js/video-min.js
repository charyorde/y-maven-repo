var action,orgTableWidth,orgTableHeight,dom=tinyMCEPopup.editor.dom;function insertVideo(){var d=tinyMCEPopup.editor;var a=$j("#site").val();var c=$j("#videoId").val();if(a&&a.length){tinyMCEPopup.restoreSelection();var b="";b+="<img";b+=makeAttrib("class","jive_macro jive_macro_"+a);b+=makeAttrib("jivemacro",a);b+=makeAttrib("___default_attr",c);var e=window.parent.CS_RESOURCE_BASE_URL+"/images/tiny_mce3/plugins/jiveemoticons/images/spacer.gif";b+=makeAttrib("src",e);b+=makeAttrib("data-mce-src",e);b+=makeAttrib("width","425");b+=makeAttrib("height","350");b+="/>";d.execCommand("mceBeginUndoLevel");d.execCommand("mceInsertContent",false,b);d.execCommand("mceEndUndoLevel");tinyMCEPopup.close()}else{invalid()}}function makeAttrib(d,c){var b=$j("#webform").get(0);var a=b.elements[d];if(typeof(c)=="undefined"||c==null){c="";if(a){c=a.value}}if(c==""){return""}c=c.replace(/&/g,"&amp;");c=c.replace(/\"/g,"&quot;");c=c.replace(/</g,"&lt;");c=c.replace(/>/g,"&gt;");return" "+d+'="'+c+'"'}function valid(){document.getElementById("invalid").style.display="none";document.getElementById("insert").disabled=false}function invalid(){document.getElementById("invalid").style.display="block";document.getElementById("insert").disabled=true}function getGenericVideoID(d,c){var e,b,a;e=null;for(b=0;b<c.length;b+=1){a=d.match(c[b]);if(a&&a.length>=2){e=a[1];return e}}return null}function init(){tinyMCEPopup.resizeToInnerSize();var d=tinyMCEPopup.editor;var b={youtube:{regexes:[/youtube\.com\/watch\?(?:[^&]+&)*v=([_\-a-zA-Z0-9]+)/i,/youtube\.com\/embed\/([_\-a-zA-Z0-9]+)/i,/youtube\.com\/user\/.*\/([_\-a-zA-Z0-9]+)/i,/youtube\.com\/v\/([_\-a-zA-Z0-9]+)/i,/youtu\.be\/([_\-a-zA-Z0-9]+)/i],displayName:"youtube.com"},vimeo:{regexes:[/vimeo.com\/moogaloop.swf\?clip_id=([a-zA-Z0-9]+)/i,/vimeo.com\/video\/([a-zA-Z0-9]+)/i,/vimeo.com\/([a-zA-Z0-9]+)/i],displayName:"vimeo.com"},veoh:{regexes:[/veoh.com\/browse\/videos\/\S+\/watch\/([a-zA-Z0-9]+)/i,/veoh.com\/videos\/([a-zA-Z0-9]+)/i,/veoh.com\/veohplayer.swf\?permalinkId=([a-zA-Z0-9]+)/i,/veoh.com\/watch\/([a-zA-Z0-9]+)/i],displayName:"veoh.com"},dailymotion:{regexes:[/dailymotion.com\/([a-zA-Z0-9]+)\/([a-zA-Z0-9]+)\/([a-zA-Z0-9]+)\/([a-z0-9]+)\/video\/([a-zA-Z0-9]+)/i,/dailymotion.com\/video\/([a-zA-Z0-9]+)/i,/dailymotion.com\/swf\/([a-zA-Z0-9]+)/i,/dailymotion.com\/embed\/video\/([a-zA-Z0-9]+)/i,/dailymotion.com\/([a-zA-Z0-9]+)\/([a-zA-Z0-9]+)\/([a-zA-Z0-9]+)\/video\/([a-zA-Z0-9]+)/i,/dailymotion.com\/([a-zA-Z0-9]+)\/([a-zA-Z0-9]+)\/video\/([a-zA-Z0-9]+)/i,/dailymotion.com\/([a-zA-Z0-9]+)\/video\/([a-z0-9]+)/i],displayName:"dailymotion.com"}};var f={};var c=[];if(d.plugins.jivevideo.enabled.length==1&&d.plugins.jivevideo.enabled[0].getName()=="videomacro"){$j("#jive-web-tab").hide()}else{d.plugins.jivevideo.enabled.forEach(function(h){var g=h.getName();if(b[g]!=null){f[g]=b[g];c.push(f[g].displayName)}});c.sort();$j("#sourceList").text(c.join(", "))}var a=$j("#embed").bind("keyup change mouseup textInput",e).get(0);function e(){var i=a.value;if(i==""){invalid()}var g=null;for(var h in f){g=getGenericVideoID(i,f[h].regexes);if(g!=null){break}}if(g!=null){$j("#site").val(h);$j("#videoId").val(g);valid()}else{$j("#site").val("");$j("#videoId").val("");invalid()}}}tinyMCEPopup.onInit.add(init);