var foo=(function(){var d=tinymce.DOM,b=tinymce.dom.Event,g=tinymce.extend,e=tinymce.each,a=tinymce.util.Cookie,f,c=tinymce.explode;tinymce.ThemeManager.requireLangPack("advanced");tinymce.create("tinymce.themes.AdvancedTheme",{controls:{bold:["bold_desc","Bold"],italic:["italic_desc","Italic"],underline:["underline_desc","Underline"],strikethrough:["striketrough_desc","Strikethrough"],justifyleft:["justifyleft_desc","JustifyLeft"],justifycenter:["justifycenter_desc","JustifyCenter"],justifyright:["justifyright_desc","JustifyRight"],justifyfull:["justifyfull_desc","JustifyFull"],bullist:["bullist_desc","jiveInsertUnorderedList"],numlist:["numlist_desc","jiveInsertOrderedList"],outdent:["outdent_desc","mceOutdent"],indent:["indent_desc","mceIndent"],cut:["cut_desc","Cut"],copy:["copy_desc","Copy"],paste:["paste_desc","Paste"],link:["link_desc","mceLink"],unlink:["unlink_desc","unlink"],image:["image_desc","mceImage"],undo:["undo_desc","Undo"],redo:["redo_desc","Redo"],sub:["sub_desc","subscript"],sup:["sup_desc","superscript"],code:["code_desc","mceCodeEditor"],hr:["hr_desc","InsertHorizontalRule"],removeformat:["removeformat_desc","mceRemoveFullFormat"],forecolor:["forecolor_desc","ForeColor"],forecolorpicker:["forecolor_desc","mceForeColor"],backcolor:["backcolor_desc","HiliteColor"],backcolorpicker:["backcolor_desc","mceBackColor"],blockquote:["blockquote_desc","mceBlockQuote"]},stateControls:["bold","italic","underline","strikethrough","bullist","numlist","justifyleft","justifycenter","justifyright","justifyfull","blockquote"],removeListsFromHelper:function(i,n,h,l){var j=false;if(h==null){return true}if(h==l){j=true}var m=i.getDoc();if(h.nodeType==3||h.nodeName.toLowerCase()!="ol"&&h.nodeName.toLowerCase()!="ul"){n.appendChild(h);return false}while(h.childNodes.length>0){var k=h.childNodes[0];if(this.removeListsFromHelper(i,n,k,l)){if(h.nodeName.toLowerCase()=="ol"||h.nodeName.toLowerCase()=="ul"){h.removeChild(k)}return true}if(h.nodeName.toLowerCase()=="ol"||h.nodeName.toLowerCase()=="ul"){h.removeChild(k)}}if(this.shouldEndLine(h)){n.appendChild(m.createTextNode("\n"))}if(j){return j}if(h.nextSibling!=null){if(this.removeListsFromHelper(i,n,h.nextSibling,l)){return true}}return false},getParentNode:function(h,i){return(new tinymce.dom.DOMUtils(h.getDoc())).getParent(i,function(j){return j==h.getBody()||j!=i})},removeListsFrom:function(m,j,k,h){var n=false;if(k==null){return true}if(k==h){n=true}var p=m.getDoc();if(k.nodeType==3||k.nodeName.toLowerCase()!="ol"&&k.nodeName.toLowerCase()!="ul"){j.appendChild(k);return false}while(k.childNodes.length>0){var i=k.childNodes[0];if(this.removeListsFromHelper(m,j,i,h)){if(k.nodeName.toLowerCase()=="ol"||k.nodeName.toLowerCase()=="ul"){k.removeChild(i)}return true}if(k.nodeName.toLowerCase()=="ol"||k.nodeName.toLowerCase()=="ul"){k.removeChild(i)}}if(this.shouldEndLine(k)){j.appendChild(p.createTextNode("\n"))}if(n){if(k.nodeName.toLowerCase()=="ol"||k.nodeName.toLowerCase()=="ul"){var o=this.getParentNode(m,k);o.removeChild(k)}return n}if(k.nextSibling!=null){var l=k.nextSibling;if(k.nodeName.toLowerCase()=="ol"||k.nodeName.toLowerCase()=="ul"){var o=this.getParentNode(m,k);o.removeChild(k)}if(this.removeListsFromHelper(m,j,l,h)){return true}}var l=this.getNextSibling(m,k);if(k.nodeName.toLowerCase()=="ol"||k.nodeName.toLowerCase()=="ul"){var o=this.getParentNode(m,k);o.removeChild(k)}if(this.removeListsFrom(m,j,l,h)){return true}return false},init:function(i,j){var k=this,l,h;i.addCommand("mceRemoveFullFormat",function(){if(!i.selection.isCollapsed()){i.execCommand("RemoveFormat");var o=i.selection.getNode();var m=i.dom.getParent(o,"table");if(m==null){i.execCommand("FormatBlock",false,"<p>")}}});k.editor=i;k.url=j;k.onResolveName=new tinymce.util.Dispatcher(this);k.onResize=new tinymce.util.Dispatcher(this);k.settings=l=g({theme_advanced_path:true,theme_advanced_toolbar_location:"bottom",theme_advanced_blockformats:"p,address,pre,h1,h2,h3,h4,h5,h6",theme_advanced_toolbar_align:"center",theme_advanced_fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",theme_advanced_font_sizes:"1,2,3,4,5,6,7",theme_advanced_more_colors:1,theme_advanced_row_height:23,theme_advanced_resize_horizontal:1,theme_advanced_resizing_use_cookie:1},i.settings);if((h=l.theme_advanced_path_location)&&h!="none"){l.theme_advanced_statusbar_location=l.theme_advanced_path_location}if(l.theme_advanced_statusbar_location=="none"){l.theme_advanced_statusbar_location=0}i.onInit.add(function(){i.onNodeChange.add(k._nodeChanged,k);i.onKeyDown.add(k._keyDown,k);jive.ext.x.xTimer.set("timeout",k,"_refreshFont",33);jive.ext.x.xTimer.set("timeout",k,"_refreshFont",500);jive.ext.x.xTimer.set("timeout",k,"_refreshFontColor",33);jive.ext.x.xTimer.set("timeout",k,"_refreshFontColor",500);jive.ext.x.xTimer.set("timeout",k,"_refreshFontSize",33);jive.ext.x.xTimer.set("timeout",k,"_refreshFontSize",500);i.addCommand("jiveInsertUnorderedList",function(){i.execCommand("mceInsertUnorderedList");window.focus();i.focus()});i.addCommand("jiveInsertOrderedList",function(){i.execCommand("mceInsertOrderedList");window.focus();i.focus()});var p=i.controlManager.get("fontsizeselect");if(p){var o=document.createElement("DIV");var n=["8 pt","10 pt","12 pt","14 pt","18 pt","24 pt","36 pt"],m=[8,10,12,14,18,24,36];p.computed=new Array();document.body.appendChild(o);e(c(k.settings.theme_advanced_font_sizes),function(q){o.style.fontSize=m[q-1]+"pt";var r=jive.ext.x.xGetCS(o,"font-size");p.computed.push(r);p.add(n[parseInt(q)-1],q,{style:"font-size:"+m[q-1]+"pt","class":"mceFontSize"+q})});document.body.removeChild(o);i.onKeyUp.add(function(r){var q=r.controlManager;q.setActive("bold",r.queryCommandState("Bold"));q.setActive("italic",r.queryCommandState("Italic"));q.setActive("underline",r.queryCommandState("Underline"));q.setActive("strikethrough",r.queryCommandState("Strikethrough"))});i.onBeforeExecCommand.add(function(s,u,t,v){var q=s.controlManager;if(u=="Bold"){q.get("bold").setActive(s.queryCommandState("Bold"))}if(u=="Italic"){q.get("italic").setActive(s.queryCommandState("Italic"))}if(u=="Underline"){q.get("underline").setActive(s.queryCommandState("Underline"))}if(u=="Strikethrough"){q.get("strikethrough").setActive(s.queryCommandState("Strikethrough"))}if(u=="mceOutdentComplete"||u=="mceIndentComplete"){q.setDisabled("outdent",!s.queryCommandState("Outdent"))}if(u=="FontSize"){if(!s.selection.isCollapsed()){var r=s.selection.getRng(true);s.plugins.jiveutil.walkDOMTree(r.startContainer,r.endContainer,function(w){if(!tinymce.isWebKit&&w.style){w.style.fontSize=""}if(w.nodeType==1&&w.nodeName.toLowerCase()=="font"&&w.getAttribute("size")!=v){w.setAttribute("size",v)}})}}})}});i.onSetProgressState.add(function(o,m,p){var q,r=o.id,n;if(m){k.progressTimer=setTimeout(function(){q=o.getContainer();q=q.insertBefore(d.create("DIV",{style:"position:relative"}),q.firstChild);n=d.get(o.id+"_tbl");d.add(q,"div",{id:r+"_blocker","class":"mceBlocker",style:{width:n.clientWidth+2,height:n.clientHeight+2}});d.add(q,"div",{id:r+"_progress","class":"mceProgress",style:{left:n.clientWidth/2,top:n.clientHeight/2}})},p||0)}else{d.remove(r+"_blocker");d.remove(r+"_progress");clearTimeout(k.progressTimer)}});d.loadCSS(window.CS_RESOURCE_BASE_URL+"/"+(l.editor_css||"styles/tiny_mce3/themes/advanced/skins/"+i.settings.skin+"/ui.css"));if(l.ui_css){d.loadCSS(l.ui_css)}d.loadCSS(window.CS_RESOURCE_BASE_URL+"/"+(l.editor_css||"styles/tiny_mce3/themes/advanced/skins/"+i.settings.skin+"/content.css"));if(l.skin_variant){d.loadCSS(i.baseURI.toAbsolute(l.editor_css||"themes/advanced/skins/"+i.settings.skin+"/ui_"+l.skin_variant+".css"))}},createControl:function(k,h){var i,j;if(j=h.createControl(k)){return j}switch(k){case"styleselect":return this._createStyleSelect();case"formatselect":return this._createBlockFormats();case"fontselect":return this._createFontSelect();case"fontsizeselect":return this._createFontSizeSelect();case"forecolor":return this._createForeColorMenu();case"backcolor":return this._createBackColorMenu()}if((i=this.controls[k])){return h.createButton(k,{title:"advanced."+i[0],cmd:i[1],ui:i[2],value:i[3]})}},execCommand:function(j,i,k){var h=this["_"+j];if(h){h.call(this,i,k);return true}return false},_importClasses:function(){var h=this.editor,i=h.controlManager.get("styleselect");if(i.getLength()==0){e(h.dom.getClasses(),function(j){i.add(j["class"],j["class"])})}},_createStyleSelect:function(l){var i=this,h=i.editor,j=h.controlManager,k=j.createListBox("styleselect",{title:"advanced.style_select",onselect:function(m){if(k.selectedValue===m){h.execCommand("mceSetStyleInfo",0,{command:"mceRemoveFullFormat"});k.select();return false}else{h.execCommand("mceSetCSSClass",0,m)}}});if(k){e(h.getParam("theme_advanced_styles","","hash"),function(n,m){if(n){k.add(i.editor.translate(m),n)}});k.onPostRender.add(function(m,o){b.add(o,"focus",i._importClasses,i);b.add(o,"mousedown",i._importClasses,i)})}return k},_createFontSelect:function(){var j,i=this,h=i.editor;j=h.controlManager.createListBox("fontselect",{title:"advanced.fontdefault",cmd:"FontName"});if(j){e(h.getParam("theme_advanced_fonts",i.settings.theme_advanced_fonts,"hash"),function(m,l){j.add(h.translate(l),m.toLowerCase(),{style:m.indexOf("dings")==-1?"font-family:"+m:""})})}return j},_createFontSizeSelect:function(){var i=this,h=i.editor;var j=h.controlManager.createListBox("fontsizeselect",{title:"advanced.font_size",cmd:"FontSize"});return j},_createBlockFormats:function(){var j,h={p:"advanced.paragraph",address:"advanced.address",pre:"advanced.pre",h1:"advanced.h1",h2:"advanced.h2",h3:"advanced.h3",h4:"advanced.h4",h5:"advanced.h5",h6:"advanced.h6",div:"advanced.div",blockquote:"advanced.blockquote",code:"advanced.code",dt:"advanced.dt",dd:"advanced.dd",samp:"advanced.samp"},i=this;j=i.editor.controlManager.createListBox("formatselect",{title:"advanced.block",cmd:"FormatBlock"});if(j){e(i.editor.getParam("theme_advanced_blockformats",i.settings.theme_advanced_blockformats,"hash"),function(m,l){j.add(i.editor.translate(l!=m?l:h[m]),m,{"class":"mce_formatPreview mce_"+m})})}return j},_createForeColorMenu:function(){var l,i=this,j=i.settings,k={},h;if(j.theme_advanced_more_colors){k.more_colors_func=function(){i._mceColorPicker(0,{color:l.value,func:function(m){l.setColor(m)}})}}if(h=j.theme_advanced_text_colors){k.colors=h}k.title="advanced.forecolor_desc";k.cmd="ForeColor";k.scope=this;l=i.editor.controlManager.createColorSplitButton("forecolor",k);l.oldSetColor=l.setColor;l.setColor=function(m){i.ignoreRefreshCommand=true;this.oldSetColor(m);i.ignoreRefreshCommand=false};return l},_createBackColorMenu:function(){var l,i=this,j=i.settings,k={},h;if(j.theme_advanced_more_colors){k.more_colors_func=function(){i._mceColorPicker(0,{color:l.value,func:function(m){l.setColor(m)}})}}if(h=j.theme_advanced_background_colors){k.colors=h}k.title="advanced.backcolor_desc";k.cmd="HiliteColor";k.scope=this;l=i.editor.controlManager.createColorSplitButton("backcolor",k);l.oldSetColor=l.setColor;l.setColor=function(m){i.ignoreRefreshCommand=true;this.oldSetColor(m);i.ignoreRefreshCommand=false};return l},renderUI:function(j){var l,k,m,u=this,q=u.editor,v=u.settings,r,i,h;l=i=d.create("span",{id:q.id+"_parent","class":"mceEditor "+q.settings.skin+"Skin"+(v.skin_variant?" "+q.settings.skin+"Skin"+u._ufirst(v.skin_variant):"")});if(!d.boxModel){l=d.add(l,"div",{"class":"mceOldBoxModel"})}l=r=d.add(l,"table",{id:q.id+"_tbl","class":"mceLayout",cellSpacing:0,cellPadding:0});l=m=d.add(l,"tbody");switch((v.theme_advanced_layout_manager||"").toLowerCase()){case"rowlayout":k=u._rowLayout(v,m,j);break;case"customlayout":k=q.execCallback("theme_advanced_custom_layout",v,m,j,i);break;default:k=u._simpleLayout(v,m,j,i)}l=j.targetNode;h=d.stdMode?r.getElementsByTagName("tr"):r.rows;d.addClass(h[0],"mceFirst");d.addClass(h[1],"mceIframeRow");d.addClass(h[h.length-1],"mceLast");e(d.select("tr",m),function(o){d.addClass(o.firstChild,"mceFirst");d.addClass(o.childNodes[o.childNodes.length-1],"mceLast")});if(d.get(v.theme_advanced_toolbar_container)){d.get(v.theme_advanced_toolbar_container).appendChild(i)}else{d.insertAfter(i,l)}b.add(q.id+"_path_row","click",function(n){n=n.target;if(n.nodeName=="A"){u._sel(n.className.replace(/^.*mcePath_([0-9]+).*$/,"$1"));return b.cancel(n)}});if(!q.getParam("accessibility_focus")||q.getParam("tab_focus")){b.add(d.add(i,"a",{href:"#"},"<!-- IE -->"),"focus",function(){tinyMCE.get(q.id).focus()})}if(v.theme_advanced_toolbar_location=="external"){j.deltaHeight=0}u.deltaHeight=j.deltaHeight;j.targetNode=null;return{iframeContainer:k,editorContainer:q.id+"_parent",sizeContainer:r,deltaHeight:j.deltaHeight}},getInfo:function(){return{longname:"Advanced theme",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}},resizeBy:function(h,i){var j=d.get(this.editor.id+"_tbl");this.resizeTo(j.clientWidth+h,j.clientHeight+i)},resizeTo:function(i,l){var j=this.editor,k=j.settings,n=d.get(j.id+"_tbl"),o=d.get(j.id+"_ifr"),m;i=Math.max(k.theme_advanced_resizing_min_width||100,i);l=Math.max(k.theme_advanced_resizing_min_height||100,l);i=Math.min(k.theme_advanced_resizing_max_width||65535,i);l=Math.min(k.theme_advanced_resizing_max_height||65535,l);m=n.clientHeight-o.clientHeight;d.setStyle(o,"height",l-m);d.setStyles(n,{width:i,height:l})},destroy:function(){var h=this.editor.id;b.clear(h+"_resize");b.clear(h+"_path_row");b.clear(h+"_external_close")},_simpleLayout:function(x,q,j,h){var w=this,r=w.editor,u=x.theme_advanced_toolbar_location,l=x.theme_advanced_statusbar_location,k,i,m,v;if(u=="top"){w._addToolbars(q,j)}if(u=="external"){k=v=d.create("div",{style:"position:relative"});k=d.add(k,"div",{id:r.id+"_external","class":"mceExternalToolbar"});d.add(k,"a",{id:r.id+"_external_close",href:"javascript:;","class":"mceExternalClose"});k=d.add(k,"table",{id:r.id+"_tblext",cellSpacing:0,cellPadding:0});m=d.add(k,"tbody");if(h.firstChild.className=="mceOldBoxModel"){h.firstChild.appendChild(v)}else{h.insertBefore(v,h.firstChild)}w._addToolbars(m,j);r.onMouseUp.add(function(){var o=d.get(r.id+"_external");d.show(o);d.hide(f);var n=b.add(r.id+"_external_close","click",function(){d.hide(r.id+"_external");b.remove(r.id+"_external_close","click",n)});d.show(o);d.setStyle(o,"top",0-d.getRect(r.id+"_tblext").h-1);d.hide(o);d.show(o);o.style.filter="";f=r.id+"_external";o=null})}if(l=="top"){w._addStatusBar(q,j)}k=d.add(q,"tr");k=i=d.add(k,"td",{"class":"mceIframeContainer"});if(u=="bottom"){w._addToolbars(q,j)}if(l=="bottom"){w._addStatusBar(q,j)}return i},_rowLayout:function(v,l,j){var u=this,m=u.editor,r,w,h=m.controlManager,k,i,q,p;r=v.theme_advanced_containers_default_class||"";w=v.theme_advanced_containers_default_align||"center";e(c(v.theme_advanced_containers||""),function(s,o){var n=v["theme_advanced_container_"+s]||"";switch(s.toLowerCase()){case"mceeditor":k=d.add(l,"tr");k=i=d.add(k,"td",{"class":"mceIframeContainer"});break;case"mceelementpath":u._addStatusBar(l,j);break;default:p=v["theme_advanced_container_"+s+"_align"].toLowerCase();p="mce"+u._ufirst(p);k=d.add(d.add(l,"tr"),"td",{"class":"mceToolbar "+(v["theme_advanced_container_"+s+"_class"]||r)+" "+p||w});q=h.createToolbar("toolbar"+o);u._addControls(n,q);d.setHTML(k,q.renderHTML());j.deltaHeight-=v.theme_advanced_row_height}});return i},_addControls:function(i,h){var j=this,k=j.settings,l,m=j.editor.controlManager;if(k.theme_advanced_disable&&!j._disabled){l={};e(c(k.theme_advanced_disable),function(n){l[n]=1});j._disabled=l}else{l=j._disabled}e(c(i),function(p){var o;if(l&&l[p]){return}if(p=="tablecontrols"){e(["table","delete_table","|","row_props","cell_props","|","row_before","row_after","delete_row","|","col_before","col_after","delete_col","|","row_up","row_down","col_left","col_right","|","split_cells","merge_cells"],function(q){q=j.createControl(q,m);if(q){h.add(q)}});return}o=j.createControl(p,m);if(o){h.add(o)}})},_addToolbars:function(w,k){var z=this,p,m,r=z.editor,A=z.settings,y,j=r.controlManager,u,l,q=[],x;x=A.theme_advanced_toolbar_align.toLowerCase();x="mce"+z._ufirst(x);l=d.add(d.add(w,"tr"),"td",{"class":"mceToolbar "+x});if(!r.getParam("accessibility_focus")||r.getParam("tab_focus")){q.push(d.createHTML("a",{href:"#",onfocus:"tinyMCE.get('"+r.id+"').focus();"},"<!-- IE -->"))}q.push(d.createHTML("a",{href:"#",accesskey:"q",title:r.getLang("advanced.toolbar_focus"),onclick:"this.focus(); return false;","class":"js-toolbarFocus"},"<!-- IE -->"));for(p=1;(y=A["theme_advanced_buttons"+p]);p++){m=j.createToolbar("toolbar"+p,{"class":"mceToolbarRow"+p});if(A["theme_advanced_buttons"+p+"_add"]){y+=","+A["theme_advanced_buttons"+p+"_add"]}if(A["theme_advanced_buttons"+p+"_add_before"]){y=A["theme_advanced_buttons"+p+"_add_before"]+","+y}z._addControls(y,m);q.push(m.renderHTML());k.deltaHeight-=A.theme_advanced_row_height}q.push(d.createHTML("a",{href:"#",accesskey:"z",title:r.getLang("advanced.toolbar_focus"),onfocus:"tinyMCE.getInstanceById('"+r.id+"').focus();"},"<!-- IE -->"));l.innerHTML=q.join("")},_addStatusBar:function(l,i){var j,u=this,m=u.editor,v=u.settings,h,p,q,k;j=d.add(l,"tr");j=k=d.add(j,"td",{"class":"mceStatusbar"});j=d.add(j,"div",{id:m.id+"_path_row"});d.add(j,"a",{href:"#",accesskey:"x"});if(v.theme_advanced_resizing&&!tinymce.isOldWebKit){d.add(k,"a",{id:m.id+"_resize",href:"javascript:;",onclick:"return false;","class":"mceResize",tabindex:"-1"});if(v.theme_advanced_resizing_use_cookie){m.onPostRender.add(function(){var n=a.getHash("TinyMCE_"+m.id+"_size"),r=d.get(m.id+"_tbl");if(!n){return}if(v.theme_advanced_resize_horizontal){r.style.width=Math.max(10,n.cw)+"px"}r.style.height=Math.max(10,n.ch)+"px";d.get(m.id+"_ifr").style.height=Math.max(10,parseInt(n.ch)+u.deltaHeight)+"px"})}m.onPostRender.add(function(){b.add(m.id+"_resize","mousedown",function(x){var z,t,o,s,y,r;z=d.get(m.id+"_tbl");o=z.clientWidth;s=z.clientHeight;miw=v.theme_advanced_resizing_min_width||100;mih=v.theme_advanced_resizing_min_height||100;maw=v.theme_advanced_resizing_max_width||65535;mah=v.theme_advanced_resizing_max_height||65535;t=d.add(d.get(m.id+"_parent"),"div",{"class":"mcePlaceHolder"});d.setStyles(t,{width:o,height:s});d.hide(z);d.show(t);h={x:x.screenX,y:x.screenY,w:o,h:s,dx:null,dy:null};p=b.add(d.doc,"mousemove",function(B){var n,A;h.dx=B.screenX-h.x;h.dy=B.screenY-h.y;n=Math.max(miw,h.w+h.dx);A=Math.max(mih,h.h+h.dy);n=Math.min(maw,n);A=Math.min(mah,A);if(v.theme_advanced_resize_horizontal){t.style.width=n+"px"}t.style.height=A+"px";return b.cancel(B)});q=b.add(d.doc,"mouseup",function(n){var w;b.remove(d.doc,"mousemove",p);b.remove(d.doc,"mouseup",q);z.style.display="";d.remove(t);if(h.dx===null){return}w=d.get(m.id+"_ifr");if(v.theme_advanced_resize_horizontal){z.style.width=Math.max(10,h.w+h.dx)+"px"}z.style.height=Math.max(10,h.h+h.dy)+"px";w.style.height=Math.max(10,w.clientHeight+h.dy)+"px";if(v.theme_advanced_resizing_use_cookie){a.setHash("TinyMCE_"+m.id+"_size",{cw:h.w+h.dx,ch:h.h+h.dy})}m.theme.onResize.dispatch(m.theme,true)});return b.cancel(x)})})}i.deltaHeight-=21;j=l=null},_getCurrentNode:function(h){var i=h.selection.getNode();if(i==null||i==h.getDoc()){if(h.getBody().childNodes.length>0){return h.getBody().childNodes[0]}else{return null}}return i},ignoreRefreshCommand:false,_refreshFontColor:function(k){if(!this.ignoreRefreshCommand){var j=tinyMCE.activeEditor;var m=$j('[id="'+j.id+'_forecolor_preview"]',j.getContainer());var i;if(m.length>0){if(typeof(k)!="function"){var l=this._getCurrentNode(j);i=jive.ext.x.xGetCS(l,"color")}else{i=k("color")}m.css("background-color",i);var h=j.controlManager;h.get("forecolor").value=i}}},_refreshFont:function(l){var k=tinyMCE.activeEditor;var h=k.controlManager;var n=h.get("fontselect");var j;if(n){if(typeof(l)!="function"){var m=this._getCurrentNode(k);j=jive.ext.x.xGetCS(m,"font-family")}else{j=l("font-family")}if(j.indexOf(",")>=0){n.select(j.toLowerCase())}else{var i=false;e(k.getParam("theme_advanced_fonts",this.settings.theme_advanced_fonts,"hash"),function(q,p){if(!i){var o=q.split(",");if($j.inArray(j,o)==0){i=true;n.select(q.toLowerCase())}}});if(i){return}e(k.getParam("theme_advanced_fonts",this.settings.theme_advanced_fonts,"hash"),function(q,p){if(!i){var o=q.split(",");if($j.inArray(j,o)>=0){i=true;n.select(q.toLowerCase())}}})}}},_refreshFontSize:function(j){var i=tinyMCE.activeEditor;var h=i.controlManager;var n=h.get("fontsizeselect");var l;if(n){if(typeof(j)!="function"){var m=this._getCurrentNode(i);l=jive.ext.x.xGetCS(m,"font-size")}else{l=j("font-size")}var k=tinyMCE.inArray(n.computed,l);n.select(k+1)}},_keyDown:function(i,h){if(h.keyCode==13){}},_nodeChanged:function(k,r,i,o){var w=this,h,q=0,u,m,x=w.settings;tinymce.each(w.stateControls,function(n){r.setActive(n,k.queryCommandState(w.controls[n][1]))});r.setActive("visualaid",k.hasVisual);r.setDisabled("undo",!k.undoManager.hasUndo()&&!k.typing);r.setDisabled("redo",!k.undoManager.hasRedo());r.setDisabled("outdent",!k.queryCommandState("Outdent"));h=d.getParent(i,"A");if(m=r.get("link")){if(!h||!h.name){m.setDisabled(!h&&o);m.setActive(!!h)}}if(m=r.get("unlink")){m.setDisabled(!h&&o);m.setActive(!!h&&!h.name)}if(m=r.get("anchor")){m.setActive(!!h&&h.name);if(tinymce.isWebKit){h=d.getParent(i,"IMG");m.setActive(!!h&&d.getAttrib(h,"_mce_name")=="a")}}h=d.getParent(i,"IMG");if(m=r.get("image")){m.setActive(!!h&&i.className.indexOf("mceItem")==-1)}if(m=r.get("styleselect")){if(i.className){w._importClasses();m.select(i.className)}else{m.select()}}if(m=r.get("formatselect")){h=d.getParent(i,d.isBlock);if(h){m.select(h.nodeName.toLowerCase())}}var j=this._getCurrentNode(k);var l=jive.ext.x.xGetCSFunc(j);if(m=r.get("fontselect")){m.select(k.queryCommandValue("FontName"));this._refreshFont(l)}if(m=r.get("forecolor")){this._refreshFontColor(l)}if(m=r.get("fontsizeselect")){this._refreshFontSize(l)}if(x.theme_advanced_path&&x.theme_advanced_statusbar_location){h=d.get(k.id+"_path")||d.add(k.id+"_path_row","span",{id:k.id+"_path"});d.setHTML(h,"");k.dom.getParent(i,function(y){var p=y.nodeName.toLowerCase(),s,v,t="";if(y.nodeType!=1||(d.hasClass(y,"mceItemHidden")||d.hasClass(y,"mceItemRemoved"))){return}if(u=d.getAttrib(y,"_mce_name")){p=u}if(tinymce.isIE&&y.scopeName!=="HTML"){p=y.scopeName+":"+p}p=p.replace(/mce\:/g,"");switch(p){case"b":p="strong";break;case"i":p="em";break;case"img":if(u=d.getAttrib(y,"src")){t+="src: "+u+" "}break;case"a":if(u=d.getAttrib(y,"name")){t+="name: "+u+" ";p+="#"+u}if(u=d.getAttrib(y,"href")){t+="href: "+u+" "}break;case"font":if(x.convert_fonts_to_spans){p="span"}if(u=d.getAttrib(y,"face")){t+="font: "+u+" "}if(u=d.getAttrib(y,"size")){t+="size: "+u+" "}if(u=d.getAttrib(y,"color")){t+="color: "+u+" "}break;case"span":if(u=d.getAttrib(y,"style")){t+="style: "+u+" "}break}if(u=d.getAttrib(y,"id")){t+="id: "+u+" "}if(u=y.className){u=u.replace(/(webkit-[\w\-]+|Apple-[\w\-]+|mceItem\w+|mceVisualAid)/g,"");if(u&&u.indexOf("mceItem")==-1){t+="class: "+u+" ";if(d.isBlock(y)||p=="img"||p=="span"){p+="."+u}}}p=p.replace(/(html:)/g,"");p={name:p,node:y,title:t};w.onResolveName.dispatch(w,p);t=p.title;p=p.name;v=d.create("a",{href:"javascript:;",onmousedown:"return false;",title:t,"class":"mcePath_"+(q++)},p);if(h.hasChildNodes()){h.insertBefore(d.doc.createTextNode(" \u00bb "),h.firstChild);h.insertBefore(v,h.firstChild)}else{h.appendChild(v)}},k.getBody())}this.prepForReturn=false},_sel:function(h){this.editor.execCommand("mceSelectNodeDepth",false,h)},_mceInsertAnchor:function(j,i){var h=this.editor;h.windowManager.open({url:tinymce.baseURL+"/themes/advanced/anchor.htm",width:320+parseInt(h.getLang("advanced.anchor_delta_width",0)),height:90+parseInt(h.getLang("advanced.anchor_delta_height",0)),inline:true},{theme_url:this.url})},_mceCharMap:function(){var h=this.editor;h.windowManager.open({url:tinymce.baseURL+"/themes/advanced/charmap.htm",width:550+parseInt(h.getLang("advanced.charmap_delta_width",0)),height:250+parseInt(h.getLang("advanced.charmap_delta_height",0)),inline:true},{theme_url:this.url})},_mceHelp:function(){var h=this.editor;h.windowManager.open({url:tinymce.baseURL+"/themes/advanced/about.htm",width:480,height:380,inline:true},{theme_url:this.url})},_mceColorPicker:function(j,i){var h=this.editor;i=i||{};h.windowManager.open({url:tinymce.baseURL+"/themes/advanced/color_picker.htm",width:385+parseInt(h.getLang("advanced.colorpicker_delta_width",0)),height:260+parseInt(h.getLang("advanced.colorpicker_delta_height",0)),close_previous:false,inline:true},{input_color:i.color,func:i.func,theme_url:this.url,cs_resource_base_url:CS_RESOURCE_BASE_URL})},_mceCodeEditor:function(i,j){var h=this.editor;h.windowManager.open({url:tinymce.baseURL+"/themes/advanced/source_editor.htm",width:parseInt(h.getParam("theme_advanced_source_editor_width",720)),height:parseInt(h.getParam("theme_advanced_source_editor_height",580)),inline:true,resizable:true,maximizable:true},{theme_url:this.url})},_mceImage:function(i,j){var h=this.editor;if(h.dom.getAttrib(h.selection.getNode(),"class").indexOf("mceItem")!=-1){return}h.windowManager.open({url:tinymce.baseURL+"/themes/advanced/image.htm",width:355+parseInt(h.getLang("advanced.image_delta_width",0)),height:275+parseInt(h.getLang("advanced.image_delta_height",0)),inline:true},{theme_url:this.url})},_mceLink:function(i,j){var h=this.editor;h.windowManager.open({url:tinymce.baseURL+"/themes/advanced/link.htm",width:310+parseInt(h.getLang("advanced.link_delta_width",0)),height:200+parseInt(h.getLang("advanced.link_delta_height",0)),inline:true},{theme_url:this.url})},_mceNewDocument:function(){var h=this.editor;h.windowManager.confirm("advanced.newdocument",function(i){if(i){h.execCommand("mceSetContent",false,"")}})},_mceForeColor:function(){var h=this;this._mceColorPicker(0,{color:h.fgColor,func:function(i){h.fgColor=i;h.editor.execCommand("ForeColor",false,i)}})},_mceBackColor:function(){var h=this;this._mceColorPicker(0,{color:h.bgColor,func:function(i){h.bgColor=i;h.editor.execCommand("HiliteColor",false,i)}})},_ufirst:function(h){return h.substring(0,1).toUpperCase()+h.substring(1)}});tinymce.ThemeManager.add("advanced",tinymce.themes.AdvancedTheme)}());