Zapatec.Setup=function(){};Zapatec.Setup.test=true;Zapatec.Calendar.setup=function(b){paramsList=["id"];function f(i,m){if(typeof b[i]=="undefined"){b[i]=m}paramsList.push(i)}b.id=Zapatec.Utils.generateID("calendar");f("inputField",null);f("displayArea",null);f("button",null);f("eventName","click");f("closeEventName",null);f("ifFormat","%Y/%m/%d");f("daFormat","%Y/%m/%d");f("singleClick",true);f("disableFunc",null);f("dateStatusFunc",b.disableFunc);f("dateText",null);f("firstDay",null);f("align","Br");f("range",[1900,2999]);f("weekNumbers",true);f("flat",null);f("flatCallback",null);f("onSelect",null);f("onClose",null);f("onUpdate",null);f("date",null);f("showsTime",false);f("sortOrder","asc");f("timeFormat","24");f("timeInterval",null);f("electric",true);f("step",2);f("position",null);f("cache",false);f("showOthers",false);f("multiple",null);f("saveDate",null);f("fdowClick",false);f("titleHtml",null);f("noHelp",false);f("noCloseButton",false);f("disableYearNav",false);f("disableFdowChange",false);if(b.weekNumbers){b.disableFdowChange=true;b.firstDay=1}f("disableDrag",false);f("numberMonths",1);if((b.numberMonths>12)||(b.numberMonths<1)){b.numberMonths=1}if(b.numberMonths>1){b.showOthers=false}b.numberMonths=parseInt(b.numberMonths,10);f("controlMonth",1);if((b.controlMonth>b.numberMonths)||(b.controlMonth<1)){b.controlMonth=1}b.controlMonth=parseInt(b.controlMonth,10);f("vertical",false);if(b.monthsInRow>b.numberMonths){b.monthsInRow=b.numberMonths}f("monthsInRow",b.numberMonths);b.monthsInRow=parseInt(b.monthsInRow,10);f("multiple",false);if(b.multiple){b.singleClick=false}f("canType",false);var d=["inputField","displayArea","button"];for(var e in d){if(typeof b[d[e]]=="string"){b[d[e]]=document.getElementById(b[d[e]])}}if(!b.inputField){b.canType=false}else{b.inputField.setAttribute("autocomplete","off")}if(!(b.flat||b.multiple||b.inputField||b.displayArea||b.button)){alert("Calendar.setup '"+b.id+"':\n  Nothing to setup (no fields found).  Please check your code");return false}if(((b.timeInterval)&&((b.timeInterval!==Math.floor(b.timeInterval))||((60%b.timeInterval!==0)&&(b.timeInterval%60!==0))))||(b.timeInterval>360)){alert("'"+b.id+"': timeInterval option can only have the following number of minutes:\n1, 2, 3, 4, 5, 6, 10, 15, 30,  60, 120, 180, 240, 300, 360 ");b.timeInterval=null}if(b.date&&!Date.parse(b.date)){alert("'"+b.id+"' Start Date Invalid: "+b.date+".\nSee date option.\nDefaulting to today.");b.date=null}if(b.saveDate){f("cookiePrefix",window.location.href+"--"+b.button.id);var j=b.cookiePrefix;var g=Zapatec.Utils.getCookie(j);if(g!=null){document.getElementById(b.inputField.id).value=g}}for(var k in b){if(typeof b.constructor.prototype[k]!="undefined"){continue}if(Zapatec.Utils.arrIndexOf(paramsList,k)==-1){alert("Wrong config option: "+k)}}function h(m){var i=m.params;var o=(m.dateClicked||i.electric);if(o&&i.flat){if(typeof i.flatCallback=="function"){if(!i.multiple){i.flatCallback(m)}}else{alert("'"+m.id+"': No flatCallback given -- doing nothing.")}return false}if(o&&i.inputField){i.inputField.value=m.currentDate.print(i.ifFormat);if(typeof i.inputField.onchange=="function"){i.inputField.onchange()}}if(o&&i.displayArea){i.displayArea.innerHTML=m.currentDate.print(i.daFormat)}if(o&&i.singleClick&&m.dateClicked){m.callCloseHandler()}if(o&&typeof i.onUpdate=="function"){i.onUpdate(m)}if(i.saveDate){var n=i.cookiePrefix;Zapatec.Utils.writeCookie(n,i.inputField.value,null,"/",i.saveDate)}}if(b.flat!=null){if(typeof b.flat=="string"){b.flat=document.getElementById(b.flat)}if(!b.flat){alert("Calendar.setup '"+b.id+"':\n  Flat specified but can't find parent.");return false}var a=new Zapatec.Calendar(b.firstDay,b.date,b.onSelect||h);a.id=b.id;a.disableFdowClick=b.disableFdowChange;a.showsOtherMonths=b.showOthers;a.showsTime=b.showsTime;a.time24=(b.timeFormat=="24");a.timeInterval=b.timeInterval;a.params=b;a.weekNumbers=b.weekNumbers;a.sortOrder=b.sortOrder.toLowerCase();a.setRange(b.range[0],b.range[1]);a.setDateStatusHandler(b.dateStatusFunc);a.getDateText=b.dateText;a.numberMonths=b.numberMonths;a.controlMonth=b.controlMonth;a.vertical=b.vertical;a.yearStep=b.step;a.monthsInRow=b.monthsInRow;a.helpButton=!b.noHelp;a.closeButton=!b.noCloseButton;a.yearNav=!b.disableYearNav;if(b.ifFormat){a.setDateFormat(b.ifFormat)}if(b.inputField&&b.inputField.type=="text"&&typeof b.inputField.value=="string"){a.parseDate(b.inputField.value)}if(b.multiple){a.setMultipleDates(b.multiple)}a.create(b.flat);a.show();return a}var l=b.button||b.displayArea||b.inputField;if(b.canType){function c(i){i=i||window.event;if(Zapatec.is_ie){i.cancelBubble=true}else{i.stopPropagation()}}Zapatec.Utils.addEvent(b.inputField,"mousedown",c);Zapatec.Utils.addEvent(b.inputField,"keydown",c);Zapatec.Utils.addEvent(b.inputField,"keypress",c);Zapatec.Utils.addEvent(b.inputField,"keyup",function(m){var o=b.inputField?b.ifFormat:b.daFormat;var i=Date.parseDate(b.inputField.value,o);var n=window.calendar;if(n&&i&&!n.hidden){n.setDate(i)}})}l["on"+b.eventName]=function(){var i=b.inputField||b.displayArea;if((!b.canType||b.inputField!=l)&&l.blur){l.blur()}var o=b.inputField?b.ifFormat:b.daFormat;var q=false;var p=window.calendar;if(b.canType&&(b.inputField==l)&&p&&!p.hidden){return}if(!(p&&b.cache)){window.calendar=p=new Zapatec.Calendar(b.firstDay,b.date,b.onSelect||h,b.onClose||function(r){if(b.cache){r.hide()}else{r.destroy()}});p.id=b.id;p.disableFdowClick=b.disableFdowChange;p.showsTime=b.showsTime;p.time24=(b.timeFormat=="24");p.timeInterval=b.timeInterval;p.weekNumbers=b.weekNumbers;p.numberMonths=b.numberMonths;p.controlMonth=b.controlMonth;p.vertical=b.vertical;p.monthsInRow=b.monthsInRow;p.historyDateFormat=b.ifFormat||b.daFormat;p.helpButton=!b.noHelp;p.disableDrag=b.disableDrag;p.closeButton=!b.noCloseButton;p.yearNav=!b.disableYearNav;p.sortOrder=b.sortOrder.toLowerCase();q=true}else{if(b.date){p.setDate(b.date)}p.hide()}if(b.multiple){p.setMultipleDates(b.multiple)}p.showsOtherMonths=b.showOthers;p.yearStep=b.step;p.setRange(b.range[0],b.range[1]);p.params=b;p.setDateStatusHandler(b.dateStatusFunc);p.getDateText=b.dateText;p.setDateFormat(o);if(q){p.create()}if(i){var m;if(i.value){m=i.value}else{m=i.innerHTML}if(m!=""){var n=Date.parseDate(i.value||i.innerHTML,o);if(n!=null){p.setDate(n)}}}if(!b.position){p.showAtElement(b.button||b.displayArea||b.inputField,b.align)}else{p.showAt(b.position[0],b.position[1])}return false};if(b.closeEventName){l["on"+b.closeEventName]=function(){if(window.calendar){window.calendar.callCloseHandler()}}}return a};