var headerSet=new HeaderRowState();function setButtonStates(){var a=$j("#test-service-button");var b=$j("#save-service-button");if(isAtLeastOneRowInEditMode()){a.prop("disabled",true);a.attr("title","Add/cancel header entries to enable");b.prop("disabled",true);b.attr("title","Add/cancel header entries to enable")}else{a.prop("disabled",false);a.removeAttr("title");b.prop("disabled",false);b.removeAttr("title")}}function isAtLeastOneRowInEditMode(){var a=false;var b=$j("#setting-headers-table tbody tr");b.each(function(){var c=$j(this).children("td:first");var d=c.find("input");if(d.attr("type")=="text"){a=true}});return a}function adjustHeaderLabels(){var a=$j("#setting-headers-table tbody tr");if(a.size()>1){$j(".settings-headers-exist").css("display","inline");$j(".settings-no-headers-exist").css("display","none")}else{$j(".settings-headers-exist").css("display","none");$j(".settings-no-headers-exist").css("display","inline")}}function setTestIcon(a){$j("#test-service-working").css("display","none");$j("#test-service-success").css("display","none");$j("#test-service-failure").css("display","none");$j(a).css("display","inline")}$j(function(){$j("#settings-add-header").click(function(){headerSet.setCurrentRow($j("#setting-headers-table tbody").children("tr:first"));headerSet.addRow();headerSet.focusName();setButtonStates();adjustHeaderLabels();return false});$j(".settings-cancel-header").live("click",function(){headerSet.setCurrentRow($j(this).closest("tr"));headerSet.toggleRow(true);setButtonStates();adjustHeaderLabels();return false});$j(".settings-edit-header").live("click",function(){headerSet.setCurrentRow($j(this).closest("tr"));headerSet.toggleRow(false);headerSet.focusName();setButtonStates();return false});$j(".settings-remove-header").live("click",function(){headerSet.setCurrentRow($j(this).closest("tr"));headerSet.removeRow();setButtonStates();adjustHeaderLabels();return false});$j(".settings-save-header").live("click",function(){headerSet.setCurrentRow($j(this).closest("tr"));headerSet.toggleRow(false);setButtonStates();return false});$j("#test-service-button").live("click",function(){$j("#new-service-action-type").val("prevalidate");$j("#test-service-button").prop("disabled",true);setTestIcon("#test-service-working");$j("#service-add-form").ajaxSubmit({target:"#service-add-modal",success:function(){$j("#test-service-button").prop("disabled",false);if($j(".jive-error-message").size()>0){setTestIcon("#test-service-failure")}else{setTestIcon("#test-service-success")}}});return false});$j("#save-service-button").live("click",function(){$j("#new-service-action-type").val("validate");$j("#test-service-button").prop("disabled",true);setTestIcon("#test-service-working");$j("#service-add-form").ajaxSubmit({target:"#service-add-modal",success:function(){$j("#test-service-button").prop("disabled",false);if($j(".jive-error-message").size()>0){setTestIcon("#test-service-failure")}else{$j("#new-service-action-type").val("execute");$j("#service-add-form").get(0).submit()}}});return false});$j("#save-service-button").live("click",function(){$j("#new-service-action-type").val("execute");return true});$j("#new-service-field-authentication").live("change",function(a){if($j("#serviceID").val()!="0"){alert("Warning:  Changing the authentication style will cause any existing credentials for this service to be deleted.")}if($j("#new-service-field-authentication").val()=="oauth2"){$j(".oauth2-only").show();$j("#new-service-oauth2-client-id").focus()}else{$j(".oauth2-only").hide()}});if($j("#new-service-field-authentication").val()=="oauth2"){$j(".oauth2-only").show()}else{$j(".oauth2-only").hide()}});