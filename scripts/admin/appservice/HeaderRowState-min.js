function HeaderRowState(){}HeaderRowState.createButton=function(b,a,d){var c=$j("<button>");c.addClass(a);c.attr("id",d);c.text(b);return c};HeaderRowState.createEditLink=function(b){var a=$j("<img>");a.attr("src","/images/transparent.png");a.addClass("jive-icon-sml").addClass("jive-icon-edit");var c=$j("<a>");c.attr("href","#edit-header");c.addClass(b);c.css("text-decoration","none");c.text(" edit");c.prepend(a);var d=$j("<p>");d.append(c);return d};HeaderRowState.createHeader=function(){var a=$j("<tr>");a.append($j("<td>").addClass("settings-header-name"));a.append($j("<td>").addClass("settings-header-value"));a.append($j("<td>").addClass("settings-header-button1"));a.append($j("<td>").addClass("settings-header-button2"));return a};HeaderRowState.createRemoveLink=function(){var b=$j("<a>");b.attr("href","#remove-header");b.addClass("settings-remove-header");b.css("text-decoration","none");b.text(" remove");var a=$j("<img>");a.attr("src","/images/transparent.png");a.addClass("jive-icon-sml").addClass("jive-icon-delete");b.prepend(a);return b};HeaderRowState.createTextField=function(c,a,d,b,f){var e=$j("<input>");e.attr("type",c);e.attr("name",a);e.attr("value",d);e.attr("maxlength",b);e.attr("id",f);e.attr("size",30);return e};HeaderRowState.prototype.addRow=function(){var b=HeaderRowState.createHeader();this.currentTable.append(b);this.currentRow=b;var a=HeaderRowState.createTextField("text","headerNames","",255,"settings-header-name");this.addFocusWatchingHandler(a);this.addNullWatchingChangeHandler(a);this.setNameCell(a);var c=HeaderRowState.createTextField("text","headerValues","",255,"settings-header-value");this.addFocusWatchingHandler(c);this.addNullWatchingChangeHandler(c);this.setValueCell(c);this.setButton1Cell(HeaderRowState.createButton("add","settings-save-header","settings-header-button1"));this.setButton2Cell(HeaderRowState.createButton("cancel","settings-remove-header","settings-header-button2"));this.enableButton1(false)};HeaderRowState.prototype.focusName=function(){var a=this.getNameCell();var b=a.find("input");b.focus()};HeaderRowState.prototype.removeRow=function(){this.currentRow.remove()};HeaderRowState.prototype.setCurrentRow=function(a){this.currentRow=a;this.currentTable=a.closest("table")};HeaderRowState.prototype.toggleRow=function(a){var b=this.isEditMode();this.toggleNameCell(b,a);this.toggleValueCell(b,a);this.toggleButton1Cell(b);this.toggleButton2Cell(b)};HeaderRowState.prototype.getNameCell=function(){return this.currentRow.children("td:first")};HeaderRowState.prototype.setNameCell=function(a){this.getNameCell().html(a)};HeaderRowState.prototype.getValueCell=function(){return this.currentRow.children("td:nth-child(2)")};HeaderRowState.prototype.setValueCell=function(a){this.getValueCell().html(a)};HeaderRowState.prototype.getButton1Cell=function(){return this.currentRow.children("td:nth-child(3)")};HeaderRowState.prototype.setButton1Cell=function(a){this.getButton1Cell().html(a)};HeaderRowState.prototype.getButton2Cell=function(){return this.currentRow.children("td:nth-child(4)")};HeaderRowState.prototype.setButton2Cell=function(a){this.getButton2Cell().html(a)};HeaderRowState.prototype.addFocusWatchingHandler=function(a){var b=this;a.bind("focus",function(c){b.setCurrentRow(a.closest("tr"))})};HeaderRowState.prototype.addNullWatchingChangeHandler=function(a){var b=this;a.bind("keyup",function(f){var c=b.getNameCell();var e=b.getValueCell();var d=c.find("input").val();var g=e.find("input").val();if(d==null||d.length==0||g==null||g.length==0){b.enableButton1(false)}else{b.enableButton1(true)}})};HeaderRowState.prototype.enableButton1=function(b){var a=this.getButton1Cell().children("button");if(b){a.prop("disabled",false)}else{a.prop("disabled",true)}};HeaderRowState.prototype.isEditMode=function(){var a=this.getNameCell();var b=a.find("input");return b.attr("type")=="text"};HeaderRowState.prototype.toggleNameCell=function(e,c){var b=this.getNameCell();var d=b.find("input");if(e){var a;if(c){a=b.attr("abbr")}else{a=d.attr("value")}b.text(a);newElement=HeaderRowState.createTextField("hidden",d.attr("name"),a);b.removeAttr("abbr");b.append(newElement)}else{var f=$j.trim(b.text());b.attr("abbr",f);newElement=HeaderRowState.createTextField("text",d.attr("name"),f);this.addFocusWatchingHandler(newElement);this.addNullWatchingChangeHandler(newElement);this.setNameCell(newElement)}};HeaderRowState.prototype.toggleValueCell=function(d,b){var c=this.getValueCell();var e=c.find("input");if(d){var a;if(b){a=c.attr("abbr")}else{a=e.attr("value")}c.text(a);newElement=HeaderRowState.createTextField("hidden",e.attr("name"),a);c.removeAttr("abbr");c.append(newElement)}else{var f=$j.trim(c.text());c.attr("abbr",f);newElement=HeaderRowState.createTextField("text",e.attr("name"),f);this.addFocusWatchingHandler(newElement);this.addNullWatchingChangeHandler(newElement);this.setValueCell(newElement)}};HeaderRowState.prototype.toggleButton1Cell=function(a){var b=this.getButton1Cell();if(a){newElement=HeaderRowState.createEditLink("settings-edit-header");this.setButton1Cell(newElement)}else{newElement=HeaderRowState.createButton("add","settings-save-header");this.setButton1Cell(newElement)}};HeaderRowState.prototype.toggleButton2Cell=function(a){var b=this.getButton2Cell();if(a){newElement=HeaderRowState.createRemoveLink("settings-remove-header");this.setButton2Cell(newElement)}else{newElement=HeaderRowState.createButton("cancel","settings-cancel-header");this.setButton2Cell(newElement)}};