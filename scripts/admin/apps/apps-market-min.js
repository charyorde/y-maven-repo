jiveJAFAdminAppsMarket=$Class.extend({init:function(b){var a=this;a.wireEvents();a.radioCheck();a.enabledSectionsCheck(true)},enabledSectionsCheck:function(a){var b=$j('input[type="radio"]:checked').val()==="enableapps";if(b){if(a){$j(".config-section").show()}else{$j(".config-section").fadeIn()}}else{if(a){$j(".config-section").hide()}else{$j(".config-section").fadeOut()}}},wireEvents:function(){var a=this;$j('input[type="radio"]').change(a.radioCheck);$j(".info-message").hide();$j('[type="submit"]').click(function(f){f.preventDefault();var b=$j('input[type="radio"]:checked').val()==="enableapps";var d=jive.api.apps("admin")+"/enabled/"+b;var g=$j(this).siblings(".success.info-message");var c=$j(this).siblings(".error.info-message");$j.ajax({url:d,contentType:"application/json",dataType:"json",type:"PUT",success:function(e){g.fadeIn();setTimeout(function(){g.fadeOut()},3000);a.enabledSectionsCheck()},error:function(e){c.fadeIn();setTimeout(function(){c.fadeOut()},3000)}})});$j(".btn-generate-new-credentials").click(function(c){c.preventDefault();$j(".registration-started").show();var b=jive.api.apps("admin")+"/regenoauth";$j.ajax({url:b,contentType:"application/json",dataType:"json",type:"PUT",success:function(d){$j(".registration-started").hide();$j(".registration-failed").hide();$j(".registration-success").fadeIn();$j("span.oauth-status-txt").text("Successful");$j(".oauth-status.valid").show()},error:function(d){$j(".registration-started").hide();$j(".registration-success").hide();$j(".registration-failed").fadeIn();$j(".oauth-status.invalid").show();$j("span.oauth-error-message-lbl").text("Last error encountered:");$j("span.oauth-error-message-txt").text(JSON.parse(d.responseText).message)}})});$j(".btn-start-poller").click(function(d){d.preventDefault();var f=$j(this).siblings(".success.info-message");var b=$j(this).siblings(".error.info-message");var c=jive.api.apps("admin")+"/runpoller/true";$j.ajax({url:c,contentType:"application/json",dataType:"json",type:"PUT",success:function(e){f.fadeIn();setTimeout(function(){f.fadeOut()},3000)},error:function(e){b.fadeIn();setTimeout(function(){b.fadeOut()},3000)}})});$j(".btn-start-pusher").click(function(d){d.preventDefault();var c=jive.api.apps("admin")+"/runpusher/true";var f=$j(this).siblings(".success.info-message");var b=$j(this).siblings(".error.info-message");$j.ajax({url:c,contentType:"application/json",dataType:"json",type:"PUT",success:function(e){f.fadeIn();setTimeout(function(){f.fadeOut()},3000)},error:function(e){b.fadeIn();setTimeout(function(){b.fadeOut()},3000)}})});$j(".btn-test-gateway").click(function(d){d.preventDefault();var c=jive.api.apps("admin")+"/gatewayup";var f=$j(this).siblings(".success.info-message");var b=$j(this).siblings(".error.info-message");$j.ajax({url:c,contentType:"application/json",dataType:"json",type:"GET",success:function(e){f.fadeIn();setTimeout(function(){f.fadeOut()},3000);if(e){$j(".gateway-status").hide();$j(".gateway-status.valid").fadeIn()}else{$j(".gateway-status").hide();$j(".gateway-status.invalid").fadeIn()}},error:function(e){b.fadeIn();setTimeout(function(){b.fadeOut()},3000)}})});$j(document).ready(function(){a.startAppDiagnostics()})},radioCheck:function(){$j(".info-message").hide();$j('input[type="radio"]').each(function(){if($j(this).is(":checked")){$j(this).closest("li").addClass("checked").find(".test-row").fadeIn(300)}else{$j(this).closest("li").removeClass("checked").find(".test-row").fadeOut(300)}})},startAppDiagnostics:function(){var b="/__services/v2/rest/admin/network/tools/echo/diagnostic";this.appDiagnosticTests=[{method:"GET",url:b+"?test=get",description:"Unable to perform http GET request"},{method:"POST",url:b+"?test=post",description:"Unable to perform http POST request"},{method:"PUT",url:b+"?test=put",description:"Unable to perform http PUT request"},{method:"DELETE",url:b+"?test=delete",description:"Unable to perform http DELETE request"},{method:"GET",url:b+"?test%3Dthis%2Bthat",description:"Unable to perform http GET request containing percentage"},{method:"GET",url:b+"?test=this:that",description:"Unable to perform http GET request containing colon"}];var a=$j("#appsconnectivity-url").html();if(a.length>0){this.appDiagnosticTests.unshift({method:"GET",url:a,description:"Unable to perform custom GET request"})}this.resetAppDiagnostics();this.runAppDiagnostics()},resetAppDiagnostics:function(){this.appDiagnosticsFailure=null;this.displayAppDiagnostics("","")},runAppDiagnostics:function(){if(this.appDiagnosticTests.length===0){this.reportAppDiagnostics(true);return}var a=this;var b=this.appDiagnosticTests.shift();b.success=false;$j.ajax({type:b.method,url:_jive_base_url+b.url,contentType:"application/json",dataType:"json",complete:function(d,c){if(!b.success){a.failedAppDiagnostics(b,"Request did not complete successfully")}else{a.runAppDiagnostics()}},success:function(c){b.success=true},error:function(e,c,d){a.failedAppDiagnostics(b,"Request error")}})},failedAppDiagnostics:function(b,a){this.appDiagnosticsFailure=a+"<br>"+b.description+"<br>(method: "+b.method+", url: "+b.url+")";this.reportAppDiagnostics(false)},reportAppDiagnostics:function(e){var a="Success",d="",f="valid",b="check";if(!e){a="Failed";d=this.appDiagnosticsFailure;f="invalid";b="redalert"}this.displayAppDiagnostics('<span class="jive-icon-sml jive-icon-'+b+'"></span>'+a,d,"market-status "+f)},displayAppDiagnostics:function(b,a,d){$j("#appsconnectivity-status").attr("class",d||"").html(b);if(a.length>0){$j("#appsconnectivity-report").html(a).show()}}});