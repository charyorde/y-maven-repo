$j(function(){var b=new jive.Util.AjaxErrorHandler();$j(".jive-edit-inline-tags-link").live("click",function(){$j(".jive-edit-inline-tags").slideToggle("fast");$j(".jive-edit-inline-tags-field").focus();$j(".jive-thread-post-details-tags, .jive-edit-inline-tags-edit").addClass("jive-content-footer-tags-editing");if($j(".jive-edit-inline-tags").is(":visible")){$j(".jive-thread-post-details-tags a, .jive-edit-inline-tags-link").click(function(){return false})}return false});$j(".jive-edit-inline-tags-save").click(function(){var c=$j.trim($j(".jive-edit-inline-tags-field").val());if(defaultToTagEditMode){$j(".jive-thread-post-details-tags, .jive-edit-inline-tags-edit").removeClass("jive-content-footer-tags-editing");$j(".jive-thread-post-details-tags a").unbind("click");$j(".jive-edit-inline-tags").show()}$j.ajax({dataType:"json",type:"POST",url:inlineTagEditUrl,data:{tags:encodeURIComponent(c)},success:function(f,e,g){b.checkForLoginRedirect(g);if(parseInt(f.tagCount,10)>0){var d=$j.parseJSON(f.tags).map(function(h){h=$j.trim(h);return $j("<span/>").append($j("<a/>").attr("href",baseContainerTagUrl+encodeURIComponent(h)).text(h)).html()}).join(", ");$j("#"+tagSpanID).html(d);$j("#jive-edit-inline-add-none").hide();$j("#jive-edit-inline-tags-edit").hide();$j(".jive-thread-post-details-tags, .jive-edit-inline-tags-edit").removeClass("jive-content-footer-tags-editing");if(!hasTags){$j("#jive-edit-inline-tags-edit").toggleClass("jive-edit-inline-tags-edit");$j("#jive-edit-inline-placeholder").toggleClass("jive-edit-inline-tags-edit")}hasTags=true;$j("#jive-edit-inline-placeholder").hide();$j(".jive-edit-inline-tags-link").unbind("click")}else{$j("#"+tagSpanID).html("");$j("#jive-edit-inline-add-none").show();$j("#jive-edit-inline-tags-edit").hide();$j(".jive-thread-post-details-tags, .jive-edit-inline-tags-edit").removeClass("jive-content-footer-tags-editing");if(hasTags){$j("#jive-edit-inline-tags-edit").toggleClass("jive-edit-inline-tags-edit");$j("#jive-edit-inline-placeholder").toggleClass("jive-edit-inline-tags-edit")}hasTags=false;$j("#jive-edit-inline-placeholder").hide();$j(".jive-edit-inline-tags-link").unbind("click")}if(!defaultToTagEditMode){$j(".jive-edit-inline-tags").slideToggle("fast");$j(".jive-edit-inline-tags-edit").show()}if("awaiting_moderation"==f.status||"abuse_hidden"==f.status){if(tagModerationCallback&&typeof tagModerationCallback=="function"){tagModerationCallback(f.status)}}},error:function(g,d,e){if(g.status==400){var f=$j.parseJSON(g.responseText);if(f&&f.error.code=="4001"){alert(f.error.message)}}else{b.handleError(g)}}});return false});$j(".jive-edit-inline-tags-cancel").click(function(){a();return false});$j(window).keypress(function(c){if((c.keyCode==27||(c.DOM_VK_ESCAPE==27&&c.which==0))&&$j("#jive-tag-choices").is(":hidden")){$j("#jive-tags").blur();a();return false}});function a(){$j(".jive-edit-inline-tags").slideToggle("fast");$j(".jive-edit-inline-tags-edit").show();$j(".jive-thread-post-details-tags, .jive-edit-inline-tags-edit").removeClass("jive-content-footer-tags-editing");$j(".jive-thread-post-details-tags a, .jive-edit-inline-tags-link").unbind("click")}});$j(document).ready(function(){if(defaultToTagEditMode){}});