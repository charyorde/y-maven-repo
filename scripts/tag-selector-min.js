function updateTagSets(){if($j("#jive-taggroups-active-container")&&$j("#jive-taggroups-active-container").length>0){var a=$j(".jive-tag-selected").map(function(){return $j(this).attr("name")}).filter(function(b){return b!="populartag"}).unique();if(a.length>0){$j("#jive-taggroups-active-container").show();$j("#jive-taggroups-active").text(a.join(", "))}else{$j("#jive-taggroups-active").text("");$j("#jive-taggroups-active-container").hide()}}}function highlightSelectedTags(a){var c=a.find("#jive-tags").val().split(/\s+/),b=a.find("[class^=jive-tagname-]");if(c&&b){b.removeClass("jive-tag-selected").addClass("jive-tag-unselected");c.forEach(function(d){b.filter(function(){return $j(this).hasClass("jive-tagname-"+d)}).addClass("jive-tag-selected").removeClass("jive-tag-unselected")})}}function swapTag(a){var b=$j(a).closest("#jive-compose-tags-form"),c=b.find("#jive-tags"),e=c.val().split(/\s+/).filter(function(f){return !!f}),d=typeof a=="string"?a:$j(a).text();if($j.inArray(d,e)!=-1){c.val(e.filter(function(f){return f!=d}).join(" "))}else{c.val(e.concat(d).join(" "))}highlightSelectedTags(b);updateTagSets()}function swapTagSet(a){$j("#jive-taggroups-container div").hide();if(a){$j("#jive-taggroup-"+a).show()}}$j(document).ready(function(){var a=typeof(Community)!="undefined"?Community.feed:{};$j("#jive-tags").tagAutocomplete();activatePopularTagsPolling()});function updateURLWithCategoryInfo(a){var b=$j(a).attr("href");if(typeof(ContentFilterHandler)!="undefined"&&ContentFilterHandler.contentLoader!==null&&ContentFilterHandler.contentLoader.get_parameters().tagSet!==null){b=b+"#/?tagSet="+ContentFilterHandler.contentLoader.get_parameters().tagSet}return b}function activatePopularTagsPolling(c){var a=c||"#jive-tags";var b=$j("#jive-compose-tags-form");if(b&&b.length>0){window.setInterval(function(){highlightSelectedTags($j(a).closest("#jive-compose-tags-form"))},800)}updateTagSets()}$j(document).ready(function(){$j(".jive-body-tab.jive-content-tab a").click(function(){window.location=updateURLWithCategoryInfo(this);return false})});