jive.namespace("rte");jive.rte.FormService=jive.oo.Class.extend(function(a){a.init=function(c){this.$form=c.$form;if(!this.$form||this.$form.length!=1||this.$form.get(0).nodeName.toLowerCase()!="form"){throw new Error("options.$form is required and must select a single form element")}this._formSubmitHandler=null;var e=this;function f(h){var l=true;if(e.$form.data("validator")){var g=e.$form.find(":input").not(":button, :image, :reset, :submit");l=e.$form.data("validator").checkValidity(g,h)}if(e.isFormEnabled()){if(e._formSubmitHandler){return l&&e._formSubmitHandler(h)}else{return l}}var k;for(var j=e.formDisabledTokens.length-1;j>=0;--j){if(typeof e.formDisabledTokens[j]=="string"){k=e.formDisabledTokens[j];break}}if(k){$j(b(k)).message({style:"info"})}return false}var d=this.$form.get(0);if(d.onsubmit){this.setFormSubmitHandler(d.onsubmit);d.onsubmit=null}if(c.formSubmitHandler){this.setFormSubmitHandler(c.formSubmitHandler)}this.$form.unbind("submit").bind("submit",f);this.formDisabledTokens=[]};function b(c){return $j("<div/>").text(c).get(0)}this.setFormSubmitHandler=function(d,c){if(!c){c=this.$form.get(0)}d=$j.proxy(d,c);this._formSubmitHandler=d};this.isFormEnabled=function(){for(var c=this.formDisabledTokens.length-1;c>=0;--c){if(this.formDisabledTokens[c]){return false}}return true};this.setFormEnabled=function(c,d){if(!d){d=true}if(!c){this.formDisabledTokens.push(d);return this.formDisabledTokens.length}else{this.formDisabledTokens[c-1]=false}}});define("jive.rte.FormService",function(){return jive.rte.FormService});