jive.namespace("widgets");jive.widgets.Container=function(b){var c="#jive-widgetframe";var f=$j.extend({},b);var e=this;var a=new Array();this.addWidget=function(h){$j("#jive-widgetframe-loading_"+h).show();a.push(h)};var g=function(i,h){$j(c+"-loading_"+h).hide();$j(c+"-body_"+h).show();$j(c+"_"+f.id).trigger("frameLoaded")};var d=function(k,j){var i=$j(c+"-body_"+k).parent().hasClass("jive-widgetsize-large")?2:1;var h=$j.extend({size:i,frameID:k},f);h=$j.extend(j,h);$j.get(f.renderWidgetAction,h,function(o){var p,n=jive.util.separateScripts(o),m=n[0],l=n[1];if(typeof innerShiv!="undefined"){p=innerShiv(m)}else{p=m}$j(c+"-body_"+k).html(p);l();g(null,k)})};this.renderAll=function(){a.forEach(d)};this.refreshLink=function(k,i){var h="#"+c+"-refresh-link_"+k,j=this.refresh.bind(this,k,i);$j(document.body).on("click",h,j)};this.refresh=function(i,h){$j(c+"-loading_"+i).show();$j(c+"-body_"+i).hide();d(i,h);return false};this.editMode=function(k,j){var i=$j(c+"-options_"+k);var h=new WidgetProps({widgetFrameID:k});if(j=="com.jivesoftware.community.widget.Widget"){i.find("li.jive-widget-edit a").click(function(){h.killRTEs();widgets.editWidgetFrame(k);return false})}i.find("li.jive-widget-minimize a").click(function(){h.killRTEs();widgets.minimizeWidgetFrame(k);return false});i.find("li.jive-widget-maximize a").click(function(){widgets.maximizeWidgetFrame(k);return false});i.find("li.jive-widget-remove a").click(function(){h.killRTEs();widgets.removeWidgetFrame(k);return false})}};