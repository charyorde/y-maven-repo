function popup(){return false}$j(function(){new SuperNote("jiveTT",{showDelay:700,hideDelay:30,cssProp:"visibility",cssVis:"visible",cssHid:"hidden"});$j("a.help-topic").livequery("click",function(){window.name="main";var a=$j(this).attr("href");var b=window.open(a,"Help","width=600,height=400,left=-200,top=-200,scrollbars=yes,dependent=yes,status=no,location=no");b.opener.name="product_ui";return false})});$j(function(){$j("a.tooltip").livequery(function(){$j(this).tooltip()})});$j(function(){$j("#space-suggest").keyup(function(){$j(this).suggest(__suggestSpaceUrl,{clientSearch:true,delimiter:"\\a",dataDelimiter:"\\b",dataContainer:"#space-suggest-id",onSelect:function(){$j("#space-suggest-form").submit()}})});$j("#browse-spaces").click(function(){var a=$j(this).attr("href");$j.get(a,null,function(c){var d=$j(c).attr("id");$j("body").append(c);var b=$j("#"+d);b.lightbox_me({closeSelector:".jive-close",onClose:function(){b.remove()}})});return false});$j("#browse-space-modal-content").livequery(function(){$j(this).spacePicker(function(){if($j(this).children("a.disabled").length>0){return}$j("#space-suggest").val($j(this).text());$j("#space-suggest-id").val($j(this).attr("id"));$j("#space-suggest-form").submit()})})});$j(function(){$j("a[id^=permission-level-details-]").live("click",function(){h($j(this).next("form"))});function h(C){C.ajaxSubmit({success:function(D){$j("body").append(D);$j("#permLevelView").lightbox_me({closeSelector:".jive-close",opacity:0,onClose:function(){$j("#permLevelView").remove()}})}})}function B(D,C){return $j(C).find(":submit:enabled").length>0}var A='<div class="image"><span><img class="jive-avatar" src="'+__avatarUrl+'"border="0" height="30" width="30"></span></div><div class="name">{0}<span class="informal"><em>{1}</em><em>{2}</em></span></div>';$j("#add-system-permission-group-form").ajaxForm({success:function(C){r(C)},beforeSubmit:function(D,C){if(d(D,C)){return true}w();return false}});function r(C){if($j("#admin-console-add").length>0){$j("#admin-console-add").find("#system-permissions-form").replaceWith($j("#system-permissions-form",C))}else{$j("body").append(C);k($j("#admin-console-add"));w()}i($j("#system-permissions-form"))}function k(C){C.lightbox_me({closeSelector:".jive-close",onClose:function(){C.remove()}})}function i(C){C.ajaxForm({success:function(E){var F=function(G){if($j("#space-perm-groups",G).length>0){$j("#space-perm-groups").replaceWith($j("#space-perm-groups",G))}else{location.reload()}};var D=function(){location.reload()};if($j(E).attr("id")=="admin-console-add"){r(E);return}$j("#admin-console-add").find("a.jive-close").click();if(!y(E,F,D)){$j("#space-perm-groups").replaceWith($j("#space-perm-groups",E))}},beforeSubmit:function(E,D){if(o(E,D)){return true}$j("#admin-console-add").find("a.jive-close").click();return false}})}$j("div#space-perm-groups li.group a.edit").live("click",function(){$j.scrollTo({top:"0px",left:"0px"},500);$j(this).next("form").ajaxSubmit({success:function(C){$j("body").append(C);k($j("#admin-console-add"));i($j("#system-permissions-form"))}})});function x(){$j(this).remove()}$j(".typeahead").livequery(function(){$j(this).data("defaultValue",$j(this).val());$j(this).focus(function(){$j(this).removeClass("typeahead");if($j(this).val()==$j(this).data("defaultValue")){$j(this).val("")}});$j(this).blur(function(){if($j(this).val().length!=0){return}$j(this).addClass("typeahead");$j(this).val($j(this).data("defaultValue"))})});$j("#addlink").live("click",function(){if($j(this).hasClass("adding")){w()}else{$j(this).addClass("adding");$j("#add-group").fadeIn("fast");$j("#view-rules").hide();q();$j("#userlookup").removeClass("adding");$j("#group-suggest").focus()}return false});$j("#group-suggest").livequery(function(){$j(this).suggest(__suggestGroupUrl,{clientSearch:false,delimiter:"\\a",dataDelimiter:"\\b",resultsClass:"ac_results_group",dataContainer:"#group-suggest-id",onSelect:function(){$j(this).parents("form").find(":submit").prop("disabled",false);$j(this).hide();$j("#group-suggest-selected").text($j(this).val());$j("#group-suggest-selected").show();b($j(this)).focus()}})});$j("#group-suggest-selected").live("click",function(){$j(this).hide();$j("#group-suggest").show().val("").focus();$j("#group-suggest-id").val("");$j(this).parents("form").find(":submit:not([name=cancel])").prop("disabled",true)});function o(E,C){var D=t(E);if(D){v(C)}C.find(":submit").prop("disabled",true).blur();return !D}function t(E){for(var C=0;C<E.length;C++){var D=E[C].name=="method:cancel";if(D){return true}}return false}function v(C){var D=C.parents(".jive-modal");D.find("a.jive-close").click()}function f(C,D){$j.ajax({url:__configureAdvancedPermissionsUrl,data:C,success:function(E){$j("body").append(E);k($j("#advanced-perms"));p($j("#advanced-perms-form"),D)}})}function p(C,D){C.ajaxForm({success:function(G){var F=function(){location.reload()};var H=G.charAt(0)=="{";if(!H&&$j(G).attr("id")=="advanced-perms"){$j("#advanced-perms-form").replaceWith($j("#advanced-perms-form",G));p($j("#advanced-perms-form"),D);var E=$j(".jive-field-error:first").focus();$j.scrollTo(E,{offset:{top:-60}})}else{if(!H){$j("#advanced-perms").find("a.jive-close").click();y(G,e,F)}else{if(H){$j("#advanced-perms").find("a.jive-close").click();e(G,D)}}}},beforeSubmit:o})}function e(C,D){C=window["eval"]("("+C+")");if(C.pl.name){a(D,C.pl.name,C.pl.id)}else{D.val(C.pl.id)}D.parents("form").find(":submit").prop("disabled",false)}function a(F,C,E){var D=$j("<option />");D.text(C);D.val(E);$j("select.permission-level-selector").find("option.custom").before(D);D=F.siblings("[value="+E+"]");D.prop("selected",true);D.parent("select").change()}$j("#permlevel, div.select-permlevel select.permission-level-selector").livequery(function(){$j(this).bind("change",function(){var E=$j(this).siblings(".edit-custom-level");var C=E.parents("form");var D=$j(this).find("option:selected").hasClass("custom");if(!D){E.hide();$j(this).find("option.custom").val("-1");C.find(":submit").prop("disabled",false);return}C.find(":submit:not([name=cancel])").prop("disabled",true);E.show().click()})});$j("form#add-group-form .edit-custom-level").live("click",function(){var C=$j("#permlevel option.custom");f("permissionLevel="+C.val(),C)});$j("div.select-permlevel a.edit-custom-level").live("click",function(){var C=$j(this).parents("form[id^=update-group-]").find("option.custom");f("permissionLevel="+C.val(),C)});$j("form#permission-level-details-form").livequery(function(){$j(this).ajaxForm({beforeSubmit:function(){$j("#permLevelView .jive-close").click();return false}})});function w(){$j("#add-group").fadeOut("fast");$j("#add-group").find(":submit[name=cancel]").prop("disabled",false);$j("#addlink").removeClass("adding");$j("#group-suggest-selected").click();$j("#group-suggest").blur();return false}$j("select.permission-level-select").livequery(function(){$j(this).bind("change",function(){var E=$j(this).siblings("p.advanced");var C=$j(this).find("option:selected");var D=$j(this).siblings("span.permdef");var F=C.hasClass("advanced");D.text(C.attr("title"));if(!F){E.hide();return}E.show()})});$j("#savelevel").livequery(function(){$j(this).click(function(){$j("#permlevel-name").toggle();return true})});function d(F,C){var E=false;for(var D=0;D<F.length;D++){E=F[D].name=="cancel";if(E){break}}if(E){w()}else{C.find(":submit").prop("disabled",true).blur()}return !E}$j("#add-group-form").livequery(function(){$j(this).ajaxForm({success:function(C){w();$j("#add-group").replaceWith($j("#add-group",C));$j("#space-perm-groups").replaceWith($j("#space-perm-groups",C))},beforeSubmit:d});$j(this).find(":submit:not([name=cancel])").prop("disabled",true)});function u(){$j(this).fadeIn().effect("highlight",{color:"#eafade"},3000);var C=$j(this).find(".perms-updated");C.delay(2000).fadeOut("slow");$j.scrollTo(this,500)}$j(".added-group").livequery(u);function c(D,E){var C=D.prev(".perms-updated");D.fadeOut("fast",x);C.fadeIn("fast").delay(3000).fadeOut("slow",function(){if(E){E()}else{$j(this).remove()}})}$j("li.group a.remove").live("click",function(){var D=$j(this).parents("li.group");var C=$j(this).next("form");C.ajaxSubmit(function(F){var G=j.bind(D);var E=function(){location.reload()};if(!y(F,G,E)){G=z.bind(D);G(F)}})});function z(E){var C=$j(E),F=C.find("#space-perm-groups"),D=this;if(C.find("#"+D.attr("id")).length===0){c(D,function(){$j("#space-perm-groups").replaceWith(F)})}}function j(E){var D=this;var C=D.attr("id");if($j("#"+C,E).length>0){$j("#space-perm-groups").replaceWith($j("#space-perm-groups",E));return}location.reload()}function y(E,F,C){var D=$j(E);if(!D.hasClass("jive-modal-confirm")){return false}$j("body").append(D);D=$j(".jive-modal-confirm");k($j(".jive-modal-confirm"));D.find("form").ajaxForm({success:function(G){$j(".jive-modal-confirm").find("a.jive-close").click();F(G)},error:C});return true}$j("li.group a.change").live("click",function(){var C=$j(this).parents(".current-permlevel");C.hide();C.siblings(".select-permlevel").fadeIn("fast")});$j("li.group div.select-permlevel form").livequery(function(){var D="#"+$j(this).attr("id");var C=$j(this);$j(this).ajaxForm({success:function(F){$j(D).replaceWith($j(D,F));var E=$j(D).parents(".select-permlevel");E.siblings(".perms-updated").fadeIn("fast").delay(2000).fadeOut("slow");E.hide();u.apply($j(D).closest("li.group"));E.siblings(".current-permlevel").replaceWith($j(D,F).parents(".select-permlevel").siblings(".current-permlevel"));E.siblings(".current-permlevel").fadeIn()},beforeSubmit:function(){var E=C.find(":submit");E.prop("disabled",true);E.blur()}})});function q(){$j("#group-affiliation").fadeOut("fast",x);$j("#user-suggest-selected").click();$j("#view-rules-form").find(":submit").prop("disabled",true)}$j("#userlookup").live("click",function(){if($j(this).hasClass("adding")){q();$j(this).removeClass("adding");$j("#view-rules").fadeOut("fast")}else{$j(this).addClass("adding");$j("#add-group").hide();w();$j("#view-rules").fadeIn("fast");$j("#user-suggest").focus()}return false});$j("#user-suggest, #add-user-exception").livequery(function(){var E=$j(this).attr("id");var D="#"+E+" + input:hidden";var C=$j(this).siblings("div.input");$j(this).suggest(__suggestUserUrl,{clientSearch:true,delimiter:"\\a",dataDelimiter:"\\b",dataContainer:D,template:A,resultsClass:"ac_results_contact",liClass:"jive-contact",paramName:"query",useCache:"false",onSelect:function(){$j(this).hide();C.text($j(this).val());C.show();$j(this).parents("form").find(":submit").prop("disabled",false);b($j(this)).focus()},limit:__suggestUserLimit})});function b(F){var C=F.parents("form");var E=C.find(":input:not([type=hidden])");var D=E.index(F)+1;return C.find(":input:not([type=hidden]):eq("+D+")")}$j("#user-suggest-selected, #add-user-exception-selected").live("click",function(){$j(this).hide();$j(this).siblings(":text").show().val("").focus();$j(this).siblings("input:hidden").val("");$j(this).parents("form").find(":submit").prop("disabled",true)});$j("#view-rules-form").livequery(function(){var C=$j(this);$j(this).ajaxForm({success:function(D){$j("#group-affiliation").remove();C.after($j(D));$j("#group-affiliation").fadeIn("fast");$j(this).find(":submit").prop("disabled",true)}});$j(this).find(":submit").prop("disabled",true)});$j("#group-affiliation-create-exception").live("click",function(){m($j("#group-affiliation-form"))});$j("#group-affilication-cancel").live("click",q);function m(C){C.ajaxSubmit({success:function(D){$j("body").append(D);if($j("#advanced-perms").size()>0){k($j("#advanced-perms"));g($j("#advanced-perms-form"))}else{if($j("#admin-console-add").size()>0){k($j("#admin-console-add"));g($j("#system-permissions-form"))}}}})}var s=/<link [^>]*rel="stylesheet".*?>/g;function g(C){C.ajaxForm({success:function(E){if($j.browser.msie&&$j.browser.version<8){E=E.replace(s,"")}if($j(E).attr("id")=="admin-console-add"){if($j("#system-permissions-form")&&$j("#system-permissions-form").length>0){$j("#system-permissions-form").replaceWith($j("#system-permissions-form",E));g($j("#system-permissions-form"));return}}q();v(C);var D=function(){location.reload()};var F=function(H){var G=$j("#exceptions",H);if(G.length>0){$j("#exceptions").replaceWith(G);$j("#override .empty-permlist").remove()}else{location.reload()}};if(!y(E,F,D)){F(E)}},beforeSubmit:o})}$j(".added-exception").livequery(u);$j("#exceptions li.exception a.delete").live("click",function(){var C=$j(this).parents("li.exception");var D=$j(this).next("form");D.ajaxSubmit(function(F){var G=l.bind(C);var E=function(){location.reload()};if(!y(F,G,E)){G=n.bind(C);G(F)}})});function n(E){var C=this;var D=C.attr("id");if($j("#"+D,E).length>0){return}var F=function(){var G=$j("#override .empty-permlist",E);if(G.length<0){return}$j("#override").append($j("#override .empty-permlist",E))};c(C,F)}function l(D){var C=$j("#exceptions",D);if(C.length>0){$j("#exceptions").replaceWith(C)}else{location.reload()}}$j("#exceptions ul li span.actions a.edit").live("click",function(){var C=$j(this).next("form");m(C);$j.scrollTo({top:"0px",left:"0px"},500)});$j("#exceptions li.exception div.exception-permission-level a.tooltip, #exceptions li.exception div.exception-permission-level a.edit").live("click",function(){var C=$j(this).parents(".exception-permission-level").children("form");$j.scrollTo({top:"0px",left:"0px"},500);if($j(this).hasClass("edit")){m(C)}else{h(C)}});$j(".jive-perm-choice").live("click",function(){$j(this).find(".sel-choice").each(function(){if($j(this).is(":checked")){$j(this).prop("checked",false);$j(this).closest(".jive-perm-choice").removeClass("permission-selected")}else{$j(this).prop("checked",true);$j(this).closest(".jive-perm-choice").addClass("permission-selected")}})});$j(".sel-choice").live("click",function(){if($j(this).is(":checked")){$j(this).prop("checked",false);$j(this).closest(".jive-perm-choice").removeClass("permission-selected")}else{$j(this).prop("checked",true);$j(this).closest(".jive-perm-choice").addClass("permission-selected")}});$j("#add-system-permission-exception-form").livequery(function(){var C=$j(this);C.ajaxForm({success:function(D){$j("body").append(D);if($j("#advanced-perms").size()>0){k($j("#advanced-perms"));g($j("#advanced-perms-form"))}else{if($j("#admin-console-add").size()>0){k($j("#admin-console-add"));g($j("#system-permissions-form"))}}$j("#add-user-exception-selected").click()},beforeSubmit:B});$j(this).find(":submit").prop("disabled",true)});$j("#space-access :radio[name=admin]").livequery(function(){$j(this).click(function(){var C=$j("#space-access :radio[name=admin]:checked").val();switch(C){case"rescind":case"nocontent":$j("#manage-adv").slideUp("fast");$j("#addl-settings").slideUp("fast");$j("#content-types").slideUp("fast");break;case"view":$j("#manage-adv").slideUp("fast");$j("#addl-settings").slideDown("fast");$j("#content-types").slideDown("fast");break;case"manage":$j("#manage-adv").slideDown("fast");$j("#addl-settings").slideUp("fast");$j("#content-types").slideUp("fast");break}})});$j("#system-access :radio[name=admin]").livequery(function(){$j(this).click(function(){var C=$j("#system-access :radio[name=admin]:checked").val();switch(C){case"rescind":$j("#system-permission-exception").slideUp("fast");break;case"view":$j("#system-permission-exception").slideDown("fast");break}})});$j("#addexcept").livequery(function(){$j(this).toggle(function(){$j("#add-exception").fadeIn("fast");$j(this).addClass("adding");$j("#add-exception").find(":text").focus();return false},function(){$j("#add-exception").fadeOut("fast");$j(this).removeClass("adding");return false})})});$j(function(){$j("a.reset-inheritance").live("click",function(){$j(this).addClass("reset");var b=$j(this).attr("href");var c=$j(this);$j.ajax({url:b,success:function(e){var d=$j(e);c.nextAll().filter(function(){return $j(this).attr("id")==d.attr("id")}).remove();c.after(d)}});return false});function a(){$j("#copy-rules").remove();$j("a.reset-inheritance").removeClass("reset")}$j("div#copy-rules form").livequery(function(){var b=$j(this);$j(this).ajaxForm({success:function(d){var c=$j("div.inherited",d);$j("div.customized").replaceWith(c);$j("#jive-body-maincol").attr("class",$j("#jive-body-maincol",d).attr("class"))},beforeSubmit:function(e){var d=false;for(var c=0;c<e.length;c++){d=e[c].name=="method:cancel";if(d){break}}if(d){a()}b.find(":submit").prop("disabled",true).blur();return !d}})});$j("a.customize-inheritance").live("click",function(){$j("#customize-inheritance-form").ajaxSubmit({success:function(c){var b=$j("div.customized",c);$j("div.inherited").replaceWith(b);$j("#jive-body-maincol").attr("class",$j("#jive-body-maincol",c).attr("class"))}})});$j("#jive-inheritors-loading").livequery(function(){var b=$j(this).find("a").attr("href");$j(this).load(b)});$j("#view-space-inheritors").live("click",function(){$j("#inheritors-spacelist-modal").lightbox_me({closeSelector:".jive-close"});return false})});