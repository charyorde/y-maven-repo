define("jive.JAF.CoreContainer.CredentialsModel",["jquery"],function(a){return jive.oo.Class.extend(function(b){jive.conc.observable(this);b.init=function(d){var c=this;this.alias=d.alias};this.get_credentials=function(e,c){var f=new jive.conc.Promise();var d=jive.api.apps("instances/"+e+"/credentials_setup?aliases="+c);a.ajax({url:d,type:"GET",success:function(g){f.emitSuccess(g)}});return f};this.persist=function(f,e){var d=this;var c={instanceAppID:f,services:e.services};a.ajax({type:"PUT",url:jive.api.apps("instances/update_credentials"),data:JSON.stringify(c),contentType:"application/json",dataType:"json",success:function(h){var g={alias:d.alias};d.emit("app.credentials.persisted.success",g)},error:function(i){var g={alias:d.alias,error:{}};g.error.code=i.status?i.status:500;g.error.message=i.statusText;if(i.response&&i.response.startsWith("{")){var h=JSON.parse(i.response);if(h.message){g.error.message=h.message}}d.emit("app.credentials.persisted.failed",g)}})}})});