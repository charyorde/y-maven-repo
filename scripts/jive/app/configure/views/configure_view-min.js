define("jive.JAF.Configuration.ConfigureView",["jquery","jive.JAF.Configuration.ServiceBlocks","jive.JAF.Configuration.Validate","jive.JAF.Configuration.Error"],function(c,a,d,b){return jive.AbstractView.extend(function(e){this.init=function(g,h,f){this.instanceAppID=g.instanceAppID;this.configSetupData=h;this.configSetupData.app=g;if(h.requiresServices){this.content=c(jive.apps.configure.renderConfigureApp({configureAppView:h}));f.html("");f.append(this.content);c("#app-config-save").focus();this.bindClickEvents()}else{this.content=c(jive.apps.configure.renderConfigureAppNotNeeded());f.html("");f.append(this.content)}};e.bindClickEvents=function(){var f=this;var g=this.content;f.emit("app.service.wire.cancel",{callback:function(){f.emit("app.cancel_configuration")}});f.emit("app.service.wire.submit",{callback:function(){var h=new a();var j=h.validate(f.validate);if(j){var i=h.get_services();f.emit("app.save_configuration",i)}}});g.find(".j-service-radio").each(function(){var h=c(this).attr("data-optiongroupid");var i=c(this).attr("data-optionid");c(this).click(function(){c(".j-service-credentials[data-optiongroupid="+h+"]").hide();c(".j-service-credentials[data-optionid="+i+"]").show()})})};e.validate=function(g){var i=new b();i.clear();var f={};var h=[];g.find(".j-service-error").removeClass("j-service-error");g.each(function(){var j=new d(c(this),f,h);j.work()});if(h.length){i.render(f);i.fieldsToVisualMarkers(h)}return h.length==0}})});