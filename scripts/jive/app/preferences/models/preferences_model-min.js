define("jive.JAF.Preferences.Model",["jquery"],function(a){return jive.oo.Class.extend(function(b){jive.conc.observable(this);b.init=function(){this.GADGET_ENDPOINT=jive.rest.url("/app");this.options=function(f,d,e,c){if(e){d=d+"?"+a.param(e)}return{type:f,url:this.GADGET_ENDPOINT+d,dataType:"json",contentType:"application/json; charset=utf-8",success:c}}};this.setPref=function(g,c,e){var d=this;var f={n:c,v:e};a.ajax(this.options("PUT","/"+g+"/prefs",f,function(h){d.emit("app.preferences.set",h)}))};this.getPreferences=function(d){var c=this;a.ajax(this.options("GET","/"+d+"/prefs/",null,function(e){c.emit("app.preferences.get",e.pref)}))};this.setPreferences=function(d){var c=this;d.ajaxSubmit({url:this.GADGET_ENDPOINT+"/setprefs/",type:"POST",dataType:"json",success:function(e){c.emit("app.preferences.set.all",e.dashboardAppSrc)}})};this.cancelEdit=function(d){var c=this;a.ajax(this.options("GET","/"+d,null,function(e){c.emit("app.preferences.cancel.edit",e)}))};this.getPreferencesView=function(d){var c=this;a.ajax(this.options("GET","/"+d+"/prefs/view",null,function(e){c.emit("app.preferences.get.pref.view",e.appPrefView)}))}})});