define("jive.JAF.CoreContainer.AppCredentialsView",["jquery","jive.JAF.Configuration.CredentialsMainV2"],function(a,b){return jive.oo.Class.extend(function(c){jive.conc.observable(this);this.init=function(d){this.app=d.app;this.serviceAlias=d.args.alias;this.callback=d.callback;this.completed=false};this.getApp=function(){return this.app};this.createUI=function(){var d=this;this.ui=a(jive.apps.container.credentialsView());this.credentialsMain=new b({domTarget:d.ui,instanceAppID:d.app.instanceAppID,serviceAlias:d.serviceAlias,completionCallback:function(e){d.callback(e);if(e.error){d.emit("app.credentials.complete.error")}else{d.emit("app.credentials.complete.success")}}});return this.ui};this.activate=function(){if(!this.credentialsMain){return}var d=this;window.setTimeout(function(){d.credentialsMain.activate()},350)};this.cleanup=function(){if(!this.credentialsMain.completed()){this.credentialsMain.emitFailure("The user cancelled this operation");this.emit("app.service.message",{severity:"warn",message:"You may not be able to use this app until you provide credentials."})}}})});