jive.namespace("Apps");jive.Apps.AppsCanvas=$Class.extend({init:function(a){this.cc=a},parseCanvasViewParams:function(){var b=null;var d=window.location.hash||"";var i=window.location.href;if(/%(22|7B)/i.test(d)){d=decodeURIComponent(d)}var f=/(canvas[^:;&]*)(:(([\{\}:,]|\s+|true|false|null|0|-?[1-9]+(\.[0-9]+)?|"(\\.|[^"]+)*")+))?/.exec(d);var c=null,h=null,j=null;if(f){try{var a=f[3];if(a){c=a&&a!="{}"?JSON.parse(a):null}h=f[1]||null;j=f[0]}catch(g){c=h=j=null}b={params:c,view:h,rawToken:j,canvasUrl:i}}return b},updateUrlWithViewParams:function(a,h,g){var d=[];d.push(a?a:"canvas");if(h&&Object.keys(h).length>0){d.push(JSON.stringify(h))}var e=d.join(":");var c=this.parseCanvasViewParams();var b=g||window.location.href;var f=b.indexOf("#")>0?b.substring(b.indexOf("#")+1):"";if(c&&c.rawToken){f=f.replace(c.rawToken,e)}else{if(f){f=f+";"+e}else{f=e}}if(b.indexOf("#")>0){b=b.substring(0,b.indexOf("#"))+"#"+f}else{b=b+"#"+f}return b}});