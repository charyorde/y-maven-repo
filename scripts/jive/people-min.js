var acVals={};var acFuncs={};var filterIndexMap={};var filterTypeMap={};var appliedFilters=[];var searchFieldFocused=false;function doSearch(a){$j("#sort-field option").val("");$j(a).prop("disabled",true);$j(a).val(searchingText);$j(a).closest("form").submit();$j(window).unload(function(){$j(a).prop("disabled",false)})}function showOptions(){$j("#jive-people-search-options").toggle()}function getProfileFieldValues(b,a){ProfileFieldValueStats.caclulateFacets(b,{callback:function(g){if($j("#sidebar-online-count").length>0&&(g.onlineCount>0)){$j("#sidebar-online-count").text(g.onlineCount);$j("#sidebar-online-count-list").show()}if($j("#sidebar-recent-count").length>0&&(g.newestCount>0)){$j("#sidebar-recent-count").text(g.newestCount);$j("#sidebar-recent-count-list").show()}if(!usingPrefix){g.prefixLetters.forEach(function(n){$j(".prefix-letter:contains("+n.toUpperCase()+"):not(:has(a))").each(function(){var o=$j("<a/>",{href:"#",text:n.toUpperCase()}).click(submitPrefix.partial(n.toLowerCase()));$j(this).html(o)})})}for(var l in g.resultMap){if($j.inArray(l,appliedFilters)==-1){var d=filterTypeMap["f"+l];var i=filterIndexMap["f"+l];var m=g.resultMap[l];var h="filter-field-"+l;var j=$j('[id="'+h+'"]');var e,c;var k=false;if(j.find("option").length>0){j.html("");j.append($j("<option/>",{value:"",text:a}));for(e in m){if(e){k=true;j.append($j("<option/>",{value:e,text:e+" ("+m[e]+")"}))}}}else{if(acFuncs[i]){acVals[i]=[];for(e in m){var f=jive.util.escapeHTML(e.split("|").first());if(f){k=true;acVals[i].push(f)}}if(acVals[i].length>0){acFuncs[i]()}}}if(!k){$j("#filter-table-row-"+l).hide()}}}convertSelectsIntoLinks();populateTagCloud(b)},errorHandler:function(c){if(console){console.log(c)}$j("#filter-sidebar-body").hide()},timeout:timeout})}function convertSelectsIntoLinks(){$j("#select.filterOption").each(function(){var a=$j(this),b=a.find("option");if(b.length>1){if(b.length-1<=linkThreshold){a.replaceWith($j("<span/>").append($j("<input/>",{type:"hidden",id:a.attr("id"),name:a.attr("name")})).append(b.filter(function(){return !!this.value}).map(function(){return $j("<a/>",{href:"#",text:$j(this).text()}).click(submitLink.partial(a.id,this.value))}).toArray().reduce(function(c,d){return c.after(document.createTextNode(", ")).after(d)})))}}})}function submitLink(b,a){$j('[id="'+b+'"]').val(a);submitForm()}function submitPrefix(a){$j("#profilesearchform [name=prefix]").val(a);$j("#profilesearchform [name=view]").val("alphabetical");submitForm()}function submitTag(a){$j("#profilesearchform [name=tag]").val(a);submitForm()}function clearFilter(a){$j('[id="filter-field-'+a+'"]').val("");$j('[id="filter-field-'+a+'.minValue"]').val("");$j('[id="filter-field-'+a+'.maxValue"]').val("");submitForm()}function clearPrefix(){$j("#filter-prefix").val("");submitForm()}function clearQuery(){$j("#query").val("");submitForm()}function clearTag(){$j("#tag").val("");submitForm()}function clearView(){$j("#profilesearchform-view").val("");submitForm()}function clearOnline(){$j("#online-filter").val("");if($j("#profilesearchform-view").val()=="online"){clearView()}else{submitForm()}}function clearCommunity(){$j("community").val("");submitForm()}function clearRecentlyAdded(){$j("#recently-added-filter").val("");if($j("#profilesearchform-view").val()=="newest"){clearView()}else{submitForm()}}function submitForm(){$j("#profilesearchform").submit()}function populateTagCloud(a){$j.ajax({url:resultTagCloudURL+"?"+$j.param({queryEncoded:a}),cache:false,success:function(b){$j("#results-tagcloud").html(b);$j("#results-tagcloud").show()}})};