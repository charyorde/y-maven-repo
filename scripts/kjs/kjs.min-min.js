function KJS(b){this._path=b&&b.path||"",this._d={}}KJS.prototype={require:function(){var e=Array.prototype.slice.call(arguments),d;typeof e[e.length-1]=="function"&&(d=e.pop());for(var f=0;f<e.length;f++){this.sat(e[f]+"--required")}d&&this.run(d,e)},_load:function(t,s,r,q,p){var o=this,n=(r||[]).concat(t.split("?")[0]),m=this._path+t,l=this._origin(m)&&q,k=l?function(f){var d,h;try{q.call(o,f)}catch(g){h=g}finally{while(d=n.shift()){o.sat(d)}if(h){throw h}}}:function(b){p.call(o,b,function(){var c;while(c=n.shift()){o.sat(c)}})};this.isSat(n)||(l?this.get(m,function(b){s&&s.length?o.run(function(){k(b)},s):k(b)}):s&&s.length?o.run(function(){k(m)},s):k(m))},load:function(f,e,h){var g=this;this._load(f,e,h,g.embed,g.link)},loadCSS:function(f,e,h){var g=this;g._load(f,e,h,null,g.linkCSS)},run:function(r,q,p){var o=this,n,m=p||[],l=m.length?function(){var a,f;try{r()}catch(d){f=d}finally{while(a=m.pop()){o.sat(a)}if(f){throw f}}}:r;if(!o.isSat(m)){if(!q.length){l()}else{if(1==q.length){n=l}else{var k=q.length;n=function(){--k||l()}}}var j;while(j=q.pop()){!0===this._d[j]?n():this._d[j]=this._d[j]?function(d,c){return function(){d(),c()}}(this._d[j],n):n}}},_css:/css(?:$|\?)/i,get:function(d,c){$j.ajax({url:d,dataType:d.match(this._css)?"text/css":"text/javascript",complete:function(b){c(b.responseText)}})},_firstScript:document.getElementsByTagName("script")[0],_head:document.getElementsByTagName("head")[0],embed:function(b){$j.globalEval(b)},link:function(i,h){var n=this,m=this._firstScript,l=m.parentNode,k=document.createElement("script"),j;k.src=i,k.onreadystatechange=k.onload=k.onerror=function(){if(!k.readyState||k.readyState=="loaded"||k.readyState=="complete"){clearTimeout(j),k.onload=k.onreadystatechange=$j.noop,l.removeChild(k),h&&h()}},j=setTimeout(k.onerror,5000),l.insertBefore(k,m)},linkCSS:function(f,e){var h=this,g;document.createStyleSheet?g=document.createStyleSheet(f):(g=document.createElement("link"),g.href=f,g.rel="stylesheet",g.type="text/css",this._head.appendChild(g)),e&&e()},_origin:function(e){var d=location.origin||location.protocol+"//"+location.host,f=this._fullURL(e);return f.slice(0,d.length)===d},_fullURL:function(d){var c=document.createElement("div");return c.innerHTML='<a href="'+d+'">x</a>',c.firstChild.href},sat:function(b){this._d[b]&&!0!==this._d[b]&&this._d[b](),this._d[b]=!0},isSat:function(e){var d=0;for(var f=0;f<e.length;f++){!0===this._d[e[f]]&&d++}return d>0&&d===e.length}};var kjs=new KJS;