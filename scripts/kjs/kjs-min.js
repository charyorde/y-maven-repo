function KJS(a){this._path=(a&&a.path)||"";this._d={}}KJS.prototype={require:function(){var a=Array.prototype.slice.call(arguments),c;if(typeof a[a.length-1]=="function"){c=a.pop()}for(var b=0;b<a.length;b++){this.sat(a[b]+"--required")}if(c){this.run(c,a)}},_load:function(c,b,f,e,h){var d=this,j=(f||[]).concat(c.split("?")[0]),a=this._path+c,g=this._origin(a)&&e,i=g?function(k){var m,n;try{e.call(d,k)}catch(l){n=l}finally{while(m=j.shift()){d.sat(m)}if(n){throw n}}}:function(k){h.call(d,k,function(){var l;while(l=j.shift()){d.sat(l)}})};if(!this.isSat(j)){if(g){this.get(a,function(k){b&&b.length?d.run(function(){i(k)},b):i(k)})}else{b&&b.length?d.run(function(){i(a)},b):i(a)}}},load:function(a,d,b){var c=this;this._load(a,d,b,c.embed,c.link)},loadCSS:function(a,d,b){var c=this;c._load(a,d,b,null,c.linkCSS)},run:function(j,a,g){var d=this,f,k=g||[],b=k.length?function(){var l,m;if(!d.isSat(k)){try{j()}catch(c){m=c}finally{while(l=k.pop()){d.sat(l)}if(m){throw m}}}}:j;if(!a.length){b()}else{if(1==a.length){f=b}else{var h=a.length;f=function(){if(!--h){b()}}}}var e;while(e=a.pop()){if(true===this._d[e]){f()}else{this._d[e]=this._d[e]?function(c,i){return function(){c();i()}}(this._d[e],f):f}}},_css:/css(?:$|\?)/i,get:function(a,b){$j.ajax({url:a,dataType:a.match(this._css)?"text/css":"text/javascript",complete:function(c){b(c.responseText)}})},_firstScript:document.getElementsByTagName("script")[0],_head:document.getElementsByTagName("head")[0],embed:function(a){$j.globalEval(a)},link:function(h,b){var g=this,d=this._firstScript,e=d.parentNode,a=document.createElement("script"),c;a.src=h;a.onreadystatechange=a.onload=a.onerror=function(){if(!a.readyState||a.readyState=="loaded"||a.readyState=="complete"){clearTimeout(c);a.onload=a.onreadystatechange=$j.noop;e.removeChild(a);b&&b()}};c=setTimeout(a.onerror,5000);e.insertBefore(a,d)},linkCSS:function(d,b){var c=this,a;if(document.createStyleSheet){a=document.createStyleSheet(d)}else{a=document.createElement("link");a.href=d;a.rel="stylesheet";a.type="text/css";this._head.appendChild(a)}b&&b()},_origin:function(b){var a=location.origin||location.protocol+"//"+location.host,c=this._fullURL(b);return c.slice(0,a.length)===a},_fullURL:function(a){var b=document.createElement("div");b.innerHTML='<a href="'+a+'">x</a>';return b.firstChild.href},sat:function(a){if(this._d[a]&&true!==this._d[a]){this._d[a]()}this._d[a]=true},isSat:function(b){var d=0;for(var a=0;a<b.length;a++){if(true===this._d[b[a]]){d++}}return d>0&&d===b.length}};var kjs=new KJS();