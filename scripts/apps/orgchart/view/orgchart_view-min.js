jive.namespace("OrgChart");jive.OrgChart.OrgChartView=jive.AbstractView.extend(function(a){var b=jQuery;this.init=function(){var c=this;this.linkDirectReportCounts();c.addModal=new jive.Modalizer.Main({liveTriggers:["a.js-add-org-relationship"],onClose:function(){c.emit("create")}});b("#j-browse-item-grid").delegate(".js-del-org-relationship","click",function(f){var d=$j(this).data("relationship-id");c.emit("retire",d);f.preventDefault()})};this.linkDirectReportCounts=function(){var c=this,d=b("#jive-orgchart-directreport-hover");b("span.jive-orgchart-drpt-count").find("a").hover(function(){var f=b(this);var e=f.parent().parent().find("a[data-userid]").attr("data-userid");if(e){c.emitP("showDirectReports",e).addCallback(function(g){if(g){d.html(jive.people.directReportHover(g));d.popover({context:f})}})}},function(){d.hide()})};this.update=function(e){jive.localexchange.emit("view.update.start");var c=this,d=b("#j-browse-item-grid");b("#j-browse-filters").parent().hide();b(".j-loading-bg").fadeIn(200);e.addCallback(function(g){if(g){var f=jive.people.orgChartBody(b.extend({},g,{itemViewID:c.itemViewID}));d.html(f);c.linkDirectReportCounts()}}).always(function(){b(".j-loading-bg").fadeOut(200);jive.localexchange.emit("view.update.stop")})}});