jive.namespace("BookmarkApp");jive.BookmarkApp.ListView=jive.AbstractView.extend(function(a){var c=jQuery,b=jive.BookmarkApp;a.init=function(){var d=this;c(document).delegate(".bookmark-content","click",function(h){var f=c(this).data("objecttype");var i=c(this).data("objectid");var g={markedObjectType:f,markedObjectId:i};d.showSpinner(c(this));d.emit("bookmark",g);h.preventDefault()});c(document).delegate(".unbookmark-content","click",function(j){var g=c(this).data("bookmarkid");var h=c(this).data("objecttype");var k=c(this).data("objectid");var i={id:g,markedObjectType:h,markedObjectId:k};var f=c(".bookmarked-content").filter(function(){return c(this).data("objecttype")==h&&c(this).data("objectid")==k});d.showSpinner(f);d.emit("unbookmark",i);c(this).trigger("close");j.preventDefault()});c(document).delegate(".edit-bookmark","click",function(h){var f=c(this).data("objecttype");var i=c(this).data("objectid");var g={markedObjectType:f,markedObjectId:i};d.emit("edit",g);c(this).trigger("close");h.preventDefault()});c(document).delegate(".bookmarked-content","click",function(h){var g=c(this).closest("ul").find(".js-bookmark-actions");var f=c(this).toggleClass("active");g.popover({context:c(this),darkPopover:true,destroyOnClose:false,putBack:true,onClose:function(){f.removeClass("active")}});h.preventDefault()})};this.updateBookmarkLinks=function(d){return this.updateLinks(d,false)};this.updateUnbookmarkLinks=function(d){return this.updateLinks(d,true)};a.updateLinks=function(g,d){var f=d?"a.bookmarked-content":"a.bookmark-content",e=this;c(f).filter(function(){return c(this).data("objecttype")==g.markedObjectType&&c(this).data("objectid")==g.markedObjectId}).each(function(){var j=c(this).closest(".js-bookmark"),i=j.find(".bookmark-content"),h=j.find(".bookmarked-content"),k=j.find(".unbookmark-content");if(d){h.hide();i.show()}else{i.hide();h.show()}k.data("bookmarkid",d?"-1":g.id);e.hideSpinner(c(this))})};a.createSpinner=function(d){d.addClass("font-color-meta-light")};a.destroySpinner=function(d){d.removeClass("font-color-meta-light")}});