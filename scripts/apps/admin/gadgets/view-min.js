jive.namespace("GadgetSettings");jive.GadgetSettings.GadgetBrowserView=$Class.extend({init:function(a){this.template=a.template;this.gadgetTemplate=a.gadgetTemplate;this.$browser=a.browser;this.$msgContainer=a.browser.parent();this.gadgets={};this.msgTemplates={removing:a.removingTemplate}},refresh:function(c){var b=this.$browser;var d=this.gadgetTemplate;var e=this;var a=function(f,g){var i=$j(d(g));i.find("a.evt-click-remove").click(function(){e.emit("removing",g);return false});var h=function(j,k){i.find("#j-gadget-type-"+g.id+"-"+k.id).click(function(){e.emit("type-changed",g,k,$j(this).is(":checked"))})};$j.each(g.types,h);i.find("#j-gadget-category-"+g.id+" a").click(function(){e.emit("change-category",g);return false});i.find("#j-gadget-categories-"+g.id).change(function(){var l;var k=$j(this).find(":selected").val();if(k<0){return}for(var j=0;j<g.categories.length;j++){l=g.categories[j];if(l.id!=k){l=null}else{break}}e.emit("category-changed",g,l)});i.find("a#j-gadget-categories-"+g.id+"-cancel").click(function(){e.emit("change-category-cancel",g);return false});e.gadgets[g.id]=i.appendTo(b)};$j.each(c,a)},remove:function(b){var a=this.gadgets[b.id];a.slideUp("slow",function(){$j(this).remove()});gadgetInstalledCount=gadgetInstalledCount-1;$j("#j-gadget-installed-count").text("Installed Gadgets ("+gadgetInstalledCount+")")},showMsg:function(b){var a=$j(this.msgTemplates[b]());a.hide();a.prependTo(this.$msgContainer).slideDown("slow")},hideMsg:function(){this.$msgContainer.find(".gadget-message").slideUp("slow",function(){$j(this).remove()})},showCategorySelector:function(a){$j("#j-gadget-category-"+a.id).hide();$j("#j-gadget-categories-"+a.id).show()},hideCategorySelector:function(b,a){if(a){$j("#j-gadget-category-"+b.id+"-text").text(a.name)}$j("#j-gadget-categories-"+b.id).hide();$j("#j-gadget-category-"+b.id).show()}});jive.conc.observable(jive.GadgetSettings.GadgetBrowserView.prototype);