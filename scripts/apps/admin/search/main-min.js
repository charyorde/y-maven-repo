jive.namespace("SearchAdmin");jive.SearchAdmin.Main=jive.oo.Class.extend(function(a){var b=jive.SearchAdmin;this.init=function(d){var c=this;var e=d.selectedTab||"settings";a.multiLangEnabled=d.multiLanguageEnabled||false;this.tabView=new b.TabView(d);this.tabsSource=new b.TabsSource(d);this.tabView.addListener("tab-clicked",function(f){if(c.tabView.getCurrentTab()!=f){c.loadTab(f)}}).addListener("stopwords-save",function(g,f){c.tabsSource.saveStopWords(g,f).addCallback(function(){c.tabView.showSaveSuccessMessage()})}).addListener("synonyms-save",function(g,f,h){c.tabsSource.saveSynonyms(g,f).addCallback(function(){h.emitSuccess()})}).addListener("synonyms-delete",function(g,f,h){c.tabsSource.deleteSynonyms(g,f).addCallback(function(){h.emitSuccess()})}).addListener("content-index-status",function(g,f){c.tabsSource.getContentIndexStatus(g).addCallback(function(h){f.emitSuccess(h)})}).addListener("update-content-index",function(g,f){c.tabsSource.updateContentIndex(g).addCallback(function(h){f.emitSuccess(h)})});if(this.multiLangEnabled){this.tabView.addListener("stop-lang-change",function(f){c.tabsSource.getStopWords(f).addCallback(function(g){c.tabView.loadStopWordsTab(g)})}).addListener("synonyms-lang-change",function(f){c.tabsSource.getSynonyms(f).addCallback(function(g){c.tabView.loadSynonymsTab(g)})})}$j(document).ready(function(){c.loadTab(e)})};a.loadTab=function(d){var c=this;if(d=="tasks"){c.handleTasksTab()}else{if(d=="stop"){c.handleStopWordsTab()}else{if(d=="synonyms"){c.handleSynonymsTab()}else{c.tabView.showTab(d)}}}};a.handleTasksTab=function(){var c=this;c.tabsSource.getIndexTaskStatus().addCallback(function(d){c.tabView.loadTasksTab(d);c.tabView.showTab("tasks");if(d.status!="UPDATE"){setTimeout(function(){if(c.tabView.getCurrentTab()=="tasks"){c.handleTasksTab()}},5000)}})};a.handleSynonymsTab=function(){var c=this;if(!c.tabView.isSynonymsLoaded()){var d=c.tabView.getSynonymsLanguage();c.tabsSource.getSynonyms(d).addCallback(function(e){c.tabView.loadSynonymsTab(e);c.tabView.showTab("synonyms")})}else{c.tabView.showTab("synonyms")}};a.handleStopWordsTab=function(){var c=this;if(!c.tabView.isStopWordsLoaded()){var d=c.tabView.getStopWordsLanguage();c.tabsSource.getStopWords(d).addCallback(function(e){c.tabView.loadStopWordsTab(e);c.tabView.showTab("stop")})}else{c.tabView.showTab("stop")}}});