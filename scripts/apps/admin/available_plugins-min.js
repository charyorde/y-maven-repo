jive.namespace("admin");jive.admin.AvailablePlugins=function(){function g(){window.location.href="available-plugins.jspa"}function f(k,m,n){var j=$j("#"+n),i=$j("#"+n+"-percent"),h=$j("#"+n+"-working"),l=$j("#"+n+"-error");i.hide();h.hide();j.css("background","#f99");l.css("background","#f99");j.removeClass("line-bottom-border");l.parent().show();l.click(function(o){AvailablePlugins.removeInstallTask(m,{callback:function(){l.fadeOut();j.fadeOut(g)},errorHandler:function(p,q){alert(p)}})})}function d(h,i,j){if(h&&!h.finished){$j("#"+j+"-image").hide();$j("#"+j+"-percent").text(h.percentComplete+"%").show();$j("#"+j).css("background","#FFFFCC");$j("#"+j+"-working").show();window.setTimeout(function(){AvailablePlugins.getInstallTask(i,{callback:function(k){d(k,i,j)},errorHandler:function(k){f(k,i,j)}})},500)}else{if(h&&h.finished&&h.success){$j("#"+j).hide();$j("#"+j+"-row").show();window.setTimeout(function(){$j("#"+j+"-row").fadeOut(g)},3000)}else{if(h&&h.finished){f(h.failures[0].message)}}}}function e(h,i){AvailablePlugins.getInstallTask(h,{callback:function(j){d(j,h,i)},errorHandler:function(j){f(j,h,i)}})}function c(h,j,i){AvailablePlugins.installPlugin(i,h,{callback:function(k){d(k,i,j)},errorHandler:function(k){f(k,i,j)}})}function a(){$j("#reloaderID").html('<img src="images/working-16x16.gif" border="0"/>');AvailablePlugins.updatePluginsList(g);return false}function b(){$j("#reloader2").html('<img src="images/working-16x16.gif" border="0"/>');AvailablePlugins.updatePluginsList(g);return false}this.getStatus=e;this.downloadPlugin=c;this.updatePluginsList=a;this.updatePluginsListNow=b};