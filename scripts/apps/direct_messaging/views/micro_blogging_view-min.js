jive.namespace("DirectMessaging");jive.DirectMessaging.MicroBloggingView=jive.MicroBlogging.CommonView.extend(function(a,b){this.init=function(c){b.init.call(this,$j.extend({},c||{},{doNotAnimate:true}))};this.getMessage=function(){return this.statusInput.getSubmitVals(false)||""};this.createFormElem=function(){this.$formElem=this.getContent().closest("form:eq(0)");this.$imageFormElem=this._getMetaImageContainer().find("form");this.getContent().closest("form").keydown(function(d){var c=9;if(d.keyCode==c&&d.target==$j(".jive-chooser-browse").get(0)){$j("#message-direct-message-text").focus();if(d.preventDefault){d.preventDefault()}}})};this.createWaitingViewElem=function(){this.$waitingViewElem=this.getContent()};this._getAttachmentsViewOptions=function(){return{selector:"#jive-modal-direct-messaging .jive-js-attachment-container"}};this._getMetaImageContainer=function(){return this.getContent().closest("form").next().find("div.j-meta-image-container")};this.handleSubmitClick=function(c){};this.handleAtMentionResult=function(i,e){var g=this;if(i&&i.split("-").length==2){var d=i.split("-")[0],h=i.split("-")[1];var c=new jive.rte.EntitlementService({objectID:0,objectType:0,entitlement:"VIEW"});var f=$j("#jive-modal-direct-messaging div.j-result-list li").map(function(){return $j(this).data("user-id")+""}).get();if(c&&d){c.checkEntitlement(d,h,f).addCallback(function(j){if(!j){var k="";if(d==3){k=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.no_notification"})}else{if(d==700){k=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.secret_group"})}else{k=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.restricted_content"})}}$j("<p>"+e+" "+k+"</p>").message({style:"warn"})}})}}}});