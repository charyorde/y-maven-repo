jive.namespace("UserRegistration");jive.UserRegistration.PasswordStrengthView=jive.AbstractView.extend(function(a){var b=jQuery;this.initView=function(){var c=this;var d=$j("#jive-user-registration-form");c.initPattern(d);c.initTips(d)};a.initPattern=function(e){var d=this;var c=e.find("input[name='password']");d.patPassMinLen=c.data("minlengthpattern")||".{6,}";d.patPassMin=new RegExp(d.patPassMinLen);d.patPassBetter=new RegExp(".{8,}");d.patPassLC=new RegExp("[a-z]");d.patPassUC=new RegExp("[A-Z]");d.patPassNum=new RegExp("[0-9]");d.patPassPunc=new RegExp("[-_\\W]")};a.initTips=function(d){var c=this;var e=$j("#jive-pw-strength");d.find("input").blur(function(){var f=$j(this);if(f.attr("type")=="password"){c.hideEle(e,true)}}).focus(function(){var f=$j(this);f.select();if(f.attr("type")=="password"){c.showEle(e,true)}});d.find("input[type='password']").keyup(function(){c.getPasswordStrength($j(this).val())})};a.getPasswordStrength=function(d){var c=this;c.emitP("passwordstrength",d).addCallback(function(e){c.updatePasswordStrengthMessage(e,d)})};a.updatePasswordStrengthMessage=function(g,f){var c=this;var e=jive.user.registration.passwordStrengthMessageUnknown();var d="jive-pw-null";if("HIGH"==g){e=jive.user.registration.passwordStrengthMessageHigh();d="jive-pw-strong"}if("MEDIUMHIGH"==g){e=jive.user.registration.passwordStrengthMessageMediumHigh();d="jive-pw-good"}else{if("MEDIUM"==g){e=jive.user.registration.passwordStrengthMessageMedium();d="jive-pw-fair"}else{if("LOW"==g){e=jive.user.registration.passwordStrengthMessageLow();d="jive-pw-weak"}}}$j("#jivePwStrength").text(e);$j("#jive-pw-strength").attr("class",d);$j("#jive-pw-strength").addClass("jive-pw-show-tips");c.checkPwCharTypes(f)};a.checkPwCharTypes=function(e){var d=this;var c=$j("#jive-pw-tips li .jive-icon-sml");c.attr({"class":"jive-icon-sml jive-icon-forbidden"});if(d.patPassMin.test(e)){$j("#pw-tip-min-length .jive-icon-sml").addClass("jive-icon-check").removeClass("jive-icon-forbidden")}if(d.patPassBetter.test(e)){$j("#pw-tip-recommend-length .jive-icon-sml").addClass("jive-icon-check").removeClass("jive-icon-forbidden")}if(d.patPassLC.test(e)){$j("#pw-tip-lowercase .jive-icon-sml").addClass("jive-icon-check").removeClass("jive-icon-forbidden")}if(d.patPassUC.test(e)){$j("#pw-tip-uppercase .jive-icon-sml").addClass("jive-icon-check").removeClass("jive-icon-forbidden")}if(d.patPassNum.test(e)){$j("#pw-tip-numeral .jive-icon-sml").addClass("jive-icon-check").removeClass("jive-icon-forbidden")}if(d.patPassPunc.test(e)){$j("#pw-tip-punctuate .jive-icon-sml").addClass("jive-icon-check").removeClass("jive-icon-forbidden")}};a.showEle=function(d,c){if(c){d.animate({opacity:1},300)}else{d.css({opacity:1})}d.addClass("jive-pw-show-tips").removeClass("jive-pw-hide-tips")};a.hideEle=function(e,d){var c=this;if(d){e.animate({opacity:0},300)}else{e.css({opacity:0})}e.addClass("jive-pw-hide-tips").removeClass("jive-pw-show-tips")}});