jive.namespace("Onboarding");jive.Onboarding.Source=jive.RestService.extend(function(a,b){a.resourceType="container";a.init=function(c){c=c||{};b.init.call(this,c);this.RESOURCE_ENDPOINT=jive.rest.url("/onboarding");this.placeSource=new jive.Browse.Container.ItemSource()};this.initializeView=function(d){var c=this.RESOURCE_ENDPOINT;if(!d){d=new jive.conc.Promise()}return this.commonAjaxRequest(d,"GET",{url:c})};this.getStepData=function(c,e,f){var d=this.RESOURCE_ENDPOINT+"/"+c+"/"+e;return this.commonAjaxRequest(f,"GET",{url:d})};this.markStepComplete=function(c,e){var d=this.RESOURCE_ENDPOINT+"/"+c+"/"+e+"/complete",f=new jive.conc.Promise();f.addCallback(function(g){jive.switchboard.emit("onboarding.state.update",g)});return this.commonAjaxRequest(f,"POST",{url:d})};this.setOnboardingVisible=function(e,d){var c=this.RESOURCE_ENDPOINT+"/"+e.toString();return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c})};this.newUserExploreOnOwn=function(){var c=this.RESOURCE_ENDPOINT+"/exploreOnOwn";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c})};this.updateUserProfile=function(f,e,m){var c=this,g=false,h=$j.trim(f),k=$j.trim(e),j="";if(f){f=f.replace(/[\'\"\?\@\*\n\.,-\/\\#!$%\^&\;:\+{}\[\]\|=\-_`~()<>]/g," ");f=$j.trim(f);f=f.replace(/\s{2,}/g," ");if(f){f=f+"*"}}if(e){e=e.replace(/[\'\"\?\@\*\n\.,-\/\\#!$%\^&\;:\+{}\[\]\|=\-_`~()<>]/g," ");e=$j.trim(e);e=e.replace(/\s{2,}/g," ");if(e){e=e+"*"}}if(f&&e){j=f+" "+e}else{if(f){j=f}else{j=e}}if(j){var l=j.split(" ");j=l.join(" OR ");var i={type:["group","space"],limit:20};i.q=j;var d=jive.app.url({path:"/api/core/v2"});d+="/search/places";d=$j.param.querystring(d,i);c.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:d}).addCallback(function(p){var o=[];if(p&&p.data&&p.data.length){g=true;o=$j.map(p.data,function(q){return{readableType:q.type,id:q.id}})}var n=c.RESOURCE_ENDPOINT+"/profile";c.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:n,data:JSON.stringify({profileData:{interests:h,bio:k},entities:o})}).addCallback(function(q){var r={suggestedPlaces:q,suggestedPlacesExist:g};m.emitSuccess(r)})})}else{d=c.RESOURCE_ENDPOINT+"/profile";c.commonAjaxRequest(m,"POST",{url:d,data:JSON.stringify({profileData:{interests:h,bio:k},entities:[]})})}}});define("jive.onboarding.Source",function(){return jive.Onboarding.Source});