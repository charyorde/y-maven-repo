jive.namespace("FollowApp");jive.FollowApp.Main=jive.oo.Class.extend(function(a){this.init=function(c){var b=this;this.objectID=c.objectID;this.objectType=c.objectType;this.i18n=c.i18n;this.featureName=c.featureName;this.followSource=new jive.FollowApp.FollowSource(c);this.streamsSource=new jive.ActivityStream.BuilderServices(c);this.followView=new jive.FollowApp.FollowView(this.featureName,c);this.followView.addListener("manageAssociations",function(d,j,e,h){var g=b.objectType;if(!g){g=d}var f=b.objectID;if(!f){f=j}var i={objectType:g,id:f,itemStreamCounts:e};b.streamsSource.manageAssociations([i]).addCallback(function(k){h.emitSuccess(k)}).addErrback(function(l,k){h.emitError(l,k)})}).addListener("setItemAssociation",function(e,f,j,g,k,m){var h=b.objectType;if(!h){h=e}var d=b.objectID;if(!d){d=f}var i={type:h,id:d},l={};l[e+""]={};l[e+""][f+""]=k;b.streamsSource.setItemAssociations([i],j,g,l).addCallback(function(){m.emitSuccess()}).addErrback(function(o,n){m.emitError(o,n)})}).addListener("removeAllAssociations",function(d,h,g){var f=b.objectType;if(!f){f=d}var e=b.objectID;if(!e){e=h}b.streamsSource.removeAllAssociations(f,e).addCallback(function(){g.emitSuccess()}).addErrback(function(j,i){g.emitError(j,i)})})};this.tearDown=function(){this.followView.removeListener("manageAssociations").removeListener("setItemAssociation").removeListener("removeAllAssociations").tearDown()}});define("jive.followApp.Main",function(){return jive.FollowApp.Main});