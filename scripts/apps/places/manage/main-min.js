jive.namespace("places.Manage");jive.places.Manage.Main=jive.oo.Class.extend(function(a){var c=jQuery,b=jive.places.Manage;a.init=function(e,f){var d=this;this.objectType=e.objectType;this.objectID=e.id;this.membershipSupported=e.membershipSupported;this.canArchive=e.canArchive;this.placeI18nKeyPrefix=e.placeI18nKeyPrefix;this.objectURL=e.objectURL;this.parentID=e.parentID;this.parentType=e.parentType;this.canCreateByEmail=e.canCreateByEmail;this.canManageAnnouncements=f.canManageAnnouncements;this.canManageCategories=f.canManageCategories;this.canMoveContainer=f.canMoveContainer;this.canManageContainer=f.canManageContainer;this.i18n=f.i18n;if(this.canCreateByEmail){var g=this;window.launchAuthorByEmailModal=function(){var h=new b.AuthorByEmailControls();h.addListener("load",d.modalLoader("/author-by-email.jspa",{view:"place",containerType:g.objectType,container:g.objectID}))}}if(this.canManageCategories){this.categoryControls=new b.CategoryControls();this.categoryControls.addListener("load",this.modalLoader("/manage-category.jspa"))}if(this.canArchive){this.archiveControls=new b.ArchiveControls();this.archiveControls.addListener("load",this.modalLoader("/archive-project.jspa"))}if(this.canMoveContainer){this.jiveMoveContent=new jive.Move.Content.Main({objectType:this.objectType,objectID:this.objectID,objectUrl:this.objectURL,isContainer:true,containerID:this.parentID,containerType:this.parentType,searchPlaceholderKey:"place.picker.move.search.project"})}if(this.canManageContainer){this.deleteControls=new jive.Modalizer.Main({liveTriggers:["#jive-place-link-manage-delete"],width:"narrow"})}this.jiveFollow=new jive.FollowApp.Main({objectType:containerType,objectID:containerID,featureName:e.placeI18nKeyPrefix,i18n:this.i18n});if(this.membershipSupported){this.jiveMembership=new jive.MembershipApp.Main({objectID:containerID})}this.customControls=new b.CustomControls();this.customControls.addListener("load",this.modalLoader(""));c(document).ready(function(){d.menuView=new jive.MenuView(function(){return c("#j-place-manage-container")},"#jive-place-link-manage",{darkPopover:true,destroyOnClose:false});c("#j-place-manage-container").click(function(h){d.menuView.close()});new jive.EmailNotification.Main(e.id,e.objectType)})};a.modalLoader=function(e,f){var d=this;return function(j,g,i){var h=c.extend({containerType:d.objectType,container:d.objectID},f);if(typeof i=="undefined"){i=j;j=null}if(j){h.editID=j}if(!e&&g){e=g}c.get(jive.app.url({path:e}),h,function(k){i.emitSuccess(k)})}}});