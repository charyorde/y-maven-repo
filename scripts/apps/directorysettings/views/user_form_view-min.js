jive.namespace("DirectorySettings");jive.DirectorySettings.UserFormView=jive.DirectorySettings.AbstractDirectorySettingsFormView.extend(function(a){a.init=function(c){var b=this;b.options=c||{};b.form=c.form||{};b.$form=$j("#jive-directory-user-settings-form");b.attachToolTipHandlers(b.$form);b.attachTestHandler(b.$form);b.attachSaveHandler(b.$form)};a.submitForm=function(c){var b=this;if(!c.is(":disabled")){b.showSpinner();b.gatherFormValues();b.disableSaveButton();b.disableTestButton();b.hideErrors();b.emitP("saveUserSettings",b.form).addCallback(function(d){b.hideResult();if(d.valid){if(b.form.test){if(d.results&&d.results.length>0){b.showModal(d);b.enableSaveButton()}else{b.showNoResultsMessage()}}else{b.showResult(true);b.showSyncSettingsTab()}}else{b.showResult(false,d)}}).addErrback(function(d){b.displayErrors(d);b.displayProfileErrors(d);b.hideResult()}).always(function(){b.hideSpinner();b.enableTestButton()})}};a.displayProfileErrors=function(b){var c=this;$j.each(b.profileFields,function(d,e){if(e.errors&&e.errors.length){c.showErrors("profile-"+e.id,e)}})};a.showNoResultsMessage=function(b){$j("#js-result-message-holder").html(jive.admin.directory.settings.noResultsMessage({}))};a.showResult=function(d,c){var b=this;if(d){$j("#js-result-message-holder").html(jive.admin.directory.settings.successMessage({test:false,status:c}))}else{$j("#js-result-message-holder").html(jive.admin.directory.settings.userFailureMessage(c))}};a.showModal=function(b){$j(jive.admin.directory.settings.userTestModal(b)).lightbox_me({})};a.showSyncSettingsTab=function(){$j("#j-group-settings-tab").show();$j("#j-sync-settings-tab").show()}});