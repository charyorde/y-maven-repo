jive.namespace("DirectorySettings");jive.DirectorySettings.AbstractDirectorySettingsFormView=jive.AbstractView.extend(function(a){a.attachTestHandler=function(c){var b=this;c.find("input[name='test']").click(function(d){b.form.test=true;b.submitForm($j(this));d.preventDefault()})};a.attachSaveHandler=function(c){var b=this;c.find("input[name='save']").click(function(d){b.form.test=false;b.submitForm($j(this));d.preventDefault()})};a.attachToolTipHandlers=function(c){var b=this;c.find(".jive-setup-helpicon").hover(function(d){domTT_activate(this,d,"content",$j(this).data("tooltip-text"),"styleClass","jiveTooltip","trail",true,"delay",300,"lifetime",8000)})};a.gatherFormValues=function(){var b=this;b.$form.find(".js-field").each(function(c,e){var d=$j(e);var g=b.findFormField(d);if(g!=null){if(g.type=="address"){g.val=b.getAddressValue(g)}else{g.val=b.getValFromField(d)}}else{console.log("Couldn't find form field for "+d.attr("name"))}})};a.findFormField=function(d){var c=this;var b=d.attr("id");if(d.hasClass("js-profile-composite-field")){b=d.data("field-id")}if(d.hasClass("js-profile-field")&&c.form.profileFields){return c.form.profileFields[b]}else{return c.form[b]}};a.getAddressValue=function(b){return{street1:$j.trim($j("input[name='profile-"+b.id+".street1']").val()),street2:$j.trim($j("input[name='profile-"+b.id+".street2']").val()),city:$j.trim($j("input[name='profile-"+b.id+".city']").val()),stateOrProvince:$j.trim($j("input[name='profile-"+b.id+".stateOrProvince']").val()),postalCode:$j.trim($j("input[name='profile-"+b.id+".postalCode']").val()),country:$j.trim($j("input[name='profile-"+b.id+".country']").val()),type:b.val.type||""}};a.getValFromField=function(c){var b=this;try{if(b.isCheckbox(c)){return b.getCheckboxValue(c)}else{return $j.trim(c.val())}}catch(d){console.log(d)}return null};a.isCheckbox=function(b){return b.attr("type")=="checkbox"};a.getCheckboxValue=function(b){return b.is(":checked")};a.displayErrors=function(b){var c=this;c.hideErrors();c.form=b;for(var d in c.form){var e=c.form[d];if(e.errors&&e.errors.length){c.showErrors(d,e)}}};a.showErrors=function(b,c){if(c.errors.length>0){$j.each(c.errors,function(d,e){if(e.attributeKey){b+="."+e.attributeKey}var f=$j(".j-form-field-errors[data-field-name='"+b+"']");f.html(jive.admin.directory.settings.errors({errors:c.errors}));f.show()});c.errors=[]}};a.hideErrors=function(){$j(".j-form-field-errors").hide()};a.hideResult=function(){$j("#js-result-message-holder").html("")};a.hideStatus=function(){$j("#js-server-status-holder").html("")};a.enableTestButton=function(){this.$form.find("input[name='test']").removeAttr("disabled")};a.disableTestButton=function(){this.$form.find("input[name='test']").attr("disabled","disabled")};a.enableSaveButton=function(){this.$form.find("input[name='save']").removeAttr("disabled")};a.disableSaveButton=function(){this.$form.find("input[name='save']").attr("disabled","disabled")}});