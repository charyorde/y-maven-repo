jive.namespace("DirectorySettings");jive.DirectorySettings.GroupFormView=jive.DirectorySettings.AbstractDirectorySettingsFormView.extend(function(a){a.init=function(c){var b=this;b.options=c||{};b.form=c.form||{};b.$form=$j("#jive-directory-group-settings-form");b.attachToolTipHandlers(b.$form);b.attachTestHandler(b.$form);b.attachSaveHandler(b.$form);b.attachChoiceHandler(b.$form)};a.submitForm=function(c){var b=this;if(!c.is(":disabled")){b.showSpinner();b.gatherFormValues();b.disableSaveButton();b.disableTestButton();b.hideErrors();b.emitP("saveGroupSettings",b.form).addCallback(function(d){b.hideResult();if(d.valid){if(b.form.test){if(d.results&&d.results.length>0){b.showModal(d);b.enableSaveButton()}else{b.showNoResultsMessage()}}else{b.showResult(true)}}else{b.showResult(false,d)}}).addErrback(function(d){b.displayErrors(d);b.hideStatus();b.hideResult()}).always(function(){b.hideSpinner();b.enableTestButton()})}};a.attachChoiceHandler=function(c){var b=this;c.find("input[name='useLDAPGroups']").click(function(){b.form.useLDAPGroups.val=$j(this).val();if(b.form.useLDAPGroups.val=="true"){c.find(".js-field").removeAttr("disabled");b.enableTestButton();b.disableSaveButton()}else{c.find(".js-field").attr("disabled","disabled");b.disableTestButton();b.enableSaveButton()}})};a.showNoResultsMessage=function(b){$j("#js-result-message-holder").html(jive.admin.directory.settings.noResultsMessage({}))};a.showResult=function(d,c){var b=this;if(d){$j("#js-result-message-holder").html(jive.admin.directory.settings.successMessage({test:false,status:c}))}else{$j("#js-result-message-holder").html(jive.admin.directory.settings.userFailureMessage(c))}};a.showModal=function(b){$j(jive.admin.directory.settings.groupTestModal(b)).lightbox_me({})}});