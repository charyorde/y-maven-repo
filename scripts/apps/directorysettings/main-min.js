jive.namespace("DirectorySettings");jive.DirectorySettings.Main=jive.oo.Class.extend(function(a){this.init=function(c){var b=this;b.options=c||{};this.directorySettingsSource=c.source||new jive.DirectorySettings.Source(c);this.directorySettingsSource.suppressGenericErrorMessages();this.directoryServerSettingsView=new jive.DirectorySettings.ServerFormView(c);this.directoryServerSettingsView.addListener("getServerSettings",function(e,d){b.directorySettingsSource.getServerConfig(e).addCallback(function(f){d.emitSuccess(f)})});this.directoryServerSettingsView.addListener("saveServerSettings",function(d,e){b.directorySettingsSource.saveServerConfig(d).addCallback(function(f){e.emitSuccess(f)}).addErrback(function(h,f,g){if(f!=400){b.directorySettingsSource.showGenericSaveError()}e.emitError(g)})});this.directoryServerSettingsView.addListener("resetConfigs",function(d){b.directorySettingsSource.resetConfigs().addCallback(function(){d.emitSuccess()}).addErrback(function(g,e,f){b.directorySettingsSource.showGenericSaveError()})});this.directoryUserSettingsView=new jive.DirectorySettings.UserFormView(c);this.directoryUserSettingsView.addListener("getUserSettings",function(e,d){b.directorySettingsSource.getUserConfig(e).addCallback(function(f){d.emitSuccess(f)})});this.directoryUserSettingsView.addListener("saveUserSettings",function(d,e){b.directorySettingsSource.saveUserConfig(d).addCallback(function(f){e.emitSuccess(f)}).addErrback(function(h,f,g){if(f!=400){b.directorySettingsSource.showGenericSaveError()}e.emitError(g)})});this.directoryGroupSettingsView=new jive.DirectorySettings.GroupFormView(c);this.directoryGroupSettingsView.addListener("getGroupSettings",function(e,d){b.directorySettingsSource.getGroupConfig(e).addCallback(function(f){d.emitSuccess(f)})});this.directoryGroupSettingsView.addListener("saveGroupSettings",function(d,e){b.directorySettingsSource.saveGroupConfig(d).addCallback(function(f){e.emitSuccess(f)}).addErrback(function(h,f,g){if(f!=400){b.directorySettingsSource.showGenericSaveError()}e.emitError(g)})})}});