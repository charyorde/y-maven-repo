define("jive.Feedback.FeedbackPreview",["jive.AbstractView"],function(a){return a.extend(function(b,c){var d=jQuery;b.init=function(f){var e=this;this.content=d(jive.feedback.preview(f));this.content.find("form").submit(function(g){g.preventDefault();e.emit("submit",f)});this.content.find(".close").click(function(g){g.preventDefault();e.content.trigger("close")});this.content.find(".js-toggle").click(function(j){j.preventDefault();var h=d(this),g=h.closest(".js-expandable-parent").find(".js-expandable"),i=g.is(":not(:visible)");g.slideToggle("normal",function(){h.toggleClass("j-open",i);g.toggleClass("j-open",i)})})};this.show=function(){var e=this;this.content.lightbox_me({destroyOnClose:true,onClose:function(){e.emit("close")}});return this};this.remove=this.detach=function(){this.content.trigger("close");this.hideSpinner();c.remove.call(this)};b.createSpinner=function(){this.loader=this.loader||new jive.loader.LoaderView({showLabel:false,size:"big"});var e=this.content.find(".jive-modal-content");e.children().remove();e.html(jive.feedback.previewLoading());e.find(".js-loading").append(this.loader.getContent().find(".j-running-loader"))};b.destroySpinner=function(){if(this.loader){this.loader.destroy();delete this.loader}};this.success=function(){var e=this.content.find(".jive-modal-content");e.children().remove();e.html(jive.feedback.success())}})});