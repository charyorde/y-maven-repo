jive.namespace("RecommendationApp").RecommendedForYouController=function(d,j){var k=jive.conc.observable({}),e=new jive.RecommendationApp.Controller(j),i=0,c,g=e.getBody;function h(m,o){m(o.id,o.objectType);var n=g("[data-recommendation-id="+o.id+"]");i--;f(n);k.emit("invalidateCache")}function b(m){e.getBody().html(jive.eae.recommendation.recommendedForYou({recommendations:m}));i=g("li.j-js-recommendation").length}function f(n){var m=$j(jive.eae.recommendation.notInterestedNotification({}));n.fadeOut("fast",function(){n.html(m);n.fadeIn(400,function(){setTimeout(function(){n.fadeOut(400,function(){n.remove();if(!i){j.fadeOut("fast")}})},2000)})})}function a(m){c=m.$target.attr("data-event","closeWhy").closest(".j-js-recommendation").find(".j-insights").show().popover({context:m.$target,darkPopover:true,putBack:true,destroyOnClose:false,onClose:function(){c=undefined;l(m)}})}function l(m){m.$target.attr("data-event","why")}k.isPopulated=function(){return i>0};k.notify=function(m,n){if(m==="newRecommendations"){b(n)}return k};e.addListener("dislike",h.partial(d.expressDislike.bind(d))).addListener("why",a).addListener("closeWhy",l);return k};