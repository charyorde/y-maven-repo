jive.namespace("PublishBar");jive.PublishBar.PlaceMain=jive.oo.Class.extend(function(a){jive.conc.observable(this);a.init=function(i){var d=this;var b=i.objectType||-1;var j=i.upload||false;var e=i.containerType||-1;var h=i.containerID||-1;var g=new jive.PublishBar.SuggestedContainersSource({containerType:e,containerID:h});var f=new jive.PublishBar.SearchPlacesSource();var c=new jive.PublishBar.PlaceView($j("#js-publishbar-place-input"),$j("#js-publishbar-place-results"));c.addListener("suggest",function(k){g.get(b).addCallback(function(l){k.emitSuccess(l)})});c.addListener("search",function(k,l){f.findAll({query:k,contentType:b}).addCallback(function(m){l.emitSuccess(m)})});c.addListener("browse",function(){var k=new jive.Placepicker.Main({pickerContext:"create",objectType:b,containerType:e,containerID:h,upload:j,closeOnSelect:true,hideUserContainer:true});k.showPicker();k.addListener("container",function(l,m){c.selectPlace(l.targetContainerType,l.targetContainerID)})});c.addListener("selectPlace",function(l,k){d.emit("selectPlace",l,k)})}});