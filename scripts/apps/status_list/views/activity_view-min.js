jive.app("StatusList");jive.StatusList.ActivityView=function(a,p){jive.conc.observable(this);var n=$j(a),h=n.find(".status-list"),o=p.i18n,m=$j('<div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 5; background: white; opacity: .7; display: none;" class="loading-overlay" />'),f=$j('<div class="j-loader-box"><strong class="font-color-meta">'+o.loadingText+"</strong></div>"),l={everyone:"everyone",friends:"friends",colleagues:"colleagues",mentions:"mentions"},d=new jive.TabView(n.find(".jive-widget-tabs"),{tabSelector:"ul li",activeClass:"active",nameFromTab:function(q){var r=q.attr("class");if(!r){return""}else{return r.split(/\s+/).filter(function(s){return typeof l[s]!="undefined"}).first()}}}),i=this;function c(){h.append(m).append(f);m.show()}function g(q){h.html(q);m.fadeOut("fast")}function e(q){n.find(".statusrss").attr("href",q)}function k(q){d.switchTo(q)}function b(q){var r=n.find("label");if(typeof q=="undefined"){r.toggle()}else{if(q){r.show()}else{r.hide()}}}function j(v,t){var u=$j(d.activeTab()).parent().find(".mentions").find("a");var w=u.text();if(t>0&&d.activeTabName()!=l.mentions){if(!u.hasClass("font-color-notify")){u.addClass("font-color-notify");var s=t<26?t:"25+";u.text(w+" ("+s+")")}else{u.text(w.substring(0,w.indexOf("(")-1)+" ("+t+")")}}else{if(t==0&&d.activeTabName()!=l.mentions){if(u.hasClass("font-color-notify")){u.removeClass("font-color-notify");u.text(w.substring(0,w.indexOf("(")-1))}}}if(v<=0){return}var r=n.find(".jive-table-activity").filter(":first").find("tbody:first");if(r.length>0){var q=r.find("tr.j-new-wall-entry-count-row");if(q.length>0){q.find("a").replaceWith($j('<a href="#" class="j-new-wall-entry-count-anchor font-color-notify">'+v+" "+o.newText+" "+(v>1?o.updatesText:o.updateText)+"</a>"))}else{r.prepend('<tr class="j-new-wall-entry-count-row "><td colspan="3"><div class="j-new-wall-entry-count" style="display:none;"><a href="#" class="j-new-wall-entry-count-anchor font-color-notify">'+v+" "+o.newText+" "+(v>1?o.updatesText:o.updateText)+"</a></div></td></tr>");r.find(".j-new-wall-entry-count").slideDown()}r.find("a.j-new-wall-entry-count-anchor").click(function(){k(d.activeTabName());return false})}}n.find(".j-update-filter").change(function(){var q=$j(this).find(":selected");i.emit("filter",q.val())});d.addListener("tabSwitch",function(s,q){b(s!=l.mentions);if(s==l.mentions){var r=q.find("a"),t=r.text().replace(/\s*\(.*\)\s*$/,"");r.removeClass("font-color-notify").text(t)}i.emit("tabSwitch",s)});this.loading=c;this.html=g;this.rssSource=e;this.switchTo=k;this.updateNewEntryCount=j};