jive.namespace("ActivityStream");jive.ActivityStream.StreamSource=jive.RestService.extend(function(A){A.resourceType="activity-stream";A.pluralizedResourceType=A.resourceType;jive.conc.observable(this);this.initializeView=function(C,E,F){var B=this.RESOURCE_ENDPOINT+"/initializeView",D={objectType:3,objectID:window._jive_current_user.ID,streamSource:C,streamID:E||0,filterType:["all"],timestamp:0};A.displayGenericErrorMessages=false;if(!F){F=new jive.conc.Promise()}return this.commonAjaxRequest(F,"POST",{url:B,data:JSON.stringify(D)}).addErrback(function(H,G){if(G==401||G==403||G==4026||G===0){location.reload()}}).always(function(){A.displayGenericErrorMessages=true})};this.list=function(C,D){var B=this.RESOURCE_ENDPOINT+"/list";A.displayGenericErrorMessages=false;if(!D){D=new jive.conc.Promise()}return this.commonAjaxRequest(D,"POST",{url:B,data:JSON.stringify(C)}).addErrback(function(F,E){if(E==401||E==403||E==4026||E===0){location.reload()}}).always(function(){A.displayGenericErrorMessages=true})};this.getMore=function(C){var B=this.RESOURCE_ENDPOINT+"/list/before";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:B,data:JSON.stringify(C)})};this.exclude=function(C,D){var B=this.RESOURCE_ENDPOINT+"/exclusions/object/set";if(C!="item"){B=this.RESOURCE_ENDPOINT+"/exclusions/context/set"}return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:B,data:JSON.stringify(D)},D)};this.saveActiveStreamTab=function(C){var B=this.RESOURCE_ENDPOINT+"/activetab/save";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:B,data:C})};this.saveActiveStreamFilter=function(C,D){var B=this.RESOURCE_ENDPOINT+"/activefilter/save/"+C;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:B,data:D})};this.saveActiveCommunicationsItem=function(B,D){var C=this.RESOURCE_ENDPOINT+"/activeitem/save/"+B+"/"+D;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:C})};this.saveRefreshTime=function(B){var C=this.RESOURCE_ENDPOINT+"/refreshtime/save";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:C,data:B})};this.exclusionRules=function(C){var B=this.RESOURCE_ENDPOINT+"/exclusions/list";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:B,data:JSON.stringify(C)},C)};this.removeExclusions=function(C){var B=this.RESOURCE_ENDPOINT+"/exclusions/remove";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:B,data:JSON.stringify(C)},C)};this.newCount=function(){var B;var C=document.URL;var D=C.match(/\/inbox|\/welcome|\/activity/g);if(D!=null){B=this.RESOURCE_ENDPOINT+"/new/count/all"}else{B=this.RESOURCE_ENDPOINT+"/new/count/inboxandactions"}return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:B})};this.getFullContent=function(B,E){var D=new jive.conc.Promise(),C="";if(B==1150305777){C=this.RESOURCE_ENDPOINT+"/acclaim";this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:C}).addCallback(function(G){var F=jive.eae.latestAcclaim.extraContent({data:G,currentUserID:window._jive_current_user.ID,currentUserPartner:window._jive_current_user.partner});D.emitSuccess({html:F,extraData:{}})});return D}else{C=this.RESOURCE_ENDPOINT+"/fullcontent/"+B+"/"+E;return this.commonAjaxRequest(D,"GET",{url:C})}};this.getFullReplies=function(B,E,D){var C=this.RESOURCE_ENDPOINT+"/fullreplies/"+B+"/"+E;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:C,data:JSON.stringify(D)},D)};this.fillInTheGaps=function(B,E,D){var C=this.RESOURCE_ENDPOINT+"/fillinthegaps/"+B+"/"+E;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:C,data:JSON.stringify(D)},D)};this.fillActivity=function(B,F,D,E){var C=this.RESOURCE_ENDPOINT+"/fillactivity/"+B+"/"+F;return this.commonAjaxRequest(E,"POST",{url:C,data:JSON.stringify(D)})};this.getHiddenRules=function(C){var B=this.RESOURCE_ENDPOINT+"/exclusions/list";return this.commonAjaxRequest(C,"GET",{url:B})};this.saveInboxViewType=function(B){var C=this.RESOURCE_ENDPOINT+"/inbox/viewtype/save";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:C,data:B})};this.saveInboxListHeight=function(B){var C=this.RESOURCE_ENDPOINT+"/inbox/listheight/save";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:C,data:JSON.stringify(B)})};this.getGlobalNavMenu=function(){var B=this.RESOURCE_ENDPOINT+"/global/nav/menu";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:B})}})