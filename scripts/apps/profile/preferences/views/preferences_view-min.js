jive.namespace("ProfilePreferences");jive.ProfilePreferences.PreferencesView=jive.AbstractView.extend(function(a){this.init=function(b){var c=this;$j("#j-edit-hidden-rules").delegate(".j-js-edit-hidden-rules","click",function(d){c.emitP("getHiddenRules").addCallback(function(e){c.showHiddenRulesModal(e)});d.preventDefault()})};this.showHiddenRulesModal=function(d){var c=this,b=$j(jive.eae.activitystream.builder.hiddenRulesContent({rulesData:d}));b.lightbox_me({destroyOnClose:true,centered:true,onLoad:function(){c.attachHiddenRulesListeners(b)}})};this.attachHiddenRulesListeners=function(c){var b=this;c.delegate("a.j-js-rule-undo, a.j-js-rule-redo","click",function(i){var h=$j(this),j=(h.is(".j-js-rule-undo")?"include":"exclude"),g=h.closest("li"),f=h.closest(".j-js-hiding-rules").data("type"),d={ruleType:f,hideType:j,objectType:g.data("objecttype"),objectID:g.data("objectid")};if(f=="type-context"){d.contentType=g.data("contenttype")}b.emitP("hidingRuleAction",d).addCallback(function(){g.hide();if(j=="include"){g.next(".j-js-undone-hiding-rule").fadeIn("fast")}else{g.prev(".j-js-hiding-rule").fadeIn("fast")}});i.preventDefault()}).delegate("a.j-js-rule-dismiss","click",function(g){var f=$j(this),d=f.closest("li");d.fadeOut("fast",function(){d.prev(".j-js-hiding-rule").remove();d.remove();if(!c.find("li").length){$j("#j-hiding-rules-sections").html(jive.eae.activitystream.builder.noHiddenRules())}});g.preventDefault()})}});