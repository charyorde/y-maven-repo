jive.namespace("content.polls");jive.content.polls.ImageMetaSource=jive.content.polls.MetaSource.extend({init:function(){this.META_ENDPOINT=jive.rest.url("/meta")},create:function(f,e,a,b){var d=this;var c={url:jive.rest.url("/meta/image/"+f.objectType+"/"+f.id+"/attachment"),dataType:"xml",contentType:"text/xml; charset=utf-8",complete:function(g){if($j(g.responseXML).find("meta id").length>0){d.fetch($j(g.responseXML).find("meta id").text(),a,b)}else{var i=$j(g.responseXML).find("code").text();var h=$j(g.responseXML).find("message").text();b(g,h,i)}},error:function(i,k,j){var h=$j(i.responseXML).find("code").text();var g=$j(i.responseXML).find("message").text();b(i,g,h)}};e.ajaxSubmit(c)},fetch:function(d,c,a){var b={type:"GET",url:this.META_ENDPOINT+"/"+d,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){if(e.meta.length>0){c(e.meta)}else{console.log("Error jive.content.polls.ImageMetaSource fetch no meta data:"+e)}},error:function(e,g,f){console.log("Error jive.content.polls.ImageMetaSource fetch"+e+", "+g+", "+f);a(e,g,f)}};$j.ajax(b)}});