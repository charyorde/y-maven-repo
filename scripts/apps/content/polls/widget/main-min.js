jive.namespace("PollWidget");jive.PollWidget.Main=function(k){var g=k.containerType,i=k.containerID,h=k.widgetID,a=k.moreUrl,e=k.createUrl,j=k.canCreatePoll,f=k.pollID,c=k.pollIndex,d,b;d=new jive.PollWidget.WidgetSource({containerType:g,containerID:i});b=new jive.PollWidget.WidgetView("#poll-container-"+h,{moreUrl:a,widgetID:h,createUrl:e,pollID:f,pollIndex:c});b.addListener("next",function(l){d.getPoll(l,{success:function(m){b.setContent(m);b.next()},error:function(){var m=jive.json.parse(data.responseText);b.displayError(m.message)}})}).addListener("previous",function(l){d.getPoll(l,{success:function(m){b.setContent(m);b.previous()},error:function(){var m=jive.json.parse(data.responseText);b.displayError(m.message)}})}).addListener("vote",function(n,m,l){d.vote(n,m,{success:function(o){b.setContent($j.extend({index:l},o));b.vote(o)},error:function(){var o=jive.json.parse(data.responseText);b.displayError(o.message)}})})};