jive.namespace("Wall");if(!jive.Wall.VideoLinkMetaSource){jive.Wall.VideoLinkMetaSource=jive.Wall.MetaSource.extend({init:function(){this.META_ENDPOINT=jive.rest.url("/meta")},create:function(b,d,f){var e={contentObjectType:b.objectType,object:b.objectId,videoURL:d.videoURL};var c=this;var a={url:jive.action.url("video-link-meta",e),dataType:"json",success:function(g){c.fetch(g.id,f)}};$j.ajax(a)},fetch:function(c,b){var a={type:"GET",url:this.META_ENDPOINT+"/"+c,dataType:"json",contentType:"application/json; charset=utf-8",success:function(d){if(d.meta.length>0){d=jive.Wall.VideoLinkMetaSource.normalizeData(d);b(d.meta)}else{console.log("Error jive.Wall.VideoLinkMetaSource fetch no meta data:"+d)}}};$j.ajax(a)}});jive.Wall.VideoLinkMetaSource.normalizeData=function(a){if(a.meta&&a.meta.length>0){a.meta.forEach(function(c){var b=c.properties;if(b!=undefined){var f={};if(b.entry!=undefined&&b.entry.length!=0){var e=b.entry;for(var d=0;d<e.length;d++){f[e[d].key]=e[d].value}}c.properties=f}})}else{a.meta=[]}return a}};