define("jive.Announcements.Flipper.AnnouncementFlipper",function(){return function(d){var t=7000;var n=setInterval(s,t);var i=false;var o=$j("#j-announcement-carousel"),a=o.find(".j-announcement"),l=a.find(".j-announcement-more"),w=o.find("#j-announcement-controls"),j=w.find(".j-announcement-button"),v=a.length,b=a.outerWidth(),e=p(a.eq(0));a.eq(0).addClass("active");j.eq(0).addClass("active");j.click(function(){var y=j.index($j(this));if($j("body").scrollTop()>o.offset().top){$j("body").animate({scrollTop:o.offset().top},100)}k(y);i=false});r(true);l.click(function(){var y=f();y.addClass("full-text").css("height","");l.hide();g(true);return false});o.hover(function(){g()},function(){h()});function q(){var y=x();if(y+1>=v){return 0}return y+1}function f(){return a.parent().find(".active")}function x(){var y=f();return a.index(y)}function c(){return f().find(".j-announcement-body img")}function m(z){z.addClass("full-text").css("height","");var y=z.height();z.removeClass("full-text");return y}function p(y){if(y.is(":hidden")){y.addClass("active").css("height","");var z=y.height();y.removeClass("active");return z}return y.find(".j-announcement-body").height()}function r(z){var y=c();if(z&&y.length>0){y.load(function(){u()})}else{u()}}function u(){if(m(f())>e){l.show()}else{l.hide()}}function s(){k(q())}function g(y){clearInterval(n);if(y){i=true}}function h(){if(!i){n=setInterval(s,t)}}function k(D){var A=x();if(D!=A){var z=b;var E="enter-left";if(A<D){E="enter-right";z*=-1}var y=f();var B=a.eq(D);y.removeClass("active").addClass("exit");B.addClass(E);var C=new $j.Deferred();y.animate({left:z},200,function(){C.resolve()});var F=new $j.Deferred();B.animate({left:0},200,function(){F.resolve()});j.eq(A).removeClass("active");j.eq(D).addClass("active");$j.when(C,F).done(function(){y.removeClass("exit full-text").css("left","");B.removeClass(E).addClass("active").css("left","");r(false)})}}}});