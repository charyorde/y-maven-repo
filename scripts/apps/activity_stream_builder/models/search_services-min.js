jive.namespace("ActivityStream");jive.ActivityStream.SearchServices=jive.RestService.extend(function(a,b){a.resourceType="stream-config";a.pluralizedResourceType=a.resourceType;this.init=function(){b.init.call(this);var c=this;c.userSource=new jive.Browse.User.ItemSource();c.placeSource=new jive.Browse.Container.ItemSource();c.activitySource=new jive.Activity.ItemSource()};this.getBreadcrumbBean=function(d,f,e){var c=this;c.placeSource.getBreadcrumbBean({containerType:d,containerID:f}).addCallback(function(g){e.emitSuccess(g)})};this.search=function(o,n){var m=this,f=o.type,g=o.subfilters,k=o.start,d=o.maxResults+1,h={},j=0,e={};if(f=="people-places"){h={query:o.value,filterID:g.people,filterGroupID:"asbPeople",start:k,numResults:d,propertyNames:["avatarID","profileImage","profile","connections"]};m.userSource.findAll(h).addCallback(function(p){j++;e.people=p.items;if(j==2){n.emitSuccess(e,o)}});var i=(o.value?o.value+"*":o.value);var l={query:i,filterID:g.places,filterGroupID:"asbPlaces",start:k,numResults:d};m.placeSource.findAll(l).addCallback(function(p){j++;e.places=p.items;if(j==2){n.emitSuccess(e,o)}})}else{if(f=="people"){h={query:o.value,filterID:g,filterGroupID:"asbPeople",start:k,numResults:d,propertyNames:["avatarID","profileImage","profile","connections"]};m.userSource.findAll(h).addCallback(function(p){n.emitSuccess({people:p.items},o)})}else{if(f=="places"){i=(o.value?o.value+"*":o.value);h={query:i,filterID:g,filterGroupID:"asbPlaces",start:k,numResults:d};m.placeSource.findAll(h).addCallback(function(p){n.emitSuccess({places:p.items},o)})}else{if(f=="suggested"){var c=m.RESOURCE_ENDPOINT+"/getSearchSuggestions";this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c}).addCallback(function(p){n.emitSuccess(p,o)})}}}}};this.getFollowerList=function(e,d){var c=this;c.activitySource.getContentActivityUsers({activityType:e.activityType,objectType:e.objectType,objectID:e.objectID},e.start,e.count).addCallback(function(f){d.emitSuccess(f)})}});