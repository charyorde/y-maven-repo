jive.namespace("Filters");jive.Filters.TagCloud=jive.AbstractView.extend(function(a){var b=jQuery;a.init=function(d){var c=this;b(d).parent().find(".js-open-tag-cloud").click(function(e){c.emit("cloud");e.preventDefault()})};this.show=function(f,d,e){var g=new jive.conc.Promise(),c=this;this.showSpinner();f.addCallback(function(h){c.hideSpinner();c.render({availableTags:h,selectedTags:d,maxCount:e});c.content.lightbox_me({destroyOnClose:true,onClose:function(){g.emitSuccess(c.getTags())}})});return g};this.render=function(c){this.content=b(jive.browse.tagautocomplete.tagCloud(c));this.content.find(".js-tag a").click(function(d){b(this).closest(".js-tag").toggleClass("js-selected");d.preventDefault()})};a.getTags=function(){return this.content.find(".js-selected").toArray().map(function(c){return b(c).data("value")})}});