(function(){var a=(function(){try{return !!localStorage.getItem}catch(b){return false}})();if(a){jive.switchboard=jive.switchboard||(function(){var g={},i={},h="jive.switchboard",c;function d(){return Math.floor(Math.random()*100000).toString()}function b(){var j=localStorage.getItem(h);var k;try{k=j?JSON.parse(j):[]}catch(l){if(l instanceof SyntaxError){k=[]}else{throw l}}if(jQuery.isArray(k)){return k}else{return[]}}jive.conc.observable(g);var f=g.emit;g.emit=function(l){var k=b(),j,m;j=new Date();j.setMilliseconds(j.getMilliseconds()+5000);m={type:l,params:Array.prototype.slice.call(arguments,0),uuid:d(),expires:j.getTime()};i[m.uuid]=m;k.push(m);localStorage.setItem(h,JSON.stringify(k));return f.apply(g,JSON.parse(JSON.stringify(m.params)))};function e(m){var j=(new Date()).getTime(),l=b();var k=l.filter(function(n){return n.expires>j});if(l.length!=k.length){localStorage.setItem(h,JSON.stringify(k))}k.forEach(function(n){if(!i[n.uuid]){f.apply(g,n.params);i[n.uuid]=n}});Object.keys(i).forEach(function(n){if(i[n].expires<j){delete i[n]}});if(typeof m==="object"&&m.type==="storage"&&!jQuery.browser.msie){clearInterval(c)}}jQuery.each(b(),function(j,k){i[k.uuid]=k});c=setInterval(e,333);jQuery(window).bind("storage",e);return g})()}else{jive.switchboard=jive.switchboard||(function(){var b={};jive.conc.observable(b);return b})()}})();