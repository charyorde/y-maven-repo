jive.AbstractFlowController=jive.oo.Class.extend(function(a){a.init=function(d,c){var b=this;this.initialView=c;this.activeView=c;this.transitions=d;this.events=Object.keys(d);this.views=[c].concat(Object.values(d)).unique();this.resetHistory();b.views.forEach(function(e){b.events.forEach(function(f){e.addListener(f,function(){var h=Array.prototype.slice.call(arguments),g=b.transitions[f];b.transitionTo.apply(b,[g].concat(h));b.viewHistory.push({view:g,args:h});b.activeView=g})});e.addListener("back",function(){b.viewHistory.pop();var h=b.viewHistory.last(),f=h.view,g=h.args;if(b.transitionBack){b.transitionBack.apply(b,[f].concat(g))}else{b.transitionTo.apply(b,[f].concat(g))}b.activeView=f})})};a.transitionTo=jive.oo._abstract;a.resetHistory=function(){this.viewHistory=[{view:this.initialView,data:[]}]}});