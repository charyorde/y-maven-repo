jive.namespace("MicroBlogging");jive.MicroBlogging.MicroBloggingCommentView=jive.MicroBlogging.CommonView.extend(function(a,b){this.init=function(c){c.allowTagCreation=false;b.init.call(this,c);this.options=c;this.supportAttachements=false;this.viewingUserData=c.viewingUserData};this.postRender=function(){b.postRender.call(this);this.$formElem.closest("article").find("div.eae-reply-avatar").html(jive.shared.displayutil.avatar($j.extend(this.viewingUserData,{size:32,useLinks:true,showHover:true})))};a.getSoyTemplate=function(c){return jive.statusinput.containers.microbloggingCommentStatusInput(c)};this.createWaitingViewElem=function(){this.$waitingViewElem=this.getContent()};this.createFormElem=function(){this.$formElem=this.getContent().find("form")};this.renderResponse=function(c){b.renderResponse.call(this,c);this.resetStatusInput()};this.getDataFromDom=function(){var c=this.normalizeData();return{body:"<body>"+c+"</body>",ID:this.$formElem.find("input:[name=contentID]").val(),typeID:this.$formElem.find("input:[name=typeID]").val()}};this.handleAtMentionResult=function(h,e){var f=this;if(h&&h.split("-").length==2){var d=h.split("-")[0],g=h.split("-")[1];var c=new jive.rte.EntitlementService({objectID:this.options.entitlementObjectID||0,objectType:this.options.entitlementObjectType||0,entitlement:"VIEW"});if(c&&d){c.checkEntitlement(d,g).addCallback(function(i){if(!i){var j="";if(d==3){j=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.no_notification"})}else{if(d==700){j=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.secret_group"})}else{j=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.restricted_content"})}}$j("<p>"+e+" "+j+"</p>").message({style:"warn"})}})}}}});