jive.namespace("MicroBlogging");if(!jive.MicroBlogging.StatusInputDropDown){jive.MicroBlogging.StatusInputDropDown=jive.StatusInput.StatusInputDropDown.extend({init:function(b,a){this._super(b,a);this._allowTagCreation=a.allowTagCreation==undefined?true:a.allowTagCreation},renderFriendsData:function(b){var a=this;this._renderData(b,"friends",jive.statusinput.dropdown.ddFriends,{fnHandleRender:function(){a._renderFriedsDataHelper()},renderIfDataIsNull:true})},_renderFriedsDataHelper:function(){var a=this;this._dd.find(".jive-js-history").click(function(b){a.emit("historyLinkClicked");b.stopPropagation()})},renderHistoryData:function(b){var a=this;this._renderData(b,"history",jive.statusinput.dropdown.ddHistory,{fnHandleRender:function(){a._renderHistoryDataHelper()},renderIfDataIsNull:true})},_renderHistoryDataHelper:function(){var a=this;this._dd.find(".jive-js-friends").click(function(b){a.emit("friendsLinkClicked");b.stopPropagation()})},renderTagsData:function(b,c){var a=true;if(b){$j.each(b.tagSearchResult,function(e,d){if(d.name===c){a=false}})}if(this._allowTagCreation||c==null||b!=null&&b.tagSearchResult.length>0){this._renderData(this._normalizeTagsData(b),"tags",jive.statusinput.dropdown.ddTags,{renderIfDataIsNull:true,selectionPrefix:"#",extraTemplateData:{currentTagText:c,allowTagCreation:this._allowTagCreation,shouldCreateTag:a}})}else{this.hide()}},_normalizeTagsData:function(c){var d={mentionCollection:""};if(c!=null&&c.tagSearchResult){for(var b=0;b<c.tagSearchResult.length;b++){var a=c.tagSearchResult[b];if(a.found){if(d.mentionCollection==""){d.mentionCollection={};d.mentionCollection.entries=new Array()}d.mentionCollection.entries.push({html:'<a  class="jive-js-status-input-selectable" href="'+_jive_base_url+"/tags#/?tags="+encodeURIComponent(a.name)+'"><span class="jive-icon-med jive-icon-tag"></span>'+jive.util.escapeHTML(a.name)+"</a>",id:a.name})}}}return d},_makeSelection:function(c,d,b){if(c.hasClass("jive-js-status-input-create")){var e=c.attr("data-id");var a={newtag:1};this.emit("interactionFinished",{index:-1,value:'<span class="jive-icon-med jive-icon-tag"></span>'+e,href:_jive_base_url+"/tags#/?tags="+e,html:c.html()},null,a)}else{this._super(c,d,b)}}})};