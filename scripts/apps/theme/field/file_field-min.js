jive.namespace("Theme");jive.Theme.FileField=function(h,e){var a=h.attr("data-image-name"),l=h.closest("form"),f=h.clone();var i=function(){h.change(function(){d("inProgress").submit()})};var j=function(){var n=h.val().split(/(\/|\\)/).pop(),o=n.split("."),m=18;if(o[0].length>m){o[0]=o[0].substr(0,m);n=o.join("&hellip;")}return n};var d=function(m){return l.removeClass("default inProgress complete").addClass(m)};var k=function(m){$j("<p />").text(m).message({style:"error"});d("default")};var g=function(n){var m=j();d("complete").find(".filename").html(m);l.trigger("imageUploaded",[$j.extend({name:m},n)])};var c=function(m){if(m.result==="success"){g(m.file)}else{k(m.message)}h=f.clone();l.find(":file").replaceWith(h);i()};i();l.ajaxForm({dataType:"json",success:c});var b=e[a+"Name"];if(b){l.find("[data-widget-type=fileName]").val(b);d("complete").find(".filename").html(b)}return{setValue:$j.noop}};