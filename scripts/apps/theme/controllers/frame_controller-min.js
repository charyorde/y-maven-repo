define("jive.Theme.FrameController",["jquery"],function(b){return function a(o,c,p,k,i){function e(){b(".js-pop > :eq(0)").trigger("close")}function h(){var q=k.getCssValues();return q.headerAndNavigationType==="custom"}function d(){try{c.css("height",c.contents().height())}catch(q){c.css("height",b("html").height())}}function m(){var q=k.getCssValues();n(q);l(q);j();f();d();g()}function j(){b("#jive-nav-link-home").addClass("active").find(".j-js-update-indicator").remove().end().append(jive.theme.updateActivityCount()).find(".j-js-update-indicator").bind("click",false)}function n(s){var q=jive.theme.cssTemplate(s),r=b('<style class="jive-style-temporary" type="text/css" />')[0];if(r.styleSheet){r.styleSheet.cssText=q}else{try{r.appendChild(document.createTextNode(q))}catch(t){}}b("style.jive-style-temporary, link.j-custom-theme").remove();b("body").append(r)}function l(s){var r=b("#j-header-wrap"),q={customizeSite:true,headerInfo:{companyName:r.data("companyName")||"",customHeader:s.customHeaderHTMLRendered,headerLogoAltText:s.logoAltText,headerLogoPath:s.headerLogoUrl,headerTitle:s.logoTitle,logoType:s.logoType,standardHeader:!h()},hideUserBar:r.data("noUserBar"),nav:b.extend(true,{},i)};q.nav.user.displayName=jive.theme.mockUserName();r.html(jive.nav.header(q));if(s.headerAndNavigationType==="custom"&&s.customFooterHTMLRendered){b("#j-cust-foot").remove();b(".j-js-footer-wrap").prepend(jive.nav.customFooter({html:s.customFooterHTMLRendered}))}else{b("#j-cust-foot").remove()}}function f(){b(jive.theme.logoMenuControl()).insertAfter(b("#j-header-wrap").not(":has(#j-theme-ctrl-header-logo)").find("#j-header"));b(jive.theme.mainNavigationControl()).prependTo(b("#j-globalNav-bg").not(":has(#j-theme-ctrl-main-navigation)"));if(h()){b(jive.theme.secondaryNavigationControl()).prependTo(b("#j-links").not(":has(#j-theme-ctrl-secondary-navigation)"))}else{b(jive.theme.userMenuControl()).insertBefore(b("#j-header").not(":has(#j-theme-ctrl-current-user)").find("#j-satNav"));b(jive.theme.searchControl()).prependTo(b("#j-links").not(":has(#j-theme-ctrl-search)"))}}function g(){b("body").off(".themingUI").on("click.themingUI","a",function(q){q.preventDefault()});b("#j-satNav-menu").off(".satelliteNav");b("#jive-trial-banner, #jive-trial-banner a").off("click").on("click.themingUI",false);b(document).off(".autosearchview");b("form").off("submit").on("submit",false)}jive.dispatcher.listen("showThemingMenu",e).listen("showThemingMenu",function(q){p.dispatch("showThemingMenu",{command:"showThemingMenu",inFrame:true,menuId:q.menuId,orientation:q.orientation},this)});(function(){jive.ActivityStream.activityNotifier.disable();m();d();o(window.parent).on("resize.themingUI",d);window.onbeforeunload=function(){o(window.parent).off("resize.themingUI")};c.data("navbarDescriptor",i);b("body").on("navbarPopoverLoad",function(s){var t=b(s.target),q=200;r();function r(){if(t.find("a").off().length===0&&--q>0){r.delayed(50)()}}})})();return{notify:m}}});