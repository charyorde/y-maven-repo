define("jive.trial.TipHelper",["jquery"],function(a){return jive.AbstractView.extend(function(b){jive.conc.observable(this);this.init=function(c){var g=this,e=$j.deparam.querystring(),d=e.fromQ,f=e.qstep||0;g.communityName=c.communityName;if(d){g.setupPage(d,f)}};this.setupPage=function(c,e){var d=this;d.emitP("shouldSetupPage",c,e).addCallback(function(f){if(f||(c=="1136237887"&&e==1)||(c=="1421684247"&&e==0)){if(!f){d.setupPage(c,parseInt(e,10)+1)}else{if(c=="-1261617267"){if(e==0){d.fewerMeetingsStep0(c,e)}else{if(e==1){d.fewerMeetingsStep1(c)}else{if(e==2){d.fewerMeetingsStep2(c)}}}}else{if(c=="1136237887"){if(e==0){d.lessEmailStep0(c,e)}else{if(e==1&&f){d.lessEmailStep1(c,e)}else{if((e==1&&!f)||e==2){d.lessEmailStep2()}}}}else{if(c=="1836538113"){if(e==0){d.stayInTouchStep0(c)}else{if(e==1){d.stayInTouchStep1(c)}}}else{if(c=="355022612"){d.communityFeedbackTips(c)}else{if(c=="1421684247"){if(e==0){d.createSocialGroupTips(c,e)}else{if(e==1){d.uploadDocumentTips(c,e)}else{if(e==2){d.inviteTips(c,e)}}}}}}}}}}})};this.fewerMeetingsStep0=function(d,f){var e=this;if($j("#jive-compose-title").length){var g="create-discussion";$j("body").addClass("j-quest-active");var c=$j("#create-discussion");c.append('<input type="hidden" name="fromQuest" value="'+d+'" />');c.append('<input type="hidden" name="qstep" value="'+f+'" />');c.append('<input type="hidden" name="markAsQuestion" value="true" />');$j("#jive-compose-title").prepend($j(jive.trial.quests.fewerMeetings.tips({pageID:g,renderLocation:"subject"})));$j("div.jive-editor-panel").prepend($j(jive.trial.quests.fewerMeetings.tips({pageID:g,renderLocation:"body"})));$j("#js-all").before($j(jive.trial.quests.fewerMeetings.tips({pageID:g,renderLocation:"publishbar",communityName:e.communityName})));$j("#submitButton").before($j(jive.trial.quests.fewerMeetings.tips({pageID:g,renderLocation:"post"})));$j("#js-all").click();if($j.browser.msie&&$j.browser.version<9){$j("#js-all").change()}}};this.fewerMeetingsStep1=function(c){var d=this;if($j("ul.j-social-actions").length){var e="view-discussion";$j("ul.j-social-actions").before($j(jive.trial.quests.fewerMeetings.tips({pageID:e,renderLocation:"share"})));jive.dispatcher.listen("trial.share.modal.loaded",function(){$j("div.js_lb_overlay").addClass("j-quest-active");$j("#share-users").before($j(jive.trial.quests.fewerMeetings.tips({pageID:e,renderLocation:"share.modal.users"})));$j("#jive-send-content-not-message").before($j(jive.trial.quests.fewerMeetings.tips({pageID:e,renderLocation:"share.modal.message"})));$j("#share-content-submit").before($j(jive.trial.quests.fewerMeetings.tips({pageID:e,renderLocation:"share.modal.submit"})))});jive.dispatcher.listen("trial.share.created",function(){d.closeTip(c);d.emit("clearActiveQuest");d.emitP("getAllQuestProgressData").addCallback(function(j){var f="";for(var h=0,g=j.quests.length;h<g;h++){if(j.quests[h].stepsComplete==0){f=j.quests[h].id+"";break}}var k=$j(jive.trial.quests.fewerMeetings.tips({pageID:e,renderLocation:"banner",nextQuestID:f}));$j("#jive-trial-banner").after(k);$j("#jive-trial-banner").one("click",function(){$j("div.js-trial-tip").remove()})})})}};this.fewerMeetingsStep2=function(){if($j("div.jive-thread-reply-btn-helpful").length){var c="view-discussion";$j("div.jive-thread-reply-btn-helpful").first().after($j(jive.trial.quests.fewerMeetings.tips({pageID:c,renderLocation:"answer"})))}};this.lessEmailStep0=function(d,e){if($j("#create-document").length){var g="create-document",f=$j("#create-document");f.append('<input type="hidden" name="fromQuest" value="'+d+'" />');f.append('<input type="hidden" name="qstep" value="'+e+'" />');$j("body").addClass("j-quest-active");var c=$j("#js-people");c.click();if($j.browser.msie&&$j.browser.version<9){c.change()}$j("#jive-compose-title").prepend($j(jive.trial.quests.lessEmail.tips({pageID:g,renderLocation:"subject"})));$j("div.jive-editor-panel").prepend($j(jive.trial.quests.lessEmail.tips({pageID:g,renderLocation:"body"})));c.before($j(jive.trial.quests.lessEmail.tips({pageID:g,renderLocation:"publishbar"})));$j("#submitButton").before($j(jive.trial.quests.lessEmail.tips({pageID:g,renderLocation:"post"})))}};this.lessEmailStep1=function(e,f){if($j("#jive-link-edit2 a").length){var i="view-document";var d=$j("#jive-link-edit2 a");d.attr("href",d.attr("href")+"&fromQ="+e+"&qstep="+f);var h=$j(jive.trial.quests.lessEmail.tips({pageID:i,renderLocation:"edit"}));$j(h).popover({context:d,position:"left",darkPopover:true,destroyOnClose:false,putBack:true,addClass:"j-qtip",closeOnClick:false})}else{if($j("#edit-document").length){i="edit-document";$j("body").addClass("j-quest-active");var c=$j("#js-people"),g=$j(jive.trial.quests.lessEmail.tips({pageID:i,renderLocation:"skip-down"})),j=$j(jive.trial.quests.lessEmail.tips({pageID:i,renderLocation:"publishbar-preselect"}));$j("#edit-document").prepend(g);c.before(j);c.change(function(){g.remove();j.remove();c.before($j(jive.trial.quests.lessEmail.tips({pageID:i,renderLocation:"publishbar"})));$j("#submitButton").before($j(jive.trial.quests.lessEmail.tips({pageID:"create-document",renderLocation:"post"})))})}}};this.lessEmailStep2=function(){var d=this;if($j("#jive-body-main header span.jive-shared-list").length){var e="view-document";var c=$j("#jive-body-main header span.jive-shared-list");d.emitP("getAllQuestProgressData").addCallback(function(j){var f="";for(var h=0,g=j.quests.length;h<g;h++){if(j.quests[h].stepsComplete==0){f=j.quests[h].id+"";break}}var k=$j(jive.trial.quests.lessEmail.tips({pageID:e,renderLocation:"collaborators",nextQuestID:f}));$j("#jive-trial-banner").one("click",function(){$j("div.js-trial-tip").remove()});c.append(k)})}};this.stayInTouchStep0=function(g){var c=this,e=jive.ActivityStream.MBController.getMicrobloggingView();if(e){var h="all-activity";jive.ActivityStream.MBController.addListener("submitSuccess",function(){c.closeTip(g);jive.dispatcher.dispatch("trial.updatePercentComplete");$j("#jive-trial-banner").after($j(jive.trial.quests.stayInTouch.tips({pageID:h,renderLocation:"banner_post_mb"})));$j("#jive-trial-banner").one("click",function(i){i.preventDefault();$j("div.js-trial-tip").remove()})});var f=$j(jive.trial.quests.stayInTouch.tips({pageID:h,renderLocation:"mb_body"}));$j("#statusInputs-mb-header-editor").prepend(f);var d=$j(jive.trial.quests.stayInTouch.tips({pageID:h,renderLocation:"at_mention_btn"})).hide();$j("#status-input-actions-mb-header-editor a.jive-js-mention-button").after(d);e.addListener("focus",function(){f.hide();d.show()}).addListener("cancel",function(){f.show();d.hide()})}};this.stayInTouchStep1=function(d){var e=this;if($j("#j-activity-page .j-act-header h1").length){var f="all-activity";$j("#j-activity-page .j-act-header h1").after($j(jive.trial.quests.stayInTouch.tips({pageID:f,renderLocation:"stream_header"})));var c=$j('<style type="text/css"> a.jive-acclaim-likelink.like{ background: #e28044; color: #fff !important; font-weight: bold; -moz-border-radius: 3px; -webkit-border-radius: 3px; border-radius: 3px; padding: 2px 5px; margin: -2px;} </style>');c.appendTo("head");jive.dispatcher.listen("trial.like.created",function(){e.closeTip(d);c.remove();e.emit("clearActiveQuest");$j("html, body").animate({scrollTop:0},"fast");$j("#jive-trial-banner").after($j(jive.trial.quests.stayInTouch.tips({pageID:f,renderLocation:"banner_post_like"})));$j("#jive-trial-banner").one("click",function(g){g.preventDefault();$j("div.js-trial-tip").remove()})})}};this.communityFeedbackTips=function(f){var e=$j("#create-discussion"),d=$j("#js-all"),c=$j("#js-publishbar-select input[type=radio]");if(e.length){var g="create-discussion";$j("body").addClass("j-quest-active");e.append('<input type="hidden" name="markAsQuestion" value="true" />');e.append('<input type="hidden" name="fromQuest" value="'+f+'" />');d.click();if($j.browser.msie&&$j.browser.version<9){d.change()}c.attr("disabled","disabled");c.each(function(){$j(this).attr("name",$j(this).attr("name")+".disabled")});d.after('<input type="hidden" name="publishBar.visibility" value="all"/>');$j("div.jive-editor-panel").prepend($j(jive.trial.quests.communityFeedback.tips({pageID:g,renderLocation:"body"})))}};this.createSocialGroupTips=function(f,g){var e=this,i;if($j("body.j-body-yourplaces").length){i="places";$j("#jive-body").prepend($j(jive.trial.quests.teamwork.tips({pageID:i,renderLocation:"body"})));var d=jive.app.url({path:"/create-group!input.jspa?fromQ="+f+"&qstep=0"});$j("#js-teamwork-create-group-link").attr("href",d);jive.switchboard.addListener("sgroup.member.join",function(){$j("#js-teamwork-join-tip").hide();e.uploadDocumentTips(f,1);jive.dispatcher.dispatch("trial.updatePercentComplete")})}else{if($j("#jive-link-joinSocialGroup").length){i="place";var j=false;if(!$j(".j-bigtab-nav").length){j=true}var c=$j("#jive-link-joinSocialGroup").filter(":visible");if(c){if(c.hasClass("j-ask-join")&&j){j="ask-to-join"}else{if(j){j="join"}}c.before($j(jive.trial.quests.teamwork.tips({pageID:i,renderLocation:"join-link","private":j})));jive.switchboard.addListener("sgroup.member.join",function(){$j("#js-teamwork-join-tip").hide();e.uploadDocumentTips(f,1);jive.dispatcher.dispatch("trial.updatePercentComplete")})}}else{if($j("#jive-socialgroup-desc").length){i="create-group";$j("body").addClass("j-quest-active");var h=$j("#jive-socialgroup-name");h.prepend($j(jive.trial.quests.teamwork.tips({pageID:i,renderLocation:"group-name"})));$j("#jive-socialgroup-desc").prepend($j(jive.trial.quests.teamwork.tips({pageID:i,renderLocation:"group-desc"})));$j("input.j-btn-callout").before($j(jive.trial.quests.teamwork.tips({pageID:i,renderLocation:"submit"})))}}}};this.uploadDocumentTips=function(c,d){var g=$j("#jive-link-createDocument-upload"),e,f;if($j("body.j-body-yourplaces").length){e="places";f=$j(jive.trial.quests.teamwork.tips({pageID:e,renderLocation:"banner"}));f.delegate("#quest-complete-close","click",function(h){h.preventDefault();$j("div.js-trial-tip").remove()});$j("#jive-trial-banner").after(f);$j("#jive-trial-banner").one("click",function(h){h.preventDefault();$j("div.js-trial-tip").remove()})}else{if(g.length){g.find("a").attr("href",g.find("a").attr("href")+"&fromQ="+c+"&qstep="+d);e="place";f=$j(jive.trial.quests.teamwork.tips({pageID:e,renderLocation:"upload-link"}));f.find("a.j-navlink-highlight").attr("href",g.find("a").attr("href"));$j(f).popover({context:g,position:"left",darkPopover:true,destroyOnClose:false,putBack:true,addClass:"j-upload-tip",closeOnClick:false})}else{if($j("body.j-body-place").length){e="place";f=$j(jive.trial.quests.teamwork.tips({pageID:e,renderLocation:"banner"}));f.delegate("#quest-complete-close","click",function(h){h.preventDefault();$j("div.js-trial-tip").remove()});$j("#jive-trial-banner").after(f);$j("#jive-trial-banner").one("click",function(h){h.preventDefault();$j("div.js-trial-tip").remove()})}else{if($j(".jive-create-doc").length){e="upload";$j("body").addClass("j-quest-active");$j(".jive-create-doc").prepend($j(jive.trial.quests.teamwork.tips({pageID:e,renderLocation:"choose-file"})));$j("#js-publishbar-visibility").before($j(jive.trial.quests.teamwork.tips({pageID:e,renderLocation:"choose-place"})));$j("#submitButton").before($j(jive.trial.quests.teamwork.tips({pageID:e,renderLocation:"submit"})))}}}}};this.inviteTips=function(c,e){if($j("#jive-link-inviteToGroup a").length){var f="place";$j("#jive-link-inviteToGroup a").trigger("click");$j("div.js_lb_overlay").addClass("j-quest-active");$j("#invitees").before($j(jive.trial.quests.teamwork.tips({pageID:f,renderLocation:"invite.modal.users"})));$j("#jive-invite-message-content").before($j(jive.trial.quests.teamwork.tips({pageID:f,renderLocation:"invite.modal.message"})));$j("#jive-invite-button").before($j(jive.trial.quests.teamwork.tips({pageID:f,renderLocation:"invite.modal.submit"})));$j("#jive-modal-invite").on("close",function(){jive.dispatcher.dispatch("trial.updatePercentComplete")})}else{if($j("div.doc-page").length){var d=this;d.emitP("shouldSetupPage",c,e-1).addCallback(function(g){var j="view-document";if(!g){d.closeTip(c);var k=$j(jive.trial.quests.teamwork.tips({pageID:j,renderLocation:"banner"}));k.delegate("#post-upload-tip-close","click",function(l){l.preventDefault();$j("div.js-trial-tip").remove()});$j("#jive-trial-banner").after(k);$j("#jive-trial-banner").one("click",function(l){l.preventDefault();$j("div.js-trial-tip").remove()})}else{j="view-document";var h=$j("#jive-link-edit a");h.attr("href",h.attr("href")+"?fromQ="+c+"&qstep="+(e-1));var i=$j(jive.trial.quests.teamwork.tips({pageID:j,renderLocation:"edit"}));$j(i).popover({context:h,position:"left",darkPopover:true,destroyOnClose:false,putBack:true,addClass:"j-qtip",closeOnClick:false})}})}}};this.closeTip=function(e,c){var d="div.js-trial-tip[data-fromq="+e+"]";if(c){d+="[data-location="+c+"]"}var f=$j(d);if(f.length){f.each(function(){var h=$j(this);var g=h.closest("div.js-pop").length;if(g.length){g.trigger("close");g.remove()}else{h.remove()}})}}})});