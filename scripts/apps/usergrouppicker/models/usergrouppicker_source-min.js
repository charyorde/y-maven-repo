jive.namespace("UserGroupPicker");jive.UserGroupPicker.Source=jive.oo.Class.extend(function(a){this.init=function(b){this.options=b;this.urls={groupAutocomplete:_jive_base_url+"/group-autocomplete.jspa",browseModal:_jive_base_url+"/group-autocomplete-modal.jspa"}};this.autocomplete=function(c){var e=new jive.conc.Promise(),b=this;if(b.lastAjaxObj){b.lastAjaxObj.abort()}var d={groupAllowed:true,includeGuestUsers:false,includeRegisteredUsers:true};b.lastAjaxObj=$j.ajax({url:_jive_base_url+"/__services/v2/rest/groups/search/"+encodeURI(c),data:d,dataType:"json",success:function(f){e.emitSuccess(f)},error:function(f){e.emitError()}});return e};this.save=function(d){var e=new jive.conc.Promise(),c=this;var b={};b[this.resourceType]=d;$j.ajax({type:"POST",url:this.RESOURCE_ENDPOINT+"/"+d.objectID+"/members",dataType:"json",data:JSON.stringify(b),contentType:"application/json; charset=utf-8",success:function(f,h,g){e.emitSuccess(f)},error:function(h,j,i){try{var g=$j.parseJSON(h.responseText);if(g&&g.error&&g.error.message){e.emitError(g.error.message,g.error.code)}}catch(f){e.emitError(null,h&&h.status)}}});return e}});