jive.namespace("DiscussionApp");jive.DiscussionApp.Main=function(n){var l=n.resourceID,c=n.resourceType,j=n.resourceVersionID,g=n.listAction,k=n.isModerated,f=n.isThreaded,e=n.sort||"datedesc",m=n.i18n,a,b,i,d,h="#jive-thread-messages-container";a=new jive.DiscussionApp.DiscussionRestSource(n);b=new jive.DiscussionApp.DiscussionListView(h,n);b.addListener("saveDiscussion",function(r,p){var q=new jive.DiscussionApp.Discussion(r),o=this;a.createMessage({forumThreadID:q.thread,ID:q.message,subject:q.subject,body:q.body,name:q.name,email:q.email}).addCallback(function(s){b.redisplayReplies(s.content);if(i){i.getQuestion(d.renderAll)}b.scrollToLatestMsg();if(s.moderated){b.displayModeratedMessage()}}).addErrback(function(t,s){b.displayError(t);b._formWaitingView.enableForm()})});b.addListener("formReady",function(){});if(n.question){i=new jive.DiscussionApp.QuestionSource(l);d=new jive.DiscussionApp.QuestionView(l,i,m);$j(document).ready(function(){i.getQuestion(d.renderAll)})}$j(document).ready(function(){define(["jive.rte"],$j.noop)});this.addDiscussionListViewListener=function(o,p){b.addListener(o,p)}};