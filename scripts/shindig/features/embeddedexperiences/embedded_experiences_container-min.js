(function(){osapi.container.Container.addMixin("ee",function(a){var i=osapi.container.ee.DataModel;var b=osapi.container.ee.PreferredExperience;var e=osapi.container.ee.TargetType;var d=osapi.container.ee.Context;var f=osapi.container.ee.ContainerConfig;function g(n,q,m,s,v){var w=m[osapi.container.ee.RenderParam.GADGET_VIEW_PARAMS]||{};var o=m[osapi.container.ee.RenderParam.GADGET_RENDER_PARAMS]||{};o[osapi.container.RenderParam.VIEW]=osapi.container.ee.RenderParam.EMBEDDED;var p=q[i.PREFERRED_EXPERIENCE];if(p){var r=p[b.TARGET];if(r&&r[b.TYPE]===e.GADGET){if(!!r[b.VIEW]){o[osapi.container.RenderParam.VIEW]=r[b.VIEW]}}}if(v){var u=q[i.CONTEXT];var y=true;if(u){if(typeof u!="object"){y=false}}else{u={}}if(y){var k={};k[d.ASSOCIATED_CONTEXT]={};for(var t in v){if(v.hasOwnProperty(t)){k[t]=v[t]}}u[d.OPENSOCIAL]=k;q[i.CONTEXT]=u}}o[osapi.container.ee.RenderParam.DATA_MODEL]=q;var l=a.newGadgetSite(n);var x=q[i.GADGET];a.preloadGadget(x,function(z){if(!z[x]||z[x].error){if(q[i.URL]!=null){j(n,q,m,s)}else{if(s!=null){s(l,z[x]||{error:z})}}}else{a.navigateGadget(l,x,w,o,function(A){if(s!=null){s(l,A)}})}})}function j(n,m,p,k){var o=p[osapi.container.ee.RenderParam.URL_RENDER_PARAMS]||{};var l=a.newUrlSite(n);var q=a.navigateUrl(l,m[i.URL],o);if(k){k(q,null)}}function c(l){if(l[osapi.container.ee.DataModel.PREFERRED_EXPERIENCE]){var k=l[osapi.container.ee.DataModel.PREFERRED_EXPERIENCE];if(k[osapi.container.ee.PreferredExperience.TARGET]){var m=k[osapi.container.ee.PreferredExperience.TARGET];if(m&&m[osapi.container.ee.PreferredExperience.TYPE]){return m[osapi.container.ee.PreferredExperience.TYPE]}}}return null}function h(l){var k=l.gs;var n=k.currentGadgetHolder_.renderParams_;var m=n.eeDataModel;return m?m[i.CONTEXT]:null}a.rpcRegister("ee_gadget_rendered",h);return{navigate:function(n,m,p,l,k){var o=null;if(!!a.config_&&!!a.config_[f.GET_EE_NAVIGATION_TYPE]&&(typeof a.config_[f.GET_EE_NAVIGATION_TYPE]==="function")){o=a.config_[f.GET_EE_NAVIGATION_TYPE].call(a,m)}else{o=c(m)}if(o===null){if(m[i.GADGET]){o=osapi.container.ee.TargetType.GADGET}else{if(m[i.URL]){o=osapi.container.ee.TargetType.URL}}}if(o===osapi.container.ee.TargetType.GADGET){g(n,m,p,l,k)}else{if(o===osapi.container.ee.TargetType.URL){j(n,m,p,l)}}},close:function(k){if(k instanceof osapi.container.GadgetSite){a.closeGadget(k)}if(k instanceof osapi.container.UrlSite){k.close()}}}})})();