osapi.jive.extend(osapi.jive,{app:function(d,c){var e=d.split("."),b=this,a=c||"Main";return this.namespace(d,function(){var g=e.slice(0,-1).reduce(function(k,l){return k[l]},b),h=g[e.last()],j=h[a],f;if(osapi.jive.isFunction(j)){osapi.jive.extend(j,h);j[a]=j;g[e.last()]=j;f=Object.create(j.prototype);j.apply(f,arguments);return f}else{throw ("No class called `"+a+"` was found in jive."+d+".")}})}});osapi.jive.namespace.call(window,"console.log",function(){});osapi.jive.namespace.call(window,"console.debug",function(){});osapi.jive.namespace.call(window,"console.error",function(){});osapi.jive.namespace.call(window,"console.warn",function(){});osapi.jive.namespace.call(window,"console.info",function(){});osapi.jive.jsonPathLite=function(c,e){if(c===null){return null}if(e=="/"){return c}var d=e.split(/\//);if(d[0]==""){d.shift()}var b=d.shift();var a=c[b];if(typeof a=="undefined"){return null}if(d.length>0){return osapi.jive.jsonPathLite(a,d.join("/"))}else{return a}};osapi.jive.core=osapi.jive.core||{};osapi.jive.extend(osapi.jive.core,{basePath:"/api/core/v2",getCollection:function(b){b=osapi.jive.extend({limit:25,offset:0},b||{});if(!b.jsonPath){throw new Error('Unable to fetch collection. Please specify "jsonPath" in the call')}if(!b.findUrl){throw new Error('Unable to fetch collection. Please specify "findUrl" in the call')}var d=osapi.jive.core._serializeToFormVars({after:b.after,anchor:b.anchor,before:b.before,excludeReplies:b.excludeReplies,groupID:b.groupID,inviterID:b.inviterID,inviteeID:b.inviteeID,limit:b.limit,offset:b.offset,q:b.q,type:b.type});var a=b.findUrl+(d?"?"+d:"");var c=osapi.jive.core.get({v:"v2",href:a});osapi.jive.core._extendOsapiRequestWithResponseInterceptor(c,function(e){var g=e;if(!osapi.jive.core._isError(e)){var f=osapi.jive.core._newObjectSuccessCallback({className:b.className,findUrl:b.findUrl,jsClass:b.jsClass,jsonPath:b.jsonPath,multiple:true,success:function(h){g=new osapi.jive.core.Response({data:h})}});f(e.content)}else{g=osapi.jive.core._createErrorResponse(e)}return g});return c},getCollectionWithCallback:function(a,b){this.getCollection(a).execute(b)},getObject:function(a){a=a||{};if(!a.jsonPath){throw new Error('Unable to fetch collection. Please specify "jsonPath" in the call')}if(!a.findUrl){throw new Error('Unable to fetch collection. Please specify "findUrl" in the call')}var b=osapi.jive.core.get({v:"v2",href:a.findUrl});osapi.jive.core._extendOsapiRequestWithResponseInterceptor(b,function(c){var e=c;if(!osapi.jive.core._isError(c)){var d=osapi.jive.core._newObjectSuccessCallback({className:a.className,findUrl:a.findUrl,jsClass:a.jsClass,jsonPath:a.jsonPath,multiple:false,success:function(f){e=new osapi.jive.core.Response({data:f})}});d(c.content)}else{e=osapi.jive.core._createErrorResponse(c)}return e});return b},getObjectWithCallback:function(a,b){this.getObject(a).execute(b)},getObjectOrCollection:function(b,a){a=osapi.jive.extend({collectionUrl:"/"+a.className.toLowerCase()+"s",objectUrl:"/"+a.className.toLowerCase()+"s/"+b},a||{});if(b=="all"){return this.getCollection(osapi.jive.extend({findUrl:a.collectionUrl},a))}else{return this.getObject(osapi.jive.extend({findUrl:a.objectUrl},a))}},getObjectOrCollectionWithCallback:function(c,a,b){this.getObjectOrCollection(c,a).execute(b)},createObject:function(a){if(!a.createUrl){throw new Error('Unable to create object. Please specify "createUrl" in the call')}var b=osapi.jive.core.post({v:"v2",href:a.createUrl,params:a.params});osapi.jive.core._extendOsapiRequestWithResponseInterceptor(b,function(c){if(!osapi.jive.core._isError(c)){return new osapi.jive.core.Response(osapi.jive.core._mapContentToData(c,a))}else{return osapi.jive.core._createErrorResponse(c)}});return b},createObjectWithCallback:function(a,b){this.createObject(a).execute(b)},updateObject:function(a){if(!a.updateUrl){throw new Error('Unable to update object. Please specify "updateUrl" in the call')}var b=osapi.jive.core.put({v:"v2",href:a.updateUrl,body:a.body});osapi.jive.core._extendOsapiRequestWithResponseInterceptor(b,function(c){if(!osapi.jive.core._isError(c)){return new osapi.jive.core.Response(osapi.jive.core._mapContentToData(c,a))}else{return osapi.jive.core._createErrorResponse(c)}});return b},updateObjectWithCallback:function(a,b){this.updateObject(a).execute(b)},destroyObject:function(a){if(!a.destroyUrl){throw new Error('Unable to destroy object. Please specify "destroyUrl" in the call')}console.log("---> JSON DELETE: "+a.destroyUrl);var b=osapi.jive.core["delete"]({v:"v2",href:a.destroyUrl});osapi.jive.core._extendOsapiRequestWithResponseInterceptor(b,function(c){console.log(c);if(!osapi.jive.core._isError(c)){return new osapi.jive.core.Response(osapi.jive.core._mapContentToData(c))}else{return osapi.jive.core._createErrorResponse(c)}});return b},destroyObjectWithCallback:function(a,b){this.destroyObject(a).execute(b)},_newObjectSuccessCallback:function(a){return function(e){var c=osapi.jive.jsonPathLite(e,a.jsonPath);if(c===true||c===false){a.success(c)}else{if(a.multiple){if(osapi.jive.isArray(c)){var d=osapi.jive.map(c,function(g){var f=osapi.jive.core._getJSClass(a,g);return new f(g,a)});osapi.jive.core._addNavigationLink(d,e,"next",a.className);osapi.jive.core._addNavigationLink(d,e,"previous",a.className);a.success(d)}else{if(!c){a.success([])}else{var b=osapi.jive.core._getJSClass(a,c);a.success([new b(c)])}}}else{if(c){var b=osapi.jive.core._getJSClass(a,c);a.success(new b(c,a))}else{a.success(e)}}}}},_getJSClass:function(c,d){var b;if(c){b=c.jsClass;if(!b){var e=c.className;if(e){var a=e.match(/^\$\.(.*)/);if(a){var f=a[1];e=osapi.jive.core._titleize(d[f])}b=osapi.jive.core[e]}}}b=b||Object;return b},_addNavigationLink:function(e,b,d,a){b.links=b.links||{};var c=b.links[d];if(c){e[d]={get:function(){var f=osapi.jive.core._parseBaseURL(b.links[d]);var g=osapi.jive.core._parseParams(b.links[d]);osapi.jive.extend(g,{className:a,findUrl:osapi.jive.core._getRelativeUrl(f),jsonPath:"/data"});return osapi.jive.core.getCollection(g)}}}},_mapContentToData:function(c,b){if(c&&c.content){var a=osapi.jive.core._getJSClass(b);if(osapi.jive.isArray(c.content)){c.data=new Array();osapi.jive.each(c.content,function(d,e){c.data[d]=new a(e)})}else{c.data=new a(c.content)}delete c.content}return c}});osapi.jive.core.Request=function(a){var b=this;this.options=osapi.jive.extend({method:function(){}},a||{});this.execute=function(c){this.options.method(c)}};osapi.jive.core.Response=function(a){var b=this;osapi.jive.extend(this,a||{})};osapi.jive.core.Error=function(a){var b=this;osapi.jive.extend(this,a||{})};osapi.jive.extend(osapi.jive.core,{_createSuccessResponse:function(a){a=a||{};return new osapi.jive.core.Response({data:a.data})},_createErrorResponse:function(a){a=a||{};if(a.error){var c=a.error.code;var b=a.error.message}else{var c=a.content?a.content.code:a.code;var b=a.content?a.content.message:a.message;if(typeof(c)==="undefined"||c===null){c=a.status}}return new osapi.jive.core.Response({error:new osapi.jive.core.Error({code:c,message:b})})},_isError:function(a){var b=a.error;b=b||a.status>=400;return b},_titleize:function(b){var a=b.replace(/\b\w+\b/g,function(c){return c.substring(0,1).toUpperCase()+c.substring(1)});return a.split(" ").join("")},_trimString:function(a){return a.replace(/^\s+|\s+$/g,"")},_baseUrl:function(){if(typeof gadgets!="undefined"){var a=gadgets.util.getUrlParameters().parent;return a+osapi.jive.core.basePath}else{return osapi.jive.core.basePath}},_proxyBaseUrl:function(){if(typeof gadgets!="undefined"){var b=gadgets.io.getProxyUrl();var a=b.split("?")[0].replace(/\/gadgets\/proxy/,"");return a+osapi.jive.core.basePath}else{return osapi.jive.core.basePath}},_getRelativeUrl:function(b){if(typeof b!="undefined"){var c=/.*\/api\/core\/v2(.*)/;var a=b.match(c);if(a!=null){return a[1]}return b}},_parseBaseURL:function(b){var a=b.indexOf("?");var c=a===-1?b:b.substring(0,a);c=c.charAt(0)==="/"?c:"/"+c;return c},_parseParams:function(b){var e={};var a=b.indexOf("?");var d=b.substring(a+1,b.length);var c=d.split("&");osapi.jive.each(c,function(g,h){var f=h.split("=");e[f[0]]=f[1]});return e},_serializeToFormVars:function(b){var a=[];osapi.jive.each(b,function(d,e){if(typeof e==="string"||typeof e==="boolean"||typeof e==="number"){a.push(d+"="+escape(e))}else{if(osapi.jive.isArray(e)){for(var c=0;c<e.length;c++){a.push(d+"="+escape(e[c]))}}}});return a.join("&")},_constructUploadActionUrl:function(g,f,a,c,h){var e=osapi.jive.core._baseUrl();if(g&&g.resources&&g.resources.self){if(g.resources.self.ref.charAt(0)!=="/"&&e.charAt(e.length-1)!=="/"){e+="/"}return e+g.resources.self.ref+"/"+f}if(a){if(a.charAt(0)!=="/"&&e.charAt(e.length-1)!=="/"){e+="/"}var b=e+a;if(b.charAt(b.length-1)==="/"){b=b.substr(0,b.length-2)}var d=new RegExp(".*/"+c+"$");if(d.exec(b)){b+="/"+h}if(f){b+="/"+f}return b}if(g===undefined){if(f){if(e.charAt(e.length-1)!=="/"){e+="/"}e+=f}return e}}});osapi.jive.extend(osapi.jive.core,{linkToClassOverrideMap:{activities:"ActivityContainer",answer:"Message",attachments:"Attachment",children:"Space",content:"$.type",colleagues:"User",comments:"Comment",connections:"User",discussions:"Discussion",documents:"Document",images:"Image",inResponseTo:"Message",invited:"Invite",invites:"Invite",likes:"User",members:"Member",manager:"User",messages:"Message",owner:"User",parent:"Space",participants:"User",posts:"Post",privateDiscussions:"Discussion",privateDocuments:"Document",projects:"Project",replies:"Message",reports:"User",share:"Share",updates:"Update"},extendWithActivitiesProperty:function(c){if(c.activities){for(var a=0;a<c.activities.length;a++){var b=c.activities[a];c.activities[a]=new osapi.jive.core.Activity(b)}}},extendWithAttachmentsProperty:function(b){if(b.attachments){for(var a=0;a<b.attachments.length;a++){var c=b.attachments[a];b.attachments[a]=new osapi.jive.core.Attachment(c)}}},extendWithAuthorProperty:function(a){if(a.author){a.author=new osapi.jive.core.User(a.author)}},extendWithContainerSummaryProperty:function(a){if(a.containerSummary){switch(a.containerSummary.type){case"group":a.containerSummary.group=new osapi.jive.core.Group(a.containerSummary);break;case"project":a.containerSummary.project=new osapi.jive.core.Project(a.containerSummary);break;case"space":a.containerSummary.space=new osapi.jive.core.Space(a.containerSummary);break;case"user":a.containerSummary.user=new osapi.jive.core.User(a.containerSummary);break}}},extendWithEntitySummaryProperty:function(d){if(d.entitySummary){if(d.entitySummary.resources&&d.entitySummary.resources.self){var a={findUrl:d.entitySummary.resources.self.ref}}var c=d.entitySummary.type;if(typeof(c)!=="undefined"&&c!=null){var b=osapi.jive.core._titleize(c);if(typeof osapi.jive.core[b]==="function"){d.entitySummary[c]=new osapi.jive.core[b](d.entitySummary,a)}else{d.entitySummary[c]={}}}}},extendWithGroupProperty:function(a){if(a.group){a.group=new osapi.jive.core.Group(a.group)}},extendWithImageURL:function(b,a){b.resources=b.resources||{};if(b.resources[a]){if(osapi.jive.inArray("GET",b.resources[a].allowed)!=-1){b[a+"URL"]=osapi.jive.core._baseUrl()+b.resources[a].ref}}},extendWithParticipantsProperty:function(c){if(c.participants){for(var b=0;b<c.participants.length;b++){var a=c.participants[b];c.participants[b]=new osapi.jive.core.User(a)}}},extendWithUserProperty:function(b,a){if(typeof(a)==="undefined"||a===null){a="user"}if(b[a]){b[a]=new osapi.jive.core.User(b[a])}},_determineClass:function(b,a){if(b==="container"){if(a.search(/groups/!=-1)){return"Group"}if(a.search(/projects/!=-1)){return"Project"}if(a.search(/spaces/!=-1)){return"Space"}if(a.search(/users/!=-1)){return"User"}}else{return osapi.jive.core.linkToClassOverrideMap[b]?osapi.jive.core.linkToClassOverrideMap[b]:osapi.jive.core._titleize(b)}},extendWithResourcesMethods:function(b){var a=b.resources||{};osapi.jive.each(a,function(d,c){if(!a.hasOwnProperty(d)){return}b[d]=b[d]||{};if(osapi.jive.inArray("GET",c.allowed)!=-1){b[d].get=function(e){e=e||{};var j=c.ref.match(/s$/)||c.ref.match(/.*\/activity$/)||c.ref.match(/.*\/children$/)||c.ref.match(/.*\/content$/)||c.ref.match(/.*\/invited$/)||c.ref.match(/.*\/invites$/);var f=osapi.jive.core._determineClass(d,c.ref);if(!j){return osapi.jive.core.getObject({className:f,findUrl:osapi.jive.core._getRelativeUrl(c.ref),jsonPath:"/"})}else{var g=d==="images"?"/":"/data";var h={after:e.after,before:e.before,className:f,findUrl:osapi.jive.core._getRelativeUrl(c.ref),jsonPath:g,limit:e.limit,offset:e.offset,q:e.query,type:e.type};return osapi.jive.core.getCollection(h)}}}if(osapi.jive.inArray("POST",c.allowed)!=-1){b[d].create=function(g){var f=osapi.jive.core._determineClass(d,c.ref);var e={className:f,createUrl:osapi.jive.core._getRelativeUrl(c.ref),params:g};return osapi.jive.core.createObject(e)}}if(osapi.jive.inArray("DELETE",c.allowed)!=-1){b[d].destroy=function(){return osapi.jive.core.destroyObject({destroyUrl:osapi.jive.core._getRelativeUrl(c.ref)})}}})},extendWithUploadMethods:function(b,a){b[a.methodName]=function(f,c){c=c||{};var d=shindig.auth.getSecurityToken();osapi.jive.extend(a,c,{core:true});var e=function(g){if(typeof f==="function"){if(g.code){f(osapi.jive.core._createErrorResponse(g))}else{if(a.binaryDocument){g=new osapi.jive.core.Document(g);if(g.content&&g.content.binary&&g.content.binary.ref){g.content.binary.ref=osapi.jive.core._getRelativeUrl(g.content.binary.ref)}}else{if(g.ref){g.ref=osapi.jive.core._getRelativeUrl(g.ref)}}f(g)}}};gadgets.rpc.call(null,"request_core_api_upload",e,null,a,d)}},extendWithFollowMethods:function(a){a.follower=a.follower||{};a.follower.exists=function(){if(a.resources&&a.resources.follower){return osapi.jive.inArray("GET",a.resources.follower.allowed)!=-1}else{return false}}},extendWithLikeMethods:function(a){a.like=a.like||{};a.like.exists=function(){if(a.resources&&a.resources.like){return osapi.jive.inArray("GET",a.resources.like.allowed)!=-1}else{return false}}},extendWithMutableMethods:function(c,b){c.resources=c.resources||{};var d=c.resources.self&&osapi.jive.inArray("DELETE",c.resources.self.allowed)!=-1;if(d){c.destroy=function(){return osapi.jive.core.destroyObject({destroyUrl:osapi.jive.core._getRelativeUrl(c.resources.self.ref)})}}var a=c.resources.self&&osapi.jive.inArray("PUT",c.resources.self.allowed)!=-1;if(a){c.update=function(){return osapi.jive.core.updateObject({body:c,className:b,updateUrl:osapi.jive.core._getRelativeUrl(c.resources.self.ref)})}}},extendWithSummarizableMethods:function(c,a){c.resources=c.resources||{};var b=c.resources.self&&osapi.jive.inArray("GET",c.resources.self.allowed)!=-1;if(b){c.get=function(){return osapi.jive.core.getObject({className:a,findUrl:osapi.jive.core._getRelativeUrl(c.resources.self.ref),jsonPath:"/"})}}}});(function(){var a=osapi.newBatch;osapi.newBatch=function(){var c=a.apply(this,arguments);osapi.jive.core._extendOsapiBatchRequestWithResponseInterceptorSupport(c);return c};function b(e,c){if(e.renderSilent===true){return c}var d=e(c)||c;return d}osapi.jive.extend(osapi.jive.core,{_extendOsapiRequestWithResponseInterceptor:function(e,c){e._jive=e._jive||{};if(!e._jive.hasOwnProperty("responseInterceptor")){var d=e.execute;e.execute=function(j){var h=this._jive.responseInterceptor;if(h&&h instanceof Function){var f=function(k){k=b(h,k)||k;var l=Array.prototype.slice.call(arguments);l[0]=k;return j.apply(this,l)};var g=Array.prototype.slice.call(arguments);g[0]=f;return d.apply(this,g)}else{return d.apply(this,arguments)}}}e._jive.responseInterceptor=c},_buildRequestWithStaticResponse:function(c){return{_jive:{staticResponse:c},execute:function(d){d(c)}}},_buildRequestWithStaticErrorResponse:function(c){return this._buildRequestWithStaticResponse(osapi.jive.core._createErrorResponse({message:c}))},_extendOsapiBatchRequestWithResponseInterceptorSupport:function(d){var e=d.add;d.add=function(g,l){this._jive=this._jive||{requestCount:0};var k=l._jive&&l._jive.responseInterceptor;if(k&&k instanceof Function){this._jive.diContainer=this._jive.diContainer||[];var f=this._jive.diContainer;f.push({key:g,responseInterceptor:k,request:l})}var j=l._jive&&l._jive.staticResponse;if(j){this._jive=this._jive||{};this._jive.srContainer=this._jive.srContainer||{};var h=this._jive.srContainer;h[g]=j}else{this._jive.requestCount++;return e.apply(this,arguments)}};var c=d.execute;d.execute=function(k){if(this._jive&&this._jive.diContainer&&this._jive.diContainer.length){var g=this._jive.diContainer;var j=this._jive.srContainer||{};var f=function(n){var r=[];for(var o=0,m=g.length;o<m;++o){var t=g[o].key;if(n.hasOwnProperty(t)&&n[t]){var p=n[t];if(p){var q=g[o].responseInterceptor;var s=g[o].request;p=b(q,p)||p;s._jive.responseInterceptor.renderSilent=true;r.push(s._jive.responseInterceptor);n[t]=p}}}osapi.jive.extend(n,j);var u=k.apply(this,arguments);for(o=0,m=r.length;o<m;++o){delete r[o].renderSilent}return u};var h=Array.prototype.slice.call(arguments);h[0]=f;return c.apply(this,h)}else{if(this._jive&&this._jive.srContainer){k(this._jive.srContainer)}else{c.apply(this,arguments)}}}}})})();osapi.jive.core.ActivityContainer=function(a){osapi.jive.extend(this,a);var b=this;for(i=0;i<this.activities.length;i++){var c=this.activities[i];this.activities[i]=new osapi.jive.core.Activity(c)}osapi.jive.core.extendWithContainerSummaryProperty(this);osapi.jive.core.extendWithEntitySummaryProperty(this);if(this.user){this.user=new osapi.jive.core.User(this.user)}};osapi.jive.core.Activity=function(a){osapi.jive.extend(this,a);var b=this;osapi.jive.core.extendWithEntitySummaryProperty(this);if(this.user){this.user=new osapi.jive.core.User(this.user)}};osapi.jive.namespace("core.activities",{messages:{error:{invalidUserId:"Invalid userId",invalidGroupId:"Invalid groupId"}},get:function(a){a=a||{};var b={after:a.after,before:a.before,limit:a.limit,type:a.type};return osapi.jive.core.activities._getActivity(a.userId,a.groupId,b)},createDeepLink:function(a,c){var b="jive:app://"+a;if(c){b+="?params="+encodeURIComponent(JSON.stringify(c))}return b},_getActivity:function(c,b,d){d=d||{};var a;if(!c){a="/activity"}else{if(typeof c==="number"){a="/users/"+c+"/activity"}else{if(c==="@viewer"){if(b){switch(b){case"@followed":a="/my/followed/activity";break;default:return osapi.jive.core._buildRequestWithStaticErrorResponse(osapi.jive.core.activities.messages.error.invalidUserId+": "+c)}}else{a="/my/activity"}}else{return osapi.jive.core._buildRequestWithStaticErrorResponse(osapi.jive.core.activities.messages.error.invalidUserId+": "+c)}}}osapi.jive.extend(d,{className:"ActivityContainer",findUrl:a,jsonPath:"/data"});return osapi.jive.core.getCollection(d)}});osapi.jive.core.Attachment=function(a){var b=this;osapi.jive.extend(this,a);this.destroy=function(){return osapi.jive.core.destroyObject({destroyUrl:osapi.jive.core._getRelativeUrl(b.ref)})}};osapi.jive.namespace("core.attachments",{requestAttachmentUpload:function(d,a){a=a||{};var b=shindig.auth.getSecurityToken();osapi.jive.extend(a,{actionUrl:osapi.jive.core._constructUploadActionUrl(undefined,"attachments"),core:true});var c=function(e){console.log("---> Received callback");console.log(e);if(typeof d==="function"){if(e.code){d(osapi.jive.core._createErrorResponse(e))}else{if(e.ref){e.ref=osapi.jive.core._getRelativeUrl(e.ref)}d(new osapi.jive.core.Image(e))}}};gadgets.rpc.call(null,"request_core_api_upload",c,null,a,b)}});osapi.jive.core.Blog=function(a){var b=this;osapi.jive.extend(this,a);osapi.jive.core.extendWithResourcesMethods(this);osapi.jive.core.extendWithFollowMethods(this);osapi.jive.core.extendWithSummarizableMethods(this,"Blog")};osapi.jive.namespace("core.blogs",{messages:{error:{invalidBlogId:"Invalid blog id"}},get:function(a){a=a||{};if(a.id){return osapi.jive.core.blogs._getById(a.id)}else{var b={after:a.after,before:a.before,limit:a.limit};return osapi.jive.core.blogs._getAll(b)}},_getAll:function(a){osapi.jive.extend(a,{className:"Blog",findUrl:"/blogs/",jsonPath:"/data"});return osapi.jive.core.getCollection(a)},_getById:function(a){return osapi.jive.core.getObject({className:"Blog",findUrl:"/blogs/"+a,jsonPath:"/"})}});osapi.jive.core.Comment=function(a){var b=this;osapi.jive.extend(this,a);osapi.jive.core.extendWithResourcesMethods(this);osapi.jive.core.extendWithAuthorProperty(this);osapi.jive.core.extendWithMutableMethods(this,"Comment");osapi.jive.core.extendWithSummarizableMethods(this,"Comment");osapi.jive.core.extendWithLikeMethods(this)};osapi.jive.namespace("core.comments",{messages:{error:{invalidComment:"Must provide an html element"}}});osapi.jive.core.Communication=function(a){var b=this;osapi.jive.extend(this,a);osapi.jive.core.extendWithActivitiesProperty(this);osapi.jive.core.extendWithContainerSummaryProperty(this);osapi.jive.core.extendWithEntitySummaryProperty(this);osapi.jive.core.extendWithUserProperty(this,"user")};osapi.jive.namespace("core.communications",{getAll:function(a){a=a||{};var b={before:a.before,limit:a.limit,onlyUnread:a.onlyUnread,markAllRead:a.markAllRead};osapi.jive.extend(b,{className:"Communication",findUrl:"/communications/",jsonPath:"/data"});return osapi.jive.core.getCollection(b)}});osapi.jive.core.DirectMessage=function(a){var b=this;osapi.jive.extend(this,a);if(typeof(applyLinkHack)!=="undefined"&&applyLinkHack!==null){this.resources=osapi.jive.extend(this.resources,{read:{allowed:["DELETE","POST"],ref:this.resources.self.ref+"/read"},track:{allowed:["POST"],ref:this.resources.self.ref+"/tracks"},tracks:{allowed:["DELETE","GET"],ref:this.resources.self.ref+"/tracks/2001"}})}osapi.jive.core.extendWithResourcesMethods(this);osapi.jive.core.extendWithAuthorProperty(this);osapi.jive.core.extendWithContainerSummaryProperty(this);osapi.jive.core.extendWithEntitySummaryProperty(this);osapi.jive.core.extendWithParticipantsProperty(this);osapi.jive.core.extendWithSummarizableMethods(this,"DirectMessage")};osapi.jive.namespace("core.directmessages",{get:function(a){a=a||{};var b={before:a.before,limit:a.limit};if(a.id){return osapi.jive.core.directmessages._getById(a.id)}else{return osapi.jive.core.directmessages._getAll(b)}},_getAll:function(a){osapi.jive.extend(a,{className:"Communication",findUrl:"/communications/dms",jsonPath:"/data"});return osapi.jive.core.getCollection(a)},_getById:function(a){return osapi.jive.core.getObject({className:"DirectMessage",findUrl:"/dms/"+a,jsonPath:"/"})},create:function(a){a=a||{};var b={className:"DirectMessage",createUrl:"/communications/dms/",params:{html:a.html,draft:a.draft,participant:a.participant?a.participant:[]}};return osapi.jive.core.createObject(b)}});osapi.jive.core.Discussion=function(a){var b=this;osapi.jive.extend(this,a);if(typeof(applyLinkHack)!=="undefined"&&applyLinkHack!==null){this.resources=osapi.jive.extend(this.resources,{read:{allowed:["DELETE","POST"],ref:this.resources.self.ref+"/read"},share:{allowed:["POST"],ref:this.resources.self.ref+"/share"},track:{allowed:["POST"],ref:this.resources.self.ref+"/tracks"},tracks:{allowed:["DELETE","GET"],ref:this.resources.self.ref+"/tracks/2001"}})}osapi.jive.core.extendWithResourcesMethods(this);osapi.jive.core.extendWithAuthorProperty(this);this.messages=this.messages||{};if(this.message){this.messages.root=new osapi.jive.core.Message(b.message)}osapi.jive.core.extendWithMutableMethods(this,"Discussion");osapi.jive.core.extendWithFollowMethods(this)};osapi.jive.namespace("core.discussions",{messages:{error:{invalidDiscussionId:"Invalid discussion id",invalidUserId:"Invalid user id"}},get:function(a){a=a||{};if(!a.id){return osapi.jive.core._buildRequestWithStaticErrorResponse(osapi.jive.core.discussions.messages.error.invalidDiscussionId+": "+a.id)}return osapi.jive.core.discussions._getDiscussionById(a.id)},_getDiscussionById:function(a){return osapi.jive.core.getObject({className:"Discussion",findUrl:"/discussions/"+a,jsonPath:"/"})}});osapi.jive.core.discussions["private"]={create:function(a){var b=a.userId;if(b!=="@viewer"){return osapi.jive.core._buildRequestWithStaticErrorResponse(osapi.jive.core.discussions.messages.error.invalidUserId+": "+b)}var c={className:"Discussion",createUrl:"/my/private/discussions",params:{html:a.html,question:a.question,subject:a.subject,userURI:a.userURI,attachmentURIs:a.attachmentURIs?a.attachmentURIs:[]}};return osapi.jive.core.createObject(c)},get:function(a){a=a||{};var b=a.userId;if(b!=="@viewer"){return osapi.jive.core._buildRequestWithStaticErrorResponse(osapi.jive.core.discussions.messages.error.invalidUserId+": "+b)}var c={after:a.after,before:a.before,className:"Discussion",findUrl:"/my/private/discussions",jsonPath:"/data",limit:a.limit,offset:a.offset,q:a.query};return osapi.jive.core.getCollection(c)}};osapi.jive.core.Document=function(a){var b=this;osapi.jive.extend(this,a);if(typeof(applyLinkHack)!=="undefined"&&applyLinkHack!==null){this.resources=osapi.jive.extend(this.resources,{read:{allowed:["DELETE","POST"],ref:this.resources.self.ref+"/read"},share:{allowed:["POST"],ref:this.resources.self.ref+"/share"},track:{allowed:["POST"],ref:this.resources.self.ref+"/tracks"},tracks:{allowed:["DELETE","GET"],ref:this.resources.self.ref+"/tracks/2001"}})}osapi.jive.core.extendWithResourcesMethods(this);osapi.jive.core.extendWithAttachmentsProperty(this);osapi.jive.core.extendWithAuthorProperty(this);if(this.content&&this.content.binary){this.content.binary=new osapi.jive.core.documents.Binary(this.content.binary)}osapi.jive.core.extendWithUploadMethods(this,{actionUrl:osapi.jive.core._constructUploadActionUrl(this,"images","/documents"+b.id,"documents",b.id),methodName:"requestAttachImage"});osapi.jive.core.extendWithMutableMethods(this,"Document");osapi.jive.core.extendWithFollowMethods(this);osapi.jive.core.extendWithSummarizableMethods(this,"Document");osapi.jive.core.extendWithLikeMethods(this);osapi.jive.core.extendWithUploadMethods(this,{actionUrl:osapi.jive.core._constructUploadActionUrl(this,"attachments"),methodName:"requestAttachmentUpload"});osapi.jive.core.extendWithUploadMethods(this,{actionUrl:osapi.jive.core._constructUploadActionUrl(this,"binaryBody"),methodName:"requestReplaceBinaryBody"})};osapi.jive.namespace("core.documents",{messages:{error:{invalidDocumentId:"Invalid document id",invalidUserId:"Invalid user id"}},get:function(a){a=a||{};if(!a.id){return osapi.jive.core._buildRequestWithStaticErrorResponse(osapi.jive.core.documents.messages.error.invalidDocumentId+": "+a.id)}return osapi.jive.core.documents._getDocumentById(a)},getVersions:function(a){a=a||{};if(!a.id){return osapi.jive.core._buildRequestWithStaticErrorResponse(osapi.jive.core.documents.messages.error.invalidDocumentId+": "+a.id)}return osapi.jive.core.documents._getDocumentRange(a)},_getDocumentById:function(a){var b="/documents/"+a.id;if(a.version){b+="/versions/"+a.version}return osapi.jive.core.getObject({className:"Document",findUrl:b,jsonPath:"/"})},_getDocumentRange:function(a){var b="/documents/"+a.id+"/versions";return osapi.jive.core.getCollection({className:"Document",findUrl:b,jsonPath:"/data",limit:a.limit,offset:a.offset})}});osapi.jive.core.documents["private"]={create:function(a){var b=a.userId;if(b!=="@viewer"){return osapi.jive.core._buildRequestWithStaticErrorResponse(osapi.jive.core.discussions.messages.error.invalidUserId+": "+b)}var c={className:"Document",createUrl:"/my/private/documents",params:{html:a.html,subject:a.subject,attachmentURIs:a.attachmentURIs?a.attachmentURIs:[]}};return osapi.jive.core.createObject(c)},get:function(a){a=a||{};var b=a.userId;if(b!=="@viewer"){return osapi.jive.core._buildRequestWithStaticErrorResponse(osapi.jive.core.documents.messages.error.invalidUserId+": "+b)}var c={after:a.after,before:a.before,className:"Document",findUrl:"/my/private/documents",jsonPath:"/data",limit:a.limit,offset:a.offset,q:a.query};return osapi.jive.core.getCollection(c)}};osapi.jive.core.documents.Binary=function(a){var b=this;osapi.jive.extend(this,a);osapi.jive.core.extendWithUploadMethods(this,{actionUrl:this.ref,methodName:"requestUploadReplacement"})};osapi.jive.core.Group=function(b,a){var c=this;osapi.jive.extend(this,b);a=a||{};if(typeof(applyLinkHack)!=="undefined"&&applyLinkHack!==null){this.resources=osapi.jive.extend(this.resources,{members:{allowed:["GET","POST"],ref:this.resources.self.ref+"/members"},invites:{allowed:["GET","POST"],ref:this.resources.self.ref+"/invites"},share:{allowed:["POST"],ref:this.resources.self.ref+"/share"}})}osapi.jive.core.extendWithResourcesMethods(this);osapi.jive.core.extendWithImageURL(this,"avatar");if(this.avatarURL){this.avatarSmallURL=this.avatarURL+"?size=small";this.avatarMediumURL=this.avatarURL+"?size=medium";this.avatarLargeURL=this.avatarURL+"?size=large"}delete this["avatar"];if(this.creator){this.creator=new osapi.jive.core.User(this.creator)}osapi.jive.core.extendWithMutableMethods(this,"Group");osapi.jive.core.extendWithFollowMethods(this);osapi.jive.core.extendWithUploadMethods(this,{actionUrl:osapi.jive.core._constructUploadActionUrl(this,"binaryDocuments",a.findUrl,"groups",c.id),binaryDocument:true,methodName:"requestDocumentUpload"})};osapi.jive.namespace("core.groups",{get:function(a){a=a||{};if(a.id){return osapi.jive.core.groups._getByID(a.id)}else{var b={limit:a.limit,offset:a.offset};return osapi.jive.core.groups._getAll(b)}},_getAll:function(a){osapi.jive.extend(a,{className:"Group",findUrl:"/groups",jsonPath:"/data"});return osapi.jive.core.getCollection(a)},_getByID:function(a){return osapi.jive.core.getObject({className:"Group",findUrl:"/groups/"+a,jsonPath:"/"})},create:function(b){var c={name:b.name,type:b.type,displayName:b.displayName,description:b.description,contentTypes:b.contentTypes};var a={className:"Group",createUrl:"/groups",params:c};return osapi.jive.core.createObject(a)}});osapi.jive.core.Image=function(a){var b=this;osapi.jive.extend(this,a);this.destroy=function(){return osapi.jive.core.destroyObject({destroyUrl:b.ref})}};osapi.jive.namespace("core.images",{messages:{error:{invalidImageId:"Invalid image ID"}},requestImageUpload:function(d,a){a=a||{};var b=shindig.auth.getSecurityToken();osapi.jive.extend(a,{actionUrl:osapi.jive.core._constructUploadActionUrl(undefined,"images"),core:true});var c=function(e){if(typeof d==="function"){if(e.code){d(osapi.jive.core._createErrorResponse(e))}else{if(e.ref){e.ref=osapi.jive.core._getRelativeUrl(e.ref)}d(new osapi.jive.core.Image(e))}}};gadgets.rpc.call(null,"request_core_api_upload",c,null,a,b)}});osapi.jive.core.InboxEntry=function(a){var b=this;osapi.jive.extend(this,a);if(this.actions){for(i=0;i<this.actions.length;i++){this.actions[i]=new osapi.jive.core.InboxEntryAction(this.actions[i])}}if(this.resources&&this.resources.ignore&&osapi.jive.inArray("DELETE",this.resources.ignore.allowed)!=-1){this.ignore=function(){var c=b.resources.ignore.ref;return osapi.jive.core.destroyObjectWithCallback({destroyUrl:osapi.jive.core._getRelativeUrl(c)})}}};osapi.jive.core.InboxEntryAction=function(a){osapi.jive.extend(this,a);var b=this;if(this.resources&&this.resources.resolve&&osapi.jive.inArray("POST",this.resources.resolve.allowed)!=-1){this.resolve=function(){var c=b.resources.resolve.ref;return osapi.jive.core.createObject({createUrl:osapi.jive.core._getRelativeUrl(c)})}}};osapi.jive.namespace("core.inboxEntries",{messages:{error:{invalidInboxEntryType:"Type must be actions or notifications",noCurrentInboxItem:"There is no current inbox item"}},get:function(a){a=a||{};if(a.type!="actions"&&a.type!="notifications"){return osapi.jive.core._buildRequestWithStaticErrorResponse(osapi.jive.core.inboxEntries.messages.error.invalidInboxEntryType)}if(a.id){var b={id:a.id,type:a.type};return osapi.jive.core.inboxEntries._getById(b)}else{var b={after:a.after,before:a.before,limit:a.limit,type:a.type};return osapi.jive.core.inboxEntries._getAll(b)}},getActive:function(a){var c=gadgets.views.getParams().jive_aq;if(!c){return osapi.jive.core._buildRequestWithStaticErrorResponse(osapi.jive.core.inboxEntries.messages.error.noCurrentInboxItem)}var b=osapi.jive.extend({},a,{id:c,type:"actions"});return osapi.jive.core.inboxEntries.get(b)},_getAll:function(b){var a=b.type==="actions"?"actions":"notifications";osapi.jive.extend(b,{className:"InboxEntry",findUrl:"/inbox/"+a,jsonPath:"/data"});return osapi.jive.core.getCollection(b)},_getById:function(b){var a=b.type==="actions"?"actions":"notifications";return osapi.jive.core.getObject({className:"InboxEntry",findUrl:"/inbox/"+a+"/"+b.id,jsonPath:"/"})}});osapi.jive.core.Invite=function(b,a){var c=this;osapi.jive.extend(this,b);a=a||{};osapi.jive.core.extendWithGroupProperty(this);osapi.jive.core.extendWithUserProperty(this,"inviter");osapi.jive.core.extendWithUserProperty(this,"user");osapi.jive.core.extendWithMutableMethods(this,"Invite");osapi.jive.core.extendWithSummarizableMethods(this)};osapi.jive.namespace("core.invites",{get:function(b){b=b||{};var a=null;if(b.id){return osapi.jive.core.invites._getInviteById(b.id)}if(b.userId&&b.groupId){if(b.userId=="@viewer"){if(b.groupId){switch(b.groupId){case"@invited":a="/my/invited";break;case"@invites":a="/my/invites";break}}}}else{a="/invites"}var c={inviterID:b.inviterID,inviteeID:b.inviteeID,groupID:b.groupID,limit:b.limit,offset:b.offset};if(a===null){callback({error:{message:"invalid groupId"}})}else{return osapi.jive.core.invites._getInvites(a,c)}},_getInviteById:function(a){return osapi.jive.core.getObject({className:"Invite",findUrl:"/invites/"+a,jsonPath:"/"})},_getInvites:function(a,b){osapi.jive.extend(b,{className:"Invite",findUrl:a,jsonPath:"/data"});return osapi.jive.core.getCollection(b)}});osapi.jive.core.Mention=function(a){var b=this;osapi.jive.extend(this,a);if(typeof(applyLinkHack)!=="undefined"&&applyLinkHack!==null&&this.resources&&this.resources.self){this.resources=osapi.jive.extend(this.resources,{read:{allowed:["DELETE","POST"],ref:this.resources.self.ref+"/read"}})}osapi.jive.core.extendWithResourcesMethods(this);osapi.jive.core.extendWithContainerSummaryProperty(this);osapi.jive.core.extendWithEntitySummaryProperty(this);osapi.jive.core.extendWithUserProperty(this);osapi.jive.core.extendWithSummarizableMethods(this,"Mention")};osapi.jive.namespace("core.mentions",{messages:{error:{invalidUserId:"Invalid userId. Only '@viewer' is supported in this context"}},get:function(a){a=a||{};var b={before:a.before,limit:a.limit};if(a.userId){if(a.userId!="@viewer"){return osapi.jive.core._buildRequestWithStaticErrorResponse(osapi.jive.core.mentions.messages.error.invalidUserId+": "+a.userId)}osapi.jive.extend(b,{after:a.after});return osapi.jive.core.mentions._getMentionsForCurrentUser(b)}else{return osapi.jive.core.mentions._getAllMentions(b)}},_getAllMentions:function(a){osapi.jive.extend(a,{className:"Communication",findUrl:"/communications/mentions",jsonPath:"/data"});return osapi.jive.core.getCollection(a)},_getMentionsForCurrentUser:function(a){osapi.jive.extend(a,{className:"Mention",findUrl:"/my/mentions",jsonPath:"/data"});return osapi.jive.core.getCollection(a)}});osapi.jive.core.Member=function(b,a){var c=this;osapi.jive.extend(this,b);a=a||{};osapi.jive.core.extendWithResourcesMethods(this);if(c.group){c.group=new osapi.jive.core.Group(c.group)}osapi.jive.core.extendWithUserProperty(this,"user");osapi.jive.core.extendWithSummarizableMethods(this,"Member");osapi.jive.core.extendWithMutableMethods(this,"Member")};osapi.jive.core.Message=function(a){var b=this;osapi.jive.extend(this,a);osapi.jive.core.extendWithResourcesMethods(this);osapi.jive.core.extendWithAttachmentsProperty(this);osapi.jive.core.extendWithAuthorProperty(this);osapi.jive.core.extendWithUploadMethods(this,{actionUrl:osapi.jive.core._constructUploadActionUrl(this,"images","/messages"+b.id,"messages",b.id),methodName:"requestAttachImage"});osapi.jive.core.extendWithMutableMethods(this,"Message");osapi.jive.core.extendWithSummarizableMethods(this,"Message");osapi.jive.core.extendWithLikeMethods(this);osapi.jive.core.extendWithUploadMethods(this,{actionUrl:osapi.jive.core._constructUploadActionUrl(this,"attachments"),methodName:"requestAttachmentUpload"})};osapi.jive.namespace("core.messages",{});osapi.jive.namespace("core.places",{requestPicker:function(b){b=b||{};var f=b.success||function(){};var a=b.error||function(){};var d={};d.containerType=osapi.jive.core.places._determineContainerType(b.placeType);d.contentType=osapi.jive.core.places._determineContentType(b.contentType);var e=function(g){if(g&&g.data){f(g)}else{if(g&&g.error){a(g.error)}}};var c=function(g){var h=osapi.jive.core.places._findPlace(g);h.execute(e)};gadgets.rpc.call(null,"request_place_picker",c,d)},_determineContainerType:function(a){if(!a||a==""){return 0}switch(a){case"space":return 14;case"group":return 700;case"project":return 600;case"blog":return 37;default:throw a+" is not a valid type."}},_findPlace:function(c){var b=osapi.jive.core;var d;var a={id:c.targetContainerID};switch(c.targetContainerType){case 14:d=b.spaces.get(a);break;case 700:d=b.groups.get(a);break;case 600:d=b.projects.get(a);break;case 37:d=b.blogs.get(a);break;case 2020:d=b.users.get({id:"@viewer"});break}return d},_determineContentType:function(a){switch(a){case"discussion":return 1;case"post":return 38;case"document":return 102;default:throw a+" is not a valid type."}}});osapi.jive.core.Post=function(a){var b=this;osapi.jive.extend(this,a);if(typeof(applyLinkHack)!=="undefined"&&applyLinkHack!==null){this.resources=osapi.jive.extend(this.resources,{read:{allowed:["DELETE","POST"],ref:this.resources.self.ref+"/read"},share:{allowed:["POST"],ref:this.resources.self.ref+"/share"},track:{allowed:["POST"],ref:this.resources.self.ref+"/tracks"},tracks:{allowed:["DELETE","GET"],ref:this.resources.self.ref+"/tracks/2001"}})}osapi.jive.core.extendWithResourcesMethods(this);osapi.jive.core.extendWithAttachmentsProperty(this);osapi.jive.core.extendWithAuthorProperty(this);osapi.jive.core.extendWithUploadMethods(this,{actionUrl:osapi.jive.core._constructUploadActionUrl(this,"images","/posts"+b.id,"posts",b.id),methodName:"requestAttachImage"});osapi.jive.core.extendWithMutableMethods(this,"Post");osapi.jive.core.extendWithFollowMethods(this);osapi.jive.core.extendWithSummarizableMethods(this,"Post");osapi.jive.core.extendWithLikeMethods(this);osapi.jive.core.extendWithUploadMethods(this,{actionUrl:osapi.jive.core._constructUploadActionUrl(this,"attachments"),methodName:"requestAttachmentUpload"})};osapi.jive.namespace("core.posts",{});osapi.jive.core.Project=function(b,a){var c=this;osapi.jive.extend(this,b);a=a||{};if(typeof(applyLinkHack)!=="undefined"&&applyLinkHack!==null){this.resources=osapi.jive.extend(this.resources,{share:{allowed:["POST"],ref:this.resources.self.ref+"/share"}})}osapi.jive.core.extendWithResourcesMethods(this);osapi.jive.core.extendWithFollowMethods(this);osapi.jive.core.extendWithUploadMethods(this,{actionUrl:osapi.jive.core._constructUploadActionUrl(this,"binaryDocuments",a.findUrl,"projects",c.id),binaryDocument:true,methodName:"requestDocumentUpload"})};osapi.jive.namespace("core.projects",{messages:{error:{invalidProjectId:"Invalid project id"}},get:function(a){a=a||{};if(!a.id){return osapi.jive.core._buildRequestWithStaticErrorResponse(osapi.jive.core.projects.messages.error.invalidProjectId+": "+a.id)}return osapi.jive.core.projects._getProjectById(a.id)},_getProjectById:function(a){return osapi.jive.core.getObject({className:"Project",findUrl:"/projects/"+a,jsonPath:"/"})}});osapi.jive.namespace("core.searches",{searchContent:function(a){osapi.jive.extend(a||{},{findUrl:"/search/content",jsonPath:"/data"});return osapi.jive.core.searches._getSearchCollection(a)},searchPlaces:function(a){osapi.jive.extend(a||{},{findUrl:"/search/places",jsonPath:"/data"});return osapi.jive.core.searches._getSearchCollection(a)},_getSearchCollection:function(b){b=osapi.jive.extend({limit:25,offset:0,multiple:true},b||{});var d=osapi.jive.core._serializeToFormVars({from:b.from,limit:b.limit,offset:b.offset,q:b.query,sort:b.sort,sortOrder:b.sortOrder,to:b.to,type:b.type});var a=b.findUrl+(d?"?"+d:"");var c=osapi.jive.core.get({v:"v2",href:a});osapi.jive.core._extendOsapiRequestWithResponseInterceptor(c,function(e){var g=e;if(!osapi.jive.core._isError(e)){var f=osapi.jive.core.searches._newSearchSuccessCallback({jsonPath:b.jsonPath,success:function(h){g=new osapi.jive.core.Response({data:h})}});f(e.content)}else{g=osapi.jive.core._createErrorResponse(e)}return g});return c},_getSearchCollectionWithCallback:function(a,b){this._getSearchCollection(a).execute(b)},_newSearchSuccessCallback:function(a){return function(d){var b=osapi.jive.jsonPathLite(d,a.jsonPath);var c=osapi.jive.map(b,function(e){return osapi.jive.core.searches._createObjectFromJson(e)});a.success(c)}},_createObjectFromJson:function(a){var b=osapi.jive.core[osapi.jive.core._titleize(a.type)];if(b){return new b(a)}return undefined}});osapi.jive.core.Share=function(b){var d=this;osapi.jive.extend(this,b);if(typeof(applyLinkHack)!=="undefined"&&applyLinkHack!==null){this.resources=osapi.jive.extend(this.resources,{read:{allowed:["DELETE","POST"],ref:this.resources.self.ref+"/read"},track:{allowed:["POST"],ref:this.resources.self.ref+"/tracks"},tracks:{allowed:["DELETE","GET"],ref:this.resources.self.ref+"/tracks/2001"}})}osapi.jive.core.extendWithResourcesMethods(this);if(this.participants){for(var c=0;c<this.participants.length;c++){var a=this.participants[c];this.participants[c]=new osapi.jive.core.User(a)}}osapi.jive.core.extendWithMutableMethods(this,"Document");osapi.jive.core.extendWithSummarizableMethods(this,"Share")};osapi.jive.namespace("core.shares",{get:function(a){a=a||{};var b={before:a.before,limit:a.limit};if(a.id){return osapi.jive.core.shares._getShareById(a.id)}else{return osapi.jive.core.shares._getAllShares(b)}},_getShareById:function(a){return osapi.jive.core.getObject({className:"Share",findUrl:"/shares/"+a,jsonPath:"/"})},_getAllShares:function(a){a=a||{};osapi.jive.extend(a,{className:"Communication",findUrl:"/communications/shares",jsonPath:"/data"});return osapi.jive.core.getCollection(a)}});osapi.jive.core.Space=function(b,a){var c=this;osapi.jive.extend(this,b);a=a||{};if(typeof(applyLinkHack)!=="undefined"&&applyLinkHack!==null){this.resources=osapi.jive.extend(this.resources,{share:{allowed:["POST"],ref:this.resources.self.ref+"/share"}})}osapi.jive.core.extendWithResourcesMethods(this);osapi.jive.core.extendWithUserProperty(this,"creator");osapi.jive.core.extendWithFollowMethods(this);osapi.jive.core.extendWithSummarizableMethods(this,"Space");osapi.jive.core.extendWithUploadMethods(this,{actionUrl:osapi.jive.core._constructUploadActionUrl(this,"binaryDocuments",a.findUrl,"spaces",c.id),binaryDocument:true,methodName:"requestDocumentUpload"})};osapi.jive.namespace("core.spaces",{get:function(a){a=a||{};if(a.id){return osapi.jive.core.spaces._getByID(a.id)}else{var b={limit:a.limit,offset:a.offset};return osapi.jive.core.spaces._getAll(b)}},_getAll:function(a){osapi.jive.extend(a,{className:"Space",findUrl:"/spaces",jsonPath:"/data"});return osapi.jive.core.getCollection(a)},_getByID:function(a){return osapi.jive.core.getObject({className:"Space",findUrl:"/spaces/"+a,jsonPath:"/"})}});osapi.jive.core.Update=function(b,a){var c=this;osapi.jive.extend(this,b);a=a||{};if(typeof(applyLinkHack)!=="undefined"&&applyLinkHack!==null){this.resources=osapi.jive.extend(this.resources,{read:{allowed:["DELETE","POST"],ref:this.resources.self.ref+"/read"},share:{allowed:["POST"],ref:this.resources.self.ref+"/share"},track:{allowed:["POST"],ref:this.resources.self.ref+"/tracks"},tracks:{allowed:["DELETE","GET"],ref:this.resources.self.ref+"/tracks/2001"}})}osapi.jive.core.extendWithResourcesMethods(this);osapi.jive.core.extendWithAuthorProperty(this);if(this.repost){this.original=new osapi.jive.core.Update(this.repost)}osapi.jive.core.extendWithUploadMethods(this,{actionUrl:osapi.jive.core._constructUploadActionUrl(this,"images",a.findUrl,"updates",c.id),methodName:"requestAttachImage"});osapi.jive.core.extendWithMutableMethods(this,"Update");osapi.jive.core.extendWithFollowMethods(this);osapi.jive.core.extendWithSummarizableMethods(this,"Update");this.images={get:function(){return osapi.jive.core.getCollection({className:"Image",findUrl:"/updates/"+c.id+"/images",jsonPath:"/"})}};osapi.jive.core.extendWithLikeMethods(this);if(this.resources.self){this.repost={create:function(d){d=d||{};if(!d.html){return osapi.jive.core._buildRequestWithStaticErrorResponse("Must pass an html element")}return osapi.jive.core.createObject({className:"Update",createUrl:osapi.jive.core._getRelativeUrl(c.resources.self.ref),params:d})}}}if(this.resources.self&&this.status=="draft"){this.publish=function(){return osapi.jive.core.updateObject({body:c,className:"Update",updateUrl:osapi.jive.core._getRelativeUrl(c.resources.self.ref)})}}};osapi.jive.namespace("core.updates",{messages:{error:{invalidUserId:"Expected a userId of @viewer",missingHtmlParam:"Html parameter of update object is required",missingUpdateObject:"Must provide an update object"}},create:function(a){a=osapi.jive.extend({userId:"@viewer"},a||{});if(a.userId!="@viewer"){return osapi.jive.core._buildRequestWithStaticErrorResponse(osapi.jive.core.updates.messages.error.invalidUserId)}if(!a.update){return osapi.jive.core._buildRequestWithStaticErrorResponse(osapi.jive.core.updates.messages.error.missingUpdateObject)}else{if(!a.update.html){return osapi.jive.core._buildRequestWithStaticErrorResponse(osapi.jive.core.updates.messages.error.missingHtmlParam)}}return osapi.jive.core.createObject({className:"Update",createUrl:"/my/updates",params:a.update})},get:function(b){b=b||{};var a="/updates";if(b.userId&&b.userId==="@viewer"){a="/my/updates"}else{if(b.userId&&typeof b.userId==="number"){a="/users/"+b.userId+"/updates/"}else{if(b.userId){return osapi.jive.core._buildRequestWithStaticErrorResponse(osapi.jive.core.updates.messages.error.invalidUserId)}else{if(b.id){a="/updates/"+b.id}}}}var c={limit:b.limit,offset:b.offset,className:"Update",findUrl:a,jsonPath:(b.id?"/":"/data")};return osapi.jive.core.getObjectOrCollection((b.id?b.id:"all"),c)}});osapi.jive.core.User=function(b,a){a=a||{};var c=this;osapi.jive.extend(this,b);osapi.jive.core.extendWithResourcesMethods(this);osapi.jive.core.extendWithImageURL(this,"avatar");if(this.level){this.level=new osapi.jive.core.Level(this.level)}if(this.connections){this.connections.pending={get:function(e){e=e||{};if(e.userId){var d=c.resources.connections.ref+"/pending/"+e.userId;return osapi.jive.core.getObject({className:"User",findUrl:d,jsonPath:"/"})}else{return osapi.jive.core._buildRequestWithStaticErrorResponse("invalid userId")}}}}osapi.jive.core.extendWithFollowMethods(this);osapi.jive.core.extendWithSummarizableMethods(this,"User")};osapi.jive.namespace("core.users",{requestPicker:function(c){c=c||{};var f=c.success||function(){};var b=c.error||function(){};var e={};e.multiple=c.multiple||false;var a=function(g){if(g&&g.data){f(g)}else{if(g&&g.error){b(g.error)}}};var d=function(j){if(j.users.length==1){osapi.jive.core.users.get({id:j.users[0].userID}).execute(function(l){a(l)})}else{if(j.users.length>1){var k=[];var g=osapi.newBatch();for(var h=0;h<j.users.length;h++){g.add("user"+h,osapi.jive.core.get({v:"v2",href:"/users/"+j.users[h].userID}))}g.execute(function(l){for(var n=0;n<j.users.length;n++){k[k.length]=new osapi.jive.core.User(l["user"+n].content)}var m=new osapi.jive.core.Response({data:k});a(m)})}}};gadgets.rpc.call(null,"request_user_picker",d,e)},get:function(a){a=a||{};var b={limit:a.limit,offset:a.offset,q:a.query};if(!a){return osapi.jive.core.users._getAll(b)}if(a.id){b=osapi.jive.extend(b,{followingUserId:a.followingUserId,pending:a.pending});return osapi.jive.core.users._getById(a.id,a.groupId,b)}else{if(a.username){return osapi.jive.core.users._getByName(a.username)}else{if(a.emailAddress){return osapi.jive.core.users._getByEmailAddress(a.emailAddress)}else{return osapi.jive.core.users._getAll(b)}}}},_getAll:function(a){osapi.jive.extend(a||{},{className:"User",jsonPath:"/data"});return osapi.jive.core.getObjectOrCollection("all",a)},_getByEmailAddress:function(a){return osapi.jive.core.getObject({className:"User",findUrl:"/users/email/"+a,jsonPath:"/"})},_getById:function(g,c,b){b=b||{};var e;var a;var d=false;if(g=="@viewer"){calculatedId="all";e="/data";if(c){switch(c){case"@colleagues":a="/my/colleagues";d=true;break;case"@followers":a="/my/followers";if(b.followingUserId){if(b.pending===true){a+="/pending"}a+="/"+b.followingUserId;calculatedId="none";e="/"}d=true;break;case"@manager":a="/my/manager";calculatedId="none";e="/";break;case"@reports":a="/my/reports";d=true;break;default:return osapi.jive.core._buildRequestWithStaticErrorResponse("invalid groupId")}}else{a="/my";calculatedId="none";e="/"}}else{if(g=="@anonymous"){calculatedId="none";e="/";a="/users/anonymous"}else{if(typeof c!="undefined"){return osapi.jive.core._buildRequestWithStaticErrorResponse("groupId not support for ids other than @viewer")}calculatedId=g;e="/";a="/users/"+g}}var f={className:"User",findUrl:a,jsonPath:e};if(d){osapi.jive.extend(f,{limit:b.limit,offset:b.offset})}return osapi.jive.core.getObjectOrCollection(calculatedId,f)},_getByName:function(a){return osapi.jive.core.getObject({className:"User",findUrl:"/users/username/"+a,jsonPath:"/"})}});osapi.jive.core.Level=function(b,a){var c=this;osapi.jive.extend(this,b);osapi.jive.core.extendWithImageURL(this,"image")};