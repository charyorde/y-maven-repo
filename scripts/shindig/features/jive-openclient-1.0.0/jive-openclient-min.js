(function(a){a.jsonPathLite=function(d,f){if(d===null){return null}var e=f.split(/\//);if(e[0]==""){e.shift()}var c=e.shift();var b=d[c];if(typeof b=="undefined"){return null}if(e.length>0){return a.jsonPathLite(b,e.join("/"))}else{return b}}})(jQuery);jive.namespace("oc",{legacyPath:"/__services/openclient/v3",basePath:"/api/openclient/v3",containers:{group:{ID:700},project:{ID:600},space:{ID:14}},baseUrl:function(){if(typeof gadgets!="undefined"){var b=gadgets.io.getProxyUrl();var a=b.split("?")[0].replace(/\/gadgets\/proxy/,"");return a+jive.oc.basePath}else{return jive.oc.basePath}},setDefaultOptions:function(a){a=$.extend({className:"ClassName",createUrl:"/createUrl",destroyUrl:"/destroyUrl",error:function(){},findUrl:"/findUrl",success:function(){}},a||{});a.jsClass=a.jsClass||(jive.oc[a.className]||Object);return a},getCollection:function(a){a=this.setDefaultOptions($.extend({limit:10,offset:0,multiple:true},a||{}));a.jsonPath=a.jsonPath||("/"+a.className+"Collection/"+a.className+"s");$.ajax({cache:false,data:{limit:a.limit,offset:a.offset},dataType:"json",type:"GET",url:jive.oc.baseUrl()+a.findUrl,success:this._newObjectSuccessCallback(a),error:a.error})},getObject:function(a){a=this.setDefaultOptions(a||{});a.jsonPath=a.jsonPath||("/"+a.className);$.ajax({cache:false,dataType:"json",type:"GET",url:jive.oc.baseUrl()+a.findUrl,success:this._newObjectSuccessCallback(a),error:a.error})},getObjectOrCollection:function(b,a){a=$.extend({collectionUrl:"/"+a.className.toLowerCase()+"s",objectUrl:"/"+a.className.toLowerCase()+"s/"+b},a||{});if(b=="all"){return this.getCollection($.extend({findUrl:a.collectionUrl},a))}else{return this.getObject($.extend({findUrl:a.objectUrl},a))}},createObject:function(a){a=this.setDefaultOptions($.extend({contentType:"application/json; charset=utf-8",data:{},httpMethod:"POST"},a||{}));a.jsonPath=a.jsonPath||("/"+a.className);if(typeof a.data=="object"){var b={};b[a.className]=a.data;a.data=JSON.stringify(b)}else{a.contentType="application/x-www-form-urlencoded"}$.ajax({cache:false,contentType:a.contentType,data:a.data,dataType:"json",type:a.httpMethod,url:jive.oc.baseUrl()+a.createUrl,success:this._newObjectSuccessCallback(a),error:a.error})},destroyObject:function(a){a=this.setDefaultOptions($.extend({contentType:"application/json; charset=utf-8",data:{},httpMethod:"DELETE"},a||{}));$.ajax({cache:false,contentType:a.contentType,dataType:"json",type:a.httpMethod,url:jive.oc.baseUrl()+a.destroyUrl,success:this._newObjectSuccessCallback(a),error:a.error})},_newObjectSuccessCallback:function(a){return function(f,e,c){var b=$.jsonPathLite(f,a.jsonPath);if(b===true||b===false){a.success(b,e,c)}else{if(a.multiple){if($.isArray(b)){var d=$.map(b,function(g){return new a.jsClass(g)});a.success(d,e,c)}else{if(b===null){a.success([],e,c)}else{a.success([b],e,c)}}}else{if(b!==null){a.success(new a.jsClass(b),e,c)}else{a.success(f,e,c)}}}}}});jive.oc.Activity=function(a){var b=this;$.extend(this,a)};$.extend(jive.oc.Activity,{find:function(b,a){a=$.extend({className:"Activity",findUrl:"/activities",jsonPath:"/ActivityCollection/Activities"},a||{});return jive.oc.getCollection(a)},findAllByUserId:function(b,a){return this.find("all",$.extend({findUrl:"/activities/users/"+b},a||{}))},findAllForConnectionsByUserId:function(b,a){return this.find("all",$.extend({findUrl:"/activities/users/"+b+"/connections"},a||{}))},findAllForColleaguesByUserId:function(b,a){return this.find("all",$.extend({findUrl:"/activities/users/"+b+"/colleagues"},a||{}))},findAllBySpaceId:function(b,a){return this.find("all",$.extend({findUrl:"/activities/in/"+jive.oc.containers.space.ID+"/"+b},a||{}))},findAllByGroupId:function(b,a){return this.find("all",$.extend({findUrl:"/activities/in/"+jive.oc.containers.group.ID+"/"+b},a||{}))},findAllByProjectId:function(a,b){return this.find("all",$.extend({findUrl:"/activities/in/"+jive.oc.containers.project.ID+"/"+a},b||{}))}});jive.oc.Avatar=function(a){var b=this;$.extend(this,a)};$.extend(jive.oc.Avatar,{find:function(b,a){a=$.extend({className:"Avatar",findUrl:"/avatars/"+b},a||{});return jive.oc.getObject(a)}});jive.oc.Blog=function(a){var b=this;$.extend(this,a);this.blogPosts={find:function(e,c){var d="";if(e=="all"){d="/blogs/"+b.ID+"/blogposts"}else{d="/blogposts/"+e}c=$.extend({findUrl:d},c||{});return jive.oc.BlogPost.find(e,c||{})}}};$.extend(jive.oc.Blog,{_find:function(b,a){a=$.extend({className:"Blog",findUrl:b},a||{});return jive.oc.getObject(a)},find:function(b,a){return this._find("/blogs/"+b,a||{})},findByUserId:function(b,a){return this._find("/blogs/users/"+b,a||{})},findByGroupId:function(b,a){return this._find("/blogs/in/"+jive.oc.containers.group.ID+"/"+b,a||{})},findByProjectId:function(a,b){return this._find("/blogs/in/"+jive.oc.containers.project.ID+"/"+a,b||{})},findBySpaceId:function(b,a){return this._find("/blogs/in/"+jive.oc.containers.space.ID+"/"+b,a||{})}});jive.oc.BlogPost=function(a){var b=this;$.extend(this,a)};$.extend(jive.oc.BlogPost,{find:function(b,a){return jive.oc.getObjectOrCollection(b,$.extend({className:"BlogPost"},a||{}))},findAllByBlogId:function(b,a){return this.find("all",$.extend({findUrl:"/blogs/"+b+"/blogposts"},a||{}))},findAllByUserId:function(b,a){return this.find("all",$.extend({findUrl:"/blogposts/users/"+b},a||{}))},findAllByGroupId:function(b,a){return this.find("all",$.extend({findUrl:"/blogposts/in/"+jive.oc.containers.group.ID+"/"+b},a||{}))},findAllByProjectId:function(a,b){return this.find("all",$.extend({findUrl:"/blogposts/in/"+jive.oc.containers.project.ID+"/"+a},b||{}))},findAllBySpaceId:function(b,a){return this.find("all",$.extend({findUrl:"/blogposts/in/"+jive.oc.containers.space.ID+"/"+b},a||{}))},create:function(a){a=$.extend({className:"BlogPost"},a||{});a.data=$.extend({blogID:-1},a.data||{});a.createUrl="/blogs/"+a.data.blogID;return jive.oc.createObject(a)}});jive.oc.Category=function(a){var b=this;$.extend(this,a)};$.extend(jive.oc.Category,{_find:function(b,a){a=$.extend({className:"Category",findUrl:b,jsonPath:"/CategoryCollection/Categories"},a||{});return jive.oc.getCollection(a)},findAllBySpaceId:function(b,a){return this._find("/categories/spaces/"+b,a||{})},findAllByGroupId:function(b,a){return this._find("/categories/groups/"+b,a||{})},findAllByProjectId:function(a,b){return this._find("/categories/projects/"+a,b||{})},findAllByDocumentId:function(b,a){return this._find("/categories/documents/"+b,a||{})},findAllByBlogPostId:function(a,b){return this._find("/categories/blogposts/"+a,b||{})},findAllByThreadId:function(b,a){return this._find("/categories/threads/"+b,a||{})}});jive.oc.Comment=function(a){var b=this;$.extend(this,a)};$.extend(jive.oc.Comment,{_find:function(b,c,a){a=$.extend({className:"Comment",findUrl:b,jsonPath:c},a||{});return jive.oc.getCollection(a)},findAllByBlogPostId:function(a,b){return this._find("/blogposts/"+a+"/comments","/BlogPost/Comments",b||{})},findAllByDocumentId:function(b,a){return this._find("/documents/"+b+"/comments","/Document/Comments",a||{})},create:function(a){a=$.extend({className:"Comment"},a||{});if(a.data.blogPostID){a.createUrl="/blogposts/"+a.data.blogPostID+"/comments"}else{if(a.data.documentID){a.createUrl="/documents/"+a.data.documentID+"/comments"}}a.data="comment="+escape(a.data.body);a.createUrl+="?"+a.data;return jive.oc.createObject(a)}});jive.oc.Document=function(a){var b=this;$.extend(this,a)};$.extend(jive.oc.Document,{find:function(b,a){return jive.oc.getObjectOrCollection(b,$.extend({className:"Document"},a||{}))},findAllByUserId:function(b,a){return this.find("all",$.extend({findUrl:"/documents/users/"+b},a||{}))},findAllBySpaceId:function(b,a){return this.find("all",$.extend({findUrl:"/documents/in/"+jive.oc.containers.space.ID+"/"+b},a||{}))},findAllByGroupId:function(b,a){return this.find("all",$.extend({findUrl:"/documents/in/"+jive.oc.containers.group.ID+"/"+b},a||{}))},findAllByProjectId:function(a,b){return this.find("all",$.extend({findUrl:"/documents/in/"+jive.oc.containers.project.ID+"/"+a},b||{}))},create:function(a){a=$.extend({className:"Document",createUrl:"/documents"},a||{});a.data=a.data||{};return jive.oc.createObject(a)}});jive.oc.Group=function(a){var b=this;$.extend(this,a)};$.extend(jive.oc.Group,{find:function(b,a){return jive.oc.getObjectOrCollection(b,$.extend({className:"Group"},a||{}))}});jive.oc.Like=function(a){var b=this;$.extend(this,a)};$.extend(jive.oc.Like,{_setDefaultOptions:function(b,a){var c=b=="create"?"/like":"/unlike";a=$.extend({},a||{});a.httpMethod="PUT";if(a.blogPostID){a.className="BlogPost";a.createUrl=c+"/blogposts/"+a.blogPostID}else{if(a.commentID){a.className="Comment";a.createUrl=c+"/comments/"+a.commentID}else{if(a.documentID){a.className="Document";a.createUrl=c+"/documents/"+a.documentID}else{if(a.messageID){a.className="Message";a.createUrl=c+"/messages/"+a.messageID}else{if(a.microblogID){a.className="Microblog";a.createUrl=c+"/microblogs/"+a.microblogID}else{if(a.threadID){a.className="Thread";a.createUrl=c+"/threads/"+a.threadID}}}}}}return a},create:function(a){a=this._setDefaultOptions("create",a);return jive.oc.createObject(a)},destroy:function(a){a=this._setDefaultOptions("destroy",a);return jive.oc.createObject(a)}});jive.oc.Mention=function(a){var b=this;$.extend(this,a)};$.extend(jive.oc.Mention,{_find:function(b,a){a=$.extend({className:"Mention",findUrl:b,jsonPath:"/ActivityCollection/Activities"},a||{});return jive.oc.getCollection(a)},findAllByUserId:function(b,a){return this._find("/mentions/users/"+b,a||{})},findAllForConnectionsByUserId:function(b,a){return this._find("/mentions/users/"+b+"/connections",a||{})},findAllForColleaguesByUserId:function(b,a){return this._find("/mentions/users/"+b+"/colleagues",a||{})},findAllByGroupId:function(b,a){return this._find("/mentions/groups/"+b,a||{})},findAllByProjectId:function(a,b){return this._find("/mentions/projects/"+a,b||{})},findAllBySpaceId:function(b,a){return this._find("/mentions/spaces/"+b,a||{})},findAllByDocumentId:function(b,a){return this._find("/mentions/documents/"+b,a||{})},findAllByThreadId:function(b,a){return this._find("/mentions/threads/"+b,a||{})},findAllByBlogPostId:function(a,b){return this._find("/mentions/blogposts/"+a,b||{})}});jive.oc.Message=function(a){var b=this;$.extend(this,a)};$.extend(jive.oc.Message,{_find:function(b,a){a=$.extend({className:"Message",findUrl:"/threads/messages"},a||{});return jive.oc.getCollection(a)},findRepliesByThreadId:function(b,a){return this._find("all",$.extend({findUrl:"/threads/"+b+"/messages",jsonPath:"Thread/Messages"},a||{}))},findChildrenByMessageId:function(b,a){return this._find("all",$.extend({findUrl:"/threads/messages/"+b+"/children"},a||{}))},create:function(a){a=$.extend({className:"Message",messageID:-1},a||{});a.data=$.extend({associationID:-1},a.data||{});a.createUrl=a.createUrl||("/threads/messages/"+a.messageID);return jive.oc.createObject(a)}});jive.oc.Microblog=function(a){var b=this;$.extend(this,a)};$.extend(jive.oc.Microblog,{find:function(c,b){var a="/microblogs";a+=(c=="all"?"":"/"+c);a+="?brevity=HTMLAndText";return jive.oc.getObjectOrCollection(c,$.extend({findUrl:a,className:"Microblog"},b||{}))},findAllByUserId:function(b,a){return this.find("all",$.extend({findUrl:"/microblogs/users/"+b+"?brevity=HTMLAndText"},a||{}))},findAllForColleaguesByUserId:function(b,a){return this.find("all",$.extend({findUrl:"/microblogs/users/"+b+"/colleagues?brevity=HTMLAndText"},a||{}))},findAllForConnectionsByUserId:function(b,a){return this.find("all",$.extend({findUrl:"/microblogs/users/"+b+"/connections?brevity=HTMLAndText"},a||{}))},create:function(a){a=$.extend({className:"Microblog"},a||{});a.data=a.data||{};if(!a.createUrl){a.createUrl="/microblogs"}return jive.oc.createObject(a)}});jive.oc.Profile=function(a){var b=this;$.extend(this,a)};$.extend(jive.oc.Profile,{findByUserId:function(b,a){a=$.extend({className:"Profile",findUrl:"/profiles/"+b},a||{});return jive.oc.getObject(a)}});jive.oc.Project=function(a){var b=this;$.extend(this,a)};$.extend(jive.oc.Project,{find:function(b,a){return jive.oc.getObjectOrCollection(b,$.extend({className:"Project"},a||{}))}});jive.oc.RecentContent=function(a){var b=this;$.extend(this,a)};$.extend(jive.oc.RecentContent,{_find:function(b,a){a=$.extend({className:"RecentContent",jsonPath:"/RecentContent/ContentObjects",findUrl:b},a||{});return jive.oc.getCollection(a)},findAllByGroupId:function(b,a){return this._find("/recentcontent/groups/"+b,a||{})},findAllByProjectId:function(a,b){return this._find("/recentcontent/projects/"+a,b||{})},findAllBySpaceId:function(b,a){return this._find("/recentcontent/spaces/"+b,a||{})}});jive.oc.Relationship=function(a){var b=this;$.extend(this,a)};$.extend(jive.oc.Relationship,{isFollowing:function(b,a){jive.oc.getObject($.extend({findUrl:"/relationships/"+b,jsonPath:"/isFollowing"},a))},create:function(b,a){a=$.extend({className:"Relationship",createUrl:"/relationships/"+b,httpMethod:"PUT",jsonPath:"/isFollowing"},a||{});return jive.oc.createObject(a)},destroy:function(b,a){a=$.extend({className:"Relationship",destroyUrl:"/relationships/"+b,jsonPath:"/isFollowing"},a||{});return jive.oc.destroyObject(a)}});jive.oc.Search=function(a){var b=this;$.extend(this,a)};$.extend(jive.oc.Search,{_find:function(b,a){a=$.extend({className:"Search",findUrl:b},a||{});return jive.oc.getCollection(a)},searchPlaces:function(b,a){this._find("/search/places/"+b,$.extend({jsonPath:"/SearchResults/Places"},a||{}))},searchUsers:function(b,a){this._find("/search/users/"+b,$.extend({jsonPath:"/SearchResults/Users"},a||{}))},search:function(a){a=$.extend({className:"Search",createUrl:"/search",jsonPath:"/SearchResults/Results",multiple:true},a||{});a.data=$.extend({query:"",users:true,places:true,contentObjects:true},a.data||{});return jive.oc.createObject(a)}});jive.oc.Space=function(a){var b=this;$.extend(this,a)};$.extend(jive.oc.Space,{find:function(b,a){return jive.oc.getObjectOrCollection(b,$.extend({className:"Space"},a||{}))},findChildren:function(b,a){return this.find("all",$.extend({findUrl:"/spaces/"+b+"/children"},a||{}))}});jive.oc.Tag=function(a){var b=this;$.extend(this,a)};$.extend(jive.oc.Tag,{_find:function(b,a){a=$.extend({className:"Tag",findUrl:"/tags"},a||{});return jive.oc.getCollection(a)},search:function(b,a){return this._find("all",$.extend({findUrl:"/tags/search?query="+encodeURIComponent(b)+"*"},a||{}))},create:function(a){a=$.extend({className:"Tag",httpMethod:"PUT"},a||{});a.data=$.extend({name:null},a.data||{});a.createUrl="/tags/create/"+a.data.name;return jive.oc.createObject(a)}});jive.oc.Thread=function(a){var b=this;$.extend(this,a)};$.extend(jive.oc.Thread,{find:function(b,a){return jive.oc.getObjectOrCollection(b,$.extend({className:"Thread"},a||{}))},findAllBySpaceId:function(b,a){return this.find("all",$.extend({findUrl:"/threads/in/"+jive.oc.containers.space.ID+"/"+b},a||{}))},findAllByProjectId:function(a,b){return this.find("all",$.extend({findUrl:"/threads/in/"+jive.oc.containers.project.ID+"/"+a},b||{}))},findAllByGroupId:function(b,a){return this.find("all",$.extend({findUrl:"/threads/in/"+jive.oc.containers.group.ID+"/"+b},a||{}))},findAllByUserId:function(b,a){return this.find("all",$.extend({findUrl:"/threads/users/"+b},a||{}))},create:function(a){a=$.extend({className:"Thread",createUrl:"/threads"},a||{});a.data=a.data||{};return jive.oc.createObject(a)}});jive.oc.User=function(a){var b=this;$.extend(this,a);this.blog={find:function(c){return jive.oc.Blog.find(b.blogID,c)}};this.connections={find:function(c){return jive.oc.User.findConnections(b.ID,c)}};this.colleagues={find:function(c){return jive.oc.User.findColleagues(b.ID,c)}}};$.extend(jive.oc.User,{find:function(b,a){return jive.oc.getObjectOrCollection(b,$.extend({className:"User"},a||{}))},findConnections:function(b,a){return this.find("all",$.extend({findUrl:"/users/"+b+"/connections"},a||{}))},findColleagues:function(b,a){return this.find("all",$.extend({findUrl:"/users/"+b+"/colleagues"},a||{}))},findIdByUsername:function(b,a){return jive.oc.getObject($.extend({className:"userID",jsClass:Number,findUrl:"/users/"+b+"/id"},a||{}))}});