$j(function(){formActivity.target=formPopularity.target=$j("#jive-content-results");var h=$j("#jive-view-favorites-form");var a=$j("#view-options").find("li a");var i=a.filter("[target=activity]");var e=$j("ul#jive-filter-nav a");var f=e.filter("[target=all]");h.find(":input").map(function(){var j=$j(this).attr("name");if(j=="view"){$j(this).data("defaultValue","activity")}else{if(j=="objectTypes"){$j(this).data("defaultValue","")}else{if(j=="page"){$j(this).data("defaultValue",1)}}}});function g(m){var r=m.split("&",3);var q=false;var k=false;for(var n=0;n<r.length;n++){var o=r[n].split("=");var t=o[0];var s=o[1];if(t=="view"){k=true;a.removeClass("selected");a.filter("[target="+s+"]").addClass("selected");h.find(":hidden[name=view]").val(s)}else{if(t=="objectTypes"){q=true;e.removeClass("selected");var p=s.split(",");for(var l=0;l<p.length;l++){e.filter("[target="+p[l]+"]").addClass("selected")}}else{if(t=="page"){h.find(":hidden[name=page]").val(s)}}}}if(!k){a.removeClass("selected");i.addClass("selected");h.find(":hidden[name=view]").val("activity")}if(!q){e.removeClass("selected");f.addClass("selected")}}function d(l){g(l);var k=a.filter(".selected").attr("target");var j;if(k=="activity"){j=formActivity}else{j=formPopularity}j.target.load(j.url+"?"+l)}$j.historyInit(d);function b(){var q=e.filter(".selected").map(function(){return $j(this).attr("target")=="all"?null:$j(this).attr("target")}).get().join(",");var l=h.formSerialize().split("&",2);var p="";for(var k=0;k<l.length;k++){var n=l[k].split("=");var j=n[0];var o=n[1];var m=h.find(":input[name="+j+"]");if(m.data("defaultValue")!=o){p=c(p);p+=j+"="+o}}if(q.length>0){p=c(p);p+="objectTypes="+q}$j.historyLoad(p)}function c(j){if(j.length>0){j+="&"}return j}a.click(function(){h.find("input[name=view]").val($j(this).attr("target"));a.removeClass("selected");$j(this).addClass("selected");h.find(":hidden[name=page]").val(1);b();return false});e.click(function(){var j=$j(this).attr("target");if(j=="all"){e.removeClass("selected");$j(this).addClass("selected")}else{f.removeClass("selected");$j(this).toggleClass("selected")}if(e.filter(".selected").length<=0){f.addClass("selected")}h.find(":hidden[name=page]").val(1);b();return false});$j("span.jive-pagination a").live("click",function(){var j=$j(this).attr("target");h.find(":hidden[name=page]").val(j);b();$j("#jive-view-favorites-form")[0].scrollIntoView(false);return false})});